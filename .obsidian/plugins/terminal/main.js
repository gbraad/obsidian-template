/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD.
If you want to view the source, please visit the repository of this plugin.
*/
"use strict";var la=Object.create;var S4=Object.defineProperty;var oa=Object.getOwnPropertyDescriptor;var na=Object.getOwnPropertyNames;var ha=Object.getPrototypeOf,ua=Object.prototype.hasOwnProperty;var da=(l,u,g)=>u in l?S4(l,u,{enumerable:!0,configurable:!0,writable:!0,value:g}):l[u]=g;var W0=(l,u)=>()=>(u||l((u={exports:{}}).exports,u),u.exports),I0=(l,u)=>{for(var g in u)S4(l,g,{get:u[g],enumerable:!0})},N9=(l,u,g,w)=>{if(u&&typeof u=="object"||typeof u=="function")for(let b of na(u))!ua.call(l,b)&&b!==g&&S4(l,b,{get:()=>u[b],enumerable:!(w=oa(u,b))||w.enumerable});return l};var x2=(l,u,g)=>(g=l!=null?la(ha(l)):{},N9(u||!l||!l.__esModule?S4(g,"default",{value:l,enumerable:!0}):g,l)),ma=l=>N9(S4({},"__esModule",{value:!0}),l);var G0=(l,u,g)=>(da(l,typeof u!="symbol"?u+"":u,g),g),O6=(l,u,g)=>{if(!u.has(l))throw TypeError("Cannot "+g)};var o0=(l,u,g)=>(O6(l,u,"read from private field"),g?g.call(l):u.get(l)),z0=(l,u,g)=>{if(u.has(l))throw TypeError("Cannot add the same private member more than once");u instanceof WeakSet?u.add(l):u.set(l,g)},S0=(l,u,g,w)=>(O6(l,u,"write to private field"),w?w.call(l,g):u.set(l,g),g);var v0=(l,u,g)=>(O6(l,u,"access private method"),g);var J9=W0((Z6,X9)=>{Z6=X9.exports=va;Z6.getSerialize=Y9;function va(l,u,g,w){return JSON.stringify(l,Y9(u,w),g)}function Y9(l,u){var g=[],w=[];return u==null&&(u=function(b,e){return g[0]===e?"[Circular ~]":"[Circular ~."+w.slice(0,g.indexOf(e)).join(".")+"]"}),function(b,e){if(g.length>0){var a=g.indexOf(this);~a?g.splice(a+1):g.push(this),~a?w.splice(a,1/0,b):w.push(b),~g.indexOf(e)&&(e=u.call(this,b,e))}else g.push(e);return l==null?e:l.call(this,b,e)}}});var Ce=W0(y7=>{var w3=require("path"),e3=process.platform==="win32",Q2=require("fs"),Yn=process.env.NODE_DEBUG&&/fs/.test(process.env.NODE_DEBUG);function Xn(){var l;if(Yn){var u=new Error;l=g}else l=w;return l;function g(b){b&&(u.message=b.message,b=u,w(b))}function w(b){if(b){if(process.throwDeprecation)throw b;if(!process.noDeprecation){var e="fs: missing callback "+(b.stack||b.message);process.traceDeprecation?console.trace(e):console.error(e)}}}}function Jn(l){return typeof l=="function"?l:Xn()}var Bd=w3.normalize;e3?F2=/(.*?)(?:[\/\\]+|$)/g:F2=/(.*?)(?:[\/]+|$)/g;var F2;e3?T4=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/:T4=/^[\/]*/;var T4;y7.realpathSync=function(u,g){if(u=w3.resolve(u),g&&Object.prototype.hasOwnProperty.call(g,u))return g[u];var w=u,b={},e={},a,m,o,n;c();function c(){var d=T4.exec(u);a=d[0].length,m=d[0],o=d[0],n="",e3&&!e[o]&&(Q2.lstatSync(o),e[o]=!0)}for(;a<u.length;){F2.lastIndex=a;var v=F2.exec(u);if(n=m,m+=v[0],o=n+v[1],a=F2.lastIndex,!(e[o]||g&&g[o]===o)){var f;if(g&&Object.prototype.hasOwnProperty.call(g,o))f=g[o];else{var i=Q2.lstatSync(o);if(!i.isSymbolicLink()){e[o]=!0,g&&(g[o]=o);continue}var t=null;if(!e3){var p=i.dev.toString(32)+":"+i.ino.toString(32);b.hasOwnProperty(p)&&(t=b[p])}t===null&&(Q2.statSync(o),t=Q2.readlinkSync(o)),f=w3.resolve(n,t),g&&(g[o]=f),e3||(b[p]=t)}u=w3.resolve(f,u.slice(a)),c()}}return g&&(g[w]=u),u};y7.realpath=function(u,g,w){if(typeof w!="function"&&(w=Jn(g),g=null),u=w3.resolve(u),g&&Object.prototype.hasOwnProperty.call(g,u))return process.nextTick(w.bind(null,null,g[u]));var b=u,e={},a={},m,o,n,c;v();function v(){var d=T4.exec(u);m=d[0].length,o=d[0],n=d[0],c="",e3&&!a[n]?Q2.lstat(n,function(r){if(r)return w(r);a[n]=!0,f()}):process.nextTick(f)}function f(){if(m>=u.length)return g&&(g[b]=u),w(null,u);F2.lastIndex=m;var d=F2.exec(u);return c=o,o+=d[0],n=c+d[1],m=F2.lastIndex,a[n]||g&&g[n]===n?process.nextTick(f):g&&Object.prototype.hasOwnProperty.call(g,n)?p(g[n]):Q2.lstat(n,i)}function i(d,r){if(d)return w(d);if(!r.isSymbolicLink())return a[n]=!0,g&&(g[n]=n),process.nextTick(f);if(!e3){var z=r.dev.toString(32)+":"+r.ino.toString(32);if(e.hasOwnProperty(z))return t(null,e[z],n)}Q2.stat(n,function(M){if(M)return w(M);Q2.readlink(n,function(_,L){e3||(e[z]=L),t(_,L)})})}function t(d,r,z){if(d)return w(d);var M=w3.resolve(c,r);g&&(g[z]=M),p(M)}function p(d){u=w3.resolve(d,u.slice(m)),v()}}});var S7=W0((Od,Le)=>{Le.exports=t3;t3.realpath=t3;t3.sync=x7;t3.realpathSync=x7;t3.monkeypatch=eh;t3.unmonkeypatch=th;var q3=require("fs"),C7=q3.realpath,M7=q3.realpathSync,Qn=process.version,Me=/^v[0-5]\./.test(Qn),xe=Ce();function Se(l){return l&&l.syscall==="realpath"&&(l.code==="ELOOP"||l.code==="ENOMEM"||l.code==="ENAMETOOLONG")}function t3(l,u,g){if(Me)return C7(l,u,g);typeof u=="function"&&(g=u,u=null),C7(l,u,function(w,b){Se(w)?xe.realpath(l,u,g):g(w,b)})}function x7(l,u){if(Me)return M7(l,u);try{return M7(l,u)}catch(g){if(Se(g))return xe.realpathSync(l,u);throw g}}function eh(){q3.realpath=t3,q3.realpathSync=x7}function th(){q3.realpath=C7,q3.realpathSync=M7}});var ke=W0((Id,Ae)=>{Ae.exports=function(l,u){for(var g=[],w=0;w<l.length;w++){var b=u(l[w],w);sh(b)?g.push.apply(g,b):g.push(b)}return g};var sh=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"}});var Ve=W0((Zd,Te)=>{"use strict";Te.exports=He;function He(l,u,g){l instanceof RegExp&&(l=Ee(l,g)),u instanceof RegExp&&(u=Ee(u,g));var w=De(l,u,g);return w&&{start:w[0],end:w[1],pre:g.slice(0,w[0]),body:g.slice(w[0]+l.length,w[1]),post:g.slice(w[1]+u.length)}}function Ee(l,u){var g=u.match(l);return g?g[0]:null}He.range=De;function De(l,u,g){var w,b,e,a,m,o=g.indexOf(l),n=g.indexOf(u,o+1),c=o;if(o>=0&&n>0){if(l===u)return[o,n];for(w=[],e=g.length;c>=0&&!m;)c==o?(w.push(c),o=g.indexOf(l,c+1)):w.length==1?m=[w.pop(),n]:(b=w.pop(),b<e&&(e=b,a=n),n=g.indexOf(u,c+1)),c=o<n&&o>=0?o:n;w.length&&(m=[e,a])}return m}});var Ue=W0((Ud,Ze)=>{var ih=ke(),Re=Ve();Ze.exports=rh;var Fe="\0SLASH"+Math.random()+"\0",Be="\0OPEN"+Math.random()+"\0",A7="\0CLOSE"+Math.random()+"\0",Pe="\0COMMA"+Math.random()+"\0",Oe="\0PERIOD"+Math.random()+"\0";function L7(l){return parseInt(l,10)==l?parseInt(l,10):l.charCodeAt(0)}function ah(l){return l.split("\\\\").join(Fe).split("\\{").join(Be).split("\\}").join(A7).split("\\,").join(Pe).split("\\.").join(Oe)}function ch(l){return l.split(Fe).join("\\").split(Be).join("{").split(A7).join("}").split(Pe).join(",").split(Oe).join(".")}function Ie(l){if(!l)return[""];var u=[],g=Re("{","}",l);if(!g)return l.split(",");var w=g.pre,b=g.body,e=g.post,a=w.split(",");a[a.length-1]+="{"+b+"}";var m=Ie(e);return e.length&&(a[a.length-1]+=m.shift(),a.push.apply(a,m)),u.push.apply(u,a),u}function rh(l){return l?(l.substr(0,2)==="{}"&&(l="\\{\\}"+l.substr(2)),$3(ah(l),!0).map(ch)):[]}function lh(l){return"{"+l+"}"}function oh(l){return/^-?0\d/.test(l)}function nh(l,u){return l<=u}function hh(l,u){return l>=u}function $3(l,u){var g=[],w=Re("{","}",l);if(!w||/\$$/.test(w.pre))return[l];var b=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(w.body),e=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(w.body),a=b||e,m=w.body.indexOf(",")>=0;if(!a&&!m)return w.post.match(/,.*\}/)?(l=w.pre+"{"+w.body+A7+w.post,$3(l)):[l];var o;if(a)o=w.body.split(/\.\./);else if(o=Ie(w.body),o.length===1&&(o=$3(o[0],!1).map(lh),o.length===1)){var c=w.post.length?$3(w.post,!1):[""];return c.map(function(V){return w.pre+o[0]+V})}var n=w.pre,c=w.post.length?$3(w.post,!1):[""],v;if(a){var f=L7(o[0]),i=L7(o[1]),t=Math.max(o[0].length,o[1].length),p=o.length==3?Math.abs(L7(o[2])):1,d=nh,r=i<f;r&&(p*=-1,d=hh);var z=o.some(oh);v=[];for(var M=f;d(M,i);M+=p){var _;if(e)_=String.fromCharCode(M),_==="\\"&&(_="");else if(_=String(M),z){var L=t-_.length;if(L>0){var S=new Array(L+1).join("0");M<0?_="-"+S+_.slice(1):_=S+_}}v.push(_)}}else v=ih(o,function(T){return $3(T,!1)});for(var y=0;y<v.length;y++)for(var A=0;A<c.length;A++){var H=n+v[y]+c[A];(!u||a||H)&&g.push(H)}return g}});var F5=W0((Nd,qe)=>{qe.exports=D1;D1.Minimatch=g1;var V4=function(){try{return require("path")}catch(l){}}()||{sep:"/"};D1.sep=V4.sep;var H7=D1.GLOBSTAR=g1.GLOBSTAR={},uh=Ue(),Ne={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},k7="[^/]",E7=k7+"*?",dh="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",mh="(?:(?!(?:\\/|^)\\.).)*?",We=vh("().*{}+?[]^$\\!");function vh(l){return l.split("").reduce(function(u,g){return u[g]=!0,u},{})}var je=/\/+/;D1.filter=gh;function gh(l,u){return u=u||{},function(g,w,b){return D1(g,l,u)}}function s3(l,u){u=u||{};var g={};return Object.keys(l).forEach(function(w){g[w]=l[w]}),Object.keys(u).forEach(function(w){g[w]=u[w]}),g}D1.defaults=function(l){if(!l||typeof l!="object"||!Object.keys(l).length)return D1;var u=D1,g=function(b,e,a){return u(b,e,s3(l,a))};return g.Minimatch=function(b,e){return new u.Minimatch(b,s3(l,e))},g.Minimatch.defaults=function(b){return u.defaults(s3(l,b)).Minimatch},g.filter=function(b,e){return u.filter(b,s3(l,e))},g.defaults=function(b){return u.defaults(s3(l,b))},g.makeRe=function(b,e){return u.makeRe(b,s3(l,e))},g.braceExpand=function(b,e){return u.braceExpand(b,s3(l,e))},g.match=function(w,b,e){return u.match(w,b,s3(l,e))},g};g1.defaults=function(l){return D1.defaults(l).Minimatch};function D1(l,u,g){return R5(u),g||(g={}),!g.nocomment&&u.charAt(0)==="#"?!1:new g1(u,g).match(l)}function g1(l,u){if(!(this instanceof g1))return new g1(l,u);R5(l),u||(u={}),l=l.trim(),!u.allowWindowsEscape&&V4.sep!=="/"&&(l=l.split(V4.sep).join("/")),this.options=u,this.set=[],this.pattern=l,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!u.partial,this.make()}g1.prototype.debug=function(){};g1.prototype.make=ph;function ph(){var l=this.pattern,u=this.options;if(!u.nocomment&&l.charAt(0)==="#"){this.comment=!0;return}if(!l){this.empty=!0;return}this.parseNegate();var g=this.globSet=this.braceExpand();u.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,g),g=this.globParts=g.map(function(w){return w.split(je)}),this.debug(this.pattern,g),g=g.map(function(w,b,e){return w.map(this.parse,this)},this),this.debug(this.pattern,g),g=g.filter(function(w){return w.indexOf(!1)===-1}),this.debug(this.pattern,g),this.set=g}g1.prototype.parseNegate=fh;function fh(){var l=this.pattern,u=!1,g=this.options,w=0;if(!g.nonegate){for(var b=0,e=l.length;b<e&&l.charAt(b)==="!";b++)u=!u,w++;w&&(this.pattern=l.substr(w)),this.negate=u}}D1.braceExpand=function(l,u){return Ge(l,u)};g1.prototype.braceExpand=Ge;function Ge(l,u){return u||(this instanceof g1?u=this.options:u={}),l=typeof l=="undefined"?this.pattern:l,R5(l),u.nobrace||!/\{(?:(?!\{).)*\}/.test(l)?[l]:uh(l)}var zh=1024*64,R5=function(l){if(typeof l!="string")throw new TypeError("invalid pattern");if(l.length>zh)throw new TypeError("pattern is too long")};g1.prototype.parse=bh;var V5={};function bh(l,u){R5(l);var g=this.options;if(l==="**")if(g.noglobstar)l="*";else return H7;if(l==="")return"";var w="",b=!!g.nocase,e=!1,a=[],m=[],o,n=!1,c=-1,v=-1,f=l.charAt(0)==="."?"":g.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",i=this;function t(){if(o){switch(o){case"*":w+=E7,b=!0;break;case"?":w+=k7,b=!0;break;default:w+="\\"+o;break}i.debug("clearStateChar %j %j",o,w),o=!1}}for(var p=0,d=l.length,r;p<d&&(r=l.charAt(p));p++){if(this.debug("%s	%s %s %j",l,p,w,r),e&&We[r]){w+="\\"+r,e=!1;continue}switch(r){case"/":return!1;case"\\":t(),e=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",l,p,w,r),n){this.debug("  in class"),r==="!"&&p===v+1&&(r="^"),w+=r;continue}i.debug("call clearStateChar %j",o),t(),o=r,g.noext&&t();continue;case"(":if(n){w+="(";continue}if(!o){w+="\\(";continue}a.push({type:o,start:p-1,reStart:w.length,open:Ne[o].open,close:Ne[o].close}),w+=o==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",o,w),o=!1;continue;case")":if(n||!a.length){w+="\\)";continue}t(),b=!0;var z=a.pop();w+=z.close,z.type==="!"&&m.push(z),z.reEnd=w.length;continue;case"|":if(n||!a.length||e){w+="\\|",e=!1;continue}t(),w+="|";continue;case"[":if(t(),n){w+="\\"+r;continue}n=!0,v=p,c=w.length,w+=r;continue;case"]":if(p===v+1||!n){w+="\\"+r,e=!1;continue}var M=l.substring(v+1,p);try{RegExp("["+M+"]")}catch(Q){var _=this.parse(M,V5);w=w.substr(0,c)+"\\["+_[0]+"\\]",b=b||_[1],n=!1;continue}b=!0,n=!1,w+=r;continue;default:t(),e?e=!1:We[r]&&!(r==="^"&&n)&&(w+="\\"),w+=r}}for(n&&(M=l.substr(v+1),_=this.parse(M,V5),w=w.substr(0,c)+"\\["+_[0],b=b||_[1]),z=a.pop();z;z=a.pop()){var L=w.slice(z.reStart+z.open.length);this.debug("setting tail",w,z),L=L.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(Q,r0,e0){return e0||(e0="\\"),r0+r0+e0+"|"}),this.debug(`tail=%j
   %s`,L,L,z,w);var S=z.type==="*"?E7:z.type==="?"?k7:"\\"+z.type;b=!0,w=w.slice(0,z.reStart)+S+"\\("+L}t(),e&&(w+="\\\\");var y=!1;switch(w.charAt(0)){case"[":case".":case"(":y=!0}for(var A=m.length-1;A>-1;A--){var H=m[A],T=w.slice(0,H.reStart),V=w.slice(H.reStart,H.reEnd-8),Z=w.slice(H.reEnd-8,H.reEnd),B=w.slice(H.reEnd);Z+=B;var N=T.split("(").length-1,E=B;for(p=0;p<N;p++)E=E.replace(/\)[+*?]?/,"");B=E;var P="";B===""&&u!==V5&&(P="$");var I=T+V+B+P+Z;w=I}if(w!==""&&b&&(w="(?=.)"+w),y&&(w=f+w),u===V5)return[w,b];if(!b)return _h(l);var U=g.nocase?"i":"";try{var K=new RegExp("^"+w+"$",U)}catch(Q){return new RegExp("$.")}return K._glob=l,K._src=w,K}D1.makeRe=function(l,u){return new g1(l,u||{}).makeRe()};g1.prototype.makeRe=wh;function wh(){if(this.regexp||this.regexp===!1)return this.regexp;var l=this.set;if(!l.length)return this.regexp=!1,this.regexp;var u=this.options,g=u.noglobstar?E7:u.dot?dh:mh,w=u.nocase?"i":"",b=l.map(function(e){return e.map(function(a){return a===H7?g:typeof a=="string"?yh(a):a._src}).join("\\/")}).join("|");b="^(?:"+b+")$",this.negate&&(b="^(?!"+b+").*$");try{this.regexp=new RegExp(b,w)}catch(e){this.regexp=!1}return this.regexp}D1.match=function(l,u,g){g=g||{};var w=new g1(u,g);return l=l.filter(function(b){return w.match(b)}),w.options.nonull&&!l.length&&l.push(u),l};g1.prototype.match=function(u,g){if(typeof g=="undefined"&&(g=this.partial),this.debug("match",u,this.pattern),this.comment)return!1;if(this.empty)return u==="";if(u==="/"&&g)return!0;var w=this.options;V4.sep!=="/"&&(u=u.split(V4.sep).join("/")),u=u.split(je),this.debug(this.pattern,"split",u);var b=this.set;this.debug(this.pattern,"set",b);var e,a;for(a=u.length-1;a>=0&&(e=u[a],!e);a--);for(a=0;a<b.length;a++){var m=b[a],o=u;w.matchBase&&m.length===1&&(o=[e]);var n=this.matchOne(o,m,g);if(n)return w.flipNegate?!0:!this.negate}return w.flipNegate?!1:this.negate};g1.prototype.matchOne=function(l,u,g){var w=this.options;this.debug("matchOne",{this:this,file:l,pattern:u}),this.debug("matchOne",l.length,u.length);for(var b=0,e=0,a=l.length,m=u.length;b<a&&e<m;b++,e++){this.debug("matchOne loop");var o=u[e],n=l[b];if(this.debug(u,o,n),o===!1)return!1;if(o===H7){this.debug("GLOBSTAR",[u,o,n]);var c=b,v=e+1;if(v===m){for(this.debug("** at the end");b<a;b++)if(l[b]==="."||l[b]===".."||!w.dot&&l[b].charAt(0)===".")return!1;return!0}for(;c<a;){var f=l[c];if(this.debug(`
globstar while`,l,c,u,v,f),this.matchOne(l.slice(c),u.slice(v),g))return this.debug("globstar found match!",c,a,f),!0;if(f==="."||f===".."||!w.dot&&f.charAt(0)==="."){this.debug("dot detected!",l,c,u,v);break}this.debug("globstar swallow a segment, and continue"),c++}return!!(g&&(this.debug(`
>>> no match, partial?`,l,c,u,v),c===a))}var i;if(typeof o=="string"?(i=n===o,this.debug("string match",o,n,i)):(i=n.match(o),this.debug("pattern match",o,n,i)),!i)return!1}if(b===a&&e===m)return!0;if(b===a)return g;if(e===m)return b===a-1&&l[b]==="";throw new Error("wtf?")};function _h(l){return l.replace(/\\(.)/g,"$1")}function yh(l){return l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}});var $e=W0((Wd,D7)=>{typeof Object.create=="function"?D7.exports=function(u,g){g&&(u.super_=g,u.prototype=Object.create(g.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}))}:D7.exports=function(u,g){if(g){u.super_=g;var w=function(){};w.prototype=g.prototype,u.prototype=new w,u.prototype.constructor=u}}});var P5=W0((jd,B5)=>{"use strict";function Ke(l){return l.charAt(0)==="/"}function Ye(l){var u=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,g=u.exec(l),w=g[1]||"",b=Boolean(w&&w.charAt(1)!==":");return Boolean(g[2]||b)}B5.exports=process.platform==="win32"?Ye:Ke;B5.exports.posix=Ke;B5.exports.win32=Ye});var V7=W0(i3=>{i3.setopts=Ah;i3.ownProp=Xe;i3.makeAbs=R4;i3.finish=kh;i3.mark=Eh;i3.isIgnored=Qe;i3.childrenIgnored=Hh;function Xe(l,u){return Object.prototype.hasOwnProperty.call(l,u)}var Ch=require("fs"),K3=require("path"),Mh=F5(),Je=P5(),T7=Mh.Minimatch;function xh(l,u){return l.localeCompare(u,"en")}function Sh(l,u){l.ignore=u.ignore||[],Array.isArray(l.ignore)||(l.ignore=[l.ignore]),l.ignore.length&&(l.ignore=l.ignore.map(Lh))}function Lh(l){var u=null;if(l.slice(-3)==="/**"){var g=l.replace(/(\/\*\*)+$/,"");u=new T7(g,{dot:!0})}return{matcher:new T7(l,{dot:!0}),gmatcher:u}}function Ah(l,u,g){if(g||(g={}),g.matchBase&&u.indexOf("/")===-1){if(g.noglobstar)throw new Error("base matching requires globstar");u="**/"+u}l.silent=!!g.silent,l.pattern=u,l.strict=g.strict!==!1,l.realpath=!!g.realpath,l.realpathCache=g.realpathCache||Object.create(null),l.follow=!!g.follow,l.dot=!!g.dot,l.mark=!!g.mark,l.nodir=!!g.nodir,l.nodir&&(l.mark=!0),l.sync=!!g.sync,l.nounique=!!g.nounique,l.nonull=!!g.nonull,l.nosort=!!g.nosort,l.nocase=!!g.nocase,l.stat=!!g.stat,l.noprocess=!!g.noprocess,l.absolute=!!g.absolute,l.fs=g.fs||Ch,l.maxLength=g.maxLength||1/0,l.cache=g.cache||Object.create(null),l.statCache=g.statCache||Object.create(null),l.symlinks=g.symlinks||Object.create(null),Sh(l,g),l.changedCwd=!1;var w=process.cwd();Xe(g,"cwd")?(l.cwd=K3.resolve(g.cwd),l.changedCwd=l.cwd!==w):l.cwd=w,l.root=g.root||K3.resolve(l.cwd,"/"),l.root=K3.resolve(l.root),process.platform==="win32"&&(l.root=l.root.replace(/\\/g,"/")),l.cwdAbs=Je(l.cwd)?l.cwd:R4(l,l.cwd),process.platform==="win32"&&(l.cwdAbs=l.cwdAbs.replace(/\\/g,"/")),l.nomount=!!g.nomount,g.nonegate=!0,g.nocomment=!0,g.allowWindowsEscape=!1,l.minimatch=new T7(u,g),l.options=l.minimatch.options}function kh(l){for(var u=l.nounique,g=u?[]:Object.create(null),w=0,b=l.matches.length;w<b;w++){var e=l.matches[w];if(!e||Object.keys(e).length===0){if(l.nonull){var a=l.minimatch.globSet[w];u?g.push(a):g[a]=!0}}else{var m=Object.keys(e);u?g.push.apply(g,m):m.forEach(function(o){g[o]=!0})}}if(u||(g=Object.keys(g)),l.nosort||(g=g.sort(xh)),l.mark){for(var w=0;w<g.length;w++)g[w]=l._mark(g[w]);l.nodir&&(g=g.filter(function(o){var n=!/\/$/.test(o),c=l.cache[o]||l.cache[R4(l,o)];return n&&c&&(n=c!=="DIR"&&!Array.isArray(c)),n}))}l.ignore.length&&(g=g.filter(function(o){return!Qe(l,o)})),l.found=g}function Eh(l,u){var g=R4(l,u),w=l.cache[g],b=u;if(w){var e=w==="DIR"||Array.isArray(w),a=u.slice(-1)==="/";if(e&&!a?b+="/":!e&&a&&(b=b.slice(0,-1)),b!==u){var m=R4(l,b);l.statCache[m]=l.statCache[g],l.cache[m]=l.cache[g]}}return b}function R4(l,u){var g=u;return u.charAt(0)==="/"?g=K3.join(l.root,u):Je(u)||u===""?g=u:l.changedCwd?g=K3.resolve(l.cwd,u):g=K3.resolve(u),process.platform==="win32"&&(g=g.replace(/\\/g,"/")),g}function Qe(l,u){return l.ignore.length?l.ignore.some(function(g){return g.matcher.match(u)||!!(g.gmatcher&&g.gmatcher.match(u))}):!1}function Hh(l,u){return l.ignore.length?l.ignore.some(function(g){return!!(g.gmatcher&&g.gmatcher.match(u))}):!1}});var at=W0((Yd,it)=>{it.exports=st;st.GlobSync=o1;var Dh=S7(),et=F5(),qd=et.Minimatch,$d=B7().Glob,Kd=require("util"),R7=require("path"),tt=require("assert"),O5=P5(),_3=V7(),Th=_3.setopts,F7=_3.ownProp,Vh=_3.childrenIgnored,Rh=_3.isIgnored;function st(l,u){if(typeof u=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new o1(l,u).found}function o1(l,u){if(!l)throw new Error("must provide pattern");if(typeof u=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof o1))return new o1(l,u);if(Th(this,l,u),this.noprocess)return this;var g=this.minimatch.set.length;this.matches=new Array(g);for(var w=0;w<g;w++)this._process(this.minimatch.set[w],w,!1);this._finish()}o1.prototype._finish=function(){if(tt.ok(this instanceof o1),this.realpath){var l=this;this.matches.forEach(function(u,g){var w=l.matches[g]=Object.create(null);for(var b in u)try{b=l._makeAbs(b);var e=Dh.realpathSync(b,l.realpathCache);w[e]=!0}catch(a){if(a.syscall==="stat")w[l._makeAbs(b)]=!0;else throw a}})}_3.finish(this)};o1.prototype._process=function(l,u,g){tt.ok(this instanceof o1);for(var w=0;typeof l[w]=="string";)w++;var b;switch(w){case l.length:this._processSimple(l.join("/"),u);return;case 0:b=null;break;default:b=l.slice(0,w).join("/");break}var e=l.slice(w),a;b===null?a=".":((O5(b)||O5(l.map(function(n){return typeof n=="string"?n:"[*]"}).join("/")))&&(!b||!O5(b))&&(b="/"+b),a=b);var m=this._makeAbs(a);if(!Vh(this,a)){var o=e[0]===et.GLOBSTAR;o?this._processGlobStar(b,a,m,e,u,g):this._processReaddir(b,a,m,e,u,g)}};o1.prototype._processReaddir=function(l,u,g,w,b,e){var a=this._readdir(g,e);if(a){for(var m=w[0],o=!!this.minimatch.negate,n=m._glob,c=this.dot||n.charAt(0)===".",v=[],f=0;f<a.length;f++){var i=a[f];if(i.charAt(0)!=="."||c){var t;o&&!l?t=!i.match(m):t=i.match(m),t&&v.push(i)}}var p=v.length;if(p!==0){if(w.length===1&&!this.mark&&!this.stat){this.matches[b]||(this.matches[b]=Object.create(null));for(var f=0;f<p;f++){var i=v[f];l&&(l.slice(-1)!=="/"?i=l+"/"+i:i=l+i),i.charAt(0)==="/"&&!this.nomount&&(i=R7.join(this.root,i)),this._emitMatch(b,i)}return}w.shift();for(var f=0;f<p;f++){var i=v[f],d;l?d=[l,i]:d=[i],this._process(d.concat(w),b,e)}}}};o1.prototype._emitMatch=function(l,u){if(!Rh(this,u)){var g=this._makeAbs(u);if(this.mark&&(u=this._mark(u)),this.absolute&&(u=g),!this.matches[l][u]){if(this.nodir){var w=this.cache[g];if(w==="DIR"||Array.isArray(w))return}this.matches[l][u]=!0,this.stat&&this._stat(u)}}};o1.prototype._readdirInGlobStar=function(l){if(this.follow)return this._readdir(l,!1);var u,g,w;try{g=this.fs.lstatSync(l)}catch(e){if(e.code==="ENOENT")return null}var b=g&&g.isSymbolicLink();return this.symlinks[l]=b,!b&&g&&!g.isDirectory()?this.cache[l]="FILE":u=this._readdir(l,!1),u};o1.prototype._readdir=function(l,u){var g;if(u&&!F7(this.symlinks,l))return this._readdirInGlobStar(l);if(F7(this.cache,l)){var w=this.cache[l];if(!w||w==="FILE")return null;if(Array.isArray(w))return w}try{return this._readdirEntries(l,this.fs.readdirSync(l))}catch(b){return this._readdirError(l,b),null}};o1.prototype._readdirEntries=function(l,u){if(!this.mark&&!this.stat)for(var g=0;g<u.length;g++){var w=u[g];l==="/"?w=l+w:w=l+"/"+w,this.cache[w]=!0}return this.cache[l]=u,u};o1.prototype._readdirError=function(l,u){switch(u.code){case"ENOTSUP":case"ENOTDIR":var g=this._makeAbs(l);if(this.cache[g]="FILE",g===this.cwdAbs){var w=new Error(u.code+" invalid cwd "+this.cwd);throw w.path=this.cwd,w.code=u.code,w}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(l)]=!1;break;default:if(this.cache[this._makeAbs(l)]=!1,this.strict)throw u;this.silent||console.error("glob error",u);break}};o1.prototype._processGlobStar=function(l,u,g,w,b,e){var a=this._readdir(g,e);if(a){var m=w.slice(1),o=l?[l]:[],n=o.concat(m);this._process(n,b,!1);var c=a.length,v=this.symlinks[g];if(!(v&&e))for(var f=0;f<c;f++){var i=a[f];if(!(i.charAt(0)==="."&&!this.dot)){var t=o.concat(a[f],m);this._process(t,b,!0);var p=o.concat(a[f],w);this._process(p,b,!0)}}}};o1.prototype._processSimple=function(l,u){var g=this._stat(l);if(this.matches[u]||(this.matches[u]=Object.create(null)),!!g){if(l&&O5(l)&&!this.nomount){var w=/[\/\\]$/.test(l);l.charAt(0)==="/"?l=R7.join(this.root,l):(l=R7.resolve(this.root,l),w&&(l+="/"))}process.platform==="win32"&&(l=l.replace(/\\/g,"/")),this._emitMatch(u,l)}};o1.prototype._stat=function(l){var u=this._makeAbs(l),g=l.slice(-1)==="/";if(l.length>this.maxLength)return!1;if(!this.stat&&F7(this.cache,u)){var a=this.cache[u];if(Array.isArray(a)&&(a="DIR"),!g||a==="DIR")return a;if(g&&a==="FILE")return!1}var w,b=this.statCache[u];if(!b){var e;try{e=this.fs.lstatSync(u)}catch(m){if(m&&(m.code==="ENOENT"||m.code==="ENOTDIR"))return this.statCache[u]=!1,!1}if(e&&e.isSymbolicLink())try{b=this.fs.statSync(u)}catch(m){b=e}else b=e}this.statCache[u]=b;var a=!0;return b&&(a=b.isDirectory()?"DIR":"FILE"),this.cache[u]=this.cache[u]||a,g&&a==="FILE"?!1:a};o1.prototype._mark=function(l){return _3.mark(this,l)};o1.prototype._makeAbs=function(l){return _3.makeAbs(this,l)}});var P7=W0((Xd,rt)=>{rt.exports=ct;function ct(l,u){if(l&&u)return ct(l)(u);if(typeof l!="function")throw new TypeError("need wrapper function");return Object.keys(l).forEach(function(w){g[w]=l[w]}),g;function g(){for(var w=new Array(arguments.length),b=0;b<w.length;b++)w[b]=arguments[b];var e=l.apply(this,w),a=w[w.length-1];return typeof e=="function"&&e!==a&&Object.keys(a).forEach(function(m){e[m]=a[m]}),e}}});var I7=W0((Jd,O7)=>{var lt=P7();O7.exports=lt(I5);O7.exports.strict=lt(ot);I5.proto=I5(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return I5(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return ot(this)},configurable:!0})});function I5(l){var u=function(){return u.called?u.value:(u.called=!0,u.value=l.apply(this,arguments))};return u.called=!1,u}function ot(l){var u=function(){if(u.called)throw new Error(u.onceError);return u.called=!0,u.value=l.apply(this,arguments)},g=l.name||"Function wrapped with `once`";return u.onceError=g+" shouldn't be called more than once",u.called=!1,u}});var ht=W0((Qd,nt)=>{var Fh=P7(),F4=Object.create(null),Bh=I7();nt.exports=Fh(Ph);function Ph(l,u){return F4[l]?(F4[l].push(u),null):(F4[l]=[u],Oh(l))}function Oh(l){return Bh(function u(){var g=F4[l],w=g.length,b=Ih(arguments);try{for(var e=0;e<w;e++)g[e].apply(null,b)}finally{g.length>w?(g.splice(0,w),process.nextTick(function(){u.apply(null,b)})):delete F4[l]}})}function Ih(l){for(var u=l.length,g=[],w=0;w<u;w++)g[w]=l[w];return g}});var B7=W0((sm,dt)=>{dt.exports=y3;var Zh=S7(),ut=F5(),em=ut.Minimatch,Uh=$e(),Nh=require("events").EventEmitter,Z7=require("path"),U7=require("assert"),B4=P5(),W7=at(),C3=V7(),Wh=C3.setopts,N7=C3.ownProp,j7=ht(),tm=require("util"),jh=C3.childrenIgnored,Gh=C3.isIgnored,qh=I7();function y3(l,u,g){if(typeof u=="function"&&(g=u,u={}),u||(u={}),u.sync){if(g)throw new TypeError("callback provided to sync glob");return W7(l,u)}return new B0(l,u,g)}y3.sync=W7;var $h=y3.GlobSync=W7.GlobSync;y3.glob=y3;function Kh(l,u){if(u===null||typeof u!="object")return l;for(var g=Object.keys(u),w=g.length;w--;)l[g[w]]=u[g[w]];return l}y3.hasMagic=function(l,u){var g=Kh({},u);g.noprocess=!0;var w=new B0(l,g),b=w.minimatch.set;if(!l)return!1;if(b.length>1)return!0;for(var e=0;e<b[0].length;e++)if(typeof b[0][e]!="string")return!0;return!1};y3.Glob=B0;Uh(B0,Nh);function B0(l,u,g){if(typeof u=="function"&&(g=u,u=null),u&&u.sync){if(g)throw new TypeError("callback provided to sync glob");return new $h(l,u)}if(!(this instanceof B0))return new B0(l,u,g);Wh(this,l,u),this._didRealPath=!1;var w=this.minimatch.set.length;this.matches=new Array(w),typeof g=="function"&&(g=qh(g),this.on("error",g),this.on("end",function(o){g(null,o)}));var b=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(w===0)return m();for(var e=!0,a=0;a<w;a++)this._process(this.minimatch.set[a],a,!1,m);e=!1;function m(){--b._processing,b._processing<=0&&(e?process.nextTick(function(){b._finish()}):b._finish())}}B0.prototype._finish=function(){if(U7(this instanceof B0),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();C3.finish(this),this.emit("end",this.found)}};B0.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var l=this.matches.length;if(l===0)return this._finish();for(var u=this,g=0;g<this.matches.length;g++)this._realpathSet(g,w);function w(){--l===0&&u._finish()}};B0.prototype._realpathSet=function(l,u){var g=this.matches[l];if(!g)return u();var w=Object.keys(g),b=this,e=w.length;if(e===0)return u();var a=this.matches[l]=Object.create(null);w.forEach(function(m,o){m=b._makeAbs(m),Zh.realpath(m,b.realpathCache,function(n,c){n?n.syscall==="stat"?a[m]=!0:b.emit("error",n):a[c]=!0,--e===0&&(b.matches[l]=a,u())})})};B0.prototype._mark=function(l){return C3.mark(this,l)};B0.prototype._makeAbs=function(l){return C3.makeAbs(this,l)};B0.prototype.abort=function(){this.aborted=!0,this.emit("abort")};B0.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))};B0.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var l=this._emitQueue.slice(0);this._emitQueue.length=0;for(var u=0;u<l.length;u++){var g=l[u];this._emitMatch(g[0],g[1])}}if(this._processQueue.length){var w=this._processQueue.slice(0);this._processQueue.length=0;for(var u=0;u<w.length;u++){var b=w[u];this._processing--,this._process(b[0],b[1],b[2],b[3])}}}};B0.prototype._process=function(l,u,g,w){if(U7(this instanceof B0),U7(typeof w=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([l,u,g,w]);return}for(var b=0;typeof l[b]=="string";)b++;var e;switch(b){case l.length:this._processSimple(l.join("/"),u,w);return;case 0:e=null;break;default:e=l.slice(0,b).join("/");break}var a=l.slice(b),m;e===null?m=".":((B4(e)||B4(l.map(function(c){return typeof c=="string"?c:"[*]"}).join("/")))&&(!e||!B4(e))&&(e="/"+e),m=e);var o=this._makeAbs(m);if(jh(this,m))return w();var n=a[0]===ut.GLOBSTAR;n?this._processGlobStar(e,m,o,a,u,g,w):this._processReaddir(e,m,o,a,u,g,w)}};B0.prototype._processReaddir=function(l,u,g,w,b,e,a){var m=this;this._readdir(g,e,function(o,n){return m._processReaddir2(l,u,g,w,b,e,n,a)})};B0.prototype._processReaddir2=function(l,u,g,w,b,e,a,m){if(!a)return m();for(var o=w[0],n=!!this.minimatch.negate,c=o._glob,v=this.dot||c.charAt(0)===".",f=[],i=0;i<a.length;i++){var t=a[i];if(t.charAt(0)!=="."||v){var p;n&&!l?p=!t.match(o):p=t.match(o),p&&f.push(t)}}var d=f.length;if(d===0)return m();if(w.length===1&&!this.mark&&!this.stat){this.matches[b]||(this.matches[b]=Object.create(null));for(var i=0;i<d;i++){var t=f[i];l&&(l!=="/"?t=l+"/"+t:t=l+t),t.charAt(0)==="/"&&!this.nomount&&(t=Z7.join(this.root,t)),this._emitMatch(b,t)}return m()}w.shift();for(var i=0;i<d;i++){var t=f[i],r;l&&(l!=="/"?t=l+"/"+t:t=l+t),this._process([t].concat(w),b,e,m)}m()};B0.prototype._emitMatch=function(l,u){if(!this.aborted&&!Gh(this,u)){if(this.paused){this._emitQueue.push([l,u]);return}var g=B4(u)?u:this._makeAbs(u);if(this.mark&&(u=this._mark(u)),this.absolute&&(u=g),!this.matches[l][u]){if(this.nodir){var w=this.cache[g];if(w==="DIR"||Array.isArray(w))return}this.matches[l][u]=!0;var b=this.statCache[g];b&&this.emit("stat",u,b),this.emit("match",u)}}};B0.prototype._readdirInGlobStar=function(l,u){if(this.aborted)return;if(this.follow)return this._readdir(l,!1,u);var g="lstat\0"+l,w=this,b=j7(g,e);b&&w.fs.lstat(l,b);function e(a,m){if(a&&a.code==="ENOENT")return u();var o=m&&m.isSymbolicLink();w.symlinks[l]=o,!o&&m&&!m.isDirectory()?(w.cache[l]="FILE",u()):w._readdir(l,!1,u)}};B0.prototype._readdir=function(l,u,g){if(!this.aborted&&(g=j7("readdir\0"+l+"\0"+u,g),!!g)){if(u&&!N7(this.symlinks,l))return this._readdirInGlobStar(l,g);if(N7(this.cache,l)){var w=this.cache[l];if(!w||w==="FILE")return g();if(Array.isArray(w))return g(null,w)}var b=this;b.fs.readdir(l,Yh(this,l,g))}};function Yh(l,u,g){return function(w,b){w?l._readdirError(u,w,g):l._readdirEntries(u,b,g)}}B0.prototype._readdirEntries=function(l,u,g){if(!this.aborted){if(!this.mark&&!this.stat)for(var w=0;w<u.length;w++){var b=u[w];l==="/"?b=l+b:b=l+"/"+b,this.cache[b]=!0}return this.cache[l]=u,g(null,u)}};B0.prototype._readdirError=function(l,u,g){if(!this.aborted){switch(u.code){case"ENOTSUP":case"ENOTDIR":var w=this._makeAbs(l);if(this.cache[w]="FILE",w===this.cwdAbs){var b=new Error(u.code+" invalid cwd "+this.cwd);b.path=this.cwd,b.code=u.code,this.emit("error",b),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(l)]=!1;break;default:this.cache[this._makeAbs(l)]=!1,this.strict&&(this.emit("error",u),this.abort()),this.silent||console.error("glob error",u);break}return g()}};B0.prototype._processGlobStar=function(l,u,g,w,b,e,a){var m=this;this._readdir(g,e,function(o,n){m._processGlobStar2(l,u,g,w,b,e,n,a)})};B0.prototype._processGlobStar2=function(l,u,g,w,b,e,a,m){if(!a)return m();var o=w.slice(1),n=l?[l]:[],c=n.concat(o);this._process(c,b,!1,m);var v=this.symlinks[g],f=a.length;if(v&&e)return m();for(var i=0;i<f;i++){var t=a[i];if(!(t.charAt(0)==="."&&!this.dot)){var p=n.concat(a[i],o);this._process(p,b,!0,m);var d=n.concat(a[i],w);this._process(d,b,!0,m)}}m()};B0.prototype._processSimple=function(l,u,g){var w=this;this._stat(l,function(b,e){w._processSimple2(l,u,b,e,g)})};B0.prototype._processSimple2=function(l,u,g,w,b){if(this.matches[u]||(this.matches[u]=Object.create(null)),!w)return b();if(l&&B4(l)&&!this.nomount){var e=/[\/\\]$/.test(l);l.charAt(0)==="/"?l=Z7.join(this.root,l):(l=Z7.resolve(this.root,l),e&&(l+="/"))}process.platform==="win32"&&(l=l.replace(/\\/g,"/")),this._emitMatch(u,l),b()};B0.prototype._stat=function(l,u){var g=this._makeAbs(l),w=l.slice(-1)==="/";if(l.length>this.maxLength)return u();if(!this.stat&&N7(this.cache,g)){var b=this.cache[g];if(Array.isArray(b)&&(b="DIR"),!w||b==="DIR")return u(null,b);if(w&&b==="FILE")return u()}var e,a=this.statCache[g];if(a!==void 0){if(a===!1)return u(null,a);var m=a.isDirectory()?"DIR":"FILE";return w&&m==="FILE"?u():u(null,m,a)}var o=this,n=j7("stat\0"+g,c);n&&o.fs.lstat(g,n);function c(v,f){if(f&&f.isSymbolicLink())return o.fs.stat(g,function(i,t){i?o._stat2(l,g,null,f,u):o._stat2(l,g,i,t,u)});o._stat2(l,g,v,f,u)}};B0.prototype._stat2=function(l,u,g,w,b){if(g&&(g.code==="ENOENT"||g.code==="ENOTDIR"))return this.statCache[u]=!1,b();var e=l.slice(-1)==="/";if(this.statCache[u]=w,u.slice(-1)==="/"&&w&&!w.isDirectory())return b(null,!1,w);var a=!0;return w&&(a=w.isDirectory()?"DIR":"FILE"),this.cache[u]=this.cache[u]||a,e&&a==="FILE"?b():b(null,a,w)}});var wt=W0((im,bt)=>{var Z0=require("assert"),pt=require("path"),mt=require("fs"),Y3;try{Y3=B7()}catch(l){}var Xh={nosort:!0,silent:!0},G7=0,P4=process.platform==="win32",ft=l=>{if(["unlink","chmod","stat","lstat","rmdir","readdir"].forEach(g=>{l[g]=l[g]||mt[g],g=g+"Sync",l[g]=l[g]||mt[g]}),l.maxBusyTries=l.maxBusyTries||3,l.emfileWait=l.emfileWait||1e3,l.glob===!1&&(l.disableGlob=!0),l.disableGlob!==!0&&Y3===void 0)throw Error("glob dependency not found, set `options.disableGlob = true` if intentional");l.disableGlob=l.disableGlob||!1,l.glob=l.glob||Xh},$7=(l,u,g)=>{typeof u=="function"&&(g=u,u={}),Z0(l,"rimraf: missing path"),Z0.equal(typeof l,"string","rimraf: path should be a string"),Z0.equal(typeof g,"function","rimraf: callback function required"),Z0(u,"rimraf: invalid options argument provided"),Z0.equal(typeof u,"object","rimraf: options should be object"),ft(u);let w=0,b=null,e=0,a=o=>{b=b||o,--e===0&&g(b)},m=(o,n)=>{if(o)return g(o);if(e=n.length,e===0)return g();n.forEach(c=>{let v=f=>{if(f){if((f.code==="EBUSY"||f.code==="ENOTEMPTY"||f.code==="EPERM")&&w<u.maxBusyTries)return w++,setTimeout(()=>q7(c,u,v),w*100);if(f.code==="EMFILE"&&G7<u.emfileWait)return setTimeout(()=>q7(c,u,v),G7++);f.code==="ENOENT"&&(f=null)}G7=0,a(f)};q7(c,u,v)})};if(u.disableGlob||!Y3.hasMagic(l))return m(null,[l]);u.lstat(l,(o,n)=>{if(!o)return m(null,[l]);Y3(l,u.glob,m)})},q7=(l,u,g)=>{Z0(l),Z0(u),Z0(typeof g=="function"),u.lstat(l,(w,b)=>{if(w&&w.code==="ENOENT")return g(null);if(w&&w.code==="EPERM"&&P4&&vt(l,u,w,g),b&&b.isDirectory())return Z5(l,u,w,g);u.unlink(l,e=>{if(e){if(e.code==="ENOENT")return g(null);if(e.code==="EPERM")return P4?vt(l,u,e,g):Z5(l,u,e,g);if(e.code==="EISDIR")return Z5(l,u,e,g)}return g(e)})})},vt=(l,u,g,w)=>{Z0(l),Z0(u),Z0(typeof w=="function"),u.chmod(l,438,b=>{b?w(b.code==="ENOENT"?null:g):u.stat(l,(e,a)=>{e?w(e.code==="ENOENT"?null:g):a.isDirectory()?Z5(l,u,g,w):u.unlink(l,w)})})},gt=(l,u,g)=>{Z0(l),Z0(u);try{u.chmodSync(l,438)}catch(b){if(b.code==="ENOENT")return;throw g}let w;try{w=u.statSync(l)}catch(b){if(b.code==="ENOENT")return;throw g}w.isDirectory()?U5(l,u,g):u.unlinkSync(l)},Z5=(l,u,g,w)=>{Z0(l),Z0(u),Z0(typeof w=="function"),u.rmdir(l,b=>{b&&(b.code==="ENOTEMPTY"||b.code==="EEXIST"||b.code==="EPERM")?Jh(l,u,w):b&&b.code==="ENOTDIR"?w(g):w(b)})},Jh=(l,u,g)=>{Z0(l),Z0(u),Z0(typeof g=="function"),u.readdir(l,(w,b)=>{if(w)return g(w);let e=b.length;if(e===0)return u.rmdir(l,g);let a;b.forEach(m=>{$7(pt.join(l,m),u,o=>{if(!a){if(o)return g(a=o);--e===0&&u.rmdir(l,g)}})})})},zt=(l,u)=>{u=u||{},ft(u),Z0(l,"rimraf: missing path"),Z0.equal(typeof l,"string","rimraf: path should be a string"),Z0(u,"rimraf: missing options"),Z0.equal(typeof u,"object","rimraf: options should be object");let g;if(u.disableGlob||!Y3.hasMagic(l))g=[l];else try{u.lstatSync(l),g=[l]}catch(w){g=Y3.sync(l,u.glob)}if(g.length)for(let w=0;w<g.length;w++){let b=g[w],e;try{e=u.lstatSync(b)}catch(a){if(a.code==="ENOENT")return;a.code==="EPERM"&&P4&&gt(b,u,a)}try{e&&e.isDirectory()?U5(b,u,null):u.unlinkSync(b)}catch(a){if(a.code==="ENOENT")return;if(a.code==="EPERM")return P4?gt(b,u,a):U5(b,u,a);if(a.code!=="EISDIR")throw a;U5(b,u,a)}}},U5=(l,u,g)=>{Z0(l),Z0(u);try{u.rmdirSync(l)}catch(w){if(w.code==="ENOENT")return;if(w.code==="ENOTDIR")throw g;(w.code==="ENOTEMPTY"||w.code==="EEXIST"||w.code==="EPERM")&&Qh(l,u)}},Qh=(l,u)=>{Z0(l),Z0(u),u.readdirSync(l).forEach(b=>zt(pt.join(l,b),u));let g=P4?100:1,w=0;do{let b=!0;try{let e=u.rmdirSync(l,u);return b=!1,e}finally{if(++w<g&&b)continue}}while(!0)};bt.exports=$7;$7.sync=zt});var Pt=W0((am,B2)=>{/*!
 * Tmp
 *
 * Copyright (c) 2011-2017 KARASZI Istvan <github@spam.raszi.hu>
 *
 * MIT Licensed
 */var d1=require("fs"),Q7=require("os"),T1=require("path"),_t=require("crypto"),L2={fs:d1.constants,os:Q7.constants},Mt=wt(),yt="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",xt=/XXXXXX/,eu=3,St=(L2.O_CREAT||L2.fs.O_CREAT)|(L2.O_EXCL||L2.fs.O_EXCL)|(L2.O_RDWR||L2.fs.O_RDWR),tu=Q7.platform()==="win32",su=L2.EBADF||L2.os.errno.EBADF,iu=L2.ENOENT||L2.os.errno.ENOENT,Lt=448,At=384,au="exit",X3=[],kt=d1.rmdirSync.bind(d1),Et=Mt.sync,Ht=!1;function e8(l,u){let g=J3(l,u),w=g[0],b=g[1];try{Rt(w)}catch(a){return b(a)}let e=w.tries;(function a(){try{let m=Vt(w);d1.stat(m,function(o){if(!o)return e-- >0?a():b(new Error("Could not get a unique tmp filename, max tries reached "+m));b(null,m)})}catch(m){b(m)}})()}function t8(l){let u=J3(l),g=u[0];Rt(g);let w=g.tries;do{let b=Vt(g);try{d1.statSync(b)}catch(e){return b}}while(w-- >0);throw new Error("Could not get a unique tmp filename, max tries reached")}function cu(l,u){let g=J3(l,u),w=g[0],b=g[1];e8(w,function(a,m){if(a)return b(a);d1.open(m,St,w.mode||At,function(n,c){if(n)return b(n);if(w.discardDescriptor)return d1.close(c,function(f){return b(f,m,void 0,Y7(m,-1,w,!1))});{let v=w.discardDescriptor||w.detachDescriptor;b(null,m,c,Y7(m,v?-1:c,w,!1))}})})}function ru(l){let u=J3(l),g=u[0],w=g.discardDescriptor||g.detachDescriptor,b=t8(g);var e=d1.openSync(b,St,g.mode||At);return g.discardDescriptor&&(d1.closeSync(e),e=void 0),{name:b,fd:e,removeCallback:Y7(b,w?-1:e,g,!0)}}function lu(l,u){let g=J3(l,u),w=g[0],b=g[1];e8(w,function(a,m){if(a)return b(a);d1.mkdir(m,w.mode||Lt,function(n){if(n)return b(n);b(null,m,Dt(m,w,!1))})})}function ou(l){let u=J3(l),g=u[0],w=t8(g);return d1.mkdirSync(w,g.mode||Lt),{name:w,removeCallback:Dt(w,g,!0)}}function nu(l,u){let g=function(w){if(w&&!J7(w))return u(w);u()};0<=l[0]?d1.close(l[0],function(){d1.unlink(l[1],g)}):d1.unlink(l[1],g)}function hu(l){let u=null;try{0<=l[0]&&d1.closeSync(l[0])}catch(g){if(!du(g)&&!J7(g))throw g}finally{try{d1.unlinkSync(l[1])}catch(g){J7(g)||(u=g)}}if(u!==null)throw u}function Y7(l,u,g,w){let b=N5(hu,[u,l],w),e=N5(nu,[u,l],w,b);return g.keep||X3.unshift(b),w?b:e}function Dt(l,u,g){let w=u.unsafeCleanup?Mt:d1.rmdir.bind(d1),b=u.unsafeCleanup?Et:kt,e=N5(b,l,g),a=N5(w,l,g,e);return u.keep||X3.unshift(e),g?e:a}function N5(l,u,g,w){let b=!1;return function e(a){if(!b){let m=w||e,o=X3.indexOf(m);return o>=0&&X3.splice(o,1),b=!0,g||l===kt||l===Et?l(u):l(u,a||function(){})}}}function uu(){if(Ht)for(;X3.length;)try{X3[0]()}catch(l){}}function Ct(l){let u=[],g=null;try{g=_t.randomBytes(l)}catch(b){g=_t.pseudoRandomBytes(l)}for(var w=0;w<l;w++)u.push(yt[g[w]%yt.length]);return u.join("")}function Tt(l){return l===null||L1(l)||!l.trim()}function L1(l){return typeof l=="undefined"}function J3(l,u){if(typeof l=="function")return[{},l];if(L1(l))return[{},u];let g={};for(let w of Object.getOwnPropertyNames(l))g[w]=l[w];return[g,u]}function Vt(l){let u=l.tmpdir;if(!L1(l.name))return T1.join(u,l.dir,l.name);if(!L1(l.template))return T1.join(u,l.dir,l.template).replace(xt,Ct(6));let g=[l.prefix?l.prefix:"tmp","-",process.pid,"-",Ct(12),l.postfix?"-"+l.postfix:""].join("");return T1.join(u,l.dir,g)}function Rt(l){l.tmpdir=Bt(l);let u=l.tmpdir;if(L1(l.name)||K7(l.name,"name",u),L1(l.dir)||K7(l.dir,"dir",u),!L1(l.template)&&(K7(l.template,"template",u),!l.template.match(xt)))throw new Error(`Invalid template, found "${l.template}".`);if(!L1(l.tries)&&isNaN(l.tries)||l.tries<0)throw new Error(`Invalid tries, found "${l.tries}".`);l.tries=L1(l.name)?l.tries||eu:1,l.keep=!!l.keep,l.detachDescriptor=!!l.detachDescriptor,l.discardDescriptor=!!l.discardDescriptor,l.unsafeCleanup=!!l.unsafeCleanup,l.dir=L1(l.dir)?"":T1.relative(u,X7(l.dir,u)),l.template=L1(l.template)?void 0:T1.relative(u,X7(l.template,u)),l.template=Tt(l.template)?void 0:T1.relative(l.dir,l.template),l.name=L1(l.name)?void 0:s8(l.name),l.prefix=L1(l.prefix)?"":l.prefix,l.postfix=L1(l.postfix)?"":l.postfix}function X7(l,u){let g=s8(l);return g.startsWith(u)?T1.resolve(g):T1.resolve(T1.join(u,g))}function s8(l){return Tt(l)?l:l.replace(/["']/g,"")}function K7(l,u,g){if(u==="name"){if(T1.isAbsolute(l))throw new Error(`${u} option must not contain an absolute path, found "${l}".`);let w=T1.basename(l);if(w===".."||w==="."||w!==l)throw new Error(`${u} option must not contain a path, found "${l}".`)}else{if(T1.isAbsolute(l)&&!l.startsWith(g))throw new Error(`${u} option must be relative to "${g}", found "${l}".`);let w=X7(l,g);if(!w.startsWith(g))throw new Error(`${u} option must be relative to "${g}", found "${w}".`)}}function du(l){return Ft(l,-su,"EBADF")}function J7(l){return Ft(l,-iu,"ENOENT")}function Ft(l,u,g){return tu?l.code===g:l.code===g&&l.errno===u}function mu(){Ht=!0}function Bt(l){return T1.resolve(s8(l&&l.tmpdir||Q7.tmpdir()))}process.addListener(au,uu);Object.defineProperty(B2.exports,"tmpdir",{enumerable:!0,configurable:!1,get:function(){return Bt()}});B2.exports.dir=lu;B2.exports.dirSync=ou;B2.exports.file=cu;B2.exports.fileSync=ru;B2.exports.tmpName=e8;B2.exports.tmpNameSync=t8;B2.exports.setGracefulCleanup=mu});var Nt=W0((W5,i8)=>{(function(l,u){if(typeof W5=="object"&&typeof i8=="object")i8.exports=u();else if(typeof define=="function"&&define.amd)define([],u);else{var g=u();for(var w in g)(typeof W5=="object"?W5:l)[w]=g[w]}})(self,function(){return(()=>{"use strict";var l={4567:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AccessibilityManager=void 0;let m=a(9042),o=a(6114),n=a(9924),c=a(3656),v=a(844),f=a(5596),i=a(9631);class t extends v.Disposable{constructor(d,r){super(),this._terminal=d,this._renderService=r,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityTreeRoot=document.createElement("div"),this._accessibilityTreeRoot.classList.add("xterm-accessibility"),this._accessibilityTreeRoot.tabIndex=0,this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let z=0;z<this._terminal.rows;z++)this._rowElements[z]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[z]);if(this._topBoundaryFocusListener=z=>this._handleBoundaryFocus(z,0),this._bottomBoundaryFocusListener=z=>this._handleBoundaryFocus(z,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityTreeRoot.appendChild(this._rowContainer),this._renderRowsDebouncer=new n.TimeBasedDebouncer(this._renderRows.bind(this)),this._refreshRows(),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityTreeRoot.appendChild(this._liveRegion),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityTreeRoot),this.register(this._renderRowsDebouncer),this.register(this._terminal.onResize(z=>this._handleResize(z.rows))),this.register(this._terminal.onRender(z=>this._refreshRows(z.start,z.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(z=>this._handleChar(z))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(z=>this._handleTab(z))),this.register(this._terminal.onKey(z=>this._handleKey(z.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new f.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,c.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this.register((0,v.toDisposable)(()=>{(0,i.removeElementFromParent)(this._accessibilityTreeRoot),this._rowElements.length=0}))}_handleBoundaryFocus(d,r){let z=d.target,M=this._rowElements[r===0?1:this._rowElements.length-2];if(z.getAttribute("aria-posinset")===(r===0?"1":`${this._terminal.buffer.lines.length}`)||d.relatedTarget!==M)return;let _,L;if(r===0?(_=z,L=this._rowElements.pop(),this._rowContainer.removeChild(L)):(_=this._rowElements.shift(),L=z,this._rowContainer.removeChild(_)),_.removeEventListener("focus",this._topBoundaryFocusListener),L.removeEventListener("focus",this._bottomBoundaryFocusListener),r===0){let S=this._createAccessibilityTreeNode();this._rowElements.unshift(S),this._rowContainer.insertAdjacentElement("afterbegin",S)}else{let S=this._createAccessibilityTreeNode();this._rowElements.push(S),this._rowContainer.appendChild(S)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(r===0?-1:1),this._rowElements[r===0?1:this._rowElements.length-2].focus(),d.preventDefault(),d.stopImmediatePropagation()}_handleResize(d){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let r=this._rowContainer.children.length;r<this._terminal.rows;r++)this._rowElements[r]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[r]);for(;this._rowElements.length>d;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){let d=document.createElement("div");return d.setAttribute("role","listitem"),d.tabIndex=-1,this._refreshRowDimensions(d),d}_handleTab(d){for(let r=0;r<d;r++)this._handleChar(" ")}_handleChar(d){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==d&&(this._charsToAnnounce+=d):this._charsToAnnounce+=d,d===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=m.tooMuchOutput)),o.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityTreeRoot.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,o.isMac&&(0,i.removeElementFromParent)(this._liveRegion)}_handleKey(d){this._clearLiveRegion(),/\p{Control}/u.test(d)||this._charsToConsume.push(d)}_refreshRows(d,r){this._renderRowsDebouncer.refresh(d,r,this._terminal.rows)}_renderRows(d,r){let z=this._terminal.buffer,M=z.lines.length.toString();for(let _=d;_<=r;_++){let L=z.translateBufferLineToString(z.ydisp+_,!0),S=(z.ydisp+_+1).toString(),y=this._rowElements[_];y&&(L.length===0?y.innerText="\xA0":y.textContent=L,y.setAttribute("aria-posinset",S),y.setAttribute("aria-setsize",M))}this._announceCharacters()}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityTreeRoot.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let d=0;d<this._terminal.rows;d++)this._refreshRowDimensions(this._rowElements[d])}}_refreshRowDimensions(d){d.style.height=`${this._renderService.dimensions.css.cell.height}px`}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}}e.AccessibilityManager=t},3614:(b,e)=>{function a(c){return c.replace(/\r?\n/g,"\r")}function m(c,v){return v?"\x1B[200~"+c+"\x1B[201~":c}function o(c,v,f){c=m(c=a(c),f.decPrivateModes.bracketedPasteMode),f.triggerDataEvent(c,!0),v.value=""}function n(c,v,f){let i=f.getBoundingClientRect(),t=c.clientX-i.left-10,p=c.clientY-i.top-10;v.style.width="20px",v.style.height="20px",v.style.left=`${t}px`,v.style.top=`${p}px`,v.style.zIndex="1000",v.focus()}Object.defineProperty(e,"__esModule",{value:!0}),e.rightClickHandler=e.moveTextAreaUnderMouseCursor=e.paste=e.handlePasteEvent=e.copyHandler=e.bracketTextForPaste=e.prepareTextForTerminal=void 0,e.prepareTextForTerminal=a,e.bracketTextForPaste=m,e.copyHandler=function(c,v){c.clipboardData&&c.clipboardData.setData("text/plain",v.selectionText),c.preventDefault()},e.handlePasteEvent=function(c,v,f){c.stopPropagation(),c.clipboardData&&o(c.clipboardData.getData("text/plain"),v,f)},e.paste=o,e.moveTextAreaUnderMouseCursor=n,e.rightClickHandler=function(c,v,f,i,t){n(c,v,f),t&&i.rightClickSelect(c),v.value=i.selectionText,v.select()}},7239:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorContrastCache=void 0;let m=a(1505);e.ColorContrastCache=class{constructor(){this._color=new m.TwoKeyMap,this._css=new m.TwoKeyMap}setCss(o,n,c){this._css.set(o,n,c)}getCss(o,n){return this._css.get(o,n)}setColor(o,n,c){this._color.set(o,n,c)}getColor(o,n){return this._color.get(o,n)}clear(){this._color.clear(),this._css.clear()}}},9631:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.removeElementFromParent=void 0,e.removeElementFromParent=function(...a){var m;for(let o of a)(m=o==null?void 0:o.parentElement)===null||m===void 0||m.removeChild(o)}},3656:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.addDisposableDomListener=void 0,e.addDisposableDomListener=function(a,m,o,n){a.addEventListener(m,o,n);let c=!1;return{dispose:()=>{c||(c=!0,a.removeEventListener(m,o,n))}}}},6465:function(b,e,a){var m=this&&this.__decorate||function(t,p,d,r){var z,M=arguments.length,_=M<3?p:r===null?r=Object.getOwnPropertyDescriptor(p,d):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(t,p,d,r);else for(var L=t.length-1;L>=0;L--)(z=t[L])&&(_=(M<3?z(_):M>3?z(p,d,_):z(p,d))||_);return M>3&&_&&Object.defineProperty(p,d,_),_},o=this&&this.__param||function(t,p){return function(d,r){p(d,r,t)}};Object.defineProperty(e,"__esModule",{value:!0}),e.Linkifier2=void 0;let n=a(2585),c=a(8460),v=a(844),f=a(3656),i=class extends v.Disposable{constructor(t){super(),this._bufferService=t,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._activeLine=-1,this._onShowLinkUnderline=this.register(new c.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new c.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,v.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,v.toDisposable)(()=>{this._lastMouseEvent=void 0}))}get currentLink(){return this._currentLink}registerLinkProvider(t){return this._linkProviders.push(t),{dispose:()=>{let p=this._linkProviders.indexOf(t);p!==-1&&this._linkProviders.splice(p,1)}}}attachToDom(t,p,d){this._element=t,this._mouseService=p,this._renderService=d,this.register((0,f.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,f.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(t){if(this._lastMouseEvent=t,!this._element||!this._mouseService)return;let p=this._positionFromMouseEvent(t,this._element,this._mouseService);if(!p)return;this._isMouseOut=!1;let d=t.composedPath();for(let r=0;r<d.length;r++){let z=d[r];if(z.classList.contains("xterm"))break;if(z.classList.contains("xterm-hover"))return}this._lastBufferCell&&p.x===this._lastBufferCell.x&&p.y===this._lastBufferCell.y||(this._handleHover(p),this._lastBufferCell=p)}_handleHover(t){if(this._activeLine!==t.y)return this._clearCurrentLink(),void this._askForLink(t,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,t)||(this._clearCurrentLink(),this._askForLink(t,!0))}_askForLink(t,p){var d,r;this._activeProviderReplies&&p||((d=this._activeProviderReplies)===null||d===void 0||d.forEach(M=>{M==null||M.forEach(_=>{_.link.dispose&&_.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=t.y);let z=!1;for(let[M,_]of this._linkProviders.entries())p?!((r=this._activeProviderReplies)===null||r===void 0)&&r.get(M)&&(z=this._checkLinkProviderResult(M,t,z)):_.provideLinks(t.y,L=>{var S,y;if(this._isMouseOut)return;let A=L==null?void 0:L.map(H=>({link:H}));(S=this._activeProviderReplies)===null||S===void 0||S.set(M,A),z=this._checkLinkProviderResult(M,t,z),((y=this._activeProviderReplies)===null||y===void 0?void 0:y.size)===this._linkProviders.length&&this._removeIntersectingLinks(t.y,this._activeProviderReplies)})}_removeIntersectingLinks(t,p){let d=new Set;for(let r=0;r<p.size;r++){let z=p.get(r);if(z)for(let M=0;M<z.length;M++){let _=z[M],L=_.link.range.start.y<t?0:_.link.range.start.x,S=_.link.range.end.y>t?this._bufferService.cols:_.link.range.end.x;for(let y=L;y<=S;y++){if(d.has(y)){z.splice(M--,1);break}d.add(y)}}}}_checkLinkProviderResult(t,p,d){var r;if(!this._activeProviderReplies)return d;let z=this._activeProviderReplies.get(t),M=!1;for(let _=0;_<t;_++)this._activeProviderReplies.has(_)&&!this._activeProviderReplies.get(_)||(M=!0);if(!M&&z){let _=z.find(L=>this._linkAtPosition(L.link,p));_&&(d=!0,this._handleNewLink(_))}if(this._activeProviderReplies.size===this._linkProviders.length&&!d)for(let _=0;_<this._activeProviderReplies.size;_++){let L=(r=this._activeProviderReplies.get(_))===null||r===void 0?void 0:r.find(S=>this._linkAtPosition(S.link,p));if(L){d=!0,this._handleNewLink(L);break}}return d}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(t){if(!this._element||!this._mouseService||!this._currentLink)return;let p=this._positionFromMouseEvent(t,this._element,this._mouseService);p&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,p)&&this._currentLink.link.activate(t,this._currentLink.link.text)}_clearCurrentLink(t,p){this._element&&this._currentLink&&this._lastMouseEvent&&(!t||!p||this._currentLink.link.range.start.y>=t&&this._currentLink.link.range.end.y<=p)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,v.disposeArray)(this._linkCacheDisposables))}_handleNewLink(t){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;let p=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);p&&this._linkAtPosition(t.link,p)&&(this._currentLink=t,this._currentLink.state={decorations:{underline:t.link.decorations===void 0||t.link.decorations.underline,pointerCursor:t.link.decorations===void 0||t.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,t.link,this._lastMouseEvent),t.link.decorations={},Object.defineProperties(t.link.decorations,{pointerCursor:{get:()=>{var d,r;return(r=(d=this._currentLink)===null||d===void 0?void 0:d.state)===null||r===void 0?void 0:r.decorations.pointerCursor},set:d=>{var r,z;!((r=this._currentLink)===null||r===void 0)&&r.state&&this._currentLink.state.decorations.pointerCursor!==d&&(this._currentLink.state.decorations.pointerCursor=d,this._currentLink.state.isHovered&&((z=this._element)===null||z===void 0||z.classList.toggle("xterm-cursor-pointer",d)))}},underline:{get:()=>{var d,r;return(r=(d=this._currentLink)===null||d===void 0?void 0:d.state)===null||r===void 0?void 0:r.decorations.underline},set:d=>{var r,z,M;!((r=this._currentLink)===null||r===void 0)&&r.state&&((M=(z=this._currentLink)===null||z===void 0?void 0:z.state)===null||M===void 0?void 0:M.decorations.underline)!==d&&(this._currentLink.state.decorations.underline=d,this._currentLink.state.isHovered&&this._fireUnderlineEvent(t.link,d))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(d=>{let r=d.start===0?0:d.start+1+this._bufferService.buffer.ydisp,z=this._currentLink?this._lastMouseEvent:void 0;if(this._clearCurrentLink(r,d.end+1+this._bufferService.buffer.ydisp),z&&this._element){let M=this._positionFromMouseEvent(z,this._element,this._mouseService);M&&this._askForLink(M,!1)}})))}_linkHover(t,p,d){var r;!((r=this._currentLink)===null||r===void 0)&&r.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(p,!0),this._currentLink.state.decorations.pointerCursor&&t.classList.add("xterm-cursor-pointer")),p.hover&&p.hover(d,p.text)}_fireUnderlineEvent(t,p){let d=t.range,r=this._bufferService.buffer.ydisp,z=this._createLinkUnderlineEvent(d.start.x-1,d.start.y-r-1,d.end.x,d.end.y-r-1,void 0);(p?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(z)}_linkLeave(t,p,d){var r;!((r=this._currentLink)===null||r===void 0)&&r.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(p,!1),this._currentLink.state.decorations.pointerCursor&&t.classList.remove("xterm-cursor-pointer")),p.leave&&p.leave(d,p.text)}_linkAtPosition(t,p){let d=t.range.start.y*this._bufferService.cols+t.range.start.x,r=t.range.end.y*this._bufferService.cols+t.range.end.x,z=p.y*this._bufferService.cols+p.x;return d<=z&&z<=r}_positionFromMouseEvent(t,p,d){let r=d.getCoords(t,p,this._bufferService.cols,this._bufferService.rows);if(r)return{x:r[0],y:r[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(t,p,d,r,z){return{x1:t,y1:p,x2:d,y2:r,cols:this._bufferService.cols,fg:z}}};i=m([o(0,n.IBufferService)],i),e.Linkifier2=i},9042:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tooMuchOutput=e.promptLabel=void 0,e.promptLabel="Terminal input",e.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(b,e,a){var m=this&&this.__decorate||function(i,t,p,d){var r,z=arguments.length,M=z<3?t:d===null?d=Object.getOwnPropertyDescriptor(t,p):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(i,t,p,d);else for(var _=i.length-1;_>=0;_--)(r=i[_])&&(M=(z<3?r(M):z>3?r(t,p,M):r(t,p))||M);return z>3&&M&&Object.defineProperty(t,p,M),M},o=this&&this.__param||function(i,t){return function(p,d){t(p,d,i)}};Object.defineProperty(e,"__esModule",{value:!0}),e.OscLinkProvider=void 0;let n=a(511),c=a(2585),v=class{constructor(i,t,p){this._bufferService=i,this._optionsService=t,this._oscLinkService=p}provideLinks(i,t){var p;let d=this._bufferService.buffer.lines.get(i-1);if(!d)return void t(void 0);let r=[],z=this._optionsService.rawOptions.linkHandler,M=new n.CellData,_=d.getTrimmedLength(),L=-1,S=-1,y=!1;for(let A=0;A<_;A++)if(S!==-1||d.hasContent(A)){if(d.loadCell(A,M),M.hasExtendedAttrs()&&M.extended.urlId){if(S===-1){S=A,L=M.extended.urlId;continue}y=M.extended.urlId!==L}else S!==-1&&(y=!0);if(y||S!==-1&&A===_-1){let H=(p=this._oscLinkService.getLinkData(L))===null||p===void 0?void 0:p.uri;if(H){let T={start:{x:S+1,y:i},end:{x:A+(y||A!==_-1?0:1),y:i}},V=!1;if(!(z!=null&&z.allowNonHttpProtocols))try{let Z=new URL(H);["http:","https:"].includes(Z.protocol)||(V=!0)}catch(Z){V=!0}V||r.push({text:H,range:T,activate:(Z,B)=>z?z.activate(Z,B,T):f(0,B),hover:(Z,B)=>{var N;return(N=z==null?void 0:z.hover)===null||N===void 0?void 0:N.call(z,Z,B,T)},leave:(Z,B)=>{var N;return(N=z==null?void 0:z.leave)===null||N===void 0?void 0:N.call(z,Z,B,T)}})}y=!1,M.hasExtendedAttrs()&&M.extended.urlId?(S=A,L=M.extended.urlId):(S=-1,L=-1)}}t(r)}};function f(i,t){if(confirm(`Do you want to navigate to ${t}?

WARNING: This link could potentially be dangerous`)){let p=window.open();if(p){try{p.opener=null}catch(d){}p.location.href=t}else console.warn("Opening link blocked as opener could not be cleared")}}v=m([o(0,c.IBufferService),o(1,c.IOptionsService),o(2,c.IOscLinkService)],v),e.OscLinkProvider=v},6193:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RenderDebouncer=void 0,e.RenderDebouncer=class{constructor(a,m){this._parentWindow=a,this._renderCallback=m,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(a){return this._refreshCallbacks.push(a),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(a,m,o){this._rowCount=o,a=a!==void 0?a:0,m=m!==void 0?m:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,m):m,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();let a=Math.max(this._rowStart,0),m=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,m),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(let a of this._refreshCallbacks)a(0);this._refreshCallbacks=[]}}},5596:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ScreenDprMonitor=void 0;let m=a(844);class o extends m.Disposable{constructor(c){super(),this._parentWindow=c,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,m.toDisposable)(()=>{this.clearListener()}))}setListener(c){this._listener&&this.clearListener(),this._listener=c,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var c;this._outerListener&&((c=this._resolutionMediaMatchList)===null||c===void 0||c.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}e.ScreenDprMonitor=o},3236:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Terminal=void 0;let m=a(2950),o=a(1680),n=a(3614),c=a(2584),v=a(5435),f=a(9312),i=a(6114),t=a(3656),p=a(9042),d=a(4567),r=a(1296),z=a(7399),M=a(8460),_=a(8437),L=a(3230),S=a(4725),y=a(428),A=a(8934),H=a(6465),T=a(5114),V=a(8969),Z=a(8055),B=a(4269),N=a(5941),E=a(3107),P=a(5744),I=a(9074),U=a(2585),K=a(3730),Q=a(844),r0=a(6731),e0=typeof window!="undefined"?window.document:null;class c0 extends V.CoreTerminal{constructor(q={}){super(q),this.browser=i,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._onCursorMove=this.register(new M.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new M.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new M.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new M.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new M.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new M.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new M.EventEmitter),this._onBlur=this.register(new M.EventEmitter),this._onA11yCharEmitter=this.register(new M.EventEmitter),this._onA11yTabEmitter=this.register(new M.EventEmitter),this._onWillOpen=this.register(new M.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(H.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(K.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(I.DecorationService),this._instantiationService.setService(U.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((G,t0)=>this.refresh(G,t0))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(G=>this._reportWindowsOptions(G))),this.register(this._inputHandler.onColor(G=>this._handleColorEvent(G))),this.register((0,M.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,M.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,M.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(G=>this._afterResize(G.cols,G.rows))),this.register((0,Q.toDisposable)(()=>{var G,t0;this._customKeyEventHandler=void 0,(t0=(G=this.element)===null||G===void 0?void 0:G.parentNode)===null||t0===void 0||t0.removeChild(this.element)}))}get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}_handleColorEvent(q){if(this._themeService)for(let G of q){let t0,h0="";switch(G.index){case 256:t0="foreground",h0="10";break;case 257:t0="background",h0="11";break;case 258:t0="cursor",h0="12";break;default:t0="ansi",h0="4;"+G.index}switch(G.type){case 0:let A0=Z.color.toColorRGB(t0==="ansi"?this._themeService.colors.ansi[G.index]:this._themeService.colors[t0]);this.coreService.triggerDataEvent(`${c.C0.ESC}]${h0};${(0,N.toRgbString)(A0)}${c.C1_ESCAPED.ST}`);break;case 1:if(t0==="ansi")this._themeService.modifyColors(s0=>s0.ansi[G.index]=Z.rgba.toColor(...G.color));else{let s0=t0;this._themeService.modifyColors(H0=>H0[s0]=Z.rgba.toColor(...G.color))}break;case 2:this._themeService.restoreColor(G.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(q){var G;q?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new d.AccessibilityManager(this,this._renderService)):((G=this._accessibilityManager)===null||G===void 0||G.dispose(),this._accessibilityManager=void 0)}_handleTextAreaFocus(q){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(c.C0.ESC+"[I"),this.updateCursorStyle(q),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var q;return(q=this.textarea)===null||q===void 0?void 0:q.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(c.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;let q=this.buffer.ybase+this.buffer.y,G=this.buffer.lines.get(q);if(!G)return;let t0=Math.min(this.buffer.x,this.cols-1),h0=this._renderService.dimensions.css.cell.height,A0=G.getWidth(t0),s0=this._renderService.dimensions.css.cell.width*A0,H0=this.buffer.y*this._renderService.dimensions.css.cell.height,J=t0*this._renderService.dimensions.css.cell.width;this.textarea.style.left=J+"px",this.textarea.style.top=H0+"px",this.textarea.style.width=s0+"px",this.textarea.style.height=h0+"px",this.textarea.style.lineHeight=h0+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,t.addDisposableDomListener)(this.element,"copy",G=>{this.hasSelection()&&(0,n.copyHandler)(G,this._selectionService)}));let q=G=>(0,n.handlePasteEvent)(G,this.textarea,this.coreService);this.register((0,t.addDisposableDomListener)(this.textarea,"paste",q)),this.register((0,t.addDisposableDomListener)(this.element,"paste",q)),i.isFirefox?this.register((0,t.addDisposableDomListener)(this.element,"mousedown",G=>{G.button===2&&(0,n.rightClickHandler)(G,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,t.addDisposableDomListener)(this.element,"contextmenu",G=>{(0,n.rightClickHandler)(G,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),i.isLinux&&this.register((0,t.addDisposableDomListener)(this.element,"auxclick",G=>{G.button===1&&(0,n.moveTextAreaUnderMouseCursor)(G,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,t.addDisposableDomListener)(this.textarea,"keyup",q=>this._keyUp(q),!0)),this.register((0,t.addDisposableDomListener)(this.textarea,"keydown",q=>this._keyDown(q),!0)),this.register((0,t.addDisposableDomListener)(this.textarea,"keypress",q=>this._keyPress(q),!0)),this.register((0,t.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,t.addDisposableDomListener)(this.textarea,"compositionupdate",q=>this._compositionHelper.compositionupdate(q))),this.register((0,t.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,t.addDisposableDomListener)(this.textarea,"input",q=>this._inputEvent(q),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(q){var G;if(!q)throw new Error("Terminal requires a parent element.");q.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=q.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),q.appendChild(this.element);let t0=e0.createDocumentFragment();this._viewportElement=e0.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),t0.appendChild(this._viewportElement),this._viewportScrollArea=e0.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=e0.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=e0.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),t0.appendChild(this.screenElement),this.textarea=e0.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",p.promptLabel),i.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(T.CoreBrowserService,this.textarea,(G=this._document.defaultView)!==null&&G!==void 0?G:window),this._instantiationService.setService(S.ICoreBrowserService,this._coreBrowserService),this.register((0,t.addDisposableDomListener)(this.textarea,"focus",h0=>this._handleTextAreaFocus(h0))),this.register((0,t.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(y.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(S.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(r0.ThemeService),this._instantiationService.setService(S.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(B.CharacterJoinerService),this._instantiationService.setService(S.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(L.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(S.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(h0=>this._onRender.fire(h0))),this.onResize(h0=>this._renderService.resize(h0.cols,h0.rows)),this._compositionView=e0.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(m.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(t0);try{this._onWillOpen.fire(this.element)}catch(h0){}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(A.MouseService),this._instantiationService.setService(S.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(o.Viewport,h0=>this.scrollLines(h0,!0,1),this._viewportElement,this._viewportScrollArea),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(f.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(S.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(h0=>this.scrollLines(h0.amount,h0.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(h0=>this._renderService.handleSelectionChanged(h0.start,h0.end,h0.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(h0=>{this.textarea.value=h0,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(h0=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,t.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(E.BufferDecorationRenderer,this.screenElement)),this.register((0,t.addDisposableDomListener)(this.element,"mousedown",h0=>this._selectionService.handleMouseDown(h0))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new d.AccessibilityManager(this,this._renderService)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",h0=>this._handleScreenReaderModeOptionChange(h0))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(P.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",h0=>{!this._overviewRulerRenderer&&h0&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(P.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(r.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){let q=this,G=this.element;function t0(s0){let H0=q._mouseService.getMouseReportCoords(s0,q.screenElement);if(!H0)return!1;let J,D0;switch(s0.overrideType||s0.type){case"mousemove":D0=32,s0.buttons===void 0?(J=3,s0.button!==void 0&&(J=s0.button<3?s0.button:3)):J=1&s0.buttons?0:4&s0.buttons?1:2&s0.buttons?2:3;break;case"mouseup":D0=0,J=s0.button<3?s0.button:3;break;case"mousedown":D0=1,J=s0.button<3?s0.button:3;break;case"wheel":if(q.viewport.getLinesScrolled(s0)===0)return!1;D0=s0.deltaY<0?0:1,J=4;break;default:return!1}return!(D0===void 0||J===void 0||J>4)&&q.coreMouseService.triggerMouseEvent({col:H0.col,row:H0.row,x:H0.x,y:H0.y,button:J,action:D0,ctrl:s0.ctrlKey,alt:s0.altKey,shift:s0.shiftKey})}let h0={mouseup:null,wheel:null,mousedrag:null,mousemove:null},A0={mouseup:s0=>(t0(s0),s0.buttons||(this._document.removeEventListener("mouseup",h0.mouseup),h0.mousedrag&&this._document.removeEventListener("mousemove",h0.mousedrag)),this.cancel(s0)),wheel:s0=>(t0(s0),this.cancel(s0,!0)),mousedrag:s0=>{s0.buttons&&t0(s0)},mousemove:s0=>{s0.buttons||t0(s0)}};this.register(this.coreMouseService.onProtocolChange(s0=>{s0?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(s0)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&s0?h0.mousemove||(G.addEventListener("mousemove",A0.mousemove),h0.mousemove=A0.mousemove):(G.removeEventListener("mousemove",h0.mousemove),h0.mousemove=null),16&s0?h0.wheel||(G.addEventListener("wheel",A0.wheel,{passive:!1}),h0.wheel=A0.wheel):(G.removeEventListener("wheel",h0.wheel),h0.wheel=null),2&s0?h0.mouseup||(h0.mouseup=A0.mouseup):(this._document.removeEventListener("mouseup",h0.mouseup),h0.mouseup=null),4&s0?h0.mousedrag||(h0.mousedrag=A0.mousedrag):(this._document.removeEventListener("mousemove",h0.mousedrag),h0.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,t.addDisposableDomListener)(G,"mousedown",s0=>{if(s0.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(s0))return t0(s0),h0.mouseup&&this._document.addEventListener("mouseup",h0.mouseup),h0.mousedrag&&this._document.addEventListener("mousemove",h0.mousedrag),this.cancel(s0)})),this.register((0,t.addDisposableDomListener)(G,"wheel",s0=>{if(!h0.wheel){if(!this.buffer.hasScrollback){let H0=this.viewport.getLinesScrolled(s0);if(H0===0)return;let J=c.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(s0.deltaY<0?"A":"B"),D0="";for(let u0=0;u0<Math.abs(H0);u0++)D0+=J;return this.coreService.triggerDataEvent(D0,!0),this.cancel(s0,!0)}return this.viewport.handleWheel(s0)?this.cancel(s0):void 0}},{passive:!1})),this.register((0,t.addDisposableDomListener)(G,"touchstart",s0=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(s0),this.cancel(s0)},{passive:!0})),this.register((0,t.addDisposableDomListener)(G,"touchmove",s0=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(s0)?void 0:this.cancel(s0)},{passive:!1}))}refresh(q,G){var t0;(t0=this._renderService)===null||t0===void 0||t0.refreshRows(q,G)}updateCursorStyle(q){var G;!((G=this._selectionService)===null||G===void 0)&&G.shouldColumnSelect(q)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(q,G,t0=0){super.scrollLines(q,G,t0),this.refresh(0,this.rows-1)}paste(q){(0,n.paste)(q,this.textarea,this.coreService)}attachCustomKeyEventHandler(q){this._customKeyEventHandler=q}registerLinkProvider(q){return this.linkifier2.registerLinkProvider(q)}registerCharacterJoiner(q){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");let G=this._characterJoinerService.register(q);return this.refresh(0,this.rows-1),G}deregisterCharacterJoiner(q){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(q)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}addMarker(q){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+q)}registerDecoration(q){return this._decorationService.registerDecoration(q)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(q,G,t0){this._selectionService.setSelection(q,G,t0)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var q;(q=this._selectionService)===null||q===void 0||q.clearSelection()}selectAll(){var q;(q=this._selectionService)===null||q===void 0||q.selectAll()}selectLines(q,G){var t0;(t0=this._selectionService)===null||t0===void 0||t0.selectLines(q,G)}_keyDown(q){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(q)===!1)return!1;let G=this.browser.isMac&&this.options.macOptionIsMeta&&q.altKey;if(!G&&!this._compositionHelper.keydown(q))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this._bufferService.scrollToBottom(),!1;G||q.key!=="Dead"&&q.key!=="AltGraph"||(this._unprocessedDeadKey=!0);let t0=(0,z.evaluateKeyboardEvent)(q,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(q),t0.type===3||t0.type===2){let h0=this.rows-1;return this.scrollLines(t0.type===2?-h0:h0),this.cancel(q,!0)}return t0.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,q)||(t0.cancel&&this.cancel(q,!0),!t0.key||!!(q.key&&!q.ctrlKey&&!q.altKey&&!q.metaKey&&q.key.length===1&&q.key.charCodeAt(0)>=65&&q.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(t0.key!==c.C0.ETX&&t0.key!==c.C0.CR||(this.textarea.value=""),this._onKey.fire({key:t0.key,domEvent:q}),this._showCursor(),this.coreService.triggerDataEvent(t0.key,!0),!this.optionsService.rawOptions.screenReaderMode||q.altKey||q.ctrlKey?this.cancel(q,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(q,G){let t0=q.isMac&&!this.options.macOptionIsMeta&&G.altKey&&!G.ctrlKey&&!G.metaKey||q.isWindows&&G.altKey&&G.ctrlKey&&!G.metaKey||q.isWindows&&G.getModifierState("AltGraph");return G.type==="keypress"?t0:t0&&(!G.keyCode||G.keyCode>47)}_keyUp(q){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(q)===!1||(function(G){return G.keyCode===16||G.keyCode===17||G.keyCode===18}(q)||this.focus(),this.updateCursorStyle(q),this._keyPressHandled=!1)}_keyPress(q){let G;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(q)===!1)return!1;if(this.cancel(q),q.charCode)G=q.charCode;else if(q.which===null||q.which===void 0)G=q.keyCode;else{if(q.which===0||q.charCode===0)return!1;G=q.which}return!(!G||(q.altKey||q.ctrlKey||q.metaKey)&&!this._isThirdLevelShift(this.browser,q)||(G=String.fromCharCode(G),this._onKey.fire({key:G,domEvent:q}),this._showCursor(),this.coreService.triggerDataEvent(G,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(q){if(q.data&&q.inputType==="insertText"&&(!q.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;let G=q.data;return this.coreService.triggerDataEvent(G,!0),this.cancel(q),!0}return!1}resize(q,G){q!==this.cols||G!==this.rows?super.resize(q,G):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(q,G){var t0,h0;(t0=this._charSizeService)===null||t0===void 0||t0.measure(),(h0=this.viewport)===null||h0===void 0||h0.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let q=1;q<this.rows;q++)this.buffer.lines.push(this.buffer.getBlankLine(_.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire({position:this.buffer.ydisp,source:0})}}reset(){var q,G;this.options.rows=this.rows,this.options.cols=this.cols;let t0=this._customKeyEventHandler;this._setup(),super.reset(),(q=this._selectionService)===null||q===void 0||q.reset(),this._decorationService.reset(),this._customKeyEventHandler=t0,this.refresh(0,this.rows-1),(G=this.viewport)===null||G===void 0||G.syncScrollArea()}clearTextureAtlas(){var q;(q=this._renderService)===null||q===void 0||q.clearTextureAtlas()}_reportFocus(){var q;!((q=this.element)===null||q===void 0)&&q.classList.contains("focus")?this.coreService.triggerDataEvent(c.C0.ESC+"[I"):this.coreService.triggerDataEvent(c.C0.ESC+"[O")}_reportWindowsOptions(q){if(this._renderService)switch(q){case v.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:let G=this._renderService.dimensions.css.canvas.width.toFixed(0),t0=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${c.C0.ESC}[4;${t0};${G}t`);break;case v.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:let h0=this._renderService.dimensions.css.cell.width.toFixed(0),A0=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${c.C0.ESC}[6;${A0};${h0}t`)}}cancel(q,G){if(this.options.cancelEvents||G)return q.preventDefault(),q.stopPropagation(),!1}}e.Terminal=c0},9924:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TimeBasedDebouncer=void 0,e.TimeBasedDebouncer=class{constructor(a,m=1e3){this._renderCallback=a,this._debounceThresholdMS=m,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(a,m,o){this._rowCount=o,a=a!==void 0?a:0,m=m!==void 0?m:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,a):a,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,m):m;let n=Date.now();if(n-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=n,this._innerRefresh();else if(!this._additionalRefreshRequested){let c=n-this._lastRefreshMs,v=this._debounceThresholdMS-c;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},v)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;let a=Math.max(this._rowStart,0),m=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(a,m)}}},1680:function(b,e,a){var m=this&&this.__decorate||function(t,p,d,r){var z,M=arguments.length,_=M<3?p:r===null?r=Object.getOwnPropertyDescriptor(p,d):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(t,p,d,r);else for(var L=t.length-1;L>=0;L--)(z=t[L])&&(_=(M<3?z(_):M>3?z(p,d,_):z(p,d))||_);return M>3&&_&&Object.defineProperty(p,d,_),_},o=this&&this.__param||function(t,p){return function(d,r){p(d,r,t)}};Object.defineProperty(e,"__esModule",{value:!0}),e.Viewport=void 0;let n=a(844),c=a(3656),v=a(4725),f=a(2585),i=class extends n.Disposable{constructor(t,p,d,r,z,M,_,L,S){super(),this._scrollLines=t,this._viewportElement=p,this._scrollArea=d,this._bufferService=r,this._optionsService=z,this._charSizeService=M,this._renderService=_,this._coreBrowserService=L,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,c.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(y=>this._activeBuffer=y.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(y=>this._renderDimensions=y)),this._handleThemeChange(S.colors),this.register(S.onChangeColors(y=>this._handleThemeChange(y))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea(),0)}_handleThemeChange(t){this._viewportElement.style.backgroundColor=t.background.css}_refresh(t){if(t)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;let p=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==p&&(this._lastRecordedBufferHeight=p,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}let t=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==t&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=t),this._refreshAnimationFrame=null}syncScrollArea(t=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(t);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(t)}_handleScroll(t){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._scrollLines(0);let p=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(p)}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;let t=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(t*(this._smoothScrollState.target-this._smoothScrollState.origin)),t<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(t,p){let d=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(p<0&&this._viewportElement.scrollTop!==0||p>0&&d<this._lastRecordedBufferHeight)||(t.cancelable&&t.preventDefault(),!1)}handleWheel(t){let p=this._getPixelsScrolled(t);return p!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+p:this._smoothScrollState.target+=p,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=p,this._bubbleScroll(t,p))}_getPixelsScrolled(t){if(t.deltaY===0||t.shiftKey)return 0;let p=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_LINE?p*=this._currentRowHeight:t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(p*=this._currentRowHeight*this._bufferService.rows),p}getLinesScrolled(t){if(t.deltaY===0||t.shiftKey)return 0;let p=this._applyScrollModifier(t.deltaY,t);return t.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(p/=this._currentRowHeight+0,this._wheelPartialScroll+=p,p=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):t.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(p*=this._bufferService.rows),p}_applyScrollModifier(t,p){let d=this._optionsService.rawOptions.fastScrollModifier;return d==="alt"&&p.altKey||d==="ctrl"&&p.ctrlKey||d==="shift"&&p.shiftKey?t*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:t*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(t){this._lastTouchY=t.touches[0].pageY}handleTouchMove(t){let p=this._lastTouchY-t.touches[0].pageY;return this._lastTouchY=t.touches[0].pageY,p!==0&&(this._viewportElement.scrollTop+=p,this._bubbleScroll(t,p))}};i=m([o(3,f.IBufferService),o(4,f.IOptionsService),o(5,v.ICharSizeService),o(6,v.IRenderService),o(7,v.ICoreBrowserService),o(8,v.IThemeService)],i),e.Viewport=i},3107:function(b,e,a){var m=this&&this.__decorate||function(t,p,d,r){var z,M=arguments.length,_=M<3?p:r===null?r=Object.getOwnPropertyDescriptor(p,d):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(t,p,d,r);else for(var L=t.length-1;L>=0;L--)(z=t[L])&&(_=(M<3?z(_):M>3?z(p,d,_):z(p,d))||_);return M>3&&_&&Object.defineProperty(p,d,_),_},o=this&&this.__param||function(t,p){return function(d,r){p(d,r,t)}};Object.defineProperty(e,"__esModule",{value:!0}),e.BufferDecorationRenderer=void 0;let n=a(3656),c=a(4725),v=a(844),f=a(2585),i=class extends v.Disposable{constructor(t,p,d,r){super(),this._screenElement=t,this._bufferService=p,this._decorationService=d,this._renderService=r,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,n.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(z=>this._removeDecoration(z))),this.register((0,v.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(let t of this._decorationService.decorations)this._renderDecoration(t);this._dimensionsChanged=!1}_renderDecoration(t){this._refreshStyle(t),this._dimensionsChanged&&this._refreshXPosition(t)}_createElement(t){var p;let d=document.createElement("div");d.classList.add("xterm-decoration"),d.style.width=`${Math.round((t.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,d.style.height=(t.options.height||1)*this._renderService.dimensions.css.cell.height+"px",d.style.top=(t.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",d.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;let r=(p=t.options.x)!==null&&p!==void 0?p:0;return r&&r>this._bufferService.cols&&(d.style.display="none"),this._refreshXPosition(t,d),d}_refreshStyle(t){let p=t.marker.line-this._bufferService.buffers.active.ydisp;if(p<0||p>=this._bufferService.rows)t.element&&(t.element.style.display="none",t.onRenderEmitter.fire(t.element));else{let d=this._decorationElements.get(t);d||(d=this._createElement(t),t.element=d,this._decorationElements.set(t,d),this._container.appendChild(d)),d.style.top=p*this._renderService.dimensions.css.cell.height+"px",d.style.display=this._altBufferIsActive?"none":"block",t.onRenderEmitter.fire(d)}}_refreshXPosition(t,p=t.element){var d;if(!p)return;let r=(d=t.options.x)!==null&&d!==void 0?d:0;(t.options.anchor||"left")==="right"?p.style.right=r?r*this._renderService.dimensions.css.cell.width+"px":"":p.style.left=r?r*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(t){var p;(p=this._decorationElements.get(t))===null||p===void 0||p.remove(),this._decorationElements.delete(t),t.dispose()}};i=m([o(1,f.IBufferService),o(2,f.IDecorationService),o(3,c.IRenderService)],i),e.BufferDecorationRenderer=i},5871:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorZoneStore=void 0,e.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(a){if(a.options.overviewRulerOptions){for(let m of this._zones)if(m.color===a.options.overviewRulerOptions.color&&m.position===a.options.overviewRulerOptions.position){if(this._lineIntersectsZone(m,a.marker.line))return;if(this._lineAdjacentToZone(m,a.marker.line,a.options.overviewRulerOptions.position))return void this._addLineToZone(m,a.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=a.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=a.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=a.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=a.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:a.options.overviewRulerOptions.color,position:a.options.overviewRulerOptions.position,startBufferLine:a.marker.line,endBufferLine:a.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(a){this._linePadding=a}_lineIntersectsZone(a,m){return m>=a.startBufferLine&&m<=a.endBufferLine}_lineAdjacentToZone(a,m,o){return m>=a.startBufferLine-this._linePadding[o||"full"]&&m<=a.endBufferLine+this._linePadding[o||"full"]}_addLineToZone(a,m){a.startBufferLine=Math.min(a.startBufferLine,m),a.endBufferLine=Math.max(a.endBufferLine,m)}}},5744:function(b,e,a){var m=this&&this.__decorate||function(z,M,_,L){var S,y=arguments.length,A=y<3?M:L===null?L=Object.getOwnPropertyDescriptor(M,_):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(z,M,_,L);else for(var H=z.length-1;H>=0;H--)(S=z[H])&&(A=(y<3?S(A):y>3?S(M,_,A):S(M,_))||A);return y>3&&A&&Object.defineProperty(M,_,A),A},o=this&&this.__param||function(z,M){return function(_,L){M(_,L,z)}};Object.defineProperty(e,"__esModule",{value:!0}),e.OverviewRulerRenderer=void 0;let n=a(5871),c=a(3656),v=a(4725),f=a(844),i=a(2585),t={full:0,left:0,center:0,right:0},p={full:0,left:0,center:0,right:0},d={full:0,left:0,center:0,right:0},r=class extends f.Disposable{constructor(z,M,_,L,S,y,A){var H;super(),this._viewportElement=z,this._screenElement=M,this._bufferService=_,this._decorationService=L,this._renderService=S,this._optionsService=y,this._coreBrowseService=A,this._colorZoneStore=new n.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(H=this._viewportElement.parentElement)===null||H===void 0||H.insertBefore(this._canvas,this._viewportElement);let T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,f.toDisposable)(()=>{var V;(V=this._canvas)===null||V===void 0||V.remove()}))}get _width(){return this._optionsService.options.overviewRulerWidth||0}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,c.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){let z=Math.floor(this._canvas.width/3),M=Math.ceil(this._canvas.width/3);p.full=this._canvas.width,p.left=z,p.center=M,p.right=z,this._refreshDrawHeightConstants(),d.full=0,d.left=0,d.center=p.left,d.right=p.left+p.center}_refreshDrawHeightConstants(){t.full=Math.round(2*this._coreBrowseService.dpr);let z=this._canvas.height/this._bufferService.buffer.lines.length,M=Math.round(Math.max(Math.min(z,12),6)*this._coreBrowseService.dpr);t.left=M,t.center=M,t.right=M}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*t.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(let M of this._decorationService.decorations)this._colorZoneStore.addDecoration(M);this._ctx.lineWidth=1;let z=this._colorZoneStore.zones;for(let M of z)M.position!=="full"&&this._renderColorZone(M);for(let M of z)M.position==="full"&&this._renderColorZone(M);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(z){this._ctx.fillStyle=z.color,this._ctx.fillRect(d[z.position||"full"],Math.round((this._canvas.height-1)*(z.startBufferLine/this._bufferService.buffers.active.lines.length)-t[z.position||"full"]/2),p[z.position||"full"],Math.round((this._canvas.height-1)*((z.endBufferLine-z.startBufferLine)/this._bufferService.buffers.active.lines.length)+t[z.position||"full"]))}_queueRefresh(z,M){this._shouldUpdateDimensions=z||this._shouldUpdateDimensions,this._shouldUpdateAnchor=M||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};r=m([o(2,i.IBufferService),o(3,i.IDecorationService),o(4,v.IRenderService),o(5,i.IOptionsService),o(6,v.ICoreBrowserService)],r),e.OverviewRulerRenderer=r},2950:function(b,e,a){var m=this&&this.__decorate||function(i,t,p,d){var r,z=arguments.length,M=z<3?t:d===null?d=Object.getOwnPropertyDescriptor(t,p):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(i,t,p,d);else for(var _=i.length-1;_>=0;_--)(r=i[_])&&(M=(z<3?r(M):z>3?r(t,p,M):r(t,p))||M);return z>3&&M&&Object.defineProperty(t,p,M),M},o=this&&this.__param||function(i,t){return function(p,d){t(p,d,i)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CompositionHelper=void 0;let n=a(4725),c=a(2585),v=a(2584),f=class{constructor(i,t,p,d,r,z){this._textarea=i,this._compositionView=t,this._bufferService=p,this._optionsService=d,this._coreService=r,this._renderService=z,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}get isComposing(){return this._isComposing}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(i){this._compositionView.textContent=i.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(i){if(this._isComposing||this._isSendingComposition){if(i.keyCode===229||i.keyCode===16||i.keyCode===17||i.keyCode===18)return!1;this._finalizeComposition(!1)}return i.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(i){if(this._compositionView.classList.remove("active"),this._isComposing=!1,i){let t={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let p;this._isSendingComposition=!1,t.start+=this._dataAlreadySent.length,p=this._isComposing?this._textarea.value.substring(t.start,t.end):this._textarea.value.substring(t.start),p.length>0&&this._coreService.triggerDataEvent(p,!0)}},0)}else{this._isSendingComposition=!1;let t=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(t,!0)}}_handleAnyTextareaChanges(){let i=this._textarea.value;setTimeout(()=>{if(!this._isComposing){let t=this._textarea.value,p=t.replace(i,"");this._dataAlreadySent=p,t.length>i.length?this._coreService.triggerDataEvent(p,!0):t.length<i.length?this._coreService.triggerDataEvent(`${v.C0.DEL}`,!0):t.length===i.length&&t!==i&&this._coreService.triggerDataEvent(t,!0)}},0)}updateCompositionElements(i){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){let t=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),p=this._renderService.dimensions.css.cell.height,d=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,r=t*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=r+"px",this._compositionView.style.top=d+"px",this._compositionView.style.height=p+"px",this._compositionView.style.lineHeight=p+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";let z=this._compositionView.getBoundingClientRect();this._textarea.style.left=r+"px",this._textarea.style.top=d+"px",this._textarea.style.width=Math.max(z.width,1)+"px",this._textarea.style.height=Math.max(z.height,1)+"px",this._textarea.style.lineHeight=z.height+"px"}i||setTimeout(()=>this.updateCompositionElements(!0),0)}}};f=m([o(2,c.IBufferService),o(3,c.IOptionsService),o(4,c.ICoreService),o(5,n.IRenderService)],f),e.CompositionHelper=f},9806:(b,e)=>{function a(m,o,n){let c=n.getBoundingClientRect(),v=m.getComputedStyle(n),f=parseInt(v.getPropertyValue("padding-left")),i=parseInt(v.getPropertyValue("padding-top"));return[o.clientX-c.left-f,o.clientY-c.top-i]}Object.defineProperty(e,"__esModule",{value:!0}),e.getCoords=e.getCoordsRelativeToElement=void 0,e.getCoordsRelativeToElement=a,e.getCoords=function(m,o,n,c,v,f,i,t,p){if(!f)return;let d=a(m,o,n);return d?(d[0]=Math.ceil((d[0]+(p?i/2:0))/i),d[1]=Math.ceil(d[1]/t),d[0]=Math.min(Math.max(d[0],1),c+(p?1:0)),d[1]=Math.min(Math.max(d[1],1),v),d):void 0}},9504:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.moveToCellSequence=void 0;let m=a(2584);function o(t,p,d,r){let z=t-n(t,d),M=p-n(p,d),_=Math.abs(z-M)-function(L,S,y){let A=0,H=L-n(L,y),T=S-n(S,y);for(let V=0;V<Math.abs(H-T);V++){let Z=c(L,S)==="A"?-1:1,B=y.buffer.lines.get(H+Z*V);B!=null&&B.isWrapped&&A++}return A}(t,p,d);return i(_,f(c(t,p),r))}function n(t,p){let d=0,r=p.buffer.lines.get(t),z=r==null?void 0:r.isWrapped;for(;z&&t>=0&&t<p.rows;)d++,r=p.buffer.lines.get(--t),z=r==null?void 0:r.isWrapped;return d}function c(t,p){return t>p?"A":"B"}function v(t,p,d,r,z,M){let _=t,L=p,S="";for(;_!==d||L!==r;)_+=z?1:-1,z&&_>M.cols-1?(S+=M.buffer.translateBufferLineToString(L,!1,t,_),_=0,t=0,L++):!z&&_<0&&(S+=M.buffer.translateBufferLineToString(L,!1,0,t+1),_=M.cols-1,t=_,L--);return S+M.buffer.translateBufferLineToString(L,!1,t,_)}function f(t,p){let d=p?"O":"[";return m.C0.ESC+d+t}function i(t,p){t=Math.floor(t);let d="";for(let r=0;r<t;r++)d+=p;return d}e.moveToCellSequence=function(t,p,d,r){let z=d.buffer.x,M=d.buffer.y;if(!d.buffer.hasScrollback)return function(S,y,A,H,T,V){return o(y,H,T,V).length===0?"":i(v(S,y,S,y-n(y,T),!1,T).length,f("D",V))}(z,M,0,p,d,r)+o(M,p,d,r)+function(S,y,A,H,T,V){let Z;Z=o(y,H,T,V).length>0?H-n(H,T):y;let B=H,N=function(E,P,I,U,K,Q){let r0;return r0=o(I,U,K,Q).length>0?U-n(U,K):P,E<I&&r0<=U||E>=I&&r0<U?"C":"D"}(S,y,A,H,T,V);return i(v(S,Z,A,B,N==="C",T).length,f(N,V))}(z,M,t,p,d,r);let _;if(M===p)return _=z>t?"D":"C",i(Math.abs(z-t),f(_,r));_=M>p?"D":"C";let L=Math.abs(M-p);return i(function(S,y){return y.cols-S}(M>p?t:z,d)+(L-1)*d.cols+1+((M>p?z:t)-1),f(_,r))}},1296:function(b,e,a){var m=this&&this.__decorate||function(S,y,A,H){var T,V=arguments.length,Z=V<3?y:H===null?H=Object.getOwnPropertyDescriptor(y,A):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Z=Reflect.decorate(S,y,A,H);else for(var B=S.length-1;B>=0;B--)(T=S[B])&&(Z=(V<3?T(Z):V>3?T(y,A,Z):T(y,A))||Z);return V>3&&Z&&Object.defineProperty(y,A,Z),Z},o=this&&this.__param||function(S,y){return function(A,H){y(A,H,S)}};Object.defineProperty(e,"__esModule",{value:!0}),e.DomRenderer=void 0;let n=a(9631),c=a(3787),v=a(2223),f=a(6171),i=a(4725),t=a(8055),p=a(8460),d=a(844),r=a(2585),z="xterm-dom-renderer-owner-",M="xterm-focus",_=1,L=class extends d.Disposable{constructor(S,y,A,H,T,V,Z,B,N,E){super(),this._element=S,this._screenElement=y,this._viewportElement=A,this._linkifier2=H,this._charSizeService=V,this._optionsService=Z,this._bufferService=B,this._coreBrowserService=N,this._terminalClass=_++,this._rowElements=[],this._cellToRowElements=[],this.onRequestRedraw=this.register(new p.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add("xterm-rows"),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add("xterm-selection"),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,f.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(E.onChangeColors(P=>this._injectCss(P))),this._injectCss(E.colors),this._rowFactory=T.createInstance(c.DomRendererRowFactory,document),this._element.classList.add(z+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(P=>this._handleLinkHover(P))),this.register(this._linkifier2.onHideLinkUnderline(P=>this._handleLinkLeave(P))),this.register((0,d.toDisposable)(()=>{this._element.classList.remove(z+this._terminalClass),(0,n.removeElementFromParent)(this._rowContainer,this._selectionContainer,this._themeStyleElement,this._dimensionsStyleElement)}))}_updateDimensions(){let S=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*S,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*S),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/S),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/S),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(let A of this._rowElements)A.style.width=`${this.dimensions.css.canvas.width}px`,A.style.height=`${this.dimensions.css.cell.height}px`,A.style.lineHeight=`${this.dimensions.css.cell.height}px`,A.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));let y=`${this._terminalSelector} .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: ${this.dimensions.css.cell.width}px}`;this._dimensionsStyleElement.textContent=y,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(S){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let y=`${this._terminalSelector} .xterm-rows { color: ${S.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px;}`;y+=`${this._terminalSelector} span:not(.${c.BOLD_CLASS}) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.${c.BOLD_CLASS} { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.${c.ITALIC_CLASS} { font-style: italic;}`,y+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",y+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${S.cursor.css};  color: ${S.cursorAccent.css}; } 50% {  background-color: ${S.cursorAccent.css};  color: ${S.cursor.css}; }}`,y+=`${this._terminalSelector} .xterm-rows:not(.xterm-focus) .${c.CURSOR_CLASS}.${c.CURSOR_STYLE_BLOCK_CLASS} { outline: 1px solid ${S.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .xterm-rows.xterm-focus .${c.CURSOR_CLASS}.${c.CURSOR_BLINK_CLASS}:not(.${c.CURSOR_STYLE_BLOCK_CLASS}) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .xterm-rows.xterm-focus .${c.CURSOR_CLASS}.${c.CURSOR_BLINK_CLASS}.${c.CURSOR_STYLE_BLOCK_CLASS} { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .xterm-rows.xterm-focus .${c.CURSOR_CLASS}.${c.CURSOR_STYLE_BLOCK_CLASS} { background-color: ${S.cursor.css}; color: ${S.cursorAccent.css};}${this._terminalSelector} .xterm-rows .${c.CURSOR_CLASS}.${c.CURSOR_STYLE_BAR_CLASS} { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${S.cursor.css} inset;}${this._terminalSelector} .xterm-rows .${c.CURSOR_CLASS}.${c.CURSOR_STYLE_UNDERLINE_CLASS} { box-shadow: 0 -1px 0 ${S.cursor.css} inset;}`,y+=`${this._terminalSelector} .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .xterm-selection div { position: absolute; background-color: ${S.selectionBackgroundOpaque.css};}${this._terminalSelector} .xterm-selection div { position: absolute; background-color: ${S.selectionInactiveBackgroundOpaque.css};}`;for(let[A,H]of S.ansi.entries())y+=`${this._terminalSelector} .xterm-fg-${A} { color: ${H.css}; }${this._terminalSelector} .xterm-bg-${A} { background-color: ${H.css}; }`;y+=`${this._terminalSelector} .xterm-fg-${v.INVERTED_DEFAULT_COLOR} { color: ${t.color.opaque(S.background).css}; }${this._terminalSelector} .xterm-bg-${v.INVERTED_DEFAULT_COLOR} { background-color: ${S.foreground.css}; }`,this._themeStyleElement.textContent=y}handleDevicePixelRatioChange(){this._updateDimensions()}_refreshRowElements(S,y){for(let A=this._rowElements.length;A<=y;A++){let H=document.createElement("div");this._rowContainer.appendChild(H),this._rowElements.push(H)}for(;this._rowElements.length>y;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(S,y){this._refreshRowElements(S,y),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions()}handleBlur(){this._rowContainer.classList.remove(M)}handleFocus(){this._rowContainer.classList.add(M)}handleSelectionChanged(S,y,A){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(this._rowFactory.handleSelectionChanged(S,y,A),this.renderRows(0,this._bufferService.rows-1),!S||!y)return;let H=S[1]-this._bufferService.buffer.ydisp,T=y[1]-this._bufferService.buffer.ydisp,V=Math.max(H,0),Z=Math.min(T,this._bufferService.rows-1);if(V>=this._bufferService.rows||Z<0)return;let B=document.createDocumentFragment();if(A){let N=S[0]>y[0];B.appendChild(this._createSelectionElement(V,N?y[0]:S[0],N?S[0]:y[0],Z-V+1))}else{let N=H===V?S[0]:0,E=V===T?y[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(V,N,E));let P=Z-V-1;if(B.appendChild(this._createSelectionElement(V+1,0,this._bufferService.cols,P)),V!==Z){let I=T===Z?y[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(Z,0,I))}}this._selectionContainer.appendChild(B)}_createSelectionElement(S,y,A,H=1){let T=document.createElement("div");return T.style.height=H*this.dimensions.css.cell.height+"px",T.style.top=S*this.dimensions.css.cell.height+"px",T.style.left=y*this.dimensions.css.cell.width+"px",T.style.width=this.dimensions.css.cell.width*(A-y)+"px",T}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions()}clear(){for(let S of this._rowElements)S.replaceChildren()}renderRows(S,y){let A=this._bufferService.buffer.ybase+this._bufferService.buffer.y,H=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),T=this._optionsService.rawOptions.cursorBlink;for(let V=S;V<=y;V++){let Z=this._rowElements[V],B=V+this._bufferService.buffer.ydisp,N=this._bufferService.buffer.lines.get(B),E=this._optionsService.rawOptions.cursorStyle;this._cellToRowElements[V]&&this._cellToRowElements[V].length===this._bufferService.cols||(this._cellToRowElements[V]=new Int16Array(this._bufferService.cols)),Z.replaceChildren(this._rowFactory.createRow(N,B,B===A,E,H,T,this.dimensions.css.cell.width,this._bufferService.cols,this._cellToRowElements[V]))}}get _terminalSelector(){return`.${z}${this._terminalClass}`}_handleLinkHover(S){this._setCellUnderline(S.x1,S.x2,S.y1,S.y2,S.cols,!0)}_handleLinkLeave(S){this._setCellUnderline(S.x1,S.x2,S.y1,S.y2,S.cols,!1)}_setCellUnderline(S,y,A,H,T,V){if(S=this._cellToRowElements[A][S],y=this._cellToRowElements[H][y],S!==-1&&y!==-1)for(;S!==y||A!==H;){let Z=this._rowElements[A];if(!Z)return;let B=Z.children[S];B&&(B.style.textDecoration=V?"underline":"none"),++S>=T&&(S=0,A++)}}};L=m([o(4,r.IInstantiationService),o(5,i.ICharSizeService),o(6,r.IOptionsService),o(7,r.IBufferService),o(8,i.ICoreBrowserService),o(9,i.IThemeService)],L),e.DomRenderer=L},3787:function(b,e,a){var m=this&&this.__decorate||function(_,L,S,y){var A,H=arguments.length,T=H<3?L:y===null?y=Object.getOwnPropertyDescriptor(L,S):y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(_,L,S,y);else for(var V=_.length-1;V>=0;V--)(A=_[V])&&(T=(H<3?A(T):H>3?A(L,S,T):A(L,S))||T);return H>3&&T&&Object.defineProperty(L,S,T),T},o=this&&this.__param||function(_,L){return function(S,y){L(S,y,_)}};Object.defineProperty(e,"__esModule",{value:!0}),e.DomRendererRowFactory=e.CURSOR_STYLE_UNDERLINE_CLASS=e.CURSOR_STYLE_BAR_CLASS=e.CURSOR_STYLE_BLOCK_CLASS=e.CURSOR_BLINK_CLASS=e.CURSOR_CLASS=e.STRIKETHROUGH_CLASS=e.UNDERLINE_CLASS=e.ITALIC_CLASS=e.DIM_CLASS=e.BOLD_CLASS=void 0;let n=a(2223),c=a(643),v=a(511),f=a(2585),i=a(8055),t=a(4725),p=a(4269),d=a(6171),r=a(3734);e.BOLD_CLASS="xterm-bold",e.DIM_CLASS="xterm-dim",e.ITALIC_CLASS="xterm-italic",e.UNDERLINE_CLASS="xterm-underline",e.STRIKETHROUGH_CLASS="xterm-strikethrough",e.CURSOR_CLASS="xterm-cursor",e.CURSOR_BLINK_CLASS="xterm-cursor-blink",e.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",e.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",e.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";let z=class{constructor(_,L,S,y,A,H,T){this._document=_,this._characterJoinerService=L,this._optionsService=S,this._coreBrowserService=y,this._coreService=A,this._decorationService=H,this._themeService=T,this._workCell=new v.CellData,this._columnSelectMode=!1}handleSelectionChanged(_,L,S){this._selectionStart=_,this._selectionEnd=L,this._columnSelectMode=S}createRow(_,L,S,y,A,H,T,V,Z){let B=this._document.createDocumentFragment(),N=this._characterJoinerService.getJoinedCharacters(L),E=0;for(let K=Math.min(_.length,V)-1;K>=0;K--)if(_.loadCell(K,this._workCell).getCode()!==c.NULL_CELL_CODE||S&&K===A){E=K+1;break}let P=this._themeService.colors,I=-1,U=0;for(;U<E;U++){_.loadCell(U,this._workCell);let K=this._workCell.getWidth();if(K===0){Z[U]=I;continue}let Q=!1,r0=U,e0=this._workCell;if(N.length>0&&U===N[0][0]){Q=!0;let u0=N.shift();e0=new p.JoinedCellData(this._workCell,_.translateToString(!0,u0[0],u0[1]),u0[1]-u0[0]),r0=u0[1]-1,K=e0.getWidth()}let c0=this._document.createElement("span");if(K>1&&(c0.style.width=T*K+"px"),Q&&(c0.style.display="inline",A>=U&&A<=r0&&(A=U)),!this._coreService.isCursorHidden&&S&&U===A)switch(c0.classList.add(e.CURSOR_CLASS),H&&c0.classList.add(e.CURSOR_BLINK_CLASS),y){case"bar":c0.classList.add(e.CURSOR_STYLE_BAR_CLASS);break;case"underline":c0.classList.add(e.CURSOR_STYLE_UNDERLINE_CLASS);break;default:c0.classList.add(e.CURSOR_STYLE_BLOCK_CLASS)}if(e0.isBold()&&c0.classList.add(e.BOLD_CLASS),e0.isItalic()&&c0.classList.add(e.ITALIC_CLASS),e0.isDim()&&c0.classList.add(e.DIM_CLASS),e0.isInvisible()?c0.textContent=c.WHITESPACE_CELL_CHAR:c0.textContent=e0.getChars()||c.WHITESPACE_CELL_CHAR,e0.isUnderline()&&(c0.classList.add(`${e.UNDERLINE_CLASS}-${e0.extended.underlineStyle}`),c0.textContent===" "&&(c0.textContent="\xA0"),!e0.isUnderlineColorDefault()))if(e0.isUnderlineColorRGB())c0.style.textDecorationColor=`rgb(${r.AttributeData.toColorRGB(e0.getUnderlineColor()).join(",")})`;else{let u0=e0.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&e0.isBold()&&u0<8&&(u0+=8),c0.style.textDecorationColor=P.ansi[u0].css}e0.isStrikethrough()&&c0.classList.add(e.STRIKETHROUGH_CLASS);let j=e0.getFgColor(),q=e0.getFgColorMode(),G=e0.getBgColor(),t0=e0.getBgColorMode(),h0=!!e0.isInverse();if(h0){let u0=j;j=G,G=u0;let H2=q;q=t0,t0=H2}let A0,s0,H0=!1;this._decorationService.forEachDecorationAtCell(U,L,void 0,u0=>{u0.options.layer!=="top"&&H0||(u0.backgroundColorRGB&&(t0=50331648,G=u0.backgroundColorRGB.rgba>>8&16777215,A0=u0.backgroundColorRGB),u0.foregroundColorRGB&&(q=50331648,j=u0.foregroundColorRGB.rgba>>8&16777215,s0=u0.foregroundColorRGB),H0=u0.options.layer==="top")});let J=this._isCellInSelection(U,L),D0;switch(H0||P.selectionForeground&&J&&(q=50331648,j=P.selectionForeground.rgba>>8&16777215,s0=P.selectionForeground),J&&(A0=this._coreBrowserService.isFocused?P.selectionBackgroundOpaque:P.selectionInactiveBackgroundOpaque,H0=!0),H0&&c0.classList.add("xterm-decoration-top"),t0){case 16777216:case 33554432:D0=P.ansi[G],c0.classList.add(`xterm-bg-${G}`);break;case 50331648:D0=i.rgba.toColor(G>>16,G>>8&255,255&G),this._addStyle(c0,`background-color:#${M((G>>>0).toString(16),"0",6)}`);break;default:h0?(D0=P.foreground,c0.classList.add(`xterm-bg-${n.INVERTED_DEFAULT_COLOR}`)):D0=P.background}switch(A0||e0.isDim()&&(A0=i.color.multiplyOpacity(D0,.5)),q){case 16777216:case 33554432:e0.isBold()&&j<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(j+=8),this._applyMinimumContrast(c0,D0,P.ansi[j],e0,A0,void 0)||c0.classList.add(`xterm-fg-${j}`);break;case 50331648:let u0=i.rgba.toColor(j>>16&255,j>>8&255,255&j);this._applyMinimumContrast(c0,D0,u0,e0,A0,s0)||this._addStyle(c0,`color:#${M(j.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(c0,D0,P.foreground,e0,A0,void 0)||h0&&c0.classList.add(`xterm-fg-${n.INVERTED_DEFAULT_COLOR}`)}B.appendChild(c0),Z[U]=++I,U=r0}return U<V-1&&Z.subarray(U).fill(++I),B}_applyMinimumContrast(_,L,S,y,A,H){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,d.excludeFromContrastRatioDemands)(y.getCode()))return!1;let T;return A||H||(T=this._themeService.colors.contrastCache.getColor(L.rgba,S.rgba)),T===void 0&&(T=i.color.ensureContrastRatio(A||L,H||S,this._optionsService.rawOptions.minimumContrastRatio),this._themeService.colors.contrastCache.setColor((A||L).rgba,(H||S).rgba,T!=null?T:null)),!!T&&(this._addStyle(_,`color:${T.css}`),!0)}_addStyle(_,L){_.setAttribute("style",`${_.getAttribute("style")||""}${L};`)}_isCellInSelection(_,L){let S=this._selectionStart,y=this._selectionEnd;return!(!S||!y)&&(this._columnSelectMode?S[0]<=y[0]?_>=S[0]&&L>=S[1]&&_<y[0]&&L<=y[1]:_<S[0]&&L>=S[1]&&_>=y[0]&&L<=y[1]:L>S[1]&&L<y[1]||S[1]===y[1]&&L===S[1]&&_>=S[0]&&_<y[0]||S[1]<y[1]&&L===y[1]&&_<y[0]||S[1]<y[1]&&L===S[1]&&_>=S[0])}};function M(_,L,S){for(;_.length<S;)_=L+_;return _}z=m([o(1,t.ICharacterJoinerService),o(2,f.IOptionsService),o(3,t.ICoreBrowserService),o(4,f.ICoreService),o(5,f.IDecorationService),o(6,t.IThemeService)],z),e.DomRendererRowFactory=z},2223:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TEXT_BASELINE=e.DIM_OPACITY=e.INVERTED_DEFAULT_COLOR=void 0;let m=a(6114);e.INVERTED_DEFAULT_COLOR=257,e.DIM_OPACITY=.5,e.TEXT_BASELINE=m.isFirefox||m.isLegacyEdge?"bottom":"ideographic"},6171:(b,e)=>{function a(m){return 57508<=m&&m<=57558}Object.defineProperty(e,"__esModule",{value:!0}),e.createRenderDimensions=e.excludeFromContrastRatioDemands=e.isRestrictedPowerlineGlyph=e.isPowerlineGlyph=e.throwIfFalsy=void 0,e.throwIfFalsy=function(m){if(!m)throw new Error("value must not be falsy");return m},e.isPowerlineGlyph=a,e.isRestrictedPowerlineGlyph=function(m){return 57520<=m&&m<=57527},e.excludeFromContrastRatioDemands=function(m){return a(m)||function(o){return 9472<=o&&o<=9631}(m)},e.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionModel=void 0,e.SelectionModel=class{constructor(a){this._bufferService=a,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){let a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?a%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)-1]:[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[a,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){let a=this.selectionStart[0]+this.selectionStartLength;return a>this._bufferService.cols?[a%this._bufferService.cols,this.selectionStart[1]+Math.floor(a/this._bufferService.cols)]:[Math.max(a,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){let a=this.selectionStart,m=this.selectionEnd;return!(!a||!m)&&(a[1]>m[1]||a[1]===m[1]&&a[0]>m[0])}handleTrim(a){return this.selectionStart&&(this.selectionStart[1]-=a),this.selectionEnd&&(this.selectionEnd[1]-=a),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(b,e,a){var m=this&&this.__decorate||function(t,p,d,r){var z,M=arguments.length,_=M<3?p:r===null?r=Object.getOwnPropertyDescriptor(p,d):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(t,p,d,r);else for(var L=t.length-1;L>=0;L--)(z=t[L])&&(_=(M<3?z(_):M>3?z(p,d,_):z(p,d))||_);return M>3&&_&&Object.defineProperty(p,d,_),_},o=this&&this.__param||function(t,p){return function(d,r){p(d,r,t)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CharSizeService=void 0;let n=a(2585),c=a(8460),v=a(844),f=class extends v.Disposable{constructor(t,p,d){super(),this._optionsService=d,this.width=0,this.height=0,this._onCharSizeChange=this.register(new c.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new i(t,p,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}get hasValidSize(){return this.width>0&&this.height>0}measure(){let t=this._measureStrategy.measure();t.width===this.width&&t.height===this.height||(this.width=t.width,this.height=t.height,this._onCharSizeChange.fire())}};f=m([o(2,n.IOptionsService)],f),e.CharSizeService=f;class i{constructor(p,d,r){this._document=p,this._parentElement=d,this._optionsService=r,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;let p=this._measureElement.getBoundingClientRect();return p.width!==0&&p.height!==0&&(this._result.width=p.width,this._result.height=Math.ceil(p.height)),this._result}}},4269:function(b,e,a){var m=this&&this.__decorate||function(p,d,r,z){var M,_=arguments.length,L=_<3?d:z===null?z=Object.getOwnPropertyDescriptor(d,r):z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(p,d,r,z);else for(var S=p.length-1;S>=0;S--)(M=p[S])&&(L=(_<3?M(L):_>3?M(d,r,L):M(d,r))||L);return _>3&&L&&Object.defineProperty(d,r,L),L},o=this&&this.__param||function(p,d){return function(r,z){d(r,z,p)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterJoinerService=e.JoinedCellData=void 0;let n=a(3734),c=a(643),v=a(511),f=a(2585);class i extends n.AttributeData{constructor(d,r,z){super(),this.content=0,this.combinedData="",this.fg=d.fg,this.bg=d.bg,this.combinedData=r,this._width=z}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(d){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}e.JoinedCellData=i;let t=class Ut{constructor(d){this._bufferService=d,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new v.CellData}register(d){let r={id:this._nextCharacterJoinerId++,handler:d};return this._characterJoiners.push(r),r.id}deregister(d){for(let r=0;r<this._characterJoiners.length;r++)if(this._characterJoiners[r].id===d)return this._characterJoiners.splice(r,1),!0;return!1}getJoinedCharacters(d){if(this._characterJoiners.length===0)return[];let r=this._bufferService.buffer.lines.get(d);if(!r||r.length===0)return[];let z=[],M=r.translateToString(!0),_=0,L=0,S=0,y=r.getFg(0),A=r.getBg(0);for(let H=0;H<r.getTrimmedLength();H++)if(r.loadCell(H,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==y||this._workCell.bg!==A){if(H-_>1){let T=this._getJoinedRanges(M,S,L,r,_);for(let V=0;V<T.length;V++)z.push(T[V])}_=H,S=L,y=this._workCell.fg,A=this._workCell.bg}L+=this._workCell.getChars().length||c.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-_>1){let H=this._getJoinedRanges(M,S,L,r,_);for(let T=0;T<H.length;T++)z.push(H[T])}return z}_getJoinedRanges(d,r,z,M,_){let L=d.substring(r,z),S=[];try{S=this._characterJoiners[0].handler(L)}catch(y){console.error(y)}for(let y=1;y<this._characterJoiners.length;y++)try{let A=this._characterJoiners[y].handler(L);for(let H=0;H<A.length;H++)Ut._mergeRanges(S,A[H])}catch(A){console.error(A)}return this._stringRangesToCellRanges(S,M,_),S}_stringRangesToCellRanges(d,r,z){let M=0,_=!1,L=0,S=d[M];if(S){for(let y=z;y<this._bufferService.cols;y++){let A=r.getWidth(y),H=r.getString(y).length||c.WHITESPACE_CELL_CHAR.length;if(A!==0){if(!_&&S[0]<=L&&(S[0]=y,_=!0),S[1]<=L){if(S[1]=y,S=d[++M],!S)break;S[0]<=L?(S[0]=y,_=!0):_=!1}L+=H}}S&&(S[1]=this._bufferService.cols)}}static _mergeRanges(d,r){let z=!1;for(let M=0;M<d.length;M++){let _=d[M];if(z){if(r[1]<=_[0])return d[M-1][1]=r[1],d;if(r[1]<=_[1])return d[M-1][1]=Math.max(r[1],_[1]),d.splice(M,1),d;d.splice(M,1),M--}else{if(r[1]<=_[0])return d.splice(M,0,r),d;if(r[1]<=_[1])return _[0]=Math.min(r[0],_[0]),d;r[0]<_[1]&&(_[0]=Math.min(r[0],_[0]),z=!0)}}return z?d[d.length-1][1]=r[1]:d.push(r),d}};t=m([o(0,f.IBufferService)],t),e.CharacterJoinerService=t},5114:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CoreBrowserService=void 0,e.CoreBrowserService=class{constructor(a,m){this._textarea=a,this.window=m,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(b,e,a){var m=this&&this.__decorate||function(f,i,t,p){var d,r=arguments.length,z=r<3?i:p===null?p=Object.getOwnPropertyDescriptor(i,t):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(f,i,t,p);else for(var M=f.length-1;M>=0;M--)(d=f[M])&&(z=(r<3?d(z):r>3?d(i,t,z):d(i,t))||z);return r>3&&z&&Object.defineProperty(i,t,z),z},o=this&&this.__param||function(f,i){return function(t,p){i(t,p,f)}};Object.defineProperty(e,"__esModule",{value:!0}),e.MouseService=void 0;let n=a(4725),c=a(9806),v=class{constructor(f,i){this._renderService=f,this._charSizeService=i}getCoords(f,i,t,p,d){return(0,c.getCoords)(window,f,i,t,p,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,d)}getMouseReportCoords(f,i){let t=(0,c.getCoordsRelativeToElement)(window,f,i);if(!(!this._charSizeService.hasValidSize||t[0]<0||t[1]<0||t[0]>=this._renderService.dimensions.css.canvas.width||t[1]>=this._renderService.dimensions.css.canvas.height))return{col:Math.floor(t[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(t[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(t[0]),y:Math.floor(t[1])}}};v=m([o(0,n.IRenderService),o(1,n.ICharSizeService)],v),e.MouseService=v},3230:function(b,e,a){var m=this&&this.__decorate||function(z,M,_,L){var S,y=arguments.length,A=y<3?M:L===null?L=Object.getOwnPropertyDescriptor(M,_):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(z,M,_,L);else for(var H=z.length-1;H>=0;H--)(S=z[H])&&(A=(y<3?S(A):y>3?S(M,_,A):S(M,_))||A);return y>3&&A&&Object.defineProperty(M,_,A),A},o=this&&this.__param||function(z,M){return function(_,L){M(_,L,z)}};Object.defineProperty(e,"__esModule",{value:!0}),e.RenderService=void 0;let n=a(6193),c=a(8460),v=a(844),f=a(5596),i=a(3656),t=a(2585),p=a(4725),d=a(7226),r=class extends v.Disposable{constructor(z,M,_,L,S,y,A,H){if(super(),this._rowCount=z,this._charSizeService=L,this._pausedResizeTask=new d.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new c.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new c.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new c.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new c.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this.register({dispose:()=>{var T;return(T=this._renderer)===null||T===void 0?void 0:T.dispose()}}),this._renderDebouncer=new n.RenderDebouncer(A.window,(T,V)=>this._renderRows(T,V)),this.register(this._renderDebouncer),this._screenDprMonitor=new f.ScreenDprMonitor(A.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(y.onResize(()=>this._fullRefresh())),this.register(y.buffers.onBufferActivate(()=>{var T;return(T=this._renderer)===null||T===void 0?void 0:T.clear()})),this.register(_.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(S.onDecorationRegistered(()=>this._fullRefresh())),this.register(S.onDecorationRemoved(()=>this._fullRefresh())),this.register(_.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(y.cols,y.rows),this._fullRefresh()})),this.register(_.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(y.buffer.y,y.buffer.y,!0))),this.register((0,i.addDisposableDomListener)(A.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(H.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in A.window){let T=new A.window.IntersectionObserver(V=>this._handleIntersectionChange(V[V.length-1]),{threshold:0});T.observe(M),this.register({dispose:()=>T.disconnect()})}}get dimensions(){return this._renderer.dimensions}_handleIntersectionChange(z){this._isPaused=z.isIntersecting===void 0?z.intersectionRatio===0:!z.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(z,M,_=!1){this._isPaused?this._needsFullRefresh=!0:(_||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(z,M,this._rowCount))}_renderRows(z,M){this._renderer&&(this._renderer.renderRows(z,M),this._needsSelectionRefresh&&(this._renderer.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:z,end:M}),this._onRender.fire({start:z,end:M}),this._isNextRenderRedrawOnly=!0)}resize(z,M){this._rowCount=M,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer&&(this._renderer.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions))}hasRenderer(){return!!this._renderer}setRenderer(z){var M;(M=this._renderer)===null||M===void 0||M.dispose(),this._renderer=z,this._renderer.onRequestRedraw(_=>this.refreshRows(_.start,_.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(z){return this._renderDebouncer.addRefreshCallback(z)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var z,M;this._renderer&&((M=(z=this._renderer).clearTextureAtlas)===null||M===void 0||M.call(z),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer&&(this._renderer.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(z,M){this._renderer&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.handleResize(z,M)):this._renderer.handleResize(z,M),this._fullRefresh())}handleCharSizeChanged(){var z;(z=this._renderer)===null||z===void 0||z.handleCharSizeChanged()}handleBlur(){var z;(z=this._renderer)===null||z===void 0||z.handleBlur()}handleFocus(){var z;(z=this._renderer)===null||z===void 0||z.handleFocus()}handleSelectionChanged(z,M,_){var L;this._selectionState.start=z,this._selectionState.end=M,this._selectionState.columnSelectMode=_,(L=this._renderer)===null||L===void 0||L.handleSelectionChanged(z,M,_)}handleCursorMove(){var z;(z=this._renderer)===null||z===void 0||z.handleCursorMove()}clear(){var z;(z=this._renderer)===null||z===void 0||z.clear()}};r=m([o(2,t.IOptionsService),o(3,p.ICharSizeService),o(4,t.IDecorationService),o(5,t.IBufferService),o(6,p.ICoreBrowserService),o(7,p.IThemeService)],r),e.RenderService=r},9312:function(b,e,a){var m=this&&this.__decorate||function(S,y,A,H){var T,V=arguments.length,Z=V<3?y:H===null?H=Object.getOwnPropertyDescriptor(y,A):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Z=Reflect.decorate(S,y,A,H);else for(var B=S.length-1;B>=0;B--)(T=S[B])&&(Z=(V<3?T(Z):V>3?T(y,A,Z):T(y,A))||Z);return V>3&&Z&&Object.defineProperty(y,A,Z),Z},o=this&&this.__param||function(S,y){return function(A,H){y(A,H,S)}};Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionService=void 0;let n=a(6114),c=a(456),v=a(511),f=a(8460),i=a(4725),t=a(2585),p=a(9806),d=a(9504),r=a(844),z=a(4841),M=String.fromCharCode(160),_=new RegExp(M,"g"),L=class extends r.Disposable{constructor(S,y,A,H,T,V,Z,B,N){super(),this._element=S,this._screenElement=y,this._linkifier=A,this._bufferService=H,this._coreService=T,this._mouseService=V,this._optionsService=Z,this._renderService=B,this._coreBrowserService=N,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new v.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new f.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new f.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new f.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new f.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=E=>this._handleMouseMove(E),this._mouseUpListener=E=>this._handleMouseUp(E),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(E=>this._handleTrim(E)),this.register(this._bufferService.buffers.onBufferActivate(E=>this._handleBufferActivate(E))),this.enable(),this._model=new c.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,r.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){let S=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;return!(!S||!y||S[0]===y[0]&&S[1]===y[1])}get selectionText(){let S=this._model.finalSelectionStart,y=this._model.finalSelectionEnd;if(!S||!y)return"";let A=this._bufferService.buffer,H=[];if(this._activeSelectionMode===3){if(S[0]===y[0])return"";let T=S[0]<y[0]?S[0]:y[0],V=S[0]<y[0]?y[0]:S[0];for(let Z=S[1];Z<=y[1];Z++){let B=A.translateBufferLineToString(Z,!0,T,V);H.push(B)}}else{let T=S[1]===y[1]?y[0]:void 0;H.push(A.translateBufferLineToString(S[1],!0,S[0],T));for(let V=S[1]+1;V<=y[1]-1;V++){let Z=A.lines.get(V),B=A.translateBufferLineToString(V,!0);Z!=null&&Z.isWrapped?H[H.length-1]+=B:H.push(B)}if(S[1]!==y[1]){let V=A.lines.get(y[1]),Z=A.translateBufferLineToString(y[1],!0,0,y[0]);V&&V.isWrapped?H[H.length-1]+=Z:H.push(Z)}}return H.map(T=>T.replace(_," ")).join(n.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(S){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),n.isLinux&&S&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(S){let y=this._getMouseBufferCoords(S),A=this._model.finalSelectionStart,H=this._model.finalSelectionEnd;return!!(A&&H&&y)&&this._areCoordsInSelection(y,A,H)}isCellInSelection(S,y){let A=this._model.finalSelectionStart,H=this._model.finalSelectionEnd;return!(!A||!H)&&this._areCoordsInSelection([S,y],A,H)}_areCoordsInSelection(S,y,A){return S[1]>y[1]&&S[1]<A[1]||y[1]===A[1]&&S[1]===y[1]&&S[0]>=y[0]&&S[0]<A[0]||y[1]<A[1]&&S[1]===A[1]&&S[0]<A[0]||y[1]<A[1]&&S[1]===y[1]&&S[0]>=y[0]}_selectWordAtCursor(S,y){var A,H;let T=(H=(A=this._linkifier.currentLink)===null||A===void 0?void 0:A.link)===null||H===void 0?void 0:H.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,z.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;let V=this._getMouseBufferCoords(S);return!!V&&(this._selectWordAt(V,y),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(S,y){this._model.clearSelection(),S=Math.max(S,0),y=Math.min(y,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,S],this._model.selectionEnd=[this._bufferService.cols,y],this.refresh(),this._onSelectionChange.fire()}_handleTrim(S){this._model.handleTrim(S)&&this.refresh()}_getMouseBufferCoords(S){let y=this._mouseService.getCoords(S,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(y)return y[0]--,y[1]--,y[1]+=this._bufferService.buffer.ydisp,y}_getMouseEventScrollAmount(S){let y=(0,p.getCoordsRelativeToElement)(this._coreBrowserService.window,S,this._screenElement)[1],A=this._renderService.dimensions.css.canvas.height;return y>=0&&y<=A?0:(y>A&&(y-=A),y=Math.min(Math.max(y,-50),50),y/=50,y/Math.abs(y)+Math.round(14*y))}shouldForceSelection(S){return n.isMac?S.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:S.shiftKey}handleMouseDown(S){if(this._mouseDownTimeStamp=S.timeStamp,(S.button!==2||!this.hasSelection)&&S.button===0){if(!this._enabled){if(!this.shouldForceSelection(S))return;S.stopPropagation()}S.preventDefault(),this._dragScrollAmount=0,this._enabled&&S.shiftKey?this._handleIncrementalClick(S):S.detail===1?this._handleSingleClick(S):S.detail===2?this._handleDoubleClick(S):S.detail===3&&this._handleTripleClick(S),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(S){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(S))}_handleSingleClick(S){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(S)?3:0,this._model.selectionStart=this._getMouseBufferCoords(S),!this._model.selectionStart)return;this._model.selectionEnd=void 0;let y=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);y&&y.length!==this._model.selectionStart[0]&&y.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(S){this._selectWordAtCursor(S,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(S){let y=this._getMouseBufferCoords(S);y&&(this._activeSelectionMode=2,this._selectLineAt(y[1]))}shouldColumnSelect(S){return S.altKey&&!(n.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(S){if(S.stopImmediatePropagation(),!this._model.selectionStart)return;let y=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(S),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(S),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));let A=this._bufferService.buffer;if(this._model.selectionEnd[1]<A.lines.length){let H=A.lines.get(this._model.selectionEnd[1]);H&&H.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}y&&y[0]===this._model.selectionEnd[0]&&y[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});let S=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(S.ydisp+this._bufferService.rows,S.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=S.ydisp),this.refresh()}}_handleMouseUp(S){let y=S.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&y<500&&S.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){let A=this._mouseService.getCoords(S,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(A&&A[0]!==void 0&&A[1]!==void 0){let H=(0,d.moveToCellSequence)(A[0]-1,A[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(H,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){let S=this._model.finalSelectionStart,y=this._model.finalSelectionEnd,A=!(!S||!y||S[0]===y[0]&&S[1]===y[1]);A?S&&y&&(this._oldSelectionStart&&this._oldSelectionEnd&&S[0]===this._oldSelectionStart[0]&&S[1]===this._oldSelectionStart[1]&&y[0]===this._oldSelectionEnd[0]&&y[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(S,y,A)):this._oldHasSelection&&this._fireOnSelectionChange(S,y,A)}_fireOnSelectionChange(S,y,A){this._oldSelectionStart=S,this._oldSelectionEnd=y,this._oldHasSelection=A,this._onSelectionChange.fire()}_handleBufferActivate(S){this.clearSelection(),this._trimListener.dispose(),this._trimListener=S.activeBuffer.lines.onTrim(y=>this._handleTrim(y))}_convertViewportColToCharacterIndex(S,y){let A=y;for(let H=0;y>=H;H++){let T=S.loadCell(H,this._workCell).getChars().length;this._workCell.getWidth()===0?A--:T>1&&y!==H&&(A+=T-1)}return A}setSelection(S,y,A){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[S,y],this._model.selectionStartLength=A,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(S){this._isClickInSelection(S)||(this._selectWordAtCursor(S,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(S,y,A=!0,H=!0){if(S[0]>=this._bufferService.cols)return;let T=this._bufferService.buffer,V=T.lines.get(S[1]);if(!V)return;let Z=T.translateBufferLineToString(S[1],!1),B=this._convertViewportColToCharacterIndex(V,S[0]),N=B,E=S[0]-B,P=0,I=0,U=0,K=0;if(Z.charAt(B)===" "){for(;B>0&&Z.charAt(B-1)===" ";)B--;for(;N<Z.length&&Z.charAt(N+1)===" ";)N++}else{let e0=S[0],c0=S[0];V.getWidth(e0)===0&&(P++,e0--),V.getWidth(c0)===2&&(I++,c0++);let j=V.getString(c0).length;for(j>1&&(K+=j-1,N+=j-1);e0>0&&B>0&&!this._isCharWordSeparator(V.loadCell(e0-1,this._workCell));){V.loadCell(e0-1,this._workCell);let q=this._workCell.getChars().length;this._workCell.getWidth()===0?(P++,e0--):q>1&&(U+=q-1,B-=q-1),B--,e0--}for(;c0<V.length&&N+1<Z.length&&!this._isCharWordSeparator(V.loadCell(c0+1,this._workCell));){V.loadCell(c0+1,this._workCell);let q=this._workCell.getChars().length;this._workCell.getWidth()===2?(I++,c0++):q>1&&(K+=q-1,N+=q-1),N++,c0++}}N++;let Q=B+E-P+U,r0=Math.min(this._bufferService.cols,N-B+P+I-U-K);if(y||Z.slice(B,N).trim()!==""){if(A&&Q===0&&V.getCodePoint(0)!==32){let e0=T.lines.get(S[1]-1);if(e0&&V.isWrapped&&e0.getCodePoint(this._bufferService.cols-1)!==32){let c0=this._getWordAt([this._bufferService.cols-1,S[1]-1],!1,!0,!1);if(c0){let j=this._bufferService.cols-c0.start;Q-=j,r0+=j}}}if(H&&Q+r0===this._bufferService.cols&&V.getCodePoint(this._bufferService.cols-1)!==32){let e0=T.lines.get(S[1]+1);if(e0!=null&&e0.isWrapped&&e0.getCodePoint(0)!==32){let c0=this._getWordAt([0,S[1]+1],!1,!1,!0);c0&&(r0+=c0.length)}}return{start:Q,length:r0}}}_selectWordAt(S,y){let A=this._getWordAt(S,y);if(A){for(;A.start<0;)A.start+=this._bufferService.cols,S[1]--;this._model.selectionStart=[A.start,S[1]],this._model.selectionStartLength=A.length}}_selectToWordAt(S){let y=this._getWordAt(S,!0);if(y){let A=S[1];for(;y.start<0;)y.start+=this._bufferService.cols,A--;if(!this._model.areSelectionValuesReversed())for(;y.start+y.length>this._bufferService.cols;)y.length-=this._bufferService.cols,A++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?y.start:y.start+y.length,A]}}_isCharWordSeparator(S){return S.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(S.getChars())>=0}_selectLineAt(S){let y=this._bufferService.buffer.getWrappedRangeForLine(S),A={start:{x:0,y:y.first},end:{x:this._bufferService.cols-1,y:y.last}};this._model.selectionStart=[0,y.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,z.getRangeLength)(A,this._bufferService.cols)}};L=m([o(3,t.IBufferService),o(4,t.ICoreService),o(5,i.IMouseService),o(6,t.IOptionsService),o(7,i.IRenderService),o(8,i.ICoreBrowserService)],L),e.SelectionService=L},4725:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IThemeService=e.ICharacterJoinerService=e.ISelectionService=e.IRenderService=e.IMouseService=e.ICoreBrowserService=e.ICharSizeService=void 0;let m=a(8343);e.ICharSizeService=(0,m.createDecorator)("CharSizeService"),e.ICoreBrowserService=(0,m.createDecorator)("CoreBrowserService"),e.IMouseService=(0,m.createDecorator)("MouseService"),e.IRenderService=(0,m.createDecorator)("RenderService"),e.ISelectionService=(0,m.createDecorator)("SelectionService"),e.ICharacterJoinerService=(0,m.createDecorator)("CharacterJoinerService"),e.IThemeService=(0,m.createDecorator)("ThemeService")},6731:function(b,e,a){var m=this&&this.__decorate||function(L,S,y,A){var H,T=arguments.length,V=T<3?S:A===null?A=Object.getOwnPropertyDescriptor(S,y):A;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")V=Reflect.decorate(L,S,y,A);else for(var Z=L.length-1;Z>=0;Z--)(H=L[Z])&&(V=(T<3?H(V):T>3?H(S,y,V):H(S,y))||V);return T>3&&V&&Object.defineProperty(S,y,V),V},o=this&&this.__param||function(L,S){return function(y,A){S(y,A,L)}};Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeService=e.DEFAULT_ANSI_COLORS=void 0;let n=a(7239),c=a(8055),v=a(8460),f=a(844),i=a(2585),t=c.css.toColor("#ffffff"),p=c.css.toColor("#000000"),d=c.css.toColor("#ffffff"),r=c.css.toColor("#000000"),z={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};e.DEFAULT_ANSI_COLORS=Object.freeze((()=>{let L=[c.css.toColor("#2e3436"),c.css.toColor("#cc0000"),c.css.toColor("#4e9a06"),c.css.toColor("#c4a000"),c.css.toColor("#3465a4"),c.css.toColor("#75507b"),c.css.toColor("#06989a"),c.css.toColor("#d3d7cf"),c.css.toColor("#555753"),c.css.toColor("#ef2929"),c.css.toColor("#8ae234"),c.css.toColor("#fce94f"),c.css.toColor("#729fcf"),c.css.toColor("#ad7fa8"),c.css.toColor("#34e2e2"),c.css.toColor("#eeeeec")],S=[0,95,135,175,215,255];for(let y=0;y<216;y++){let A=S[y/36%6|0],H=S[y/6%6|0],T=S[y%6];L.push({css:c.channels.toCss(A,H,T),rgba:c.channels.toRgba(A,H,T)})}for(let y=0;y<24;y++){let A=8+10*y;L.push({css:c.channels.toCss(A,A,A),rgba:c.channels.toRgba(A,A,A)})}return L})());let M=class extends f.Disposable{constructor(L){super(),this._optionsService=L,this._onChangeColors=this.register(new v.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._contrastCache=new n.ColorContrastCache,this._colors={foreground:t,background:p,cursor:d,cursorAccent:r,selectionForeground:void 0,selectionBackgroundTransparent:z,selectionBackgroundOpaque:c.color.blend(p,z),selectionInactiveBackgroundTransparent:z,selectionInactiveBackgroundOpaque:c.color.blend(p,z),ansi:e.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}get colors(){return this._colors}_setTheme(L={}){let S=this._colors;if(S.foreground=_(L.foreground,t),S.background=_(L.background,p),S.cursor=_(L.cursor,d),S.cursorAccent=_(L.cursorAccent,r),S.selectionBackgroundTransparent=_(L.selectionBackground,z),S.selectionBackgroundOpaque=c.color.blend(S.background,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundTransparent=_(L.selectionInactiveBackground,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundOpaque=c.color.blend(S.background,S.selectionInactiveBackgroundTransparent),S.selectionForeground=L.selectionForeground?_(L.selectionForeground,c.NULL_COLOR):void 0,S.selectionForeground===c.NULL_COLOR&&(S.selectionForeground=void 0),c.color.isOpaque(S.selectionBackgroundTransparent)&&(S.selectionBackgroundTransparent=c.color.opacity(S.selectionBackgroundTransparent,.3)),c.color.isOpaque(S.selectionInactiveBackgroundTransparent)&&(S.selectionInactiveBackgroundTransparent=c.color.opacity(S.selectionInactiveBackgroundTransparent,.3)),S.ansi=e.DEFAULT_ANSI_COLORS.slice(),S.ansi[0]=_(L.black,e.DEFAULT_ANSI_COLORS[0]),S.ansi[1]=_(L.red,e.DEFAULT_ANSI_COLORS[1]),S.ansi[2]=_(L.green,e.DEFAULT_ANSI_COLORS[2]),S.ansi[3]=_(L.yellow,e.DEFAULT_ANSI_COLORS[3]),S.ansi[4]=_(L.blue,e.DEFAULT_ANSI_COLORS[4]),S.ansi[5]=_(L.magenta,e.DEFAULT_ANSI_COLORS[5]),S.ansi[6]=_(L.cyan,e.DEFAULT_ANSI_COLORS[6]),S.ansi[7]=_(L.white,e.DEFAULT_ANSI_COLORS[7]),S.ansi[8]=_(L.brightBlack,e.DEFAULT_ANSI_COLORS[8]),S.ansi[9]=_(L.brightRed,e.DEFAULT_ANSI_COLORS[9]),S.ansi[10]=_(L.brightGreen,e.DEFAULT_ANSI_COLORS[10]),S.ansi[11]=_(L.brightYellow,e.DEFAULT_ANSI_COLORS[11]),S.ansi[12]=_(L.brightBlue,e.DEFAULT_ANSI_COLORS[12]),S.ansi[13]=_(L.brightMagenta,e.DEFAULT_ANSI_COLORS[13]),S.ansi[14]=_(L.brightCyan,e.DEFAULT_ANSI_COLORS[14]),S.ansi[15]=_(L.brightWhite,e.DEFAULT_ANSI_COLORS[15]),L.extendedAnsi){let y=Math.min(S.ansi.length-16,L.extendedAnsi.length);for(let A=0;A<y;A++)S.ansi[A+16]=_(L.extendedAnsi[A],e.DEFAULT_ANSI_COLORS[A+16])}this._contrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(L){this._restoreColor(L),this._onChangeColors.fire(this.colors)}_restoreColor(L){if(L!==void 0)switch(L){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[L]=this._restoreColors.ansi[L]}else for(let S=0;S<this._restoreColors.ansi.length;++S)this._colors.ansi[S]=this._restoreColors.ansi[S]}modifyColors(L){L(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function _(L,S){if(L!==void 0)try{return c.css.toColor(L)}catch(y){}return S}M=m([o(0,i.IOptionsService)],M),e.ThemeService=M},6349:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CircularList=void 0;let m=a(8460),o=a(844);class n extends o.Disposable{constructor(v){super(),this._maxLength=v,this.onDeleteEmitter=this.register(new m.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new m.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new m.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(v){if(this._maxLength===v)return;let f=new Array(v);for(let i=0;i<Math.min(v,this.length);i++)f[i]=this._array[this._getCyclicIndex(i)];this._array=f,this._maxLength=v,this._startIndex=0}get length(){return this._length}set length(v){if(v>this._length)for(let f=this._length;f<v;f++)this._array[f]=void 0;this._length=v}get(v){return this._array[this._getCyclicIndex(v)]}set(v,f){this._array[this._getCyclicIndex(v)]=f}push(v){this._array[this._getCyclicIndex(this._length)]=v,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(v,f,...i){if(f){for(let t=v;t<this._length-f;t++)this._array[this._getCyclicIndex(t)]=this._array[this._getCyclicIndex(t+f)];this._length-=f,this.onDeleteEmitter.fire({index:v,amount:f})}for(let t=this._length-1;t>=v;t--)this._array[this._getCyclicIndex(t+i.length)]=this._array[this._getCyclicIndex(t)];for(let t=0;t<i.length;t++)this._array[this._getCyclicIndex(v+t)]=i[t];if(i.length&&this.onInsertEmitter.fire({index:v,amount:i.length}),this._length+i.length>this._maxLength){let t=this._length+i.length-this._maxLength;this._startIndex+=t,this._length=this._maxLength,this.onTrimEmitter.fire(t)}else this._length+=i.length}trimStart(v){v>this._length&&(v=this._length),this._startIndex+=v,this._length-=v,this.onTrimEmitter.fire(v)}shiftElements(v,f,i){if(!(f<=0)){if(v<0||v>=this._length)throw new Error("start argument out of range");if(v+i<0)throw new Error("Cannot shift elements in list beyond index 0");if(i>0){for(let p=f-1;p>=0;p--)this.set(v+p+i,this.get(v+p));let t=v+f+i-this._length;if(t>0)for(this._length+=t;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let t=0;t<f;t++)this.set(v+t+i,this.get(v+t))}}_getCyclicIndex(v){return(this._startIndex+v)%this._maxLength}}e.CircularList=n},1439:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.clone=void 0,e.clone=function a(m,o=5){if(typeof m!="object")return m;let n=Array.isArray(m)?[]:{};for(let c in m)n[c]=o<=1?m[c]:m[c]&&a(m[c],o-1);return n}},8055:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.contrastRatio=e.toPaddedHex=e.rgba=e.rgb=e.css=e.color=e.channels=e.NULL_COLOR=void 0;let m=a(6114),o=0,n=0,c=0,v=0;var f,i,t;function p(r){let z=r.toString(16);return z.length<2?"0"+z:z}function d(r,z){return r<z?(z+.05)/(r+.05):(r+.05)/(z+.05)}e.NULL_COLOR={css:"#00000000",rgba:0},function(r){r.toCss=function(z,M,_,L){return L!==void 0?`#${p(z)}${p(M)}${p(_)}${p(L)}`:`#${p(z)}${p(M)}${p(_)}`},r.toRgba=function(z,M,_,L=255){return(z<<24|M<<16|_<<8|L)>>>0}}(f=e.channels||(e.channels={})),function(r){function z(M,_){return v=Math.round(255*_),[o,n,c]=t.toChannels(M.rgba),{css:f.toCss(o,n,c,v),rgba:f.toRgba(o,n,c,v)}}r.blend=function(M,_){if(v=(255&_.rgba)/255,v===1)return{css:_.css,rgba:_.rgba};let L=_.rgba>>24&255,S=_.rgba>>16&255,y=_.rgba>>8&255,A=M.rgba>>24&255,H=M.rgba>>16&255,T=M.rgba>>8&255;return o=A+Math.round((L-A)*v),n=H+Math.round((S-H)*v),c=T+Math.round((y-T)*v),{css:f.toCss(o,n,c),rgba:f.toRgba(o,n,c)}},r.isOpaque=function(M){return(255&M.rgba)==255},r.ensureContrastRatio=function(M,_,L){let S=t.ensureContrastRatio(M.rgba,_.rgba,L);if(S)return t.toColor(S>>24&255,S>>16&255,S>>8&255)},r.opaque=function(M){let _=(255|M.rgba)>>>0;return[o,n,c]=t.toChannels(_),{css:f.toCss(o,n,c),rgba:_}},r.opacity=z,r.multiplyOpacity=function(M,_){return v=255&M.rgba,z(M,v*_/255)},r.toColorRGB=function(M){return[M.rgba>>24&255,M.rgba>>16&255,M.rgba>>8&255]}}(e.color||(e.color={})),function(r){let z,M;if(!m.isNode){let _=document.createElement("canvas");_.width=1,_.height=1;let L=_.getContext("2d",{willReadFrequently:!0});L&&(z=L,z.globalCompositeOperation="copy",M=z.createLinearGradient(0,0,1,1))}r.toColor=function(_){if(_.match(/#[\da-f]{3,8}/i))switch(_.length){case 4:return o=parseInt(_.slice(1,2).repeat(2),16),n=parseInt(_.slice(2,3).repeat(2),16),c=parseInt(_.slice(3,4).repeat(2),16),t.toColor(o,n,c);case 5:return o=parseInt(_.slice(1,2).repeat(2),16),n=parseInt(_.slice(2,3).repeat(2),16),c=parseInt(_.slice(3,4).repeat(2),16),v=parseInt(_.slice(4,5).repeat(2),16),t.toColor(o,n,c,v);case 7:return{css:_,rgba:(parseInt(_.slice(1),16)<<8|255)>>>0};case 9:return{css:_,rgba:parseInt(_.slice(1),16)>>>0}}let L=_.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(L)return o=parseInt(L[1]),n=parseInt(L[2]),c=parseInt(L[3]),v=Math.round(255*(L[5]===void 0?1:parseFloat(L[5]))),t.toColor(o,n,c,v);if(!z||!M)throw new Error("css.toColor: Unsupported css format");if(z.fillStyle=M,z.fillStyle=_,typeof z.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(z.fillRect(0,0,1,1),[o,n,c,v]=z.getImageData(0,0,1,1).data,v!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:f.toRgba(o,n,c,v),css:_}}}(e.css||(e.css={})),function(r){function z(M,_,L){let S=M/255,y=_/255,A=L/255;return .2126*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.7152*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.0722*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))}r.relativeLuminance=function(M){return z(M>>16&255,M>>8&255,255&M)},r.relativeLuminance2=z}(i=e.rgb||(e.rgb={})),function(r){function z(_,L,S){let y=_>>24&255,A=_>>16&255,H=_>>8&255,T=L>>24&255,V=L>>16&255,Z=L>>8&255,B=d(i.relativeLuminance2(T,V,Z),i.relativeLuminance2(y,A,H));for(;B<S&&(T>0||V>0||Z>0);)T-=Math.max(0,Math.ceil(.1*T)),V-=Math.max(0,Math.ceil(.1*V)),Z-=Math.max(0,Math.ceil(.1*Z)),B=d(i.relativeLuminance2(T,V,Z),i.relativeLuminance2(y,A,H));return(T<<24|V<<16|Z<<8|255)>>>0}function M(_,L,S){let y=_>>24&255,A=_>>16&255,H=_>>8&255,T=L>>24&255,V=L>>16&255,Z=L>>8&255,B=d(i.relativeLuminance2(T,V,Z),i.relativeLuminance2(y,A,H));for(;B<S&&(T<255||V<255||Z<255);)T=Math.min(255,T+Math.ceil(.1*(255-T))),V=Math.min(255,V+Math.ceil(.1*(255-V))),Z=Math.min(255,Z+Math.ceil(.1*(255-Z))),B=d(i.relativeLuminance2(T,V,Z),i.relativeLuminance2(y,A,H));return(T<<24|V<<16|Z<<8|255)>>>0}r.ensureContrastRatio=function(_,L,S){let y=i.relativeLuminance(_>>8),A=i.relativeLuminance(L>>8);if(d(y,A)<S){if(A<y){let V=z(_,L,S),Z=d(y,i.relativeLuminance(V>>8));if(Z<S){let B=M(_,L,S);return Z>d(y,i.relativeLuminance(B>>8))?V:B}return V}let H=M(_,L,S),T=d(y,i.relativeLuminance(H>>8));if(T<S){let V=z(_,L,S);return T>d(y,i.relativeLuminance(V>>8))?H:V}return H}},r.reduceLuminance=z,r.increaseLuminance=M,r.toChannels=function(_){return[_>>24&255,_>>16&255,_>>8&255,255&_]},r.toColor=function(_,L,S,y){return{css:f.toCss(_,L,S,y),rgba:f.toRgba(_,L,S,y)}}}(t=e.rgba||(e.rgba={})),e.toPaddedHex=p,e.contrastRatio=d},8969:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CoreTerminal=void 0;let m=a(844),o=a(2585),n=a(4348),c=a(7866),v=a(744),f=a(7302),i=a(6975),t=a(8460),p=a(1753),d=a(1480),r=a(7994),z=a(9282),M=a(5435),_=a(5981),L=a(2660),S=!1;class y extends m.Disposable{constructor(H){super(),this._onBinary=this.register(new t.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new t.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new t.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new t.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new t.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new t.EventEmitter),this._instantiationService=new n.InstantiationService,this.optionsService=this.register(new f.OptionsService(H)),this._instantiationService.setService(o.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(v.BufferService)),this._instantiationService.setService(o.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(c.LogService)),this._instantiationService.setService(o.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(i.CoreService)),this._instantiationService.setService(o.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(p.CoreMouseService)),this._instantiationService.setService(o.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(d.UnicodeService)),this._instantiationService.setService(o.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(r.CharsetService),this._instantiationService.setService(o.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(L.OscLinkService),this._instantiationService.setService(o.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new M.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,t.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,t.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,t.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,t.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onSpecificOptionChange("windowsMode",T=>this._handleWindowsModeOptionChange(T))),this.register(this._bufferService.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new _.WriteBuffer((T,V)=>this._inputHandler.parse(T,V))),this.register((0,t.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed)),this.register((0,m.toDisposable)(()=>{var T;(T=this._windowsMode)===null||T===void 0||T.dispose(),this._windowsMode=void 0}))}get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new t.EventEmitter),this._onScroll.event(H=>{var T;(T=this._onScrollApi)===null||T===void 0||T.fire(H.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(H){for(let T in H)this.optionsService.options[T]=H[T]}write(H,T){this._writeBuffer.write(H,T)}writeSync(H,T){this._logService.logLevel<=o.LogLevelEnum.WARN&&!S&&(this._logService.warn("writeSync is unreliable and will be removed soon."),S=!0),this._writeBuffer.writeSync(H,T)}resize(H,T){isNaN(H)||isNaN(T)||(H=Math.max(H,v.MINIMUM_COLS),T=Math.max(T,v.MINIMUM_ROWS),this._bufferService.resize(H,T))}scroll(H,T=!1){this._bufferService.scroll(H,T)}scrollLines(H,T,V){this._bufferService.scrollLines(H,T,V)}scrollPages(H){this._bufferService.scrollPages(H)}scrollToTop(){this._bufferService.scrollToTop()}scrollToBottom(){this._bufferService.scrollToBottom()}scrollToLine(H){this._bufferService.scrollToLine(H)}registerEscHandler(H,T){return this._inputHandler.registerEscHandler(H,T)}registerDcsHandler(H,T){return this._inputHandler.registerDcsHandler(H,T)}registerCsiHandler(H,T){return this._inputHandler.registerCsiHandler(H,T)}registerOscHandler(H,T){return this._inputHandler.registerOscHandler(H,T)}_setup(){this.optionsService.rawOptions.windowsMode&&this._enableWindowsMode()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsModeOptionChange(H){var T;H?this._enableWindowsMode():((T=this._windowsMode)===null||T===void 0||T.dispose(),this._windowsMode=void 0)}_enableWindowsMode(){if(!this._windowsMode){let H=[];H.push(this.onLineFeed(z.updateWindowsModeWrappedState.bind(null,this._bufferService))),H.push(this.registerCsiHandler({final:"H"},()=>((0,z.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsMode={dispose:()=>{for(let T of H)T.dispose()}}}}}e.CoreTerminal=y},8460:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forwardEvent=e.EventEmitter=void 0,e.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let m=0;m<this._listeners.length;m++)if(this._listeners[m]===a)return void this._listeners.splice(m,1)}}})),this._event}fire(a,m){let o=[];for(let n=0;n<this._listeners.length;n++)o.push(this._listeners[n]);for(let n=0;n<o.length;n++)o[n].call(void 0,a,m)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},e.forwardEvent=function(a,m){return a(o=>m.fire(o))}},5435:function(b,e,a){var m=this&&this.__decorate||function(N,E,P,I){var U,K=arguments.length,Q=K<3?E:I===null?I=Object.getOwnPropertyDescriptor(E,P):I;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Q=Reflect.decorate(N,E,P,I);else for(var r0=N.length-1;r0>=0;r0--)(U=N[r0])&&(Q=(K<3?U(Q):K>3?U(E,P,Q):U(E,P))||Q);return K>3&&Q&&Object.defineProperty(E,P,Q),Q},o=this&&this.__param||function(N,E){return function(P,I){E(P,I,N)}};Object.defineProperty(e,"__esModule",{value:!0}),e.InputHandler=e.WindowsOptionsReportType=void 0;let n=a(2584),c=a(7116),v=a(2015),f=a(844),i=a(482),t=a(8437),p=a(8460),d=a(643),r=a(511),z=a(3734),M=a(2585),_=a(6242),L=a(6351),S=a(5941),y={"(":0,")":1,"*":2,"+":3,"-":1,".":2},A=131072;function H(N,E){if(N>24)return E.setWinLines||!1;switch(N){case 1:return!!E.restoreWin;case 2:return!!E.minimizeWin;case 3:return!!E.setWinPosition;case 4:return!!E.setWinSizePixels;case 5:return!!E.raiseWin;case 6:return!!E.lowerWin;case 7:return!!E.refreshWin;case 8:return!!E.setWinSizeChars;case 9:return!!E.maximizeWin;case 10:return!!E.fullscreenWin;case 11:return!!E.getWinState;case 13:return!!E.getWinPosition;case 14:return!!E.getWinSizePixels;case 15:return!!E.getScreenSizePixels;case 16:return!!E.getCellSizePixels;case 18:return!!E.getWinSizeChars;case 19:return!!E.getScreenSizeChars;case 20:return!!E.getIconTitle;case 21:return!!E.getWinTitle;case 22:return!!E.pushTitle;case 23:return!!E.popTitle;case 24:return!!E.setWinLines}return!1}var T;(function(N){N[N.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",N[N.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(T=e.WindowsOptionsReportType||(e.WindowsOptionsReportType={}));let V=0;class Z extends f.Disposable{constructor(E,P,I,U,K,Q,r0,e0,c0=new v.EscapeSequenceParser){super(),this._bufferService=E,this._charsetService=P,this._coreService=I,this._logService=U,this._optionsService=K,this._oscLinkService=Q,this._coreMouseService=r0,this._unicodeService=e0,this._parser=c0,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new i.StringToUtf32,this._utf8Decoder=new i.Utf8ToUtf32,this._workCell=new r.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new p.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new p.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new p.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new p.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new p.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new p.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new p.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new p.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new p.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new p.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new p.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new p.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new p.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new B(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(j=>this._activeBuffer=j.activeBuffer)),this._parser.setCsiHandlerFallback((j,q)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(j),params:q.toArray()})}),this._parser.setEscHandlerFallback(j=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(j)})}),this._parser.setExecuteHandlerFallback(j=>{this._logService.debug("Unknown EXECUTE code: ",{code:j})}),this._parser.setOscHandlerFallback((j,q,G)=>{this._logService.debug("Unknown OSC code: ",{identifier:j,action:q,data:G})}),this._parser.setDcsHandlerFallback((j,q,G)=>{q==="HOOK"&&(G=G.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(j),action:q,payload:G})}),this._parser.setPrintHandler((j,q,G)=>this.print(j,q,G)),this._parser.registerCsiHandler({final:"@"},j=>this.insertChars(j)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},j=>this.scrollLeft(j)),this._parser.registerCsiHandler({final:"A"},j=>this.cursorUp(j)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},j=>this.scrollRight(j)),this._parser.registerCsiHandler({final:"B"},j=>this.cursorDown(j)),this._parser.registerCsiHandler({final:"C"},j=>this.cursorForward(j)),this._parser.registerCsiHandler({final:"D"},j=>this.cursorBackward(j)),this._parser.registerCsiHandler({final:"E"},j=>this.cursorNextLine(j)),this._parser.registerCsiHandler({final:"F"},j=>this.cursorPrecedingLine(j)),this._parser.registerCsiHandler({final:"G"},j=>this.cursorCharAbsolute(j)),this._parser.registerCsiHandler({final:"H"},j=>this.cursorPosition(j)),this._parser.registerCsiHandler({final:"I"},j=>this.cursorForwardTab(j)),this._parser.registerCsiHandler({final:"J"},j=>this.eraseInDisplay(j,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},j=>this.eraseInDisplay(j,!0)),this._parser.registerCsiHandler({final:"K"},j=>this.eraseInLine(j,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},j=>this.eraseInLine(j,!0)),this._parser.registerCsiHandler({final:"L"},j=>this.insertLines(j)),this._parser.registerCsiHandler({final:"M"},j=>this.deleteLines(j)),this._parser.registerCsiHandler({final:"P"},j=>this.deleteChars(j)),this._parser.registerCsiHandler({final:"S"},j=>this.scrollUp(j)),this._parser.registerCsiHandler({final:"T"},j=>this.scrollDown(j)),this._parser.registerCsiHandler({final:"X"},j=>this.eraseChars(j)),this._parser.registerCsiHandler({final:"Z"},j=>this.cursorBackwardTab(j)),this._parser.registerCsiHandler({final:"`"},j=>this.charPosAbsolute(j)),this._parser.registerCsiHandler({final:"a"},j=>this.hPositionRelative(j)),this._parser.registerCsiHandler({final:"b"},j=>this.repeatPrecedingCharacter(j)),this._parser.registerCsiHandler({final:"c"},j=>this.sendDeviceAttributesPrimary(j)),this._parser.registerCsiHandler({prefix:">",final:"c"},j=>this.sendDeviceAttributesSecondary(j)),this._parser.registerCsiHandler({final:"d"},j=>this.linePosAbsolute(j)),this._parser.registerCsiHandler({final:"e"},j=>this.vPositionRelative(j)),this._parser.registerCsiHandler({final:"f"},j=>this.hVPosition(j)),this._parser.registerCsiHandler({final:"g"},j=>this.tabClear(j)),this._parser.registerCsiHandler({final:"h"},j=>this.setMode(j)),this._parser.registerCsiHandler({prefix:"?",final:"h"},j=>this.setModePrivate(j)),this._parser.registerCsiHandler({final:"l"},j=>this.resetMode(j)),this._parser.registerCsiHandler({prefix:"?",final:"l"},j=>this.resetModePrivate(j)),this._parser.registerCsiHandler({final:"m"},j=>this.charAttributes(j)),this._parser.registerCsiHandler({final:"n"},j=>this.deviceStatus(j)),this._parser.registerCsiHandler({prefix:"?",final:"n"},j=>this.deviceStatusPrivate(j)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},j=>this.softReset(j)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},j=>this.setCursorStyle(j)),this._parser.registerCsiHandler({final:"r"},j=>this.setScrollRegion(j)),this._parser.registerCsiHandler({final:"s"},j=>this.saveCursor(j)),this._parser.registerCsiHandler({final:"t"},j=>this.windowOptions(j)),this._parser.registerCsiHandler({final:"u"},j=>this.restoreCursor(j)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},j=>this.insertColumns(j)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},j=>this.deleteColumns(j)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},j=>this.selectProtected(j)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},j=>this.requestMode(j,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},j=>this.requestMode(j,!1)),this._parser.setExecuteHandler(n.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(n.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(n.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(n.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(n.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(n.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(n.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(n.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(n.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(n.C1.IND,()=>this.index()),this._parser.setExecuteHandler(n.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(n.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new _.OscHandler(j=>(this.setTitle(j),this.setIconName(j),!0))),this._parser.registerOscHandler(1,new _.OscHandler(j=>this.setIconName(j))),this._parser.registerOscHandler(2,new _.OscHandler(j=>this.setTitle(j))),this._parser.registerOscHandler(4,new _.OscHandler(j=>this.setOrReportIndexedColor(j))),this._parser.registerOscHandler(8,new _.OscHandler(j=>this.setHyperlink(j))),this._parser.registerOscHandler(10,new _.OscHandler(j=>this.setOrReportFgColor(j))),this._parser.registerOscHandler(11,new _.OscHandler(j=>this.setOrReportBgColor(j))),this._parser.registerOscHandler(12,new _.OscHandler(j=>this.setOrReportCursorColor(j))),this._parser.registerOscHandler(104,new _.OscHandler(j=>this.restoreIndexedColor(j))),this._parser.registerOscHandler(110,new _.OscHandler(j=>this.restoreFgColor(j))),this._parser.registerOscHandler(111,new _.OscHandler(j=>this.restoreBgColor(j))),this._parser.registerOscHandler(112,new _.OscHandler(j=>this.restoreCursorColor(j))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(let j in c.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:j},()=>this.selectCharset("("+j)),this._parser.registerEscHandler({intermediates:")",final:j},()=>this.selectCharset(")"+j)),this._parser.registerEscHandler({intermediates:"*",final:j},()=>this.selectCharset("*"+j)),this._parser.registerEscHandler({intermediates:"+",final:j},()=>this.selectCharset("+"+j)),this._parser.registerEscHandler({intermediates:"-",final:j},()=>this.selectCharset("-"+j)),this._parser.registerEscHandler({intermediates:".",final:j},()=>this.selectCharset("."+j)),this._parser.registerEscHandler({intermediates:"/",final:j},()=>this.selectCharset("/"+j));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(j=>(this._logService.error("Parsing error: ",j),j)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new L.DcsHandler((j,q)=>this.requestStatusString(j,q)))}getAttrData(){return this._curAttrData}_preserveStack(E,P,I,U){this._parseStack.paused=!0,this._parseStack.cursorStartX=E,this._parseStack.cursorStartY=P,this._parseStack.decodedLength=I,this._parseStack.position=U}_logSlowResolvingAsync(E){this._logService.logLevel<=M.LogLevelEnum.WARN&&Promise.race([E,new Promise((P,I)=>setTimeout(()=>I("#SLOW_TIMEOUT"),5e3))]).catch(P=>{if(P!=="#SLOW_TIMEOUT")throw P;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(E,P){let I,U=this._activeBuffer.x,K=this._activeBuffer.y,Q=0,r0=this._parseStack.paused;if(r0){if(I=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,P))return this._logSlowResolvingAsync(I),I;U=this._parseStack.cursorStartX,K=this._parseStack.cursorStartY,this._parseStack.paused=!1,E.length>A&&(Q=this._parseStack.position+A)}if(this._logService.logLevel<=M.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof E=="string"?` "${E}"`:` "${Array.prototype.map.call(E,e0=>String.fromCharCode(e0)).join("")}"`),typeof E=="string"?E.split("").map(e0=>e0.charCodeAt(0)):E),this._parseBuffer.length<E.length&&this._parseBuffer.length<A&&(this._parseBuffer=new Uint32Array(Math.min(E.length,A))),r0||this._dirtyRowTracker.clearRange(),E.length>A)for(let e0=Q;e0<E.length;e0+=A){let c0=e0+A<E.length?e0+A:E.length,j=typeof E=="string"?this._stringDecoder.decode(E.substring(e0,c0),this._parseBuffer):this._utf8Decoder.decode(E.subarray(e0,c0),this._parseBuffer);if(I=this._parser.parse(this._parseBuffer,j))return this._preserveStack(U,K,j,e0),this._logSlowResolvingAsync(I),I}else if(!r0){let e0=typeof E=="string"?this._stringDecoder.decode(E,this._parseBuffer):this._utf8Decoder.decode(E,this._parseBuffer);if(I=this._parser.parse(this._parseBuffer,e0))return this._preserveStack(U,K,e0,0),this._logSlowResolvingAsync(I),I}this._activeBuffer.x===U&&this._activeBuffer.y===K||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(E,P,I){let U,K,Q=this._charsetService.charset,r0=this._optionsService.rawOptions.screenReaderMode,e0=this._bufferService.cols,c0=this._coreService.decPrivateModes.wraparound,j=this._coreService.modes.insertMode,q=this._curAttrData,G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&I-P>0&&G.getWidth(this._activeBuffer.x-1)===2&&G.setCellFromCodePoint(this._activeBuffer.x-1,0,1,q.fg,q.bg,q.extended);for(let t0=P;t0<I;++t0){if(U=E[t0],K=this._unicodeService.wcwidth(U),U<127&&Q){let h0=Q[String.fromCharCode(U)];h0&&(U=h0.charCodeAt(0))}if(r0&&this._onA11yChar.fire((0,i.stringFromCodePoint)(U)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),K||!this._activeBuffer.x){if(this._activeBuffer.x+K-1>=e0){if(c0){for(;this._activeBuffer.x<e0;)G.setCellFromCodePoint(this._activeBuffer.x++,0,1,q.fg,q.bg,q.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),G=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=e0-1,K===2)continue}if(j&&(G.insertCells(this._activeBuffer.x,K,this._activeBuffer.getNullCell(q),q),G.getWidth(e0-1)===2&&G.setCellFromCodePoint(e0-1,d.NULL_CELL_CODE,d.NULL_CELL_WIDTH,q.fg,q.bg,q.extended)),G.setCellFromCodePoint(this._activeBuffer.x++,U,K,q.fg,q.bg,q.extended),K>0)for(;--K;)G.setCellFromCodePoint(this._activeBuffer.x++,0,0,q.fg,q.bg,q.extended)}else G.getWidth(this._activeBuffer.x-1)?G.addCodepointToCell(this._activeBuffer.x-1,U):G.addCodepointToCell(this._activeBuffer.x-2,U)}I-P>0&&(G.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<e0&&I-P>0&&G.getWidth(this._activeBuffer.x)===0&&!G.hasContent(this._activeBuffer.x)&&G.setCellFromCodePoint(this._activeBuffer.x,0,1,q.fg,q.bg,q.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(E,P){return E.final!=="t"||E.prefix||E.intermediates?this._parser.registerCsiHandler(E,P):this._parser.registerCsiHandler(E,I=>!H(I.params[0],this._optionsService.rawOptions.windowOptions)||P(I))}registerDcsHandler(E,P){return this._parser.registerDcsHandler(E,new L.DcsHandler(P))}registerEscHandler(E,P){return this._parser.registerEscHandler(E,P)}registerOscHandler(E,P){return this._parser.registerOscHandler(E,new _.OscHandler(P))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var E;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||E===void 0)&&E.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;let P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);P.hasWidth(this._activeBuffer.x)&&!P.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let E=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-E),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(E=this._bufferService.cols-1){this._activeBuffer.x=Math.min(E,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(E,P){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=E,this._activeBuffer.y=this._activeBuffer.scrollTop+P):(this._activeBuffer.x=E,this._activeBuffer.y=P),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(E,P){this._restrictCursor(),this._setCursor(this._activeBuffer.x+E,this._activeBuffer.y+P)}cursorUp(E){let P=this._activeBuffer.y-this._activeBuffer.scrollTop;return P>=0?this._moveCursor(0,-Math.min(P,E.params[0]||1)):this._moveCursor(0,-(E.params[0]||1)),!0}cursorDown(E){let P=this._activeBuffer.scrollBottom-this._activeBuffer.y;return P>=0?this._moveCursor(0,Math.min(P,E.params[0]||1)):this._moveCursor(0,E.params[0]||1),!0}cursorForward(E){return this._moveCursor(E.params[0]||1,0),!0}cursorBackward(E){return this._moveCursor(-(E.params[0]||1),0),!0}cursorNextLine(E){return this.cursorDown(E),this._activeBuffer.x=0,!0}cursorPrecedingLine(E){return this.cursorUp(E),this._activeBuffer.x=0,!0}cursorCharAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(E){return this._setCursor(E.length>=2?(E.params[1]||1)-1:0,(E.params[0]||1)-1),!0}charPosAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(E){return this._moveCursor(E.params[0]||1,0),!0}linePosAbsolute(E){return this._setCursor(this._activeBuffer.x,(E.params[0]||1)-1),!0}vPositionRelative(E){return this._moveCursor(0,E.params[0]||1),!0}hVPosition(E){return this.cursorPosition(E),!0}tabClear(E){let P=E.params[0];return P===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:P===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let P=E.params[0]||1;for(;P--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let P=E.params[0]||1;for(;P--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(E){let P=E.params[0];return P===1&&(this._curAttrData.bg|=536870912),P!==2&&P!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(E,P,I,U=!1,K=!1){let Q=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);Q.replaceCells(P,I,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),K),U&&(Q.isWrapped=!1)}_resetBufferLine(E,P=!1){let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);I.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),P),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+E),I.isWrapped=!1}eraseInDisplay(E,P=!1){let I;switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:for(I=this._activeBuffer.y,this._dirtyRowTracker.markDirty(I),this._eraseInBufferLine(I++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,P);I<this._bufferService.rows;I++)this._resetBufferLine(I,P);this._dirtyRowTracker.markDirty(I);break;case 1:for(I=this._activeBuffer.y,this._dirtyRowTracker.markDirty(I),this._eraseInBufferLine(I,0,this._activeBuffer.x+1,!0,P),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(I+1).isWrapped=!1);I--;)this._resetBufferLine(I,P);this._dirtyRowTracker.markDirty(0);break;case 2:for(I=this._bufferService.rows,this._dirtyRowTracker.markDirty(I-1);I--;)this._resetBufferLine(I,P);this._dirtyRowTracker.markDirty(0);break;case 3:let U=this._activeBuffer.lines.length-this._bufferService.rows;U>0&&(this._activeBuffer.lines.trimStart(U),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-U,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-U,0),this._onScroll.fire(0))}return!0}eraseInLine(E,P=!1){switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,P);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,P);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,P)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(E){this._restrictCursor();let P=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=this._activeBuffer.ybase+this._activeBuffer.y,U=this._bufferService.rows-1-this._activeBuffer.scrollBottom,K=this._bufferService.rows-1+this._activeBuffer.ybase-U+1;for(;P--;)this._activeBuffer.lines.splice(K-1,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(E){this._restrictCursor();let P=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let I=this._activeBuffer.ybase+this._activeBuffer.y,U;for(U=this._bufferService.rows-1-this._activeBuffer.scrollBottom,U=this._bufferService.rows-1+this._activeBuffer.ybase-U;P--;)this._activeBuffer.lines.splice(I,1),this._activeBuffer.lines.splice(U,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(E){this._restrictCursor();let P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.insertCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(E){this._restrictCursor();let P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.deleteCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(E){let P=E.params[0]||1;for(;P--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(E){let P=E.params[0]||1;for(;P--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(t.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let P=E.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);U.deleteCells(0,P,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),U.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let P=E.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);U.insertCells(0,P,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),U.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let P=E.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);U.insertCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),U.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;let P=E.params[0]||1;for(let I=this._activeBuffer.scrollTop;I<=this._activeBuffer.scrollBottom;++I){let U=this._activeBuffer.lines.get(this._activeBuffer.ybase+I);U.deleteCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),U.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(E){this._restrictCursor();let P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(E.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(E){if(!this._parser.precedingCodepoint)return!0;let P=E.params[0]||1,I=new Uint32Array(P);for(let U=0;U<P;++U)I[U]=this._parser.precedingCodepoint;return this.print(I,0,I.length),!0}sendDeviceAttributesPrimary(E){return E.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(n.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(n.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(E){return E.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(n.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(n.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(E.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(n.C0.ESC+"[>83;40003;0c")),!0}_is(E){return(this._optionsService.rawOptions.termName+"").indexOf(E)===0}setMode(E){for(let P=0;P<E.length;P++)switch(E.params[P]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(E){for(let P=0;P<E.length;P++)switch(E.params[P]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,c.DEFAULT_CHARSET),this._charsetService.setgCharset(1,c.DEFAULT_CHARSET),this._charsetService.setgCharset(2,c.DEFAULT_CHARSET),this._charsetService.setgCharset(3,c.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(E){for(let P=0;P<E.length;P++)switch(E.params[P]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(E){for(let P=0;P<E.length;P++)switch(E.params[P]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),E.params[P]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(E,P){let I=this._coreService.decPrivateModes,{activeProtocol:U,activeEncoding:K}=this._coreMouseService,Q=this._coreService,{buffers:r0,cols:e0}=this._bufferService,{active:c0,alt:j}=r0,q=this._optionsService.rawOptions,G=s0=>s0?1:2,t0=E.params[0];return h0=t0,A0=P?t0===2?3:t0===4?G(Q.modes.insertMode):t0===12?4:t0===20?G(q.convertEol):0:t0===1?G(I.applicationCursorKeys):t0===3?q.windowOptions.setWinLines?e0===80?2:e0===132?1:0:0:t0===6?G(I.origin):t0===7?G(I.wraparound):t0===8?3:t0===9?G(U==="X10"):t0===12?G(q.cursorBlink):t0===25?G(!Q.isCursorHidden):t0===45?G(I.reverseWraparound):t0===66?G(I.applicationKeypad):t0===1e3?G(U==="VT200"):t0===1002?G(U==="DRAG"):t0===1003?G(U==="ANY"):t0===1004?G(I.sendFocus):t0===1005?4:t0===1006?G(K==="SGR"):t0===1015?4:t0===1016?G(K==="SGR_PIXELS"):t0===1048?1:t0===47||t0===1047||t0===1049?G(c0===j):t0===2004?G(I.bracketedPasteMode):0,Q.triggerDataEvent(`${n.C0.ESC}[${P?"":"?"}${h0};${A0}$y`),!0;var h0,A0}_updateAttrColor(E,P,I,U,K){return P===2?(E|=50331648,E&=-16777216,E|=z.AttributeData.fromColorRGB([I,U,K])):P===5&&(E&=-50331904,E|=33554432|255&I),E}_extractColor(E,P,I){let U=[0,0,-1,0,0,0],K=0,Q=0;do{if(U[Q+K]=E.params[P+Q],E.hasSubParams(P+Q)){let r0=E.getSubParams(P+Q),e0=0;do U[1]===5&&(K=1),U[Q+e0+1+K]=r0[e0];while(++e0<r0.length&&e0+Q+1+K<U.length);break}if(U[1]===5&&Q+K>=2||U[1]===2&&Q+K>=5)break;U[1]&&(K=1)}while(++Q+P<E.length&&Q+K<U.length);for(let r0=2;r0<U.length;++r0)U[r0]===-1&&(U[r0]=0);switch(U[0]){case 38:I.fg=this._updateAttrColor(I.fg,U[1],U[3],U[4],U[5]);break;case 48:I.bg=this._updateAttrColor(I.bg,U[1],U[3],U[4],U[5]);break;case 58:I.extended=I.extended.clone(),I.extended.underlineColor=this._updateAttrColor(I.extended.underlineColor,U[1],U[3],U[4],U[5])}return Q}_processUnderline(E,P){P.extended=P.extended.clone(),(!~E||E>5)&&(E=1),P.extended.underlineStyle=E,P.fg|=268435456,E===0&&(P.fg&=-268435457),P.updateExtended()}_processSGR0(E){E.fg=t.DEFAULT_ATTR_DATA.fg,E.bg=t.DEFAULT_ATTR_DATA.bg,E.extended=E.extended.clone(),E.extended.underlineStyle=0,E.extended.underlineColor&=-67108864,E.updateExtended()}charAttributes(E){if(E.length===1&&E.params[0]===0)return this._processSGR0(this._curAttrData),!0;let P=E.length,I,U=this._curAttrData;for(let K=0;K<P;K++)I=E.params[K],I>=30&&I<=37?(U.fg&=-50331904,U.fg|=16777216|I-30):I>=40&&I<=47?(U.bg&=-50331904,U.bg|=16777216|I-40):I>=90&&I<=97?(U.fg&=-50331904,U.fg|=16777224|I-90):I>=100&&I<=107?(U.bg&=-50331904,U.bg|=16777224|I-100):I===0?this._processSGR0(U):I===1?U.fg|=134217728:I===3?U.bg|=67108864:I===4?(U.fg|=268435456,this._processUnderline(E.hasSubParams(K)?E.getSubParams(K)[0]:1,U)):I===5?U.fg|=536870912:I===7?U.fg|=67108864:I===8?U.fg|=1073741824:I===9?U.fg|=2147483648:I===2?U.bg|=134217728:I===21?this._processUnderline(2,U):I===22?(U.fg&=-134217729,U.bg&=-134217729):I===23?U.bg&=-67108865:I===24?(U.fg&=-268435457,this._processUnderline(0,U)):I===25?U.fg&=-536870913:I===27?U.fg&=-67108865:I===28?U.fg&=-1073741825:I===29?U.fg&=2147483647:I===39?(U.fg&=-67108864,U.fg|=16777215&t.DEFAULT_ATTR_DATA.fg):I===49?(U.bg&=-67108864,U.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):I===38||I===48||I===58?K+=this._extractColor(E,K,U):I===59?(U.extended=U.extended.clone(),U.extended.underlineColor=-1,U.updateExtended()):I===100?(U.fg&=-67108864,U.fg|=16777215&t.DEFAULT_ATTR_DATA.fg,U.bg&=-67108864,U.bg|=16777215&t.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",I);return!0}deviceStatus(E){switch(E.params[0]){case 5:this._coreService.triggerDataEvent(`${n.C0.ESC}[0n`);break;case 6:let P=this._activeBuffer.y+1,I=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${n.C0.ESC}[${P};${I}R`)}return!0}deviceStatusPrivate(E){if(E.params[0]===6){let P=this._activeBuffer.y+1,I=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${n.C0.ESC}[?${P};${I}R`)}return!0}softReset(E){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(E){let P=E.params[0]||1;switch(P){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}let I=P%2==1;return this._optionsService.options.cursorBlink=I,!0}setScrollRegion(E){let P=E.params[0]||1,I;return(E.length<2||(I=E.params[1])>this._bufferService.rows||I===0)&&(I=this._bufferService.rows),I>P&&(this._activeBuffer.scrollTop=P-1,this._activeBuffer.scrollBottom=I-1,this._setCursor(0,0)),!0}windowOptions(E){if(!H(E.params[0],this._optionsService.rawOptions.windowOptions))return!0;let P=E.length>1?E.params[1]:0;switch(E.params[0]){case 14:P!==2&&this._onRequestWindowsOptionsReport.fire(T.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(T.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${n.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:P!==0&&P!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),P!==0&&P!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:P!==0&&P!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),P!==0&&P!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(E){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(E){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(E){return this._windowTitle=E,this._onTitleChange.fire(E),!0}setIconName(E){return this._iconName=E,!0}setOrReportIndexedColor(E){let P=[],I=E.split(";");for(;I.length>1;){let U=I.shift(),K=I.shift();if(/^\d+$/.exec(U)){let Q=parseInt(U);if(0<=Q&&Q<256)if(K==="?")P.push({type:0,index:Q});else{let r0=(0,S.parseColor)(K);r0&&P.push({type:1,index:Q,color:r0})}}}return P.length&&this._onColor.fire(P),!0}setHyperlink(E){let P=E.split(";");return!(P.length<2)&&(P[1]?this._createHyperlink(P[0],P[1]):!P[0]&&this._finishHyperlink())}_createHyperlink(E,P){this._getCurrentLinkId()&&this._finishHyperlink();let I=E.split(":"),U,K=I.findIndex(Q=>Q.startsWith("id="));return K!==-1&&(U=I[K].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:U,uri:P}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(E,P){let I=E.split(";");for(let U=0;U<I.length&&!(P>=this._specialColors.length);++U,++P)if(I[U]==="?")this._onColor.fire([{type:0,index:this._specialColors[P]}]);else{let K=(0,S.parseColor)(I[U]);K&&this._onColor.fire([{type:1,index:this._specialColors[P],color:K}])}return!0}setOrReportFgColor(E){return this._setOrReportSpecialColor(E,0)}setOrReportBgColor(E){return this._setOrReportSpecialColor(E,1)}setOrReportCursorColor(E){return this._setOrReportSpecialColor(E,2)}restoreIndexedColor(E){if(!E)return this._onColor.fire([{type:2}]),!0;let P=[],I=E.split(";");for(let U=0;U<I.length;++U)if(/^\d+$/.exec(I[U])){let K=parseInt(I[U]);0<=K&&K<256&&P.push({type:2,index:K})}return P.length&&this._onColor.fire(P),!0}restoreFgColor(E){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(E){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(E){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,c.DEFAULT_CHARSET),!0}selectCharset(E){return E.length!==2?(this.selectDefaultCharset(),!0):(E[0]==="/"||this._charsetService.setgCharset(y[E[0]],c.CHARSETS[E[1]]||c.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){let E=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,E,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=t.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=t.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(E){return this._charsetService.setgLevel(E),!0}screenAlignmentPattern(){let E=new r.CellData;E.content=4194304|"E".charCodeAt(0),E.fg=this._curAttrData.fg,E.bg=this._curAttrData.bg,this._setCursor(0,0);for(let P=0;P<this._bufferService.rows;++P){let I=this._activeBuffer.ybase+this._activeBuffer.y+P,U=this._activeBuffer.lines.get(I);U&&(U.fill(E),U.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(E,P){let I=this._bufferService.buffer,U=this._optionsService.rawOptions;return(K=>(this._coreService.triggerDataEvent(`${n.C0.ESC}${K}${n.C0.ESC}\\`),!0))(E==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:E==='"p'?'P1$r61;1"p':E==="r"?`P1$r${I.scrollTop+1};${I.scrollBottom+1}r`:E==="m"?"P1$r0m":E===" q"?`P1$r${{block:2,underline:4,bar:6}[U.cursorStyle]-(U.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(E,P){this._dirtyRowTracker.markRangeDirty(E,P)}}e.InputHandler=Z;let B=class{constructor(N){this._bufferService=N,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(N){N<this.start?this.start=N:N>this.end&&(this.end=N)}markRangeDirty(N,E){N>E&&(V=N,N=E,E=V),N<this.start&&(this.start=N),E>this.end&&(this.end=E)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};B=m([o(0,M.IBufferService)],B)},844:(b,e)=>{function a(m){for(let o of m)o.dispose();m.length=0}Object.defineProperty(e,"__esModule",{value:!0}),e.getDisposeArrayDisposable=e.disposeArray=e.toDisposable=e.Disposable=void 0,e.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let m of this._disposables)m.dispose();this._disposables.length=0}register(m){return this._disposables.push(m),m}unregister(m){let o=this._disposables.indexOf(m);o!==-1&&this._disposables.splice(o,1)}},e.toDisposable=function(m){return{dispose:m}},e.disposeArray=a,e.getDisposeArrayDisposable=function(m){return{dispose:()=>a(m)}}},1505:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FourKeyMap=e.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(o,n,c){this._data[o]||(this._data[o]={}),this._data[o][n]=c}get(o,n){return this._data[o]?this._data[o][n]:void 0}clear(){this._data={}}}e.TwoKeyMap=a,e.FourKeyMap=class{constructor(){this._data=new a}set(m,o,n,c,v){this._data.get(m,o)||this._data.set(m,o,new a),this._data.get(m,o).set(n,c,v)}get(m,o,n,c){var v;return(v=this._data.get(m,o))===null||v===void 0?void 0:v.get(n,c)}clear(){this._data.clear()}}},6114:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isChromeOS=e.isLinux=e.isWindows=e.isIphone=e.isIpad=e.isMac=e.getSafariVersion=e.isSafari=e.isLegacyEdge=e.isFirefox=e.isNode=void 0,e.isNode=typeof navigator=="undefined";let a=e.isNode?"node":navigator.userAgent,m=e.isNode?"node":navigator.platform;e.isFirefox=a.includes("Firefox"),e.isLegacyEdge=a.includes("Edge"),e.isSafari=/^((?!chrome|android).)*safari/i.test(a),e.getSafariVersion=function(){if(!e.isSafari)return 0;let o=a.match(/Version\/(\d+)/);return o===null||o.length<2?0:parseInt(o[1])},e.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(m),e.isIpad=m==="iPad",e.isIphone=m==="iPhone",e.isWindows=["Windows","Win16","Win32","WinCE"].includes(m),e.isLinux=m.indexOf("Linux")>=0,e.isChromeOS=/\bCrOS\b/.test(a)},6106:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SortedList=void 0;let a=0;e.SortedList=class{constructor(m){this._getKey=m,this._array=[]}clear(){this._array.length=0}insert(m){this._array.length!==0?(a=this._search(this._getKey(m),0,this._array.length-1),this._array.splice(a,0,m)):this._array.push(m)}delete(m){if(this._array.length===0)return!1;let o=this._getKey(m);if(o===void 0||(a=this._search(o,0,this._array.length-1),a===-1)||this._getKey(this._array[a])!==o)return!1;do if(this._array[a]===m)return this._array.splice(a,1),!0;while(++a<this._array.length&&this._getKey(this._array[a])===o);return!1}*getKeyIterator(m){if(this._array.length!==0&&(a=this._search(m,0,this._array.length-1),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===m))do yield this._array[a];while(++a<this._array.length&&this._getKey(this._array[a])===m)}forEachByKey(m,o){if(this._array.length!==0&&(a=this._search(m,0,this._array.length-1),!(a<0||a>=this._array.length)&&this._getKey(this._array[a])===m))do o(this._array[a]);while(++a<this._array.length&&this._getKey(this._array[a])===m)}values(){return this._array.values()}_search(m,o,n){if(n<o)return o;let c=Math.floor((o+n)/2),v=this._getKey(this._array[c]);if(v>m)return this._search(m,o,c-1);if(v<m)return this._search(m,c+1,n);for(;c>0&&this._getKey(this._array[c-1])===m;)c--;return c}}},7226:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DebouncedIdleTask=e.IdleTaskQueue=e.PriorityTaskQueue=void 0;let m=a(6114);class o{constructor(){this._tasks=[],this._i=0}enqueue(v){this._tasks.push(v),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(v){this._idleCallback=void 0;let f=0,i=0,t=v.timeRemaining(),p=0;for(;this._i<this._tasks.length;){if(f=Date.now(),this._tasks[this._i]()||this._i++,f=Math.max(1,Date.now()-f),i=Math.max(f,i),p=v.timeRemaining(),1.5*i>p)return t-f<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(t-f))}ms`),void this._start();t=p}this.clear()}}class n extends o{_requestCallback(v){return setTimeout(()=>v(this._createDeadline(16)))}_cancelCallback(v){clearTimeout(v)}_createDeadline(v){let f=Date.now()+v;return{timeRemaining:()=>Math.max(0,f-Date.now())}}}e.PriorityTaskQueue=n,e.IdleTaskQueue=!m.isNode&&"requestIdleCallback"in window?class extends o{_requestCallback(c){return requestIdleCallback(c)}_cancelCallback(c){cancelIdleCallback(c)}}:n,e.DebouncedIdleTask=class{constructor(){this._queue=new e.IdleTaskQueue}set(c){this._queue.clear(),this._queue.enqueue(c)}flush(){this._queue.flush()}}},9282:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.updateWindowsModeWrappedState=void 0;let m=a(643);e.updateWindowsModeWrappedState=function(o){let n=o.buffer.lines.get(o.buffer.ybase+o.buffer.y-1),c=n==null?void 0:n.get(o.cols-1),v=o.buffer.lines.get(o.buffer.ybase+o.buffer.y);v&&c&&(v.isWrapped=c[m.CHAR_DATA_CODE_INDEX]!==m.NULL_CELL_CODE&&c[m.CHAR_DATA_CODE_INDEX]!==m.WHITESPACE_CELL_CODE)}},3734:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExtendedAttrs=e.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new m}static toColorRGB(n){return[n>>>16&255,n>>>8&255,255&n]}static fromColorRGB(n){return(255&n[0])<<16|(255&n[1])<<8|255&n[2]}clone(){let n=new a;return n.fg=this.fg,n.bg=this.bg,n.extended=this.extended.clone(),n}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}e.AttributeData=a;class m{constructor(n=0,c=0){this._ext=0,this._urlId=0,this._ext=n,this._urlId=c}get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(n){this._ext=n}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(n){this._ext&=-469762049,this._ext|=n<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(n){this._ext&=-67108864,this._ext|=67108863&n}get urlId(){return this._urlId}set urlId(n){this._urlId=n}clone(){return new m(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}e.ExtendedAttrs=m},9092:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferStringIterator=e.Buffer=e.MAX_BUFFER_SIZE=void 0;let m=a(6349),o=a(8437),n=a(511),c=a(643),v=a(4634),f=a(4863),i=a(7116),t=a(3734),p=a(7226);e.MAX_BUFFER_SIZE=4294967295,e.Buffer=class{constructor(r,z,M){this._hasScrollback=r,this._optionsService=z,this._bufferService=M,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=o.DEFAULT_ATTR_DATA.clone(),this.savedCharset=i.DEFAULT_CHARSET,this.markers=[],this._nullCell=n.CellData.fromCharData([0,c.NULL_CELL_CHAR,c.NULL_CELL_WIDTH,c.NULL_CELL_CODE]),this._whitespaceCell=n.CellData.fromCharData([0,c.WHITESPACE_CELL_CHAR,c.WHITESPACE_CELL_WIDTH,c.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new p.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new m.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(r){return r?(this._nullCell.fg=r.fg,this._nullCell.bg=r.bg,this._nullCell.extended=r.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new t.ExtendedAttrs),this._nullCell}getWhitespaceCell(r){return r?(this._whitespaceCell.fg=r.fg,this._whitespaceCell.bg=r.bg,this._whitespaceCell.extended=r.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new t.ExtendedAttrs),this._whitespaceCell}getBlankLine(r,z){return new o.BufferLine(this._bufferService.cols,this.getNullCell(r),z)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){let r=this.ybase+this.y-this.ydisp;return r>=0&&r<this._rows}_getCorrectBufferLength(r){if(!this._hasScrollback)return r;let z=r+this._optionsService.rawOptions.scrollback;return z>e.MAX_BUFFER_SIZE?e.MAX_BUFFER_SIZE:z}fillViewportRows(r){if(this.lines.length===0){r===void 0&&(r=o.DEFAULT_ATTR_DATA);let z=this._rows;for(;z--;)this.lines.push(this.getBlankLine(r))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new m.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(r,z){let M=this.getNullCell(o.DEFAULT_ATTR_DATA),_=0,L=this._getCorrectBufferLength(z);if(L>this.lines.maxLength&&(this.lines.maxLength=L),this.lines.length>0){if(this._cols<r)for(let y=0;y<this.lines.length;y++)_+=+this.lines.get(y).resize(r,M);let S=0;if(this._rows<z)for(let y=this._rows;y<z;y++)this.lines.length<z+this.ybase&&(this._optionsService.rawOptions.windowsMode?this.lines.push(new o.BufferLine(r,M)):this.ybase>0&&this.lines.length<=this.ybase+this.y+S+1?(this.ybase--,S++,this.ydisp>0&&this.ydisp--):this.lines.push(new o.BufferLine(r,M)));else for(let y=this._rows;y>z;y--)this.lines.length>z+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(L<this.lines.maxLength){let y=this.lines.length-L;y>0&&(this.lines.trimStart(y),this.ybase=Math.max(this.ybase-y,0),this.ydisp=Math.max(this.ydisp-y,0),this.savedY=Math.max(this.savedY-y,0)),this.lines.maxLength=L}this.x=Math.min(this.x,r-1),this.y=Math.min(this.y,z-1),S&&(this.y+=S),this.savedX=Math.min(this.savedX,r-1),this.scrollTop=0}if(this.scrollBottom=z-1,this._isReflowEnabled&&(this._reflow(r,z),this._cols>r))for(let S=0;S<this.lines.length;S++)_+=+this.lines.get(S).resize(r,M);this._cols=r,this._rows=z,this._memoryCleanupQueue.clear(),_>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let r=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,r=!1);let z=0;for(;this._memoryCleanupPosition<this.lines.length;)if(z+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),z>100)return!0;return r}get _isReflowEnabled(){return this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(r,z){this._cols!==r&&(r>this._cols?this._reflowLarger(r,z):this._reflowSmaller(r,z))}_reflowLarger(r,z){let M=(0,v.reflowLargerGetLinesToRemove)(this.lines,this._cols,r,this.ybase+this.y,this.getNullCell(o.DEFAULT_ATTR_DATA));if(M.length>0){let _=(0,v.reflowLargerCreateNewLayout)(this.lines,M);(0,v.reflowLargerApplyNewLayout)(this.lines,_.layout),this._reflowLargerAdjustViewport(r,z,_.countRemoved)}}_reflowLargerAdjustViewport(r,z,M){let _=this.getNullCell(o.DEFAULT_ATTR_DATA),L=M;for(;L-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<z&&this.lines.push(new o.BufferLine(r,_))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-M,0)}_reflowSmaller(r,z){let M=this.getNullCell(o.DEFAULT_ATTR_DATA),_=[],L=0;for(let S=this.lines.length-1;S>=0;S--){let y=this.lines.get(S);if(!y||!y.isWrapped&&y.getTrimmedLength()<=r)continue;let A=[y];for(;y.isWrapped&&S>0;)y=this.lines.get(--S),A.unshift(y);let H=this.ybase+this.y;if(H>=S&&H<S+A.length)continue;let T=A[A.length-1].getTrimmedLength(),V=(0,v.reflowSmallerGetNewLineLengths)(A,this._cols,r),Z=V.length-A.length,B;B=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+Z):Math.max(0,this.lines.length-this.lines.maxLength+Z);let N=[];for(let Q=0;Q<Z;Q++){let r0=this.getBlankLine(o.DEFAULT_ATTR_DATA,!0);N.push(r0)}N.length>0&&(_.push({start:S+A.length+L,newLines:N}),L+=N.length),A.push(...N);let E=V.length-1,P=V[E];P===0&&(E--,P=V[E]);let I=A.length-Z-1,U=T;for(;I>=0;){let Q=Math.min(U,P);if(A[E]===void 0)break;if(A[E].copyCellsFrom(A[I],U-Q,P-Q,Q,!0),P-=Q,P===0&&(E--,P=V[E]),U-=Q,U===0){I--;let r0=Math.max(I,0);U=(0,v.getWrappedLineTrimmedLength)(A,r0,this._cols)}}for(let Q=0;Q<A.length;Q++)V[Q]<r&&A[Q].setCell(V[Q],M);let K=Z-B;for(;K-- >0;)this.ybase===0?this.y<z-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+L)-z&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+Z,this.ybase+z-1)}if(_.length>0){let S=[],y=[];for(let E=0;E<this.lines.length;E++)y.push(this.lines.get(E));let A=this.lines.length,H=A-1,T=0,V=_[T];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+L);let Z=0;for(let E=Math.min(this.lines.maxLength-1,A+L-1);E>=0;E--)if(V&&V.start>H+Z){for(let P=V.newLines.length-1;P>=0;P--)this.lines.set(E--,V.newLines[P]);E++,S.push({index:H+1,amount:V.newLines.length}),Z+=V.newLines.length,V=_[++T]}else this.lines.set(E,y[H--]);let B=0;for(let E=S.length-1;E>=0;E--)S[E].index+=B,this.lines.onInsertEmitter.fire(S[E]),B+=S[E].amount;let N=Math.max(0,A+L-this.lines.maxLength);N>0&&this.lines.onTrimEmitter.fire(N)}}stringIndexToBufferIndex(r,z,M=!1){for(;z;){let _=this.lines.get(r);if(!_)return[-1,-1];let L=M?_.getTrimmedLength():_.length;for(let S=0;S<L;++S)if(_.get(S)[c.CHAR_DATA_WIDTH_INDEX]&&(z-=_.get(S)[c.CHAR_DATA_CHAR_INDEX].length||1),z<0)return[r,S];r++}return[r,0]}translateBufferLineToString(r,z,M=0,_){let L=this.lines.get(r);return L?L.translateToString(z,M,_):""}getWrappedRangeForLine(r){let z=r,M=r;for(;z>0&&this.lines.get(z).isWrapped;)z--;for(;M+1<this.lines.length&&this.lines.get(M+1).isWrapped;)M++;return{first:z,last:M}}setupTabStops(r){for(r!=null?this.tabs[r]||(r=this.prevStop(r)):(this.tabs={},r=0);r<this._cols;r+=this._optionsService.rawOptions.tabStopWidth)this.tabs[r]=!0}prevStop(r){for(r==null&&(r=this.x);!this.tabs[--r]&&r>0;);return r>=this._cols?this._cols-1:r<0?0:r}nextStop(r){for(r==null&&(r=this.x);!this.tabs[++r]&&r<this._cols;);return r>=this._cols?this._cols-1:r<0?0:r}clearMarkers(r){this._isClearing=!0;for(let z=0;z<this.markers.length;z++)this.markers[z].line===r&&(this.markers[z].dispose(),this.markers.splice(z--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let r=0;r<this.markers.length;r++)this.markers[r].dispose(),this.markers.splice(r--,1);this._isClearing=!1}addMarker(r){let z=new f.Marker(r);return this.markers.push(z),z.register(this.lines.onTrim(M=>{z.line-=M,z.line<0&&z.dispose()})),z.register(this.lines.onInsert(M=>{z.line>=M.index&&(z.line+=M.amount)})),z.register(this.lines.onDelete(M=>{z.line>=M.index&&z.line<M.index+M.amount&&z.dispose(),z.line>M.index&&(z.line-=M.amount)})),z.register(z.onDispose(()=>this._removeMarker(z))),z}_removeMarker(r){this._isClearing||this.markers.splice(this.markers.indexOf(r),1)}iterator(r,z,M,_,L){return new d(this,r,z,M,_,L)}};class d{constructor(z,M,_=0,L=z.lines.length,S=0,y=0){this._buffer=z,this._trimRight=M,this._startIndex=_,this._endIndex=L,this._startOverscan=S,this._endOverscan=y,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}hasNext(){return this._current<this._endIndex}next(){let z=this._buffer.getWrappedRangeForLine(this._current);z.first<this._startIndex-this._startOverscan&&(z.first=this._startIndex-this._startOverscan),z.last>this._endIndex+this._endOverscan&&(z.last=this._endIndex+this._endOverscan),z.first=Math.max(z.first,0),z.last=Math.min(z.last,this._buffer.lines.length);let M="";for(let _=z.first;_<=z.last;++_)M+=this._buffer.translateBufferLineToString(_,this._trimRight);return this._current=z.last+1,{range:z,content:M}}}e.BufferStringIterator=d},8437:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferLine=e.DEFAULT_ATTR_DATA=void 0;let m=a(482),o=a(643),n=a(511),c=a(3734);e.DEFAULT_ATTR_DATA=Object.freeze(new c.AttributeData);let v=0;class f{constructor(t,p,d=!1){this.isWrapped=d,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*t);let r=p||n.CellData.fromCharData([0,o.NULL_CELL_CHAR,o.NULL_CELL_WIDTH,o.NULL_CELL_CODE]);for(let z=0;z<t;++z)this.setCell(z,r);this.length=t}get(t){let p=this._data[3*t+0],d=2097151&p;return[this._data[3*t+1],2097152&p?this._combined[t]:d?(0,m.stringFromCodePoint)(d):"",p>>22,2097152&p?this._combined[t].charCodeAt(this._combined[t].length-1):d]}set(t,p){this._data[3*t+1]=p[o.CHAR_DATA_ATTR_INDEX],p[o.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[t]=p[1],this._data[3*t+0]=2097152|t|p[o.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*t+0]=p[o.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|p[o.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(t){return this._data[3*t+0]>>22}hasWidth(t){return 12582912&this._data[3*t+0]}getFg(t){return this._data[3*t+1]}getBg(t){return this._data[3*t+2]}hasContent(t){return 4194303&this._data[3*t+0]}getCodePoint(t){let p=this._data[3*t+0];return 2097152&p?this._combined[t].charCodeAt(this._combined[t].length-1):2097151&p}isCombined(t){return 2097152&this._data[3*t+0]}getString(t){let p=this._data[3*t+0];return 2097152&p?this._combined[t]:2097151&p?(0,m.stringFromCodePoint)(2097151&p):""}isProtected(t){return 536870912&this._data[3*t+2]}loadCell(t,p){return v=3*t,p.content=this._data[v+0],p.fg=this._data[v+1],p.bg=this._data[v+2],2097152&p.content&&(p.combinedData=this._combined[t]),268435456&p.bg&&(p.extended=this._extendedAttrs[t]),p}setCell(t,p){2097152&p.content&&(this._combined[t]=p.combinedData),268435456&p.bg&&(this._extendedAttrs[t]=p.extended),this._data[3*t+0]=p.content,this._data[3*t+1]=p.fg,this._data[3*t+2]=p.bg}setCellFromCodePoint(t,p,d,r,z,M){268435456&z&&(this._extendedAttrs[t]=M),this._data[3*t+0]=p|d<<22,this._data[3*t+1]=r,this._data[3*t+2]=z}addCodepointToCell(t,p){let d=this._data[3*t+0];2097152&d?this._combined[t]+=(0,m.stringFromCodePoint)(p):(2097151&d?(this._combined[t]=(0,m.stringFromCodePoint)(2097151&d)+(0,m.stringFromCodePoint)(p),d&=-2097152,d|=2097152):d=p|4194304,this._data[3*t+0]=d)}insertCells(t,p,d,r){if((t%=this.length)&&this.getWidth(t-1)===2&&this.setCellFromCodePoint(t-1,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new c.ExtendedAttrs),p<this.length-t){let z=new n.CellData;for(let M=this.length-t-p-1;M>=0;--M)this.setCell(t+p+M,this.loadCell(t+M,z));for(let M=0;M<p;++M)this.setCell(t+M,d)}else for(let z=t;z<this.length;++z)this.setCell(z,d);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new c.ExtendedAttrs)}deleteCells(t,p,d,r){if(t%=this.length,p<this.length-t){let z=new n.CellData;for(let M=0;M<this.length-t-p;++M)this.setCell(t+M,this.loadCell(t+p+M,z));for(let M=this.length-p;M<this.length;++M)this.setCell(M,d)}else for(let z=t;z<this.length;++z)this.setCell(z,d);t&&this.getWidth(t-1)===2&&this.setCellFromCodePoint(t-1,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new c.ExtendedAttrs),this.getWidth(t)!==0||this.hasContent(t)||this.setCellFromCodePoint(t,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new c.ExtendedAttrs)}replaceCells(t,p,d,r,z=!1){if(z)for(t&&this.getWidth(t-1)===2&&!this.isProtected(t-1)&&this.setCellFromCodePoint(t-1,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new c.ExtendedAttrs),p<this.length&&this.getWidth(p-1)===2&&!this.isProtected(p)&&this.setCellFromCodePoint(p,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new c.ExtendedAttrs);t<p&&t<this.length;)this.isProtected(t)||this.setCell(t,d),t++;else for(t&&this.getWidth(t-1)===2&&this.setCellFromCodePoint(t-1,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new c.ExtendedAttrs),p<this.length&&this.getWidth(p-1)===2&&this.setCellFromCodePoint(p,0,1,(r==null?void 0:r.fg)||0,(r==null?void 0:r.bg)||0,(r==null?void 0:r.extended)||new c.ExtendedAttrs);t<p&&t<this.length;)this.setCell(t++,d)}resize(t,p){if(t===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;let d=3*t;if(t>this.length){if(this._data.buffer.byteLength>=4*d)this._data=new Uint32Array(this._data.buffer,0,d);else{let r=new Uint32Array(d);r.set(this._data),this._data=r}for(let r=this.length;r<t;++r)this.setCell(r,p)}else{this._data=this._data.subarray(0,d);let r=Object.keys(this._combined);for(let M=0;M<r.length;M++){let _=parseInt(r[M],10);_>=t&&delete this._combined[_]}let z=Object.keys(this._extendedAttrs);for(let M=0;M<z.length;M++){let _=parseInt(z[M],10);_>=t&&delete this._extendedAttrs[_]}}return this.length=t,4*d*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){let t=new Uint32Array(this._data.length);return t.set(this._data),this._data=t,1}return 0}fill(t,p=!1){if(p)for(let d=0;d<this.length;++d)this.isProtected(d)||this.setCell(d,t);else{this._combined={},this._extendedAttrs={};for(let d=0;d<this.length;++d)this.setCell(d,t)}}copyFrom(t){this.length!==t.length?this._data=new Uint32Array(t._data):this._data.set(t._data),this.length=t.length,this._combined={};for(let p in t._combined)this._combined[p]=t._combined[p];this._extendedAttrs={};for(let p in t._extendedAttrs)this._extendedAttrs[p]=t._extendedAttrs[p];this.isWrapped=t.isWrapped}clone(){let t=new f(0);t._data=new Uint32Array(this._data),t.length=this.length;for(let p in this._combined)t._combined[p]=this._combined[p];for(let p in this._extendedAttrs)t._extendedAttrs[p]=this._extendedAttrs[p];return t.isWrapped=this.isWrapped,t}getTrimmedLength(){for(let t=this.length-1;t>=0;--t)if(4194303&this._data[3*t+0])return t+(this._data[3*t+0]>>22);return 0}copyCellsFrom(t,p,d,r,z){let M=t._data;if(z)for(let L=r-1;L>=0;L--){for(let S=0;S<3;S++)this._data[3*(d+L)+S]=M[3*(p+L)+S];268435456&M[3*(p+L)+2]&&(this._extendedAttrs[d+L]=t._extendedAttrs[p+L])}else for(let L=0;L<r;L++){for(let S=0;S<3;S++)this._data[3*(d+L)+S]=M[3*(p+L)+S];268435456&M[3*(p+L)+2]&&(this._extendedAttrs[d+L]=t._extendedAttrs[p+L])}let _=Object.keys(t._combined);for(let L=0;L<_.length;L++){let S=parseInt(_[L],10);S>=p&&(this._combined[S-p+d]=t._combined[S])}}translateToString(t=!1,p=0,d=this.length){t&&(d=Math.min(d,this.getTrimmedLength()));let r="";for(;p<d;){let z=this._data[3*p+0],M=2097151&z;r+=2097152&z?this._combined[p]:M?(0,m.stringFromCodePoint)(M):o.WHITESPACE_CELL_CHAR,p+=z>>22||1}return r}}e.BufferLine=f},4841:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getRangeLength=void 0,e.getRangeLength=function(a,m){if(a.start.y>a.end.y)throw new Error(`Buffer range end (${a.end.x}, ${a.end.y}) cannot be before start (${a.start.x}, ${a.start.y})`);return m*(a.end.y-a.start.y)+(a.end.x-a.start.x+1)}},4634:(b,e)=>{function a(m,o,n){if(o===m.length-1)return m[o].getTrimmedLength();let c=!m[o].hasContent(n-1)&&m[o].getWidth(n-1)===1,v=m[o+1].getWidth(0)===2;return c&&v?n-1:n}Object.defineProperty(e,"__esModule",{value:!0}),e.getWrappedLineTrimmedLength=e.reflowSmallerGetNewLineLengths=e.reflowLargerApplyNewLayout=e.reflowLargerCreateNewLayout=e.reflowLargerGetLinesToRemove=void 0,e.reflowLargerGetLinesToRemove=function(m,o,n,c,v){let f=[];for(let i=0;i<m.length-1;i++){let t=i,p=m.get(++t);if(!p.isWrapped)continue;let d=[m.get(i)];for(;t<m.length&&p.isWrapped;)d.push(p),p=m.get(++t);if(c>=i&&c<t){i+=d.length-1;continue}let r=0,z=a(d,r,o),M=1,_=0;for(;M<d.length;){let S=a(d,M,o),y=S-_,A=n-z,H=Math.min(y,A);d[r].copyCellsFrom(d[M],_,z,H,!1),z+=H,z===n&&(r++,z=0),_+=H,_===S&&(M++,_=0),z===0&&r!==0&&d[r-1].getWidth(n-1)===2&&(d[r].copyCellsFrom(d[r-1],n-1,z++,1,!1),d[r-1].setCell(n-1,v))}d[r].replaceCells(z,n,v);let L=0;for(let S=d.length-1;S>0&&(S>r||d[S].getTrimmedLength()===0);S--)L++;L>0&&(f.push(i+d.length-L),f.push(L)),i+=d.length-1}return f},e.reflowLargerCreateNewLayout=function(m,o){let n=[],c=0,v=o[c],f=0;for(let i=0;i<m.length;i++)if(v===i){let t=o[++c];m.onDeleteEmitter.fire({index:i-f,amount:t}),i+=t-1,f+=t,v=o[++c]}else n.push(i);return{layout:n,countRemoved:f}},e.reflowLargerApplyNewLayout=function(m,o){let n=[];for(let c=0;c<o.length;c++)n.push(m.get(o[c]));for(let c=0;c<n.length;c++)m.set(c,n[c]);m.length=o.length},e.reflowSmallerGetNewLineLengths=function(m,o,n){let c=[],v=m.map((p,d)=>a(m,d,o)).reduce((p,d)=>p+d),f=0,i=0,t=0;for(;t<v;){if(v-t<n){c.push(v-t);break}f+=n;let p=a(m,i,o);f>p&&(f-=p,i++);let d=m[i].getWidth(f-1)===2;d&&f--;let r=d?n-1:n;c.push(r),t+=r}return c},e.getWrappedLineTrimmedLength=a},5295:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferSet=void 0;let m=a(9092),o=a(8460),n=a(844);class c extends n.Disposable{constructor(f,i){super(),this._optionsService=f,this._bufferService=i,this._onBufferActivate=this.register(new o.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new m.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new m.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(f){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(f),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(f,i){this._normal.resize(f,i),this._alt.resize(f,i),this.setupTabStops(f)}setupTabStops(f){this._normal.setupTabStops(f),this._alt.setupTabStops(f)}}e.BufferSet=c},511:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CellData=void 0;let m=a(482),o=a(643),n=a(3734);class c extends n.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new n.ExtendedAttrs,this.combinedData=""}static fromCharData(f){let i=new c;return i.setFromCharData(f),i}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,m.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(f){this.fg=f[o.CHAR_DATA_ATTR_INDEX],this.bg=0;let i=!1;if(f[o.CHAR_DATA_CHAR_INDEX].length>2)i=!0;else if(f[o.CHAR_DATA_CHAR_INDEX].length===2){let t=f[o.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=t&&t<=56319){let p=f[o.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=p&&p<=57343?this.content=1024*(t-55296)+p-56320+65536|f[o.CHAR_DATA_WIDTH_INDEX]<<22:i=!0}else i=!0}else this.content=f[o.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|f[o.CHAR_DATA_WIDTH_INDEX]<<22;i&&(this.combinedData=f[o.CHAR_DATA_CHAR_INDEX],this.content=2097152|f[o.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}e.CellData=c},643:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WHITESPACE_CELL_CODE=e.WHITESPACE_CELL_WIDTH=e.WHITESPACE_CELL_CHAR=e.NULL_CELL_CODE=e.NULL_CELL_WIDTH=e.NULL_CELL_CHAR=e.CHAR_DATA_CODE_INDEX=e.CHAR_DATA_WIDTH_INDEX=e.CHAR_DATA_CHAR_INDEX=e.CHAR_DATA_ATTR_INDEX=e.DEFAULT_EXT=e.DEFAULT_ATTR=e.DEFAULT_COLOR=void 0,e.DEFAULT_COLOR=0,e.DEFAULT_ATTR=256|e.DEFAULT_COLOR<<9,e.DEFAULT_EXT=0,e.CHAR_DATA_ATTR_INDEX=0,e.CHAR_DATA_CHAR_INDEX=1,e.CHAR_DATA_WIDTH_INDEX=2,e.CHAR_DATA_CODE_INDEX=3,e.NULL_CELL_CHAR="",e.NULL_CELL_WIDTH=1,e.NULL_CELL_CODE=0,e.WHITESPACE_CELL_CHAR=" ",e.WHITESPACE_CELL_WIDTH=1,e.WHITESPACE_CELL_CODE=32},4863:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Marker=void 0;let m=a(8460),o=a(844);class n{constructor(v){this.line=v,this.isDisposed=!1,this._disposables=[],this._id=n._nextId++,this._onDispose=this.register(new m.EventEmitter),this.onDispose=this._onDispose.event}get id(){return this._id}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,o.disposeArray)(this._disposables),this._disposables.length=0)}register(v){return this._disposables.push(v),v}}e.Marker=n,n._nextId=1},7116:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_CHARSET=e.CHARSETS=void 0,e.CHARSETS={},e.DEFAULT_CHARSET=e.CHARSETS.B,e.CHARSETS[0]={"`":"\u25C6",a:"\u2592",b:"\u2409",c:"\u240C",d:"\u240D",e:"\u240A",f:"\xB0",g:"\xB1",h:"\u2424",i:"\u240B",j:"\u2518",k:"\u2510",l:"\u250C",m:"\u2514",n:"\u253C",o:"\u23BA",p:"\u23BB",q:"\u2500",r:"\u23BC",s:"\u23BD",t:"\u251C",u:"\u2524",v:"\u2534",w:"\u252C",x:"\u2502",y:"\u2264",z:"\u2265","{":"\u03C0","|":"\u2260","}":"\xA3","~":"\xB7"},e.CHARSETS.A={"#":"\xA3"},e.CHARSETS.B=void 0,e.CHARSETS[4]={"#":"\xA3","@":"\xBE","[":"ij","\\":"\xBD","]":"|","{":"\xA8","|":"f","}":"\xBC","~":"\xB4"},e.CHARSETS.C=e.CHARSETS[5]={"[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},e.CHARSETS.R={"#":"\xA3","@":"\xE0","[":"\xB0","\\":"\xE7","]":"\xA7","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xA8"},e.CHARSETS.Q={"@":"\xE0","[":"\xE2","\\":"\xE7","]":"\xEA","^":"\xEE","`":"\xF4","{":"\xE9","|":"\xF9","}":"\xE8","~":"\xFB"},e.CHARSETS.K={"@":"\xA7","[":"\xC4","\\":"\xD6","]":"\xDC","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xDF"},e.CHARSETS.Y={"#":"\xA3","@":"\xA7","[":"\xB0","\\":"\xE7","]":"\xE9","`":"\xF9","{":"\xE0","|":"\xF2","}":"\xE8","~":"\xEC"},e.CHARSETS.E=e.CHARSETS[6]={"@":"\xC4","[":"\xC6","\\":"\xD8","]":"\xC5","^":"\xDC","`":"\xE4","{":"\xE6","|":"\xF8","}":"\xE5","~":"\xFC"},e.CHARSETS.Z={"#":"\xA3","@":"\xA7","[":"\xA1","\\":"\xD1","]":"\xBF","{":"\xB0","|":"\xF1","}":"\xE7"},e.CHARSETS.H=e.CHARSETS[7]={"@":"\xC9","[":"\xC4","\\":"\xD6","]":"\xC5","^":"\xDC","`":"\xE9","{":"\xE4","|":"\xF6","}":"\xE5","~":"\xFC"},e.CHARSETS["="]={"#":"\xF9","@":"\xE0","[":"\xE9","\\":"\xE7","]":"\xEA","^":"\xEE",_:"\xE8","`":"\xF4","{":"\xE4","|":"\xF6","}":"\xFC","~":"\xFB"}},2584:(b,e)=>{var a,m;Object.defineProperty(e,"__esModule",{value:!0}),e.C1_ESCAPED=e.C1=e.C0=void 0,function(o){o.NUL="\0",o.SOH="",o.STX="",o.ETX="",o.EOT="",o.ENQ="",o.ACK="",o.BEL="\x07",o.BS="\b",o.HT="	",o.LF=`
`,o.VT="\v",o.FF="\f",o.CR="\r",o.SO="",o.SI="",o.DLE="",o.DC1="",o.DC2="",o.DC3="",o.DC4="",o.NAK="",o.SYN="",o.ETB="",o.CAN="",o.EM="",o.SUB="",o.ESC="\x1B",o.FS="",o.GS="",o.RS="",o.US="",o.SP=" ",o.DEL="\x7F"}(a=e.C0||(e.C0={})),(m=e.C1||(e.C1={})).PAD="\x80",m.HOP="\x81",m.BPH="\x82",m.NBH="\x83",m.IND="\x84",m.NEL="\x85",m.SSA="\x86",m.ESA="\x87",m.HTS="\x88",m.HTJ="\x89",m.VTS="\x8A",m.PLD="\x8B",m.PLU="\x8C",m.RI="\x8D",m.SS2="\x8E",m.SS3="\x8F",m.DCS="\x90",m.PU1="\x91",m.PU2="\x92",m.STS="\x93",m.CCH="\x94",m.MW="\x95",m.SPA="\x96",m.EPA="\x97",m.SOS="\x98",m.SGCI="\x99",m.SCI="\x9A",m.CSI="\x9B",m.ST="\x9C",m.OSC="\x9D",m.PM="\x9E",m.APC="\x9F",(e.C1_ESCAPED||(e.C1_ESCAPED={})).ST=`${a.ESC}\\`},7399:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.evaluateKeyboardEvent=void 0;let m=a(2584),o={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};e.evaluateKeyboardEvent=function(n,c,v,f){let i={type:0,cancel:!1,key:void 0},t=(n.shiftKey?1:0)|(n.altKey?2:0)|(n.ctrlKey?4:0)|(n.metaKey?8:0);switch(n.keyCode){case 0:n.key==="UIKeyInputUpArrow"?i.key=c?m.C0.ESC+"OA":m.C0.ESC+"[A":n.key==="UIKeyInputLeftArrow"?i.key=c?m.C0.ESC+"OD":m.C0.ESC+"[D":n.key==="UIKeyInputRightArrow"?i.key=c?m.C0.ESC+"OC":m.C0.ESC+"[C":n.key==="UIKeyInputDownArrow"&&(i.key=c?m.C0.ESC+"OB":m.C0.ESC+"[B");break;case 8:if(n.altKey){i.key=m.C0.ESC+m.C0.DEL;break}i.key=m.C0.DEL;break;case 9:if(n.shiftKey){i.key=m.C0.ESC+"[Z";break}i.key=m.C0.HT,i.cancel=!0;break;case 13:i.key=n.altKey?m.C0.ESC+m.C0.CR:m.C0.CR,i.cancel=!0;break;case 27:i.key=m.C0.ESC,n.altKey&&(i.key=m.C0.ESC+m.C0.ESC),i.cancel=!0;break;case 37:if(n.metaKey)break;t?(i.key=m.C0.ESC+"[1;"+(t+1)+"D",i.key===m.C0.ESC+"[1;3D"&&(i.key=m.C0.ESC+(v?"b":"[1;5D"))):i.key=c?m.C0.ESC+"OD":m.C0.ESC+"[D";break;case 39:if(n.metaKey)break;t?(i.key=m.C0.ESC+"[1;"+(t+1)+"C",i.key===m.C0.ESC+"[1;3C"&&(i.key=m.C0.ESC+(v?"f":"[1;5C"))):i.key=c?m.C0.ESC+"OC":m.C0.ESC+"[C";break;case 38:if(n.metaKey)break;t?(i.key=m.C0.ESC+"[1;"+(t+1)+"A",v||i.key!==m.C0.ESC+"[1;3A"||(i.key=m.C0.ESC+"[1;5A")):i.key=c?m.C0.ESC+"OA":m.C0.ESC+"[A";break;case 40:if(n.metaKey)break;t?(i.key=m.C0.ESC+"[1;"+(t+1)+"B",v||i.key!==m.C0.ESC+"[1;3B"||(i.key=m.C0.ESC+"[1;5B")):i.key=c?m.C0.ESC+"OB":m.C0.ESC+"[B";break;case 45:n.shiftKey||n.ctrlKey||(i.key=m.C0.ESC+"[2~");break;case 46:i.key=t?m.C0.ESC+"[3;"+(t+1)+"~":m.C0.ESC+"[3~";break;case 36:i.key=t?m.C0.ESC+"[1;"+(t+1)+"H":c?m.C0.ESC+"OH":m.C0.ESC+"[H";break;case 35:i.key=t?m.C0.ESC+"[1;"+(t+1)+"F":c?m.C0.ESC+"OF":m.C0.ESC+"[F";break;case 33:n.shiftKey?i.type=2:n.ctrlKey?i.key=m.C0.ESC+"[5;"+(t+1)+"~":i.key=m.C0.ESC+"[5~";break;case 34:n.shiftKey?i.type=3:n.ctrlKey?i.key=m.C0.ESC+"[6;"+(t+1)+"~":i.key=m.C0.ESC+"[6~";break;case 112:i.key=t?m.C0.ESC+"[1;"+(t+1)+"P":m.C0.ESC+"OP";break;case 113:i.key=t?m.C0.ESC+"[1;"+(t+1)+"Q":m.C0.ESC+"OQ";break;case 114:i.key=t?m.C0.ESC+"[1;"+(t+1)+"R":m.C0.ESC+"OR";break;case 115:i.key=t?m.C0.ESC+"[1;"+(t+1)+"S":m.C0.ESC+"OS";break;case 116:i.key=t?m.C0.ESC+"[15;"+(t+1)+"~":m.C0.ESC+"[15~";break;case 117:i.key=t?m.C0.ESC+"[17;"+(t+1)+"~":m.C0.ESC+"[17~";break;case 118:i.key=t?m.C0.ESC+"[18;"+(t+1)+"~":m.C0.ESC+"[18~";break;case 119:i.key=t?m.C0.ESC+"[19;"+(t+1)+"~":m.C0.ESC+"[19~";break;case 120:i.key=t?m.C0.ESC+"[20;"+(t+1)+"~":m.C0.ESC+"[20~";break;case 121:i.key=t?m.C0.ESC+"[21;"+(t+1)+"~":m.C0.ESC+"[21~";break;case 122:i.key=t?m.C0.ESC+"[23;"+(t+1)+"~":m.C0.ESC+"[23~";break;case 123:i.key=t?m.C0.ESC+"[24;"+(t+1)+"~":m.C0.ESC+"[24~";break;default:if(!n.ctrlKey||n.shiftKey||n.altKey||n.metaKey)if(v&&!f||!n.altKey||n.metaKey)!v||n.altKey||n.ctrlKey||n.shiftKey||!n.metaKey?n.key&&!n.ctrlKey&&!n.altKey&&!n.metaKey&&n.keyCode>=48&&n.key.length===1?i.key=n.key:n.key&&n.ctrlKey&&(n.key==="_"&&(i.key=m.C0.US),n.key==="@"&&(i.key=m.C0.NUL)):n.keyCode===65&&(i.type=1);else{let p=o[n.keyCode],d=p==null?void 0:p[n.shiftKey?1:0];if(d)i.key=m.C0.ESC+d;else if(n.keyCode>=65&&n.keyCode<=90){let r=n.ctrlKey?n.keyCode-64:n.keyCode+32,z=String.fromCharCode(r);n.shiftKey&&(z=z.toUpperCase()),i.key=m.C0.ESC+z}else if(n.keyCode===32)i.key=m.C0.ESC+(n.ctrlKey?m.C0.NUL:" ");else if(n.key==="Dead"&&n.code.startsWith("Key")){let r=n.code.slice(3,4);n.shiftKey||(r=r.toLowerCase()),i.key=m.C0.ESC+r,i.cancel=!0}}else n.keyCode>=65&&n.keyCode<=90?i.key=String.fromCharCode(n.keyCode-64):n.keyCode===32?i.key=m.C0.NUL:n.keyCode>=51&&n.keyCode<=55?i.key=String.fromCharCode(n.keyCode-51+27):n.keyCode===56?i.key=m.C0.DEL:n.keyCode===219?i.key=m.C0.ESC:n.keyCode===220?i.key=m.C0.FS:n.keyCode===221&&(i.key=m.C0.GS)}return i}},482:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Utf8ToUtf32=e.StringToUtf32=e.utf32ToString=e.stringFromCodePoint=void 0,e.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},e.utf32ToString=function(a,m=0,o=a.length){let n="";for(let c=m;c<o;++c){let v=a[c];v>65535?(v-=65536,n+=String.fromCharCode(55296+(v>>10))+String.fromCharCode(v%1024+56320)):n+=String.fromCharCode(v)}return n},e.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,m){let o=a.length;if(!o)return 0;let n=0,c=0;if(this._interim){let v=a.charCodeAt(c++);56320<=v&&v<=57343?m[n++]=1024*(this._interim-55296)+v-56320+65536:(m[n++]=this._interim,m[n++]=v),this._interim=0}for(let v=c;v<o;++v){let f=a.charCodeAt(v);if(55296<=f&&f<=56319){if(++v>=o)return this._interim=f,n;let i=a.charCodeAt(v);56320<=i&&i<=57343?m[n++]=1024*(f-55296)+i-56320+65536:(m[n++]=f,m[n++]=i)}else f!==65279&&(m[n++]=f)}return n}},e.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,m){let o=a.length;if(!o)return 0;let n,c,v,f,i=0,t=0,p=0;if(this.interim[0]){let z=!1,M=this.interim[0];M&=(224&M)==192?31:(240&M)==224?15:7;let _,L=0;for(;(_=63&this.interim[++L])&&L<4;)M<<=6,M|=_;let S=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,y=S-L;for(;p<y;){if(p>=o)return 0;if(_=a[p++],(192&_)!=128){p--,z=!0;break}this.interim[L++]=_,M<<=6,M|=63&_}z||(S===2?M<128?p--:m[i++]=M:S===3?M<2048||M>=55296&&M<=57343||M===65279||(m[i++]=M):M<65536||M>1114111||(m[i++]=M)),this.interim.fill(0)}let d=o-4,r=p;for(;r<o;){for(;!(!(r<d)||128&(n=a[r])||128&(c=a[r+1])||128&(v=a[r+2])||128&(f=a[r+3]));)m[i++]=n,m[i++]=c,m[i++]=v,m[i++]=f,r+=4;if(n=a[r++],n<128)m[i++]=n;else if((224&n)==192){if(r>=o)return this.interim[0]=n,i;if(c=a[r++],(192&c)!=128){r--;continue}if(t=(31&n)<<6|63&c,t<128){r--;continue}m[i++]=t}else if((240&n)==224){if(r>=o)return this.interim[0]=n,i;if(c=a[r++],(192&c)!=128){r--;continue}if(r>=o)return this.interim[0]=n,this.interim[1]=c,i;if(v=a[r++],(192&v)!=128){r--;continue}if(t=(15&n)<<12|(63&c)<<6|63&v,t<2048||t>=55296&&t<=57343||t===65279)continue;m[i++]=t}else if((248&n)==240){if(r>=o)return this.interim[0]=n,i;if(c=a[r++],(192&c)!=128){r--;continue}if(r>=o)return this.interim[0]=n,this.interim[1]=c,i;if(v=a[r++],(192&v)!=128){r--;continue}if(r>=o)return this.interim[0]=n,this.interim[1]=c,this.interim[2]=v,i;if(f=a[r++],(192&f)!=128){r--;continue}if(t=(7&n)<<18|(63&c)<<12|(63&v)<<6|63&f,t<65536||t>1114111)continue;m[i++]=t}}return i}}},225:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnicodeV6=void 0;let a=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],m=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],o;e.UnicodeV6=class{constructor(){if(this.version="6",!o){o=new Uint8Array(65536),o.fill(1),o[0]=0,o.fill(0,1,32),o.fill(0,127,160),o.fill(2,4352,4448),o[9001]=2,o[9002]=2,o.fill(2,11904,42192),o[12351]=1,o.fill(2,44032,55204),o.fill(2,63744,64256),o.fill(2,65040,65050),o.fill(2,65072,65136),o.fill(2,65280,65377),o.fill(2,65504,65511);for(let n=0;n<a.length;++n)o.fill(0,a[n][0],a[n][1]+1)}}wcwidth(n){return n<32?0:n<127?1:n<65536?o[n]:function(c,v){let f,i=0,t=v.length-1;if(c<v[0][0]||c>v[t][1])return!1;for(;t>=i;)if(f=i+t>>1,c>v[f][1])i=f+1;else{if(!(c<v[f][0]))return!0;t=f-1}return!1}(n,m)?0:n>=131072&&n<=196605||n>=196608&&n<=262141?2:1}}},5981:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WriteBuffer=void 0;let m=a(8460),o=a(844);class n extends o.Disposable{constructor(v){super(),this._action=v,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new m.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(v,f){if(f!==void 0&&this._syncCalls>f)return void(this._syncCalls=0);if(this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let i;for(this._isSyncWriting=!0;i=this._writeBuffer.shift();){this._action(i);let t=this._callbacks.shift();t&&t()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(v,f){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(f),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=v.length,this._writeBuffer.push(v),this._callbacks.push(f)}_innerWrite(v=0,f=!0){let i=v||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){let t=this._writeBuffer[this._bufferOffset],p=this._action(t,f);if(p){let r=z=>Date.now()-i>=12?setTimeout(()=>this._innerWrite(0,z)):this._innerWrite(i,z);return void p.catch(z=>(queueMicrotask(()=>{throw z}),Promise.resolve(!1))).then(r)}let d=this._callbacks[this._bufferOffset];if(d&&d(),this._bufferOffset++,this._pendingData-=t.length,Date.now()-i>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}e.WriteBuffer=n},5941:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.toRgbString=e.parseColor=void 0;let a=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,m=/^[\da-f]+$/;function o(n,c){let v=n.toString(16),f=v.length<2?"0"+v:v;switch(c){case 4:return v[0];case 8:return f;case 12:return(f+f).slice(0,3);default:return f+f}}e.parseColor=function(n){if(!n)return;let c=n.toLowerCase();if(c.indexOf("rgb:")===0){c=c.slice(4);let v=a.exec(c);if(v){let f=v[1]?15:v[4]?255:v[7]?4095:65535;return[Math.round(parseInt(v[1]||v[4]||v[7]||v[10],16)/f*255),Math.round(parseInt(v[2]||v[5]||v[8]||v[11],16)/f*255),Math.round(parseInt(v[3]||v[6]||v[9]||v[12],16)/f*255)]}}else if(c.indexOf("#")===0&&(c=c.slice(1),m.exec(c)&&[3,6,9,12].includes(c.length))){let v=c.length/3,f=[0,0,0];for(let i=0;i<3;++i){let t=parseInt(c.slice(v*i,v*i+v),16);f[i]=v===1?t<<4:v===2?t:v===3?t>>4:t>>8}return f}},e.toRgbString=function(n,c=16){let[v,f,i]=n;return`rgb:${o(v,c)}/${o(f,c)}/${o(i,c)}`}},5770:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PAYLOAD_LIMIT=void 0,e.PAYLOAD_LIMIT=1e7},6351:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DcsHandler=e.DcsParser=void 0;let m=a(482),o=a(8742),n=a(5770),c=[];e.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=c,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=c}registerHandler(f,i){this._handlers[f]===void 0&&(this._handlers[f]=[]);let t=this._handlers[f];return t.push(i),{dispose:()=>{let p=t.indexOf(i);p!==-1&&t.splice(p,1)}}}clearHandler(f){this._handlers[f]&&delete this._handlers[f]}setHandlerFallback(f){this._handlerFb=f}reset(){if(this._active.length)for(let f=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;f>=0;--f)this._active[f].unhook(!1);this._stack.paused=!1,this._active=c,this._ident=0}hook(f,i){if(this.reset(),this._ident=f,this._active=this._handlers[f]||c,this._active.length)for(let t=this._active.length-1;t>=0;t--)this._active[t].hook(i);else this._handlerFb(this._ident,"HOOK",i)}put(f,i,t){if(this._active.length)for(let p=this._active.length-1;p>=0;p--)this._active[p].put(f,i,t);else this._handlerFb(this._ident,"PUT",(0,m.utf32ToString)(f,i,t))}unhook(f,i=!0){if(this._active.length){let t=!1,p=this._active.length-1,d=!1;if(this._stack.paused&&(p=this._stack.loopPosition-1,t=i,d=this._stack.fallThrough,this._stack.paused=!1),!d&&t===!1){for(;p>=0&&(t=this._active[p].unhook(f),t!==!0);p--)if(t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!1,t;p--}for(;p>=0;p--)if(t=this._active[p].unhook(!1),t instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=p,this._stack.fallThrough=!0,t}else this._handlerFb(this._ident,"UNHOOK",f);this._active=c,this._ident=0}};let v=new o.Params;v.addParam(0),e.DcsHandler=class{constructor(f){this._handler=f,this._data="",this._params=v,this._hitLimit=!1}hook(f){this._params=f.length>1||f.params[0]?f.clone():v,this._data="",this._hitLimit=!1}put(f,i,t){this._hitLimit||(this._data+=(0,m.utf32ToString)(f,i,t),this._data.length>n.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(f){let i=!1;if(this._hitLimit)i=!1;else if(f&&(i=this._handler(this._data,this._params),i instanceof Promise))return i.then(t=>(this._params=v,this._data="",this._hitLimit=!1,t));return this._params=v,this._data="",this._hitLimit=!1,i}}},2015:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.EscapeSequenceParser=e.VT500_TRANSITION_TABLE=e.TransitionTable=void 0;let m=a(844),o=a(8742),n=a(6242),c=a(6351);class v{constructor(p){this.table=new Uint8Array(p)}setDefault(p,d){this.table.fill(p<<4|d)}add(p,d,r,z){this.table[d<<8|p]=r<<4|z}addMany(p,d,r,z){for(let M=0;M<p.length;M++)this.table[d<<8|p[M]]=r<<4|z}}e.TransitionTable=v;let f=160;e.VT500_TRANSITION_TABLE=function(){let t=new v(4095),p=Array.apply(null,Array(256)).map((L,S)=>S),d=(L,S)=>p.slice(L,S),r=d(32,127),z=d(0,24);z.push(25),z.push.apply(z,d(28,32));let M=d(0,14),_;for(_ in t.setDefault(1,0),t.addMany(r,0,2,0),M)t.addMany([24,26,153,154],_,3,0),t.addMany(d(128,144),_,3,0),t.addMany(d(144,152),_,3,0),t.add(156,_,0,0),t.add(27,_,11,1),t.add(157,_,4,8),t.addMany([152,158,159],_,0,7),t.add(155,_,11,3),t.add(144,_,11,9);return t.addMany(z,0,3,0),t.addMany(z,1,3,1),t.add(127,1,0,1),t.addMany(z,8,0,8),t.addMany(z,3,3,3),t.add(127,3,0,3),t.addMany(z,4,3,4),t.add(127,4,0,4),t.addMany(z,6,3,6),t.addMany(z,5,3,5),t.add(127,5,0,5),t.addMany(z,2,3,2),t.add(127,2,0,2),t.add(93,1,4,8),t.addMany(r,8,5,8),t.add(127,8,5,8),t.addMany([156,27,24,26,7],8,6,0),t.addMany(d(28,32),8,0,8),t.addMany([88,94,95],1,0,7),t.addMany(r,7,0,7),t.addMany(z,7,0,7),t.add(156,7,0,0),t.add(127,7,0,7),t.add(91,1,11,3),t.addMany(d(64,127),3,7,0),t.addMany(d(48,60),3,8,4),t.addMany([60,61,62,63],3,9,4),t.addMany(d(48,60),4,8,4),t.addMany(d(64,127),4,7,0),t.addMany([60,61,62,63],4,0,6),t.addMany(d(32,64),6,0,6),t.add(127,6,0,6),t.addMany(d(64,127),6,0,0),t.addMany(d(32,48),3,9,5),t.addMany(d(32,48),5,9,5),t.addMany(d(48,64),5,0,6),t.addMany(d(64,127),5,7,0),t.addMany(d(32,48),4,9,5),t.addMany(d(32,48),1,9,2),t.addMany(d(32,48),2,9,2),t.addMany(d(48,127),2,10,0),t.addMany(d(48,80),1,10,0),t.addMany(d(81,88),1,10,0),t.addMany([89,90,92],1,10,0),t.addMany(d(96,127),1,10,0),t.add(80,1,11,9),t.addMany(z,9,0,9),t.add(127,9,0,9),t.addMany(d(28,32),9,0,9),t.addMany(d(32,48),9,9,12),t.addMany(d(48,60),9,8,10),t.addMany([60,61,62,63],9,9,10),t.addMany(z,11,0,11),t.addMany(d(32,128),11,0,11),t.addMany(d(28,32),11,0,11),t.addMany(z,10,0,10),t.add(127,10,0,10),t.addMany(d(28,32),10,0,10),t.addMany(d(48,60),10,8,10),t.addMany([60,61,62,63],10,0,11),t.addMany(d(32,48),10,9,12),t.addMany(z,12,0,12),t.add(127,12,0,12),t.addMany(d(28,32),12,0,12),t.addMany(d(32,48),12,9,12),t.addMany(d(48,64),12,0,11),t.addMany(d(64,127),12,12,13),t.addMany(d(64,127),10,12,13),t.addMany(d(64,127),9,12,13),t.addMany(z,13,13,13),t.addMany(r,13,13,13),t.add(127,13,0,13),t.addMany([27,156,24,26],13,14,0),t.add(f,0,2,0),t.add(f,8,5,8),t.add(f,6,0,6),t.add(f,11,0,11),t.add(f,13,13,13),t}();class i extends m.Disposable{constructor(p=e.VT500_TRANSITION_TABLE){super(),this._transitions=p,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new o.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(d,r,z)=>{},this._executeHandlerFb=d=>{},this._csiHandlerFb=(d,r)=>{},this._escHandlerFb=d=>{},this._errorHandlerFb=d=>d,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,m.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new n.OscParser),this._dcsParser=this.register(new c.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(p,d=[64,126]){let r=0;if(p.prefix){if(p.prefix.length>1)throw new Error("only one byte as prefix supported");if(r=p.prefix.charCodeAt(0),r&&60>r||r>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(p.intermediates){if(p.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let M=0;M<p.intermediates.length;++M){let _=p.intermediates.charCodeAt(M);if(32>_||_>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");r<<=8,r|=_}}if(p.final.length!==1)throw new Error("final must be a single byte");let z=p.final.charCodeAt(0);if(d[0]>z||z>d[1])throw new Error(`final must be in range ${d[0]} .. ${d[1]}`);return r<<=8,r|=z,r}identToString(p){let d=[];for(;p;)d.push(String.fromCharCode(255&p)),p>>=8;return d.reverse().join("")}setPrintHandler(p){this._printHandler=p}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(p,d){let r=this._identifier(p,[48,126]);this._escHandlers[r]===void 0&&(this._escHandlers[r]=[]);let z=this._escHandlers[r];return z.push(d),{dispose:()=>{let M=z.indexOf(d);M!==-1&&z.splice(M,1)}}}clearEscHandler(p){this._escHandlers[this._identifier(p,[48,126])]&&delete this._escHandlers[this._identifier(p,[48,126])]}setEscHandlerFallback(p){this._escHandlerFb=p}setExecuteHandler(p,d){this._executeHandlers[p.charCodeAt(0)]=d}clearExecuteHandler(p){this._executeHandlers[p.charCodeAt(0)]&&delete this._executeHandlers[p.charCodeAt(0)]}setExecuteHandlerFallback(p){this._executeHandlerFb=p}registerCsiHandler(p,d){let r=this._identifier(p);this._csiHandlers[r]===void 0&&(this._csiHandlers[r]=[]);let z=this._csiHandlers[r];return z.push(d),{dispose:()=>{let M=z.indexOf(d);M!==-1&&z.splice(M,1)}}}clearCsiHandler(p){this._csiHandlers[this._identifier(p)]&&delete this._csiHandlers[this._identifier(p)]}setCsiHandlerFallback(p){this._csiHandlerFb=p}registerDcsHandler(p,d){return this._dcsParser.registerHandler(this._identifier(p),d)}clearDcsHandler(p){this._dcsParser.clearHandler(this._identifier(p))}setDcsHandlerFallback(p){this._dcsParser.setHandlerFallback(p)}registerOscHandler(p,d){return this._oscParser.registerHandler(p,d)}clearOscHandler(p){this._oscParser.clearHandler(p)}setOscHandlerFallback(p){this._oscParser.setHandlerFallback(p)}setErrorHandler(p){this._errorHandler=p}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(p,d,r,z,M){this._parseStack.state=p,this._parseStack.handlers=d,this._parseStack.handlerPos=r,this._parseStack.transition=z,this._parseStack.chunkPos=M}parse(p,d,r){let z,M=0,_=0,L=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,L=this._parseStack.chunkPos+1;else{if(r===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");let S=this._parseStack.handlers,y=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(r===!1&&y>-1){for(;y>=0&&(z=S[y](this._params),z!==!0);y--)if(z instanceof Promise)return this._parseStack.handlerPos=y,z}this._parseStack.handlers=[];break;case 4:if(r===!1&&y>-1){for(;y>=0&&(z=S[y](),z!==!0);y--)if(z instanceof Promise)return this._parseStack.handlerPos=y,z}this._parseStack.handlers=[];break;case 6:if(M=p[this._parseStack.chunkPos],z=this._dcsParser.unhook(M!==24&&M!==26,r),z)return z;M===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(M=p[this._parseStack.chunkPos],z=this._oscParser.end(M!==24&&M!==26,r),z)return z;M===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,L=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let S=L;S<d;++S){switch(M=p[S],_=this._transitions.table[this.currentState<<8|(M<160?M:f)],_>>4){case 2:for(let V=S+1;;++V){if(V>=d||(M=p[V])<32||M>126&&M<f){this._printHandler(p,S,V),S=V-1;break}if(++V>=d||(M=p[V])<32||M>126&&M<f){this._printHandler(p,S,V),S=V-1;break}if(++V>=d||(M=p[V])<32||M>126&&M<f){this._printHandler(p,S,V),S=V-1;break}if(++V>=d||(M=p[V])<32||M>126&&M<f){this._printHandler(p,S,V),S=V-1;break}}break;case 3:this._executeHandlers[M]?this._executeHandlers[M]():this._executeHandlerFb(M),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:S,code:M,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:let y=this._csiHandlers[this._collect<<8|M],A=y?y.length-1:-1;for(;A>=0&&(z=y[A](this._params),z!==!0);A--)if(z instanceof Promise)return this._preserveStack(3,y,A,_,S),z;A<0&&this._csiHandlerFb(this._collect<<8|M,this._params),this.precedingCodepoint=0;break;case 8:do switch(M){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(M-48)}while(++S<d&&(M=p[S])>47&&M<60);S--;break;case 9:this._collect<<=8,this._collect|=M;break;case 10:let H=this._escHandlers[this._collect<<8|M],T=H?H.length-1:-1;for(;T>=0&&(z=H[T](),z!==!0);T--)if(z instanceof Promise)return this._preserveStack(4,H,T,_,S),z;T<0&&this._escHandlerFb(this._collect<<8|M),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|M,this._params);break;case 13:for(let V=S+1;;++V)if(V>=d||(M=p[V])===24||M===26||M===27||M>127&&M<f){this._dcsParser.put(p,S,V),S=V-1;break}break;case 14:if(z=this._dcsParser.unhook(M!==24&&M!==26),z)return this._preserveStack(6,[],0,_,S),z;M===27&&(_|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let V=S+1;;V++)if(V>=d||(M=p[V])<32||M>127&&M<f){this._oscParser.put(p,S,V),S=V-1;break}break;case 6:if(z=this._oscParser.end(M!==24&&M!==26),z)return this._preserveStack(5,[],0,_,S),z;M===27&&(_|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&_}}}e.EscapeSequenceParser=i},6242:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OscHandler=e.OscParser=void 0;let m=a(5770),o=a(482),n=[];e.OscParser=class{constructor(){this._state=0,this._active=n,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(c,v){this._handlers[c]===void 0&&(this._handlers[c]=[]);let f=this._handlers[c];return f.push(v),{dispose:()=>{let i=f.indexOf(v);i!==-1&&f.splice(i,1)}}}clearHandler(c){this._handlers[c]&&delete this._handlers[c]}setHandlerFallback(c){this._handlerFb=c}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=n}reset(){if(this._state===2)for(let c=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;c>=0;--c)this._active[c].end(!1);this._stack.paused=!1,this._active=n,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||n,this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].start();else this._handlerFb(this._id,"START")}_put(c,v,f){if(this._active.length)for(let i=this._active.length-1;i>=0;i--)this._active[i].put(c,v,f);else this._handlerFb(this._id,"PUT",(0,o.utf32ToString)(c,v,f))}start(){this.reset(),this._state=1}put(c,v,f){if(this._state!==3){if(this._state===1)for(;v<f;){let i=c[v++];if(i===59){this._state=2,this._start();break}if(i<48||57<i)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+i-48}this._state===2&&f-v>0&&this._put(c,v,f)}}end(c,v=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let f=!1,i=this._active.length-1,t=!1;if(this._stack.paused&&(i=this._stack.loopPosition-1,f=v,t=this._stack.fallThrough,this._stack.paused=!1),!t&&f===!1){for(;i>=0&&(f=this._active[i].end(c),f!==!0);i--)if(f instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!1,f;i--}for(;i>=0;i--)if(f=this._active[i].end(!1),f instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=i,this._stack.fallThrough=!0,f}else this._handlerFb(this._id,"END",c);this._active=n,this._id=-1,this._state=0}}},e.OscHandler=class{constructor(c){this._handler=c,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(c,v,f){this._hitLimit||(this._data+=(0,o.utf32ToString)(c,v,f),this._data.length>m.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(c){let v=!1;if(this._hitLimit)v=!1;else if(c&&(v=this._handler(this._data),v instanceof Promise))return v.then(f=>(this._data="",this._hitLimit=!1,f));return this._data="",this._hitLimit=!1,v}}},8742:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Params=void 0;let a=2147483647;class m{constructor(n=32,c=32){if(this.maxLength=n,this.maxSubParamsLength=c,c>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(n),this.length=0,this._subParams=new Int32Array(c),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(n),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}static fromArray(n){let c=new m;if(!n.length)return c;for(let v=Array.isArray(n[0])?1:0;v<n.length;++v){let f=n[v];if(Array.isArray(f))for(let i=0;i<f.length;++i)c.addSubParam(f[i]);else c.addParam(f)}return c}clone(){let n=new m(this.maxLength,this.maxSubParamsLength);return n.params.set(this.params),n.length=this.length,n._subParams.set(this._subParams),n._subParamsLength=this._subParamsLength,n._subParamsIdx.set(this._subParamsIdx),n._rejectDigits=this._rejectDigits,n._rejectSubDigits=this._rejectSubDigits,n._digitIsSub=this._digitIsSub,n}toArray(){let n=[];for(let c=0;c<this.length;++c){n.push(this.params[c]);let v=this._subParamsIdx[c]>>8,f=255&this._subParamsIdx[c];f-v>0&&n.push(Array.prototype.slice.call(this._subParams,v,f))}return n}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(n){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(n<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=n>a?a:n}}addSubParam(n){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(n<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=n>a?a:n,this._subParamsIdx[this.length-1]++}}hasSubParams(n){return(255&this._subParamsIdx[n])-(this._subParamsIdx[n]>>8)>0}getSubParams(n){let c=this._subParamsIdx[n]>>8,v=255&this._subParamsIdx[n];return v-c>0?this._subParams.subarray(c,v):null}getSubParamsAll(){let n={};for(let c=0;c<this.length;++c){let v=this._subParamsIdx[c]>>8,f=255&this._subParamsIdx[c];f-v>0&&(n[c]=this._subParams.slice(v,f))}return n}addDigit(n){let c;if(this._rejectDigits||!(c=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;let v=this._digitIsSub?this._subParams:this.params,f=v[c-1];v[c-1]=~f?Math.min(10*f+n,a):n}}e.Params=m},5741:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AddonManager=void 0,e.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let a=this._addons.length-1;a>=0;a--)this._addons[a].instance.dispose()}loadAddon(a,m){let o={instance:m,dispose:m.dispose,isDisposed:!1};this._addons.push(o),m.dispose=()=>this._wrappedAddonDispose(o),m.activate(a)}_wrappedAddonDispose(a){if(a.isDisposed)return;let m=-1;for(let o=0;o<this._addons.length;o++)if(this._addons[o]===a){m=o;break}if(m===-1)throw new Error("Could not dispose an addon that has not been loaded");a.isDisposed=!0,a.dispose.apply(a.instance),this._addons.splice(m,1)}}},8771:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferApiView=void 0;let m=a(3785),o=a(511);e.BufferApiView=class{constructor(n,c){this._buffer=n,this.type=c}init(n){return this._buffer=n,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(n){let c=this._buffer.lines.get(n);if(c)return new m.BufferLineApiView(c)}getNullCell(){return new o.CellData}}},3785:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferLineApiView=void 0;let m=a(511);e.BufferLineApiView=class{constructor(o){this._line=o}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(o,n){if(!(o<0||o>=this._line.length))return n?(this._line.loadCell(o,n),n):this._line.loadCell(o,new m.CellData)}translateToString(o,n,c){return this._line.translateToString(o,n,c)}}},8285:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BufferNamespaceApi=void 0;let m=a(8771),o=a(8460);e.BufferNamespaceApi=class{constructor(n){this._core=n,this._onBufferChange=new o.EventEmitter,this.onBufferChange=this._onBufferChange.event,this._normal=new m.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new m.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}},7975:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ParserApi=void 0,e.ParserApi=class{constructor(a){this._core=a}registerCsiHandler(a,m){return this._core.registerCsiHandler(a,o=>m(o.toArray()))}addCsiHandler(a,m){return this.registerCsiHandler(a,m)}registerDcsHandler(a,m){return this._core.registerDcsHandler(a,(o,n)=>m(o,n.toArray()))}addDcsHandler(a,m){return this.registerDcsHandler(a,m)}registerEscHandler(a,m){return this._core.registerEscHandler(a,m)}addEscHandler(a,m){return this.registerEscHandler(a,m)}registerOscHandler(a,m){return this._core.registerOscHandler(a,m)}addOscHandler(a,m){return this.registerOscHandler(a,m)}}},7090:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnicodeApi=void 0,e.UnicodeApi=class{constructor(a){this._core=a}register(a){this._core.unicodeService.register(a)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(a){this._core.unicodeService.activeVersion=a}}},744:function(b,e,a){var m=this&&this.__decorate||function(t,p,d,r){var z,M=arguments.length,_=M<3?p:r===null?r=Object.getOwnPropertyDescriptor(p,d):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(t,p,d,r);else for(var L=t.length-1;L>=0;L--)(z=t[L])&&(_=(M<3?z(_):M>3?z(p,d,_):z(p,d))||_);return M>3&&_&&Object.defineProperty(p,d,_),_},o=this&&this.__param||function(t,p){return function(d,r){p(d,r,t)}};Object.defineProperty(e,"__esModule",{value:!0}),e.BufferService=e.MINIMUM_ROWS=e.MINIMUM_COLS=void 0;let n=a(2585),c=a(5295),v=a(8460),f=a(844);e.MINIMUM_COLS=2,e.MINIMUM_ROWS=1;let i=class extends f.Disposable{constructor(t){super(),this.isUserScrolling=!1,this._onResize=this.register(new v.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new v.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(t.rawOptions.cols||0,e.MINIMUM_COLS),this.rows=Math.max(t.rawOptions.rows||0,e.MINIMUM_ROWS),this.buffers=this.register(new c.BufferSet(t,this))}get buffer(){return this.buffers.active}resize(t,p){this.cols=t,this.rows=p,this.buffers.resize(t,p),this._onResize.fire({cols:t,rows:p})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(t,p=!1){let d=this.buffer,r;r=this._cachedBlankLine,r&&r.length===this.cols&&r.getFg(0)===t.fg&&r.getBg(0)===t.bg||(r=d.getBlankLine(t,p),this._cachedBlankLine=r),r.isWrapped=p;let z=d.ybase+d.scrollTop,M=d.ybase+d.scrollBottom;if(d.scrollTop===0){let _=d.lines.isFull;M===d.lines.length-1?_?d.lines.recycle().copyFrom(r):d.lines.push(r.clone()):d.lines.splice(M+1,0,r.clone()),_?this.isUserScrolling&&(d.ydisp=Math.max(d.ydisp-1,0)):(d.ybase++,this.isUserScrolling||d.ydisp++)}else{let _=M-z+1;d.lines.shiftElements(z+1,_-1,-1),d.lines.set(M,r.clone())}this.isUserScrolling||(d.ydisp=d.ybase),this._onScroll.fire(d.ydisp)}scrollLines(t,p,d){let r=this.buffer;if(t<0){if(r.ydisp===0)return;this.isUserScrolling=!0}else t+r.ydisp>=r.ybase&&(this.isUserScrolling=!1);let z=r.ydisp;r.ydisp=Math.max(Math.min(r.ydisp+t,r.ybase),0),z!==r.ydisp&&(p||this._onScroll.fire(r.ydisp))}scrollPages(t){this.scrollLines(t*(this.rows-1))}scrollToTop(){this.scrollLines(-this.buffer.ydisp)}scrollToBottom(){this.scrollLines(this.buffer.ybase-this.buffer.ydisp)}scrollToLine(t){let p=t-this.buffer.ydisp;p!==0&&this.scrollLines(p)}};i=m([o(0,n.IOptionsService)],i),e.BufferService=i},7994:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CharsetService=void 0,e.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(a){this.glevel=a,this.charset=this._charsets[a]}setgCharset(a,m){this._charsets[a]=m,this.glevel===a&&(this.charset=m)}}},1753:function(b,e,a){var m=this&&this.__decorate||function(r,z,M,_){var L,S=arguments.length,y=S<3?z:_===null?_=Object.getOwnPropertyDescriptor(z,M):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(r,z,M,_);else for(var A=r.length-1;A>=0;A--)(L=r[A])&&(y=(S<3?L(y):S>3?L(z,M,y):L(z,M))||y);return S>3&&y&&Object.defineProperty(z,M,y),y},o=this&&this.__param||function(r,z){return function(M,_){z(M,_,r)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CoreMouseService=void 0;let n=a(2585),c=a(8460),v=a(844),f={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:r=>r.button!==4&&r.action===1&&(r.ctrl=!1,r.alt=!1,r.shift=!1,!0)},VT200:{events:19,restrict:r=>r.action!==32},DRAG:{events:23,restrict:r=>r.action!==32||r.button!==3},ANY:{events:31,restrict:r=>!0}};function i(r,z){let M=(r.ctrl?16:0)|(r.shift?4:0)|(r.alt?8:0);return r.button===4?(M|=64,M|=r.action):(M|=3&r.button,4&r.button&&(M|=64),8&r.button&&(M|=128),r.action===32?M|=32:r.action!==0||z||(M|=3)),M}let t=String.fromCharCode,p={DEFAULT:r=>{let z=[i(r,!1)+32,r.col+32,r.row+32];return z[0]>255||z[1]>255||z[2]>255?"":`\x1B[M${t(z[0])}${t(z[1])}${t(z[2])}`},SGR:r=>{let z=r.action===0&&r.button!==4?"m":"M";return`\x1B[<${i(r,!0)};${r.col};${r.row}${z}`},SGR_PIXELS:r=>{let z=r.action===0&&r.button!==4?"m":"M";return`\x1B[<${i(r,!0)};${r.x};${r.y}${z}`}},d=class extends v.Disposable{constructor(r,z){super(),this._bufferService=r,this._coreService=z,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new c.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(let M of Object.keys(f))this.addProtocol(M,f[M]);for(let M of Object.keys(p))this.addEncoding(M,p[M]);this.reset()}addProtocol(r,z){this._protocols[r]=z}addEncoding(r,z){this._encodings[r]=z}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(r){if(!this._protocols[r])throw new Error(`unknown protocol "${r}"`);this._activeProtocol=r,this._onProtocolChange.fire(this._protocols[r].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(r){if(!this._encodings[r])throw new Error(`unknown encoding "${r}"`);this._activeEncoding=r}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(r){if(r.col<0||r.col>=this._bufferService.cols||r.row<0||r.row>=this._bufferService.rows||r.button===4&&r.action===32||r.button===3&&r.action!==32||r.button!==4&&(r.action===2||r.action===3)||(r.col++,r.row++,r.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,r,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(r))return!1;let z=this._encodings[this._activeEncoding](r);return z&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(z):this._coreService.triggerDataEvent(z,!0)),this._lastEvent=r,!0}explainEvents(r){return{down:!!(1&r),up:!!(2&r),drag:!!(4&r),move:!!(8&r),wheel:!!(16&r)}}_equalEvents(r,z,M){if(M){if(r.x!==z.x||r.y!==z.y)return!1}else if(r.col!==z.col||r.row!==z.row)return!1;return r.button===z.button&&r.action===z.action&&r.ctrl===z.ctrl&&r.alt===z.alt&&r.shift===z.shift}};d=m([o(0,n.IBufferService),o(1,n.ICoreService)],d),e.CoreMouseService=d},6975:function(b,e,a){var m=this&&this.__decorate||function(d,r,z,M){var _,L=arguments.length,S=L<3?r:M===null?M=Object.getOwnPropertyDescriptor(r,z):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(d,r,z,M);else for(var y=d.length-1;y>=0;y--)(_=d[y])&&(S=(L<3?_(S):L>3?_(r,z,S):_(r,z))||S);return L>3&&S&&Object.defineProperty(r,z,S),S},o=this&&this.__param||function(d,r){return function(z,M){r(z,M,d)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CoreService=void 0;let n=a(2585),c=a(8460),v=a(1439),f=a(844),i=Object.freeze({insertMode:!1}),t=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),p=class extends f.Disposable{constructor(d,r,z){super(),this._bufferService=d,this._logService=r,this._optionsService=z,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new c.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new c.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new c.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new c.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,v.clone)(i),this.decPrivateModes=(0,v.clone)(t)}reset(){this.modes=(0,v.clone)(i),this.decPrivateModes=(0,v.clone)(t)}triggerDataEvent(d,r=!1){if(this._optionsService.rawOptions.disableStdin)return;let z=this._bufferService.buffer;r&&this._optionsService.rawOptions.scrollOnUserInput&&z.ybase!==z.ydisp&&this._onRequestScrollToBottom.fire(),r&&this._onUserInput.fire(),this._logService.debug(`sending data "${d}"`,()=>d.split("").map(M=>M.charCodeAt(0))),this._onData.fire(d)}triggerBinaryEvent(d){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${d}"`,()=>d.split("").map(r=>r.charCodeAt(0))),this._onBinary.fire(d))}};p=m([o(0,n.IBufferService),o(1,n.ILogService),o(2,n.IOptionsService)],p),e.CoreService=p},9074:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DecorationService=void 0;let m=a(8055),o=a(8460),n=a(844),c=a(6106),v=0,f=0;class i extends n.Disposable{constructor(){super(),this._decorations=new c.SortedList(d=>d==null?void 0:d.marker.line),this._onDecorationRegistered=this.register(new o.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new o.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,n.toDisposable)(()=>{for(let d of this._decorations.values())this._onDecorationRemoved.fire(d);this.reset()}))}get decorations(){return this._decorations.values()}registerDecoration(d){if(d.marker.isDisposed)return;let r=new t(d);if(r){let z=r.marker.onDispose(()=>r.dispose());r.onDispose(()=>{r&&(this._decorations.delete(r)&&this._onDecorationRemoved.fire(r),z.dispose())}),this._decorations.insert(r),this._onDecorationRegistered.fire(r)}return r}reset(){for(let d of this._decorations.values())d.dispose();this._decorations.clear()}*getDecorationsAtCell(d,r,z){var M,_,L;let S=0,y=0;for(let A of this._decorations.getKeyIterator(r))S=(M=A.options.x)!==null&&M!==void 0?M:0,y=S+((_=A.options.width)!==null&&_!==void 0?_:1),d>=S&&d<y&&(!z||((L=A.options.layer)!==null&&L!==void 0?L:"bottom")===z)&&(yield A)}forEachDecorationAtCell(d,r,z,M){this._decorations.forEachByKey(r,_=>{var L,S,y;v=(L=_.options.x)!==null&&L!==void 0?L:0,f=v+((S=_.options.width)!==null&&S!==void 0?S:1),d>=v&&d<f&&(!z||((y=_.options.layer)!==null&&y!==void 0?y:"bottom")===z)&&M(_)})}dispose(){for(let d of this._decorations.values())this._onDecorationRemoved.fire(d);this.reset()}}e.DecorationService=i;class t extends n.Disposable{constructor(d){super(),this.options=d,this.isDisposed=!1,this.onRenderEmitter=this.register(new o.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new o.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=d.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=m.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=m.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InstantiationService=e.ServiceCollection=void 0;let m=a(2585),o=a(8343);class n{constructor(...v){this._entries=new Map;for(let[f,i]of v)this.set(f,i)}set(v,f){let i=this._entries.get(v);return this._entries.set(v,f),i}forEach(v){for(let[f,i]of this._entries.entries())v(f,i)}has(v){return this._entries.has(v)}get(v){return this._entries.get(v)}}e.ServiceCollection=n,e.InstantiationService=class{constructor(){this._services=new n,this._services.set(m.IInstantiationService,this)}setService(c,v){this._services.set(c,v)}getService(c){return this._services.get(c)}createInstance(c,...v){let f=(0,o.getServiceDependencies)(c).sort((p,d)=>p.index-d.index),i=[];for(let p of f){let d=this._services.get(p.id);if(!d)throw new Error(`[createInstance] ${c.name} depends on UNKNOWN service ${p.id}.`);i.push(d)}let t=f.length>0?f[0].index:v.length;if(v.length!==t)throw new Error(`[createInstance] First service dependency of ${c.name} at position ${t+1} conflicts with ${v.length} static arguments`);return new c(...v,...i)}}},7866:function(b,e,a){var m=this&&this.__decorate||function(i,t,p,d){var r,z=arguments.length,M=z<3?t:d===null?d=Object.getOwnPropertyDescriptor(t,p):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(i,t,p,d);else for(var _=i.length-1;_>=0;_--)(r=i[_])&&(M=(z<3?r(M):z>3?r(t,p,M):r(t,p))||M);return z>3&&M&&Object.defineProperty(t,p,M),M},o=this&&this.__param||function(i,t){return function(p,d){t(p,d,i)}};Object.defineProperty(e,"__esModule",{value:!0}),e.LogService=void 0;let n=a(844),c=a(2585),v={debug:c.LogLevelEnum.DEBUG,info:c.LogLevelEnum.INFO,warn:c.LogLevelEnum.WARN,error:c.LogLevelEnum.ERROR,off:c.LogLevelEnum.OFF},f=class extends n.Disposable{constructor(i){super(),this._optionsService=i,this.logLevel=c.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel()))}_updateLogLevel(){this.logLevel=v[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(i){for(let t=0;t<i.length;t++)typeof i[t]=="function"&&(i[t]=i[t]())}_log(i,t,p){this._evalLazyOptionalParams(p),i.call(console,"xterm.js: "+t,...p)}debug(i,...t){this.logLevel<=c.LogLevelEnum.DEBUG&&this._log(console.log,i,t)}info(i,...t){this.logLevel<=c.LogLevelEnum.INFO&&this._log(console.info,i,t)}warn(i,...t){this.logLevel<=c.LogLevelEnum.WARN&&this._log(console.warn,i,t)}error(i,...t){this.logLevel<=c.LogLevelEnum.ERROR&&this._log(console.error,i,t)}};f=m([o(0,c.IOptionsService)],f),e.LogService=f},7302:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionsService=e.DEFAULT_OPTIONS=void 0;let m=a(8460),o=a(6114),n=a(844);e.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:o.isMac,windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};let c=["normal","bold","100","200","300","400","500","600","700","800","900"];class v extends n.Disposable{constructor(i){super(),this._onOptionChange=this.register(new m.EventEmitter),this.onOptionChange=this._onOptionChange.event;let t=Object.assign({},e.DEFAULT_OPTIONS);for(let p in i)if(p in t)try{let d=i[p];t[p]=this._sanitizeAndValidateOption(p,d)}catch(d){console.error(d)}this.rawOptions=t,this.options=Object.assign({},t),this._setupOptions()}onSpecificOptionChange(i,t){return this.onOptionChange(p=>{p===i&&t(this.rawOptions[i])})}onMultipleOptionChange(i,t){return this.onOptionChange(p=>{i.indexOf(p)!==-1&&t()})}_setupOptions(){let i=p=>{if(!(p in e.DEFAULT_OPTIONS))throw new Error(`No option with key "${p}"`);return this.rawOptions[p]},t=(p,d)=>{if(!(p in e.DEFAULT_OPTIONS))throw new Error(`No option with key "${p}"`);d=this._sanitizeAndValidateOption(p,d),this.rawOptions[p]!==d&&(this.rawOptions[p]=d,this._onOptionChange.fire(p))};for(let p in this.rawOptions){let d={get:i.bind(this,p),set:t.bind(this,p)};Object.defineProperty(this.options,p,d)}}_sanitizeAndValidateOption(i,t){switch(i){case"cursorStyle":if(t||(t=e.DEFAULT_OPTIONS[i]),!function(p){return p==="block"||p==="underline"||p==="bar"}(t))throw new Error(`"${t}" is not a valid value for ${i}`);break;case"wordSeparator":t||(t=e.DEFAULT_OPTIONS[i]);break;case"fontWeight":case"fontWeightBold":if(typeof t=="number"&&1<=t&&t<=1e3)break;t=c.includes(t)?t:e.DEFAULT_OPTIONS[i];break;case"cursorWidth":t=Math.floor(t);case"lineHeight":case"tabStopWidth":if(t<1)throw new Error(`${i} cannot be less than 1, value: ${t}`);break;case"minimumContrastRatio":t=Math.max(1,Math.min(21,Math.round(10*t)/10));break;case"scrollback":if((t=Math.min(t,4294967295))<0)throw new Error(`${i} cannot be less than 0, value: ${t}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(t<=0)throw new Error(`${i} cannot be less than or equal to 0, value: ${t}`);case"rows":case"cols":if(!t&&t!==0)throw new Error(`${i} must be numeric, value: ${t}`)}return t}}e.OptionsService=v},2660:function(b,e,a){var m=this&&this.__decorate||function(v,f,i,t){var p,d=arguments.length,r=d<3?f:t===null?t=Object.getOwnPropertyDescriptor(f,i):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(v,f,i,t);else for(var z=v.length-1;z>=0;z--)(p=v[z])&&(r=(d<3?p(r):d>3?p(f,i,r):p(f,i))||r);return d>3&&r&&Object.defineProperty(f,i,r),r},o=this&&this.__param||function(v,f){return function(i,t){f(i,t,v)}};Object.defineProperty(e,"__esModule",{value:!0}),e.OscLinkService=void 0;let n=a(2585),c=class{constructor(v){this._bufferService=v,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(v){let f=this._bufferService.buffer;if(v.id===void 0){let z=f.addMarker(f.ybase+f.y),M={data:v,id:this._nextId++,lines:[z]};return z.onDispose(()=>this._removeMarkerFromLink(M,z)),this._dataByLinkId.set(M.id,M),M.id}let i=v,t=this._getEntryIdKey(i),p=this._entriesWithId.get(t);if(p)return this.addLineToLink(p.id,f.ybase+f.y),p.id;let d=f.addMarker(f.ybase+f.y),r={id:this._nextId++,key:this._getEntryIdKey(i),data:i,lines:[d]};return d.onDispose(()=>this._removeMarkerFromLink(r,d)),this._entriesWithId.set(r.key,r),this._dataByLinkId.set(r.id,r),r.id}addLineToLink(v,f){let i=this._dataByLinkId.get(v);if(i&&i.lines.every(t=>t.line!==f)){let t=this._bufferService.buffer.addMarker(f);i.lines.push(t),t.onDispose(()=>this._removeMarkerFromLink(i,t))}}getLinkData(v){var f;return(f=this._dataByLinkId.get(v))===null||f===void 0?void 0:f.data}_getEntryIdKey(v){return`${v.id};;${v.uri}`}_removeMarkerFromLink(v,f){let i=v.lines.indexOf(f);i!==-1&&(v.lines.splice(i,1),v.lines.length===0&&(v.data.id!==void 0&&this._entriesWithId.delete(v.key),this._dataByLinkId.delete(v.id)))}};c=m([o(0,n.IBufferService)],c),e.OscLinkService=c},8343:(b,e)=>{function a(m,o,n){o.di$target===o?o.di$dependencies.push({id:m,index:n}):(o.di$dependencies=[{id:m,index:n}],o.di$target=o)}Object.defineProperty(e,"__esModule",{value:!0}),e.createDecorator=e.getServiceDependencies=e.serviceRegistry=void 0,e.serviceRegistry=new Map,e.getServiceDependencies=function(m){return m.di$dependencies||[]},e.createDecorator=function(m){if(e.serviceRegistry.has(m))return e.serviceRegistry.get(m);let o=function(n,c,v){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");a(o,n,v)};return o.toString=()=>m,e.serviceRegistry.set(m,o),o}},2585:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IDecorationService=e.IUnicodeService=e.IOscLinkService=e.IOptionsService=e.ILogService=e.LogLevelEnum=e.IInstantiationService=e.ICharsetService=e.ICoreService=e.ICoreMouseService=e.IBufferService=void 0;let m=a(8343);var o;e.IBufferService=(0,m.createDecorator)("BufferService"),e.ICoreMouseService=(0,m.createDecorator)("CoreMouseService"),e.ICoreService=(0,m.createDecorator)("CoreService"),e.ICharsetService=(0,m.createDecorator)("CharsetService"),e.IInstantiationService=(0,m.createDecorator)("InstantiationService"),(o=e.LogLevelEnum||(e.LogLevelEnum={}))[o.DEBUG=0]="DEBUG",o[o.INFO=1]="INFO",o[o.WARN=2]="WARN",o[o.ERROR=3]="ERROR",o[o.OFF=4]="OFF",e.ILogService=(0,m.createDecorator)("LogService"),e.IOptionsService=(0,m.createDecorator)("OptionsService"),e.IOscLinkService=(0,m.createDecorator)("OscLinkService"),e.IUnicodeService=(0,m.createDecorator)("UnicodeService"),e.IDecorationService=(0,m.createDecorator)("DecorationService")},1480:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnicodeService=void 0;let m=a(8460),o=a(225);e.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new m.EventEmitter,this.onChange=this._onChange.event;let n=new o.UnicodeV6;this.register(n),this._active=n.version,this._activeProvider=n}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(n){if(!this._providers[n])throw new Error(`unknown Unicode version "${n}"`);this._active=n,this._activeProvider=this._providers[n],this._onChange.fire(n)}register(n){this._providers[n.version]=n}wcwidth(n){return this._activeProvider.wcwidth(n)}getStringCellWidth(n){let c=0,v=n.length;for(let f=0;f<v;++f){let i=n.charCodeAt(f);if(55296<=i&&i<=56319){if(++f>=v)return c+this.wcwidth(i);let t=n.charCodeAt(f);56320<=t&&t<=57343?i=1024*(i-55296)+t-56320+65536:c+=this.wcwidth(t)}c+=this.wcwidth(i)}return c}}}},u={};function g(b){var e=u[b];if(e!==void 0)return e.exports;var a=u[b]={exports:{}};return l[b].call(a.exports,a,a.exports,g),a.exports}var w={};return(()=>{var b=w;Object.defineProperty(b,"__esModule",{value:!0}),b.Terminal=void 0;let e=g(3236),a=g(9042),m=g(7975),o=g(7090),n=g(5741),c=g(8285),v=["cols","rows"];b.Terminal=class{constructor(f){this._core=new e.Terminal(f),this._addonManager=new n.AddonManager,this._publicOptions=Object.assign({},this._core.options);let i=p=>this._core.options[p],t=(p,d)=>{this._checkReadonlyOptions(p),this._core.options[p]=d};for(let p in this._core.options){let d={get:i.bind(this,p),set:t.bind(this,p)};Object.defineProperty(this._publicOptions,p,d)}}_checkReadonlyOptions(f){if(v.includes(f))throw new Error(`Option "${f}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new m.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new o.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=new c.BufferNamespaceApi(this._core)),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){let f=this._core.coreService.decPrivateModes,i="none";switch(this._core.coreMouseService.activeProtocol){case"X10":i="x10";break;case"VT200":i="vt200";break;case"DRAG":i="drag";break;case"ANY":i="any"}return{applicationCursorKeysMode:f.applicationCursorKeys,applicationKeypadMode:f.applicationKeypad,bracketedPasteMode:f.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:i,originMode:f.origin,reverseWraparoundMode:f.reverseWraparound,sendFocusMode:f.sendFocus,wraparoundMode:f.wraparound}}get options(){return this._publicOptions}set options(f){for(let i in f)this._publicOptions[i]=f[i]}blur(){this._core.blur()}focus(){this._core.focus()}resize(f,i){this._verifyIntegers(f,i),this._core.resize(f,i)}open(f){this._core.open(f)}attachCustomKeyEventHandler(f){this._core.attachCustomKeyEventHandler(f)}registerLinkProvider(f){return this._core.registerLinkProvider(f)}registerCharacterJoiner(f){return this._checkProposedApi(),this._core.registerCharacterJoiner(f)}deregisterCharacterJoiner(f){this._checkProposedApi(),this._core.deregisterCharacterJoiner(f)}registerMarker(f=0){return this._verifyIntegers(f),this._core.addMarker(f)}registerDecoration(f){var i,t,p;return this._checkProposedApi(),this._verifyPositiveIntegers((i=f.x)!==null&&i!==void 0?i:0,(t=f.width)!==null&&t!==void 0?t:0,(p=f.height)!==null&&p!==void 0?p:0),this._core.registerDecoration(f)}hasSelection(){return this._core.hasSelection()}select(f,i,t){this._verifyIntegers(f,i,t),this._core.select(f,i,t)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(f,i){this._verifyIntegers(f,i),this._core.selectLines(f,i)}dispose(){this._addonManager.dispose(),this._core.dispose()}scrollLines(f){this._verifyIntegers(f),this._core.scrollLines(f)}scrollPages(f){this._verifyIntegers(f),this._core.scrollPages(f)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(f){this._verifyIntegers(f),this._core.scrollToLine(f)}clear(){this._core.clear()}write(f,i){this._core.write(f,i)}writeln(f,i){this._core.write(f),this._core.write(`\r
`,i)}paste(f){this._core.paste(f)}refresh(f,i){this._verifyIntegers(f,i),this._core.refresh(f,i)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(f){return this._addonManager.loadAddon(this,f)}static get strings(){return a}_verifyIntegers(...f){for(let i of f)if(i===1/0||isNaN(i)||i%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...f){for(let i of f)if(i&&(i===1/0||isNaN(i)||i%1!=0||i<0))throw new Error("This API only accepts positive integers")}}})(),w})()})});var Wt=W0((j5,a8)=>{(function(l,u){typeof j5=="object"&&typeof a8=="object"?a8.exports=u():typeof define=="function"&&define.amd?define([],u):typeof j5=="object"?j5.FitAddon=u():l.FitAddon=u()})(self,function(){return(()=>{"use strict";var l={};return(()=>{var u=l;Object.defineProperty(u,"__esModule",{value:!0}),u.FitAddon=void 0,u.FitAddon=class{constructor(){}activate(g){this._terminal=g}dispose(){}fit(){let g=this.proposeDimensions();if(!g||!this._terminal||isNaN(g.cols)||isNaN(g.rows))return;let w=this._terminal._core;this._terminal.rows===g.rows&&this._terminal.cols===g.cols||(w._renderService.clear(),this._terminal.resize(g.cols,g.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;let g=this._terminal._core,w=g._renderService.dimensions;if(w.css.cell.width===0||w.css.cell.height===0)return;let b=this._terminal.options.scrollback===0?0:g.viewport.scrollBarWidth,e=window.getComputedStyle(this._terminal.element.parentElement),a=parseInt(e.getPropertyValue("height")),m=Math.max(0,parseInt(e.getPropertyValue("width"))),o=window.getComputedStyle(this._terminal.element),n=a-(parseInt(o.getPropertyValue("padding-top"))+parseInt(o.getPropertyValue("padding-bottom"))),c=m-(parseInt(o.getPropertyValue("padding-right"))+parseInt(o.getPropertyValue("padding-left")))-b;return{cols:Math.max(2,Math.floor(c/w.css.cell.width)),rows:Math.max(1,Math.floor(n/w.css.cell.height))}}}})(),l})()})});var jt=W0((O4,c8)=>{(function(l,u){typeof O4=="object"&&typeof c8=="object"?c8.exports=u():typeof define=="function"&&define.amd?define([],u):typeof O4=="object"?O4.SerializeAddon=u():l.SerializeAddon=u()})(O4,function(){return(()=>{"use strict";var l={};return(()=>{var u=l;function g(n,c,v){return Math.max(c,Math.min(n,v))}Object.defineProperty(u,"__esModule",{value:!0}),u.HTMLSerializeHandler=u.SerializeAddon=void 0;class w{constructor(c){this._buffer=c}serialize(c){let v=this._buffer.getNullCell(),f=this._buffer.getNullCell(),i=v,t=c.start.x,p=c.end.x,d=c.start.y,r=c.end.y;this._beforeSerialize(p-t,t,p);for(let z=t;z<=p;z++){let M=this._buffer.getLine(z);if(M){let _=z!==c.start.x?0:d,L=z!==c.end.x?M.length:r;for(let S=_;S<L;S++){let y=M.getCell(S,i===v?f:v);y?(this._nextCell(y,i,z,S),i=y):console.warn(`Can't get cell at row=${z}, col=${S}`)}}this._rowEnd(z,z===p)}return this._afterSerialize(),this._serializeString()}_nextCell(c,v,f,i){}_rowEnd(c,v){}_beforeSerialize(c,v,f){}_afterSerialize(){}_serializeString(){return""}}function b(n,c){return n.getFgColorMode()===c.getFgColorMode()&&n.getFgColor()===c.getFgColor()}function e(n,c){return n.getBgColorMode()===c.getBgColorMode()&&n.getBgColor()===c.getBgColor()}function a(n,c){return n.isInverse()===c.isInverse()&&n.isBold()===c.isBold()&&n.isUnderline()===c.isUnderline()&&n.isBlink()===c.isBlink()&&n.isInvisible()===c.isInvisible()&&n.isItalic()===c.isItalic()&&n.isDim()===c.isDim()&&n.isStrikethrough()===c.isStrikethrough()}class m extends w{constructor(c,v){super(c),this._terminal=v,this._rowIndex=0,this._allRows=new Array,this._allRowSeparators=new Array,this._currentRow="",this._nullCellCount=0,this._cursorStyle=this._buffer.getNullCell(),this._cursorStyleRow=0,this._cursorStyleCol=0,this._backgroundCell=this._buffer.getNullCell(),this._firstRow=0,this._lastCursorRow=0,this._lastCursorCol=0,this._lastContentCursorRow=0,this._lastContentCursorCol=0,this._thisRowLastChar=this._buffer.getNullCell(),this._thisRowLastSecondChar=this._buffer.getNullCell(),this._nextRowFirstChar=this._buffer.getNullCell()}_beforeSerialize(c,v,f){this._allRows=new Array(c),this._lastContentCursorRow=v,this._lastCursorRow=v,this._firstRow=v}_rowEnd(c,v){var f;this._nullCellCount>0&&!e(this._cursorStyle,this._backgroundCell)&&(this._currentRow+=`\x1B[${this._nullCellCount}X`);let i="";if(!v){c-this._firstRow>=this._terminal.rows&&((f=this._buffer.getLine(this._cursorStyleRow))===null||f===void 0||f.getCell(this._cursorStyleCol,this._backgroundCell));let t=this._buffer.getLine(c),p=this._buffer.getLine(c+1);if(p.isWrapped){i="";let d=t.getCell(t.length-1,this._thisRowLastChar),r=t.getCell(t.length-2,this._thisRowLastSecondChar),z=p.getCell(0,this._nextRowFirstChar),M=z.getWidth()>1,_=!1;(z.getChars()&&M?this._nullCellCount<=1:this._nullCellCount<=0)&&((d.getChars()||d.getWidth()===0)&&e(d,z)&&(_=!0),M&&(r.getChars()||r.getWidth()===0)&&e(d,z)&&e(r,z)&&(_=!0)),_||(i="-".repeat(this._nullCellCount+1),i+="\x1B[1D\x1B[1X",this._nullCellCount>0&&(i+="\x1B[A",i+=`\x1B[${t.length-this._nullCellCount}C`,i+=`\x1B[${this._nullCellCount}X`,i+=`\x1B[${t.length-this._nullCellCount}D`,i+="\x1B[B"),this._lastContentCursorRow=c+1,this._lastContentCursorCol=0,this._lastCursorRow=c+1,this._lastCursorCol=0)}else i=`\r
`,this._lastCursorRow=c+1,this._lastCursorCol=0}this._allRows[this._rowIndex]=this._currentRow,this._allRowSeparators[this._rowIndex++]=i,this._currentRow="",this._nullCellCount=0}_diffStyle(c,v){let f=[],i=!b(c,v),t=!e(c,v),p=!a(c,v);if(i||t||p)if(c.isAttributeDefault())v.isAttributeDefault()||f.push(0);else{if(i){let d=c.getFgColor();c.isFgRGB()?f.push(38,2,d>>>16&255,d>>>8&255,255&d):c.isFgPalette()?d>=16?f.push(38,5,d):f.push(8&d?90+(7&d):30+(7&d)):f.push(39)}if(t){let d=c.getBgColor();c.isBgRGB()?f.push(48,2,d>>>16&255,d>>>8&255,255&d):c.isBgPalette()?d>=16?f.push(48,5,d):f.push(8&d?100+(7&d):40+(7&d)):f.push(49)}p&&(c.isInverse()!==v.isInverse()&&f.push(c.isInverse()?7:27),c.isBold()!==v.isBold()&&f.push(c.isBold()?1:22),c.isUnderline()!==v.isUnderline()&&f.push(c.isUnderline()?4:24),c.isBlink()!==v.isBlink()&&f.push(c.isBlink()?5:25),c.isInvisible()!==v.isInvisible()&&f.push(c.isInvisible()?8:28),c.isItalic()!==v.isItalic()&&f.push(c.isItalic()?3:23),c.isDim()!==v.isDim()&&f.push(c.isDim()?2:22),c.isStrikethrough()!==v.isStrikethrough()&&f.push(c.isStrikethrough()?9:29))}return f}_nextCell(c,v,f,i){if(c.getWidth()===0)return;let t=c.getChars()==="",p=this._diffStyle(c,this._cursorStyle);if(t?!e(this._cursorStyle,c):p.length>0){this._nullCellCount>0&&(e(this._cursorStyle,this._backgroundCell)||(this._currentRow+=`\x1B[${this._nullCellCount}X`),this._currentRow+=`\x1B[${this._nullCellCount}C`,this._nullCellCount=0),this._lastContentCursorRow=this._lastCursorRow=f,this._lastContentCursorCol=this._lastCursorCol=i,this._currentRow+=`\x1B[${p.join(";")}m`;let d=this._buffer.getLine(f);d!==void 0&&(d.getCell(i,this._cursorStyle),this._cursorStyleRow=f,this._cursorStyleCol=i)}t?this._nullCellCount+=c.getWidth():(this._nullCellCount>0&&(e(this._cursorStyle,this._backgroundCell)||(this._currentRow+=`\x1B[${this._nullCellCount}X`),this._currentRow+=`\x1B[${this._nullCellCount}C`,this._nullCellCount=0),this._currentRow+=c.getChars(),this._lastContentCursorRow=this._lastCursorRow=f,this._lastContentCursorCol=this._lastCursorCol=i+c.getWidth())}_serializeString(){let c=this._allRows.length;this._buffer.length-this._firstRow<=this._terminal.rows&&(c=this._lastContentCursorRow+1-this._firstRow,this._lastCursorCol=this._lastContentCursorCol,this._lastCursorRow=this._lastContentCursorRow);let v="";for(let r=0;r<c;r++)v+=this._allRows[r],r+1<c&&(v+=this._allRowSeparators[r]);let f=this._buffer.baseY+this._buffer.cursorY,i=this._buffer.cursorX;var t;(f!==this._lastCursorRow||i!==this._lastCursorCol)&&((t=f-this._lastCursorRow)>0?v+=`\x1B[${t}B`:t<0&&(v+=`\x1B[${-t}A`),(r=>{r>0?v+=`\x1B[${r}C`:r<0&&(v+=`\x1B[${-r}D`)})(i-this._lastCursorCol));let p=this._terminal._core._inputHandler._curAttrData,d=this._diffStyle(p,this._cursorStyle);return d.length>0&&(v+=`\x1B[${d.join(";")}m`),v}}u.SerializeAddon=class{constructor(){}activate(n){this._terminal=n}_serializeBuffer(n,c,v){let f=c.length,i=new m(c,n),t=v===void 0?f:g(v+n.rows,0,f);return i.serialize({start:{x:f-t,y:0},end:{x:f-1,y:n.cols}})}_serializeBufferAsHTML(n,c){var v,f;let i=n.buffer.active,t=new o(i,n,c);if((v=c.onlySelection)===null||v===void 0||!v){let d=i.length,r=c.scrollback,z=r===void 0?d:g(r+n.rows,0,d);return t.serialize({start:{x:d-z,y:0},end:{x:d-1,y:n.cols}})}let p=(f=this._terminal)===null||f===void 0?void 0:f.getSelectionPosition();return p!==void 0?t.serialize({start:{x:p.start.y,y:p.start.x},end:{x:p.end.y,y:p.end.x}}):""}_serializeModes(n){let c="",v=n.modes;if(v.applicationCursorKeysMode&&(c+="\x1B[?1h"),v.applicationKeypadMode&&(c+="\x1B[?66h"),v.bracketedPasteMode&&(c+="\x1B[?2004h"),v.insertMode&&(c+="\x1B[4h"),v.originMode&&(c+="\x1B[?6h"),v.reverseWraparoundMode&&(c+="\x1B[?45h"),v.sendFocusMode&&(c+="\x1B[?1004h"),v.wraparoundMode===!1&&(c+="\x1B[?7l"),v.mouseTrackingMode!=="none")switch(v.mouseTrackingMode){case"x10":c+="\x1B[?9h";break;case"vt200":c+="\x1B[?1000h";break;case"drag":c+="\x1B[?1002h";break;case"any":c+="\x1B[?1003h"}return c}serialize(n){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");let c=this._serializeBuffer(this._terminal,this._terminal.buffer.normal,n==null?void 0:n.scrollback);return n!=null&&n.excludeAltBuffer||this._terminal.buffer.active.type!=="alternate"||(c+=`\x1B[?1049h\x1B[H${this._serializeBuffer(this._terminal,this._terminal.buffer.alternate,void 0)}`),n!=null&&n.excludeModes||(c+=this._serializeModes(this._terminal)),c}serializeAsHTML(n){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");return this._serializeBufferAsHTML(this._terminal,n||{})}dispose(){}};class o extends w{constructor(c,v,f){super(c),this._terminal=v,this._options=f,this._currentRow="",this._htmlContent="",this._colors=v._core._themeService.colors}_padStart(c,v,f){return v>>=0,f=f!=null?f:" ",c.length>v?c:((v-=c.length)>f.length&&(f+=f.repeat(v/f.length)),f.slice(0,v)+c)}_beforeSerialize(c,v,f){var i,t,p,d,r;this._htmlContent+="<html><body><!--StartFragment--><pre>";let z="#000000",M="#ffffff";(i=this._options.includeGlobalBackground)!==null&&i!==void 0&&i&&(z=(p=(t=this._terminal.options.theme)===null||t===void 0?void 0:t.foreground)!==null&&p!==void 0?p:"#ffffff",M=(r=(d=this._terminal.options.theme)===null||d===void 0?void 0:d.background)!==null&&r!==void 0?r:"#000000");let _=[];_.push("color: "+z+";"),_.push("background-color: "+M+";"),_.push("font-family: "+this._terminal.options.fontFamily+";"),_.push("font-size: "+this._terminal.options.fontSize+"px;"),this._htmlContent+="<div style='"+_.join(" ")+"'>"}_afterSerialize(){this._htmlContent+="</div>",this._htmlContent+="</pre><!--EndFragment--></body></html>"}_rowEnd(c,v){this._htmlContent+="<div><span>"+this._currentRow+"</span></div>",this._currentRow=""}_getHexColor(c,v){let f=v?c.getFgColor():c.getBgColor();return(v?c.isFgRGB():c.isBgRGB())?[f>>16&255,f>>8&255,255&f].map(i=>this._padStart(i.toString(16),2,"0")).join(""):(v?c.isFgPalette():c.isBgPalette())?this._colors.ansi[f].css:void 0}_diffStyle(c,v){let f=[],i=!b(c,v),t=!e(c,v),p=!a(c,v);if(i||t||p){let d=this._getHexColor(c,!0);d&&f.push("color: "+d+";");let r=this._getHexColor(c,!1);return r&&f.push("background-color: "+r+";"),c.isInverse()&&f.push("color: #000000; background-color: #BFBFBF;"),c.isBold()&&f.push("font-weight: bold;"),c.isUnderline()&&f.push("text-decoration: underline;"),c.isBlink()&&f.push("text-decoration: blink;"),c.isInvisible()&&f.push("visibility: hidden;"),c.isItalic()&&f.push("font-style: italic;"),c.isDim()&&f.push("opacity: 0.5;"),c.isStrikethrough()&&f.push("text-decoration: line-through;"),f}}_nextCell(c,v,f,i){if(c.getWidth()===0)return;let t=c.getChars()==="",p=this._diffStyle(c,v);p&&(this._currentRow+=p.length===0?"</span><span>":"</span><span style='"+p.join(" ")+"'>"),this._currentRow+=t?" ":c.getChars()}_serializeString(){return this._htmlContent}}u.HTMLSerializeHandler=o})(),l})()})});var ks=W0((p6,C8)=>{(function(l,u){typeof p6=="object"&&typeof C8=="object"?C8.exports=u():typeof define=="function"&&define.amd?define([],u):typeof p6=="object"?p6.CanvasAddon=u():l.CanvasAddon=u()})(self,function(){return(()=>{"use strict";var l={903:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseRenderLayer=void 0;let m=a(503),o=a(627),n=a(237),c=a(860),v=a(374),f=a(296),i=a(855),t=a(274),p=a(859),d=a(399),r=a(345);class z extends p.Disposable{constructor(L,S,y,A,H,T,V,Z,B,N){super(),this._terminal=L,this._container=S,this._alpha=H,this._themeService=T,this._bufferService=V,this._optionsService=Z,this._decorationService=B,this._coreBrowserService=N,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._selectionModel=(0,f.createSelectionRenderModel)(),this._bitmapGenerator=[],this._onAddTextureAtlasCanvas=this.register(new r.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._cellColorResolver=new t.CellColorResolver(this._terminal,this._selectionModel,this._decorationService,this._coreBrowserService,this._themeService),this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${y}-layer`),this._canvas.style.zIndex=A.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this._refreshCharAtlas(this._themeService.colors),this.register(this._themeService.onChangeColors(E=>{this._refreshCharAtlas(E),this.reset()})),this.register((0,p.toDisposable)(()=>{var E;(0,m.removeElementFromParent)(this._canvas),(E=this._charAtlas)===null||E===void 0||E.dispose()}))}get canvas(){return this._canvas}get cacheCanvas(){var L;return(L=this._charAtlas)===null||L===void 0?void 0:L.pages[0].canvas}_initCanvas(){this._ctx=(0,v.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(){}handleFocus(){}handleCursorMove(){}handleGridChanged(L,S){}handleSelectionChanged(L,S,y=!1){this._selectionModel.update(this._terminal,L,S,y)}_setTransparency(L){if(L===this._alpha)return;let S=this._canvas;this._alpha=L,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,S),this._refreshCharAtlas(this._themeService.colors),this.handleGridChanged(0,this._bufferService.rows-1)}_refreshCharAtlas(L){var S;if(!(this._deviceCharWidth<=0&&this._deviceCharHeight<=0)){(S=this._charAtlasDisposable)===null||S===void 0||S.dispose(),this._charAtlas=(0,o.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,L,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlasDisposable=(0,r.forwardEvent)(this._charAtlas.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),this._charAtlas.warmUp();for(let y=0;y<this._charAtlas.pages.length;y++)this._bitmapGenerator[y]=new M(this._charAtlas.pages[y].canvas)}}resize(L){this._deviceCellWidth=L.device.cell.width,this._deviceCellHeight=L.device.cell.height,this._deviceCharWidth=L.device.char.width,this._deviceCharHeight=L.device.char.height,this._deviceCharLeft=L.device.char.left,this._deviceCharTop=L.device.char.top,this._canvas.width=L.device.canvas.width,this._canvas.height=L.device.canvas.height,this._canvas.style.width=`${L.css.canvas.width}px`,this._canvas.style.height=`${L.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(this._themeService.colors)}clearTextureAtlas(){var L;(L=this._charAtlas)===null||L===void 0||L.clearTexture()}_fillCells(L,S,y,A){this._ctx.fillRect(L*this._deviceCellWidth,S*this._deviceCellHeight,y*this._deviceCellWidth,A*this._deviceCellHeight)}_fillMiddleLineAtCells(L,S,y=1){let A=Math.ceil(.5*this._deviceCellHeight);this._ctx.fillRect(L*this._deviceCellWidth,(S+1)*this._deviceCellHeight-A-this._coreBrowserService.dpr,y*this._deviceCellWidth,this._coreBrowserService.dpr)}_fillBottomLineAtCells(L,S,y=1,A=0){this._ctx.fillRect(L*this._deviceCellWidth,(S+1)*this._deviceCellHeight+A-this._coreBrowserService.dpr-1,y*this._deviceCellWidth,this._coreBrowserService.dpr)}_curlyUnderlineAtCell(L,S,y=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;let A=this._coreBrowserService.dpr;this._ctx.lineWidth=A;for(let H=0;H<y;H++){let T=(L+H)*this._deviceCellWidth,V=(L+H+.5)*this._deviceCellWidth,Z=(L+H+1)*this._deviceCellWidth,B=(S+1)*this._deviceCellHeight-A-1,N=B-A,E=B+A;this._ctx.moveTo(T,B),this._ctx.bezierCurveTo(T,N,V,N,V,B),this._ctx.bezierCurveTo(V,E,Z,E,Z,B)}this._ctx.stroke(),this._ctx.restore()}_dottedUnderlineAtCell(L,S,y=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;let A=this._coreBrowserService.dpr;this._ctx.lineWidth=A,this._ctx.setLineDash([2*A,A]);let H=L*this._deviceCellWidth,T=(S+1)*this._deviceCellHeight-A-1;this._ctx.moveTo(H,T);for(let V=0;V<y;V++){let Z=(L+y+V)*this._deviceCellWidth;this._ctx.lineTo(Z,T)}this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_dashedUnderlineAtCell(L,S,y=1){this._ctx.save(),this._ctx.beginPath(),this._ctx.strokeStyle=this._ctx.fillStyle;let A=this._coreBrowserService.dpr;this._ctx.lineWidth=A,this._ctx.setLineDash([4*A,3*A]);let H=L*this._deviceCellWidth,T=(L+y)*this._deviceCellWidth,V=(S+1)*this._deviceCellHeight-A-1;this._ctx.moveTo(H,V),this._ctx.lineTo(T,V),this._ctx.stroke(),this._ctx.closePath(),this._ctx.restore()}_fillLeftLineAtCell(L,S,y){this._ctx.fillRect(L*this._deviceCellWidth,S*this._deviceCellHeight,this._coreBrowserService.dpr*y,this._deviceCellHeight)}_strokeRectAtCell(L,S,y,A){let H=this._coreBrowserService.dpr;this._ctx.lineWidth=H,this._ctx.strokeRect(L*this._deviceCellWidth+H/2,S*this._deviceCellHeight+H/2,y*this._deviceCellWidth-H,A*this._deviceCellHeight-H)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(L,S,y,A){this._alpha?this._ctx.clearRect(L*this._deviceCellWidth,S*this._deviceCellHeight,y*this._deviceCellWidth,A*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(L*this._deviceCellWidth,S*this._deviceCellHeight,y*this._deviceCellWidth,A*this._deviceCellHeight))}_fillCharTrueColor(L,S,y){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline=n.TEXT_BASELINE,this._clipRow(y);let A=!1;this._optionsService.rawOptions.customGlyphs!==!1&&(A=(0,c.tryDrawCustomChar)(this._ctx,L.getChars(),S*this._deviceCellWidth,y*this._deviceCellHeight,this._deviceCellWidth,this._deviceCellHeight,this._optionsService.rawOptions.fontSize,this._coreBrowserService.dpr)),A||this._ctx.fillText(L.getChars(),S*this._deviceCellWidth+this._deviceCharLeft,y*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_drawChars(L,S,y){var A,H;let T=L.getChars(),V;this._cellColorResolver.resolve(L,S,this._bufferService.buffer.ydisp+y),V=T&&T.length>1?this._charAtlas.getRasterizedGlyphCombinedChar(T,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext):this._charAtlas.getRasterizedGlyph(L.getCode()||i.WHITESPACE_CELL_CODE,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext),V.size.x&&V.size.y&&(this._ctx.save(),this._clipRow(y),this._charAtlas.pages[V.texturePage].version!==((A=this._bitmapGenerator[V.texturePage])===null||A===void 0?void 0:A.version)&&(this._bitmapGenerator[V.texturePage]||(this._bitmapGenerator[V.texturePage]=new M(this._charAtlas.pages[V.texturePage].canvas)),this._bitmapGenerator[V.texturePage].refresh(),this._bitmapGenerator[V.texturePage].version=this._charAtlas.pages[V.texturePage].version),this._ctx.drawImage(((H=this._bitmapGenerator[V.texturePage])===null||H===void 0?void 0:H.bitmap)||this._charAtlas.pages[V.texturePage].canvas,V.texturePosition.x,V.texturePosition.y,V.size.x,V.size.y,S*this._deviceCellWidth+this._deviceCharLeft-V.offset.x,y*this._deviceCellHeight+this._deviceCharTop-V.offset.y,V.size.x,V.size.y),this._ctx.restore())}_clipRow(L){this._ctx.beginPath(),this._ctx.rect(0,L*this._deviceCellHeight,this._bufferService.cols*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(L,S){return`${S?"italic":""} ${L?this._optionsService.rawOptions.fontWeightBold:this._optionsService.rawOptions.fontWeight} ${this._optionsService.rawOptions.fontSize*this._coreBrowserService.dpr}px ${this._optionsService.rawOptions.fontFamily}`}}e.BaseRenderLayer=z;class M{constructor(L){this._canvas=L,this._state=0,this._commitTimeout=void 0,this._bitmap=void 0,this.version=-1}get bitmap(){return this._bitmap}refresh(){this._bitmap=void 0,d.isSafari||(this._commitTimeout===void 0&&(this._commitTimeout=window.setTimeout(()=>this._generate(),100)),this._state===1&&(this._state=2))}_generate(){this._state===0&&(this._bitmap=void 0,this._state=1,window.createImageBitmap(this._canvas).then(L=>{this._state===2?this.refresh():this._bitmap=L,this._state=0}),this._commitTimeout&&(this._commitTimeout=void 0))}}},949:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasRenderer=void 0;let m=a(627),o=a(56),n=a(374),c=a(345),v=a(859),f=a(873),i=a(43),t=a(630),p=a(744);class d extends v.Disposable{constructor(z,M,_,L,S,y,A,H,T,V,Z){super(),this._terminal=z,this._screenElement=M,this._bufferService=L,this._charSizeService=S,this._optionsService=y,this._coreBrowserService=T,this._themeService=Z,this._onRequestRedraw=this.register(new c.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onChangeTextureAtlas=this.register(new c.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new c.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event;let B=this._optionsService.rawOptions.allowTransparency;this._renderLayers=[new p.TextRenderLayer(this._terminal,this._screenElement,0,B,this._bufferService,this._optionsService,A,V,this._coreBrowserService,Z),new t.SelectionRenderLayer(this._terminal,this._screenElement,1,this._bufferService,this._coreBrowserService,V,this._optionsService,Z),new i.LinkRenderLayer(this._terminal,this._screenElement,2,_,this._bufferService,this._optionsService,V,this._coreBrowserService,Z),new f.CursorRenderLayer(this._terminal,this._screenElement,3,this._onRequestRedraw,this._bufferService,this._optionsService,H,this._coreBrowserService,V,Z)];for(let N of this._renderLayers)(0,c.forwardEvent)(N.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas);this.dimensions=(0,n.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this.register((0,o.observeDevicePixelDimensions)(this._renderLayers[0].canvas,this._coreBrowserService.window,(N,E)=>this._setCanvasDevicePixelDimensions(N,E))),this.register((0,v.toDisposable)(()=>{for(let N of this._renderLayers)N.dispose();(0,m.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){return this._renderLayers[0].cacheCanvas}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._bufferService.cols,this._bufferService.rows))}handleResize(z,M){this._updateDimensions();for(let _ of this._renderLayers)_.resize(this.dimensions);this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}handleCharSizeChanged(){this.handleResize(this._bufferService.cols,this._bufferService.rows)}handleBlur(){this._runOperation(z=>z.handleBlur())}handleFocus(){this._runOperation(z=>z.handleFocus())}handleSelectionChanged(z,M,_=!1){this._runOperation(L=>L.handleSelectionChanged(z,M,_)),this._themeService.colors.selectionForeground&&this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}handleCursorMove(){this._runOperation(z=>z.handleCursorMove())}clear(){this._runOperation(z=>z.reset())}_runOperation(z){for(let M of this._renderLayers)z(M)}renderRows(z,M){for(let _ of this._renderLayers)_.handleGridChanged(z,M)}clearTextureAtlas(){for(let z of this._renderLayers)z.clearTextureAtlas()}_updateDimensions(){if(!this._charSizeService.hasValidSize)return;let z=this._coreBrowserService.dpr;this.dimensions.device.char.width=Math.floor(this._charSizeService.width*z),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*z),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._bufferService.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._bufferService.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/z),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/z),this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows,this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols}_setCanvasDevicePixelDimensions(z,M){this.dimensions.device.canvas.height=M,this.dimensions.device.canvas.width=z;for(let _ of this._renderLayers)_.resize(this.dimensions);this._requestRedrawViewport()}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._bufferService.rows-1})}}e.CanvasRenderer=d},873:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CursorRenderLayer=void 0;let m=a(903),o=a(782),n=a(859);class c extends m.BaseRenderLayer{constructor(i,t,p,d,r,z,M,_,L,S){super(i,t,"cursor",p,!0,S,r,z,L,_),this._onRequestRedraw=d,this._coreService=M,this._cell=new o.CellData,this._state={x:0,y:0,isFocused:!1,style:"",width:0},this._cursorRenderers={bar:this._renderBarCursor.bind(this),block:this._renderBlockCursor.bind(this),underline:this._renderUnderlineCursor.bind(this)},this.register(z.onOptionChange(()=>this._handleOptionsChanged())),this.register((0,n.toDisposable)(()=>{var y;(y=this._cursorBlinkStateManager)===null||y===void 0||y.dispose(),this._cursorBlinkStateManager=void 0}))}resize(i){super.resize(i),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}reset(){var i;this._clearCursor(),(i=this._cursorBlinkStateManager)===null||i===void 0||i.restartBlinkAnimation(),this._handleOptionsChanged()}handleBlur(){var i;(i=this._cursorBlinkStateManager)===null||i===void 0||i.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleFocus(){var i;(i=this._cursorBlinkStateManager)===null||i===void 0||i.resume(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}_handleOptionsChanged(){var i;this._optionsService.rawOptions.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new v(this._coreBrowserService.isFocused,()=>{this._render(!0)},this._coreBrowserService)):((i=this._cursorBlinkStateManager)===null||i===void 0||i.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})}handleCursorMove(){var i;(i=this._cursorBlinkStateManager)===null||i===void 0||i.restartBlinkAnimation()}handleGridChanged(i,t){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()}_render(i){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();let t=this._bufferService.buffer.ybase+this._bufferService.buffer.y,p=t-this._bufferService.buffer.ydisp;if(p<0||p>=this._bufferService.rows)return void this._clearCursor();let d=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(t).loadCell(d,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;let r=this._optionsService.rawOptions.cursorStyle;return r&&r!=="block"?this._cursorRenderers[r](d,p,this._cell):this._renderBlurCursor(d,p,this._cell),this._ctx.restore(),this._state.x=d,this._state.y=p,this._state.isFocused=!1,this._state.style=r,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===d&&this._state.y===p&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.rawOptions.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.rawOptions.cursorStyle||"block"](d,p,this._cell),this._ctx.restore(),this._state.x=d,this._state.y=p,this._state.isFocused=!1,this._state.style=this._optionsService.rawOptions.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}_clearCursor(){this._state&&(this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}_renderBarCursor(i,t,p){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(i,t,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}_renderBlockCursor(i,t,p){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(i,t,p.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(p,i,t),this._ctx.restore()}_renderUnderlineCursor(i,t,p){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(i,t),this._ctx.restore()}_renderBlurCursor(i,t,p){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(i,t,p.getWidth(),1),this._ctx.restore()}}e.CursorRenderLayer=c;class v{constructor(i,t,p){this._renderCallback=t,this._coreBrowserService=p,this.isCursorVisible=!0,i&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(i=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){let t=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,t>0)return void this._restartInterval(t)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){let t=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(t)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},i)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()}}},574:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GridCache=void 0,e.GridCache=class{constructor(){this.cache=[]}resize(a,m){for(let o=0;o<a;o++){this.cache.length<=o&&this.cache.push([]);for(let n=this.cache[o].length;n<m;n++)this.cache[o].push(void 0);this.cache[o].length=m}this.cache.length=a}clear(){for(let a=0;a<this.cache.length;a++)for(let m=0;m<this.cache[a].length;m++)this.cache[a][m]=void 0}}},43:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LinkRenderLayer=void 0;let m=a(903),o=a(237),n=a(197);class c extends m.BaseRenderLayer{constructor(f,i,t,p,d,r,z,M,_){super(f,i,"link",t,!0,_,d,r,z,M),this.register(p.onShowLinkUnderline(L=>this._handleShowLinkUnderline(L))),this.register(p.onHideLinkUnderline(L=>this._handleHideLinkUnderline(L)))}resize(f){super.resize(f),this._state=void 0}reset(){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);let f=this._state.y2-this._state.y1-1;f>0&&this._clearCells(0,this._state.y1+1,this._state.cols,f),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(f){if(f.fg===o.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:f.fg&&(0,n.is256Color)(f.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[f.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,f.y1===f.y2)this._fillBottomLineAtCells(f.x1,f.y1,f.x2-f.x1);else{this._fillBottomLineAtCells(f.x1,f.y1,f.cols-f.x1);for(let i=f.y1+1;i<f.y2;i++)this._fillBottomLineAtCells(0,i,f.cols);this._fillBottomLineAtCells(0,f.y2,f.x2)}this._state=f}_handleHideLinkUnderline(f){this._clearCurrentLink()}}e.LinkRenderLayer=c},630:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionRenderLayer=void 0;let m=a(903);class o extends m.BaseRenderLayer{constructor(c,v,f,i,t,p,d,r){super(c,v,"selection",f,!0,r,i,d,p,t),this._clearState()}_clearState(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}}resize(c){super.resize(c),this._selectionModel.selectionStart&&this._selectionModel.selectionEnd&&this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}reset(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())}handleBlur(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleFocus(){this.reset(),this._redrawSelection(this._selectionModel.selectionStart,this._selectionModel.selectionEnd,this._selectionModel.columnSelectMode)}handleSelectionChanged(c,v,f){super.handleSelectionChanged(c,v,f),this._redrawSelection(c,v,f)}_redrawSelection(c,v,f){if(!this._didStateChange(c,v,f,this._bufferService.buffer.ydisp))return;if(this._clearAll(),!c||!v)return void this._clearState();let i=c[1]-this._bufferService.buffer.ydisp,t=v[1]-this._bufferService.buffer.ydisp,p=Math.max(i,0),d=Math.min(t,this._bufferService.rows-1);if(p>=this._bufferService.rows||d<0)this._state.ydisp=this._bufferService.buffer.ydisp;else{if(this._ctx.fillStyle=(this._coreBrowserService.isFocused?this._themeService.colors.selectionBackgroundTransparent:this._themeService.colors.selectionInactiveBackgroundTransparent).css,f){let r=c[0],z=v[0]-r,M=d-p+1;this._fillCells(r,p,z,M)}else{let r=i===p?c[0]:0,z=p===t?v[0]:this._bufferService.cols;this._fillCells(r,p,z-r,1);let M=Math.max(d-p-1,0);if(this._fillCells(0,p+1,this._bufferService.cols,M),p!==d){let _=t===d?v[0]:this._bufferService.cols;this._fillCells(0,d,_,1)}}this._state.start=[c[0],c[1]],this._state.end=[v[0],v[1]],this._state.columnSelectMode=f,this._state.ydisp=this._bufferService.buffer.ydisp}}_didStateChange(c,v,f,i){return!this._areCoordinatesEqual(c,this._state.start)||!this._areCoordinatesEqual(v,this._state.end)||f!==this._state.columnSelectMode||i!==this._state.ydisp}_areCoordinatesEqual(c,v){return!(!c||!v)&&c[0]===v[0]&&c[1]===v[1]}}e.SelectionRenderLayer=o},744:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextRenderLayer=void 0;let m=a(574),o=a(903),n=a(147),c=a(855),v=a(782),f=a(577),i=a(160);class t extends o.BaseRenderLayer{constructor(d,r,z,M,_,L,S,y,A,H){super(d,r,"text",z,M,H,_,L,y,A),this._characterJoinerService=S,this._characterWidth=0,this._characterFont="",this._characterOverlapCache={},this._workCell=new v.CellData,this._state=new m.GridCache,this.register(L.onSpecificOptionChange("allowTransparency",T=>this._setTransparency(T)))}resize(d){super.resize(d);let r=this._getFont(!1,!1);this._characterWidth===d.device.char.width&&this._characterFont===r||(this._characterWidth=d.device.char.width,this._characterFont=r,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)}reset(){this._state.clear(),this._clearAll()}_forEachCell(d,r,z){for(let M=d;M<=r;M++){let _=M+this._bufferService.buffer.ydisp,L=this._bufferService.buffer.lines.get(_),S=this._characterJoinerService.getJoinedCharacters(_);for(let y=0;y<this._bufferService.cols;y++){L.loadCell(y,this._workCell);let A=this._workCell,H=!1,T=y;if(A.getWidth()===0)continue;let V=A.getCode();if(V!==0&&V!==32){if(S.length>0&&y===S[0][0]){H=!0;let Z=S.shift();A=new f.JoinedCellData(this._workCell,L.translateToString(!0,Z[0],Z[1]),Z[1]-Z[0]),T=Z[1]-1}!H&&this._isOverlapping(A)&&T<L.length-1&&L.getCodePoint(T+1)===c.NULL_CELL_CODE&&(A.content&=-12582913,A.content|=8388608),z(A,y,M),y=T}}}}_drawBackground(d,r){let z=this._ctx,M=this._bufferService.cols,_=0,L=0,S=null;z.save(),this._forEachCell(d,r,(y,A,H)=>{let T=null;y.isInverse()?T=y.isFgDefault()?this._themeService.colors.foreground.css:y.isFgRGB()?`rgb(${n.AttributeData.toColorRGB(y.getFgColor()).join(",")})`:this._themeService.colors.ansi[y.getFgColor()].css:y.isBgRGB()?T=`rgb(${n.AttributeData.toColorRGB(y.getBgColor()).join(",")})`:y.isBgPalette()&&(T=this._themeService.colors.ansi[y.getBgColor()].css),T&&y.isDim()&&(T=i.color.multiplyOpacity(i.css.toColor(T),.5).css);let V=!1;this._decorationService.forEachDecorationAtCell(A,this._bufferService.buffer.ydisp+H,void 0,Z=>{Z.options.layer!=="top"&&V||(Z.backgroundColorRGB&&(T=Z.backgroundColorRGB.css),V=Z.options.layer==="top")}),S===null&&(_=A,L=H),H!==L?(z.fillStyle=S||"",this._fillCells(_,L,M-_,1),_=A,L=H):S!==T&&(z.fillStyle=S||"",this._fillCells(_,L,A-_,1),_=A,L=H),S=T}),S!==null&&(z.fillStyle=S,this._fillCells(_,L,M-_,1)),z.restore()}_drawForeground(d,r){this._forEachCell(d,r,(z,M,_)=>this._drawChars(z,M,_))}handleGridChanged(d,r){this._state.cache.length!==0&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,d,this._bufferService.cols,r-d+1),this._drawBackground(d,r),this._drawForeground(d,r))}_isOverlapping(d){if(d.getWidth()!==1||d.getCode()<256)return!1;let r=d.getChars();if(this._characterOverlapCache.hasOwnProperty(r))return this._characterOverlapCache[r];this._ctx.save(),this._ctx.font=this._characterFont;let z=Math.floor(this._ctx.measureText(r).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[r]=z,z}}e.TextRenderLayer=t},503:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.removeElementFromParent=void 0,e.removeElementFromParent=function(...a){var m;for(let o of a)(m=o==null?void 0:o.parentElement)===null||m===void 0||m.removeChild(o)}},274:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CellColorResolver=void 0;let a,m=0,o=0,n=!1,c=!1,v=!1;e.CellColorResolver=class{constructor(f,i,t,p,d){this._terminal=f,this._selectionRenderModel=i,this._decorationService=t,this._coreBrowserService=p,this._themeService=d,this.result={fg:0,bg:0,ext:0}}resolve(f,i,t){this.result.bg=f.bg,this.result.fg=f.fg,this.result.ext=268435456&f.bg?f.extended.ext:0,o=0,m=0,c=!1,n=!1,v=!1,a=this._themeService.colors,this._decorationService.forEachDecorationAtCell(i,t,"bottom",p=>{p.backgroundColorRGB&&(o=p.backgroundColorRGB.rgba>>8&16777215,c=!0),p.foregroundColorRGB&&(m=p.foregroundColorRGB.rgba>>8&16777215,n=!0)}),v=this._selectionRenderModel.isCellSelected(this._terminal,i,t),v&&(o=(this._coreBrowserService.isFocused?a.selectionBackgroundOpaque:a.selectionInactiveBackgroundOpaque).rgba>>8&16777215,c=!0,a.selectionForeground&&(m=a.selectionForeground.rgba>>8&16777215,n=!0)),this._decorationService.forEachDecorationAtCell(i,t,"top",p=>{p.backgroundColorRGB&&(o=p.backgroundColorRGB.rgba>>8&16777215,c=!0),p.foregroundColorRGB&&(m=p.foregroundColorRGB.rgba>>8&16777215,n=!0)}),c&&(o=v?-16777216&f.bg&-134217729|o|50331648:-16777216&f.bg|o|50331648),n&&(m=-16777216&f.fg&-67108865|m|50331648),67108864&this.result.fg&&(c&&!n&&(m=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&a.background.rgba>>8|50331648,n=!0),!c&&n&&(o=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&a.foreground.rgba>>8|50331648,c=!0)),a=void 0,this.result.bg=c?o:this.result.bg,this.result.fg=n?m:this.result.fg}}},627:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.removeTerminalFromCache=e.acquireTextureAtlas=void 0;let m=a(509),o=a(197),n=[];e.acquireTextureAtlas=function(c,v,f,i,t,p,d,r){let z=(0,o.generateConfig)(i,t,p,d,v,f,r);for(let L=0;L<n.length;L++){let S=n[L],y=S.ownedBy.indexOf(c);if(y>=0){if((0,o.configEquals)(S.config,z))return S.atlas;S.ownedBy.length===1?(S.atlas.dispose(),n.splice(L,1)):S.ownedBy.splice(y,1);break}}for(let L=0;L<n.length;L++){let S=n[L];if((0,o.configEquals)(S.config,z))return S.ownedBy.push(c),S.atlas}let M=c._core,_={atlas:new m.TextureAtlas(document,z,M.unicodeService),config:z,ownedBy:[c]};return n.push(_),_.atlas},e.removeTerminalFromCache=function(c){for(let v=0;v<n.length;v++){let f=n[v].ownedBy.indexOf(c);if(f!==-1){n[v].ownedBy.length===1?(n[v].atlas.dispose(),n.splice(v,1)):n[v].ownedBy.splice(f,1);break}}}},197:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.is256Color=e.configEquals=e.generateConfig=void 0;let m=a(160);e.generateConfig=function(o,n,c,v,f,i,t){let p={foreground:i.foreground,background:i.background,cursor:m.NULL_COLOR,cursorAccent:m.NULL_COLOR,selectionForeground:m.NULL_COLOR,selectionBackgroundTransparent:m.NULL_COLOR,selectionBackgroundOpaque:m.NULL_COLOR,selectionInactiveBackgroundTransparent:m.NULL_COLOR,selectionInactiveBackgroundOpaque:m.NULL_COLOR,ansi:i.ansi.slice(),contrastCache:i.contrastCache};return{customGlyphs:f.customGlyphs,devicePixelRatio:t,letterSpacing:f.letterSpacing,lineHeight:f.lineHeight,deviceCellWidth:o,deviceCellHeight:n,deviceCharWidth:c,deviceCharHeight:v,fontFamily:f.fontFamily,fontSize:f.fontSize,fontWeight:f.fontWeight,fontWeightBold:f.fontWeightBold,allowTransparency:f.allowTransparency,drawBoldTextInBrightColors:f.drawBoldTextInBrightColors,minimumContrastRatio:f.minimumContrastRatio,colors:p}},e.configEquals=function(o,n){for(let c=0;c<o.colors.ansi.length;c++)if(o.colors.ansi[c].rgba!==n.colors.ansi[c].rgba)return!1;return o.devicePixelRatio===n.devicePixelRatio&&o.customGlyphs===n.customGlyphs&&o.lineHeight===n.lineHeight&&o.letterSpacing===n.letterSpacing&&o.fontFamily===n.fontFamily&&o.fontSize===n.fontSize&&o.fontWeight===n.fontWeight&&o.fontWeightBold===n.fontWeightBold&&o.allowTransparency===n.allowTransparency&&o.deviceCharWidth===n.deviceCharWidth&&o.deviceCharHeight===n.deviceCharHeight&&o.drawBoldTextInBrightColors===n.drawBoldTextInBrightColors&&o.minimumContrastRatio===n.minimumContrastRatio&&o.colors.foreground.rgba===n.colors.foreground.rgba&&o.colors.background.rgba===n.colors.background.rgba},e.is256Color=function(o){return(50331648&o)==16777216||(50331648&o)==33554432}},237:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TEXT_BASELINE=e.DIM_OPACITY=e.INVERTED_DEFAULT_COLOR=void 0;let m=a(399);e.INVERTED_DEFAULT_COLOR=257,e.DIM_OPACITY=.5,e.TEXT_BASELINE=m.isFirefox||m.isLegacyEdge?"bottom":"ideographic"},860:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tryDrawCustomChar=e.powerlineDefinitions=e.boxDrawingDefinitions=e.blockElementDefinitions=void 0;let m=a(374);e.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:8,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};let o={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};e.boxDrawingDefinitions={"\u2500":{1:"M0,.5 L1,.5"},"\u2501":{3:"M0,.5 L1,.5"},"\u2502":{1:"M.5,0 L.5,1"},"\u2503":{3:"M.5,0 L.5,1"},"\u250C":{1:"M0.5,1 L.5,.5 L1,.5"},"\u250F":{3:"M0.5,1 L.5,.5 L1,.5"},"\u2510":{1:"M0,.5 L.5,.5 L.5,1"},"\u2513":{3:"M0,.5 L.5,.5 L.5,1"},"\u2514":{1:"M.5,0 L.5,.5 L1,.5"},"\u2517":{3:"M.5,0 L.5,.5 L1,.5"},"\u2518":{1:"M.5,0 L.5,.5 L0,.5"},"\u251B":{3:"M.5,0 L.5,.5 L0,.5"},"\u251C":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2523":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2524":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252B":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252C":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2533":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2534":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253B":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253C":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u254B":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u2574":{1:"M.5,.5 L0,.5"},"\u2578":{3:"M.5,.5 L0,.5"},"\u2575":{1:"M.5,.5 L.5,0"},"\u2579":{3:"M.5,.5 L.5,0"},"\u2576":{1:"M.5,.5 L1,.5"},"\u257A":{3:"M.5,.5 L1,.5"},"\u2577":{1:"M.5,.5 L.5,1"},"\u257B":{3:"M.5,.5 L.5,1"},"\u2550":{1:(i,t)=>`M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t}`},"\u2551":{1:(i,t)=>`M${.5-i},0 L${.5-i},1 M${.5+i},0 L${.5+i},1`},"\u2552":{1:(i,t)=>`M.5,1 L.5,${.5-t} L1,${.5-t} M.5,${.5+t} L1,${.5+t}`},"\u2553":{1:(i,t)=>`M${.5-i},1 L${.5-i},.5 L1,.5 M${.5+i},.5 L${.5+i},1`},"\u2554":{1:(i,t)=>`M1,${.5-t} L${.5-i},${.5-t} L${.5-i},1 M1,${.5+t} L${.5+i},${.5+t} L${.5+i},1`},"\u2555":{1:(i,t)=>`M0,${.5-t} L.5,${.5-t} L.5,1 M0,${.5+t} L.5,${.5+t}`},"\u2556":{1:(i,t)=>`M${.5+i},1 L${.5+i},.5 L0,.5 M${.5-i},.5 L${.5-i},1`},"\u2557":{1:(i,t)=>`M0,${.5+t} L${.5-i},${.5+t} L${.5-i},1 M0,${.5-t} L${.5+i},${.5-t} L${.5+i},1`},"\u2558":{1:(i,t)=>`M.5,0 L.5,${.5+t} L1,${.5+t} M.5,${.5-t} L1,${.5-t}`},"\u2559":{1:(i,t)=>`M1,.5 L${.5-i},.5 L${.5-i},0 M${.5+i},.5 L${.5+i},0`},"\u255A":{1:(i,t)=>`M1,${.5-t} L${.5+i},${.5-t} L${.5+i},0 M1,${.5+t} L${.5-i},${.5+t} L${.5-i},0`},"\u255B":{1:(i,t)=>`M0,${.5+t} L.5,${.5+t} L.5,0 M0,${.5-t} L.5,${.5-t}`},"\u255C":{1:(i,t)=>`M0,.5 L${.5+i},.5 L${.5+i},0 M${.5-i},.5 L${.5-i},0`},"\u255D":{1:(i,t)=>`M0,${.5-t} L${.5-i},${.5-t} L${.5-i},0 M0,${.5+t} L${.5+i},${.5+t} L${.5+i},0`},"\u255E":{1:(i,t)=>`M.5,0 L.5,1 M.5,${.5-t} L1,${.5-t} M.5,${.5+t} L1,${.5+t}`},"\u255F":{1:(i,t)=>`M${.5-i},0 L${.5-i},1 M${.5+i},0 L${.5+i},1 M${.5+i},.5 L1,.5`},"\u2560":{1:(i,t)=>`M${.5-i},0 L${.5-i},1 M1,${.5+t} L${.5+i},${.5+t} L${.5+i},1 M1,${.5-t} L${.5+i},${.5-t} L${.5+i},0`},"\u2561":{1:(i,t)=>`M.5,0 L.5,1 M0,${.5-t} L.5,${.5-t} M0,${.5+t} L.5,${.5+t}`},"\u2562":{1:(i,t)=>`M0,.5 L${.5-i},.5 M${.5-i},0 L${.5-i},1 M${.5+i},0 L${.5+i},1`},"\u2563":{1:(i,t)=>`M${.5+i},0 L${.5+i},1 M0,${.5+t} L${.5-i},${.5+t} L${.5-i},1 M0,${.5-t} L${.5-i},${.5-t} L${.5-i},0`},"\u2564":{1:(i,t)=>`M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t} M.5,${.5+t} L.5,1`},"\u2565":{1:(i,t)=>`M0,.5 L1,.5 M${.5-i},.5 L${.5-i},1 M${.5+i},.5 L${.5+i},1`},"\u2566":{1:(i,t)=>`M0,${.5-t} L1,${.5-t} M0,${.5+t} L${.5-i},${.5+t} L${.5-i},1 M1,${.5+t} L${.5+i},${.5+t} L${.5+i},1`},"\u2567":{1:(i,t)=>`M.5,0 L.5,${.5-t} M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t}`},"\u2568":{1:(i,t)=>`M0,.5 L1,.5 M${.5-i},.5 L${.5-i},0 M${.5+i},.5 L${.5+i},0`},"\u2569":{1:(i,t)=>`M0,${.5+t} L1,${.5+t} M0,${.5-t} L${.5-i},${.5-t} L${.5-i},0 M1,${.5-t} L${.5+i},${.5-t} L${.5+i},0`},"\u256A":{1:(i,t)=>`M.5,0 L.5,1 M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t}`},"\u256B":{1:(i,t)=>`M0,.5 L1,.5 M${.5-i},0 L${.5-i},1 M${.5+i},0 L${.5+i},1`},"\u256C":{1:(i,t)=>`M0,${.5+t} L${.5-i},${.5+t} L${.5-i},1 M1,${.5+t} L${.5+i},${.5+t} L${.5+i},1 M0,${.5-t} L${.5-i},${.5-t} L${.5-i},0 M1,${.5-t} L${.5+i},${.5-t} L${.5+i},0`},"\u2571":{1:"M1,0 L0,1"},"\u2572":{1:"M0,0 L1,1"},"\u2573":{1:"M1,0 L0,1 M0,0 L1,1"},"\u257C":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u257D":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"\u257E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u257F":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u250D":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u250E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2511":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"\u2512":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2515":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"\u2516":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2519":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"\u251A":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"\u251D":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"\u251E":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u251F":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2520":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2521":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2522":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"\u2525":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"\u2526":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2527":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2528":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"\u2529":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"\u252A":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"\u252D":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u252E":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u252F":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"\u2530":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2531":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2532":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2535":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u2536":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u2537":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"\u2538":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2539":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u253A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"\u253D":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u253E":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u253F":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"\u2540":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2541":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2542":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2543":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u2544":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2545":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2546":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2547":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"\u2548":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2549":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u254A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u254C":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u254D":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u2504":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2505":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2508":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u2509":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u254E":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u254F":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u2506":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u2507":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u250A":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u250B":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u256D":{1:(i,t)=>`M.5,1 L.5,${.5+t/.15*.5} C.5,${.5+t/.15*.5},.5,.5,1,.5`},"\u256E":{1:(i,t)=>`M.5,1 L.5,${.5+t/.15*.5} C.5,${.5+t/.15*.5},.5,.5,0,.5`},"\u256F":{1:(i,t)=>`M.5,0 L.5,${.5-t/.15*.5} C.5,${.5-t/.15*.5},.5,.5,0,.5`},"\u2570":{1:(i,t)=>`M.5,0 L.5,${.5-t/.15*.5} C.5,${.5-t/.15*.5},.5,.5,1,.5`}},e.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"\uE0B1":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"\uE0B3":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B4":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"\uE0B5":{d:"M0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:1,rightPadding:1},"\uE0B6":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"\uE0B7":{d:"M1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:1,leftPadding:1},"\uE0B8":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"\uE0B9":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BA":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"\uE0BC":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"\uE0BD":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BE":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},e.powerlineDefinitions["\uE0BB"]=e.powerlineDefinitions["\uE0B9"],e.powerlineDefinitions["\uE0BF"]=e.powerlineDefinitions["\uE0BD"],e.tryDrawCustomChar=function(i,t,p,d,r,z,M,_){let L=e.blockElementDefinitions[t];if(L)return function(H,T,V,Z,B,N){for(let E=0;E<T.length;E++){let P=T[E],I=B/8,U=N/8;H.fillRect(V+P.x*I,Z+P.y*U,P.w*I,P.h*U)}}(i,L,p,d,r,z),!0;let S=o[t];if(S)return function(H,T,V,Z,B,N){let E=n.get(T);E||(E=new Map,n.set(T,E));let P=H.fillStyle;if(typeof P!="string")throw new Error(`Unexpected fillStyle type "${P}"`);let I=E.get(P);if(!I){let U=T[0].length,K=T.length,Q=document.createElement("canvas");Q.width=U,Q.height=K;let r0=(0,m.throwIfFalsy)(Q.getContext("2d")),e0=new ImageData(U,K),c0,j,q,G;if(P.startsWith("#"))c0=parseInt(P.slice(1,3),16),j=parseInt(P.slice(3,5),16),q=parseInt(P.slice(5,7),16),G=P.length>7&&parseInt(P.slice(7,9),16)||1;else{if(!P.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${P}" when drawing pattern glyph`);[c0,j,q,G]=P.substring(5,P.length-1).split(",").map(t0=>parseFloat(t0))}for(let t0=0;t0<K;t0++)for(let h0=0;h0<U;h0++)e0.data[4*(t0*U+h0)]=c0,e0.data[4*(t0*U+h0)+1]=j,e0.data[4*(t0*U+h0)+2]=q,e0.data[4*(t0*U+h0)+3]=T[t0][h0]*(255*G);r0.putImageData(e0,0,0),I=(0,m.throwIfFalsy)(H.createPattern(Q,null)),E.set(P,I)}H.fillStyle=I,H.fillRect(V,Z,B,N)}(i,S,p,d,r,z),!0;let y=e.boxDrawingDefinitions[t];if(y)return function(H,T,V,Z,B,N,E){H.strokeStyle=H.fillStyle;for(let[P,I]of Object.entries(T)){let U;H.beginPath(),H.lineWidth=E*Number.parseInt(P),U=typeof I=="function"?I(.15,.15/N*B):I;for(let K of U.split(" ")){let Q=K[0],r0=v[Q];if(!r0){console.error(`Could not find drawing instructions for "${Q}"`);continue}let e0=K.substring(1).split(",");e0[0]&&e0[1]&&r0(H,f(e0,B,N,V,Z,!0,E))}H.stroke(),H.closePath()}}(i,y,p,d,r,z,_),!0;let A=e.powerlineDefinitions[t];return!!A&&(function(H,T,V,Z,B,N,E,P){var I,U;let K=new Path2D;K.rect(V,Z,B,N),H.clip(K),H.beginPath();let Q=E/12;H.lineWidth=P*Q;for(let r0 of T.d.split(" ")){let e0=r0[0],c0=v[e0];if(!c0){console.error(`Could not find drawing instructions for "${e0}"`);continue}let j=r0.substring(1).split(",");j[0]&&j[1]&&c0(H,f(j,B,N,V,Z,!1,P,((I=T.leftPadding)!==null&&I!==void 0?I:0)*(Q/2),((U=T.rightPadding)!==null&&U!==void 0?U:0)*(Q/2)))}T.type===1?(H.strokeStyle=H.fillStyle,H.stroke()):H.fill(),H.closePath()}(i,A,p,d,r,z,M,_),!0)};let n=new Map;function c(i,t,p=0){return Math.max(Math.min(i,t),p)}let v={C:(i,t)=>i.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5]),L:(i,t)=>i.lineTo(t[0],t[1]),M:(i,t)=>i.moveTo(t[0],t[1])};function f(i,t,p,d,r,z,M,_=0,L=0){let S=i.map(y=>parseFloat(y)||parseInt(y));if(S.length<2)throw new Error("Too few arguments for instruction");for(let y=0;y<S.length;y+=2)S[y]*=t-_*M-L*M,z&&S[y]!==0&&(S[y]=c(Math.round(S[y]+.5)-.5,t,0)),S[y]+=d+_*M;for(let y=1;y<S.length;y+=2)S[y]*=p,z&&S[y]!==0&&(S[y]=c(Math.round(S[y]+.5)-.5,p,0)),S[y]+=r;return S}},56:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeDevicePixelDimensions=void 0;let m=a(859);e.observeDevicePixelDimensions=function(o,n,c){let v=new n.ResizeObserver(f=>{let i=f.find(d=>d.target===o);if(!i)return;if(!("devicePixelContentBoxSize"in i))return v==null||v.disconnect(),void(v=void 0);let t=i.devicePixelContentBoxSize[0].inlineSize,p=i.devicePixelContentBoxSize[0].blockSize;t>0&&p>0&&c(t,p)});try{v.observe(o,{box:["device-pixel-content-box"]})}catch(f){v.disconnect(),v=void 0}return(0,m.toDisposable)(()=>v==null?void 0:v.disconnect())}},374:(b,e)=>{function a(m){return 57508<=m&&m<=57558}Object.defineProperty(e,"__esModule",{value:!0}),e.createRenderDimensions=e.excludeFromContrastRatioDemands=e.isRestrictedPowerlineGlyph=e.isPowerlineGlyph=e.throwIfFalsy=void 0,e.throwIfFalsy=function(m){if(!m)throw new Error("value must not be falsy");return m},e.isPowerlineGlyph=a,e.isRestrictedPowerlineGlyph=function(m){return 57520<=m&&m<=57527},e.excludeFromContrastRatioDemands=function(m){return a(m)||function(o){return 9472<=o&&o<=9631}(m)},e.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createSelectionRenderModel=void 0;class a{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(o,n,c,v=!1){if(this.selectionStart=n,this.selectionEnd=c,!n||!c||n[0]===c[0]&&n[1]===c[1])return void this.clear();let f=n[1]-o.buffer.active.viewportY,i=c[1]-o.buffer.active.viewportY,t=Math.max(f,0),p=Math.min(i,o.rows-1);t>=o.rows||p<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=v,this.viewportStartRow=f,this.viewportEndRow=i,this.viewportCappedStartRow=t,this.viewportCappedEndRow=p,this.startCol=n[0],this.endCol=c[0])}isCellSelected(o,n,c){return!!this.hasSelection&&(c-=o.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?n>=this.startCol&&c>=this.viewportCappedStartRow&&n<this.endCol&&c<=this.viewportCappedEndRow:n<this.startCol&&c>=this.viewportCappedStartRow&&n>=this.endCol&&c<=this.viewportCappedEndRow:c>this.viewportStartRow&&c<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&c===this.viewportStartRow&&n>=this.startCol&&n<this.endCol||this.viewportStartRow<this.viewportEndRow&&c===this.viewportEndRow&&n<this.endCol||this.viewportStartRow<this.viewportEndRow&&c===this.viewportStartRow&&n>=this.startCol)}}e.createSelectionRenderModel=function(){return new a}},509:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextureAtlas=void 0;let m=a(237),o=a(855),n=a(147),c=a(160),v=a(860),f=a(374),i=a(485),t=a(385),p=a(345),d={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},r;class z{constructor(y,A,H){this._document=y,this._config=A,this._unicodeService=H,this._didWarmUp=!1,this._cacheMap=new i.FourKeyMap,this._cacheMapCombined=new i.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new n.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new p.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new p.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=L(y,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,f.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}get pages(){return this._pages}dispose(){for(let y of this.pages)y.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){let y=new t.IdleTaskQueue;for(let A=33;A<126;A++)y.enqueue(()=>{if(!this._cacheMap.get(A,o.DEFAULT_COLOR,o.DEFAULT_COLOR,o.DEFAULT_EXT)){let H=this._drawToCache(A,o.DEFAULT_COLOR,o.DEFAULT_COLOR,o.DEFAULT_EXT);this._cacheMap.set(A,o.DEFAULT_COLOR,o.DEFAULT_COLOR,o.DEFAULT_EXT,H)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(let y of this._pages)y.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){z.maxAtlasPages&&this._pages.length>=Math.max(4,z.maxAtlasPages/2)&&queueMicrotask(()=>{let A=this._pages.filter(E=>2*E.canvas.width<=(z.maxTextureSize||4096)).sort((E,P)=>P.canvas.width!==E.canvas.width?P.canvas.width-E.canvas.width:P.percentageUsed-E.percentageUsed),H=-1,T=0;for(let E=0;E<A.length;E++)if(A[E].canvas.width!==T)H=E,T=A[E].canvas.width;else if(E-H==3)break;let V=A.slice(H,H+4),Z=V.map(E=>E.glyphs[0].texturePage).sort((E,P)=>E>P?1:-1),B=Z[0],N=this._mergePages(V,B);N.version++,this._pages[B]=N;for(let E=Z.length-1;E>=1;E--)this._deletePage(Z[E]);this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(N.canvas)});let y=new M(this._document,this._textureSize);return this._pages.push(y),this._activePages.push(y),this._onAddTextureAtlasCanvas.fire(y.canvas),y}_mergePages(y,A){let H=2*y[0].canvas.width,T=new M(this._document,H,y);for(let[V,Z]of y.entries()){let B=V*Z.canvas.width%H,N=Math.floor(V/2)*Z.canvas.height;T.ctx.drawImage(Z.canvas,B,N);for(let P of Z.glyphs)P.texturePage=A,P.sizeClipSpace.x=P.size.x/H,P.sizeClipSpace.y=P.size.y/H,P.texturePosition.x+=B,P.texturePosition.y+=N,P.texturePositionClipSpace.x=P.texturePosition.x/H,P.texturePositionClipSpace.y=P.texturePosition.y/H;this._onRemoveTextureAtlasCanvas.fire(Z.canvas);let E=this._activePages.indexOf(Z);E!==-1&&this._activePages.splice(E,1)}return T}_deletePage(y){this._pages.splice(y,1);for(let A=y;A<this._pages.length;A++){let H=this._pages[A];for(let T of H.glyphs)T.texturePage--;H.version++}}getRasterizedGlyphCombinedChar(y,A,H,T){return this._getFromCacheMap(this._cacheMapCombined,y,A,H,T)}getRasterizedGlyph(y,A,H,T){return this._getFromCacheMap(this._cacheMap,y,A,H,T)}_getFromCacheMap(y,A,H,T,V){return r=y.get(A,H,T,V),r||(r=this._drawToCache(A,H,T,V),y.set(A,H,T,V,r)),r}_getColorFromAnsiIndex(y){if(y>=this._config.colors.ansi.length)throw new Error("No color found for idx "+y);return this._config.colors.ansi[y]}_getBackgroundColor(y,A,H,T){if(this._config.allowTransparency)return c.NULL_COLOR;let V;switch(y){case 16777216:case 33554432:V=this._getColorFromAnsiIndex(A);break;case 50331648:let Z=n.AttributeData.toColorRGB(A);V=c.rgba.toColor(Z[0],Z[1],Z[2]);break;default:V=H?this._config.colors.foreground:this._config.colors.background}return T&&(V=c.color.blend(this._config.colors.background,c.color.multiplyOpacity(V,m.DIM_OPACITY))),V}_getForegroundColor(y,A,H,T,V,Z,B,N,E,P){let I=this._getMinimumContrastColor(y,A,H,T,V,Z,!1,E,P);if(I)return I;let U;switch(V){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&E&&Z<8&&(Z+=8),U=this._getColorFromAnsiIndex(Z);break;case 50331648:let K=n.AttributeData.toColorRGB(Z);U=c.rgba.toColor(K[0],K[1],K[2]);break;default:U=B?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(U=c.color.opaque(U)),N&&(U=c.color.multiplyOpacity(U,m.DIM_OPACITY)),U}_resolveBackgroundRgba(y,A,H){switch(y){case 16777216:case 33554432:return this._getColorFromAnsiIndex(A).rgba;case 50331648:return A<<8;default:return H?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(y,A,H,T){switch(y){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&T&&A<8&&(A+=8),this._getColorFromAnsiIndex(A).rgba;case 50331648:return A<<8;default:return H?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(y,A,H,T,V,Z,B,N,E){if(this._config.minimumContrastRatio===1||E)return;let P=this._config.colors.contrastCache.getColor(y,T);if(P!==void 0)return P||void 0;let I=this._resolveBackgroundRgba(A,H,B),U=this._resolveForegroundRgba(V,Z,B,N),K=c.rgba.ensureContrastRatio(I,U,this._config.minimumContrastRatio);if(!K)return void this._config.colors.contrastCache.setColor(y,T,null);let Q=c.rgba.toColor(K>>24&255,K>>16&255,K>>8&255);return this._config.colors.contrastCache.setColor(y,T,Q),Q}_drawToCache(y,A,H,T){let V=typeof y=="number"?String.fromCharCode(y):y,Z=this._config.deviceCellWidth*Math.max(V.length,2)+4;this._tmpCanvas.width<Z&&(this._tmpCanvas.width=Z);let B=this._config.deviceCellHeight+8;if(this._tmpCanvas.height<B&&(this._tmpCanvas.height=B),this._tmpCtx.save(),this._workAttributeData.fg=H,this._workAttributeData.bg=A,this._workAttributeData.extended.ext=T,this._workAttributeData.isInvisible())return d;let N=!!this._workAttributeData.isBold(),E=!!this._workAttributeData.isInverse(),P=!!this._workAttributeData.isDim(),I=!!this._workAttributeData.isItalic(),U=!!this._workAttributeData.isUnderline(),K=!!this._workAttributeData.isStrikethrough(),Q=this._workAttributeData.getFgColor(),r0=this._workAttributeData.getFgColorMode(),e0=this._workAttributeData.getBgColor(),c0=this._workAttributeData.getBgColorMode();if(E){let g0=Q;Q=e0,e0=g0;let M0=r0;r0=c0,c0=M0}let j=this._getBackgroundColor(c0,e0,E,P);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=j.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";let q=N?this._config.fontWeightBold:this._config.fontWeight,G=I?"italic":"";this._tmpCtx.font=`${G} ${q} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=m.TEXT_BASELINE;let t0=V.length===1&&(0,f.isPowerlineGlyph)(V.charCodeAt(0)),h0=V.length===1&&(0,f.isRestrictedPowerlineGlyph)(V.charCodeAt(0)),A0=this._getForegroundColor(A,c0,e0,H,r0,Q,E,P,N,(0,f.excludeFromContrastRatioDemands)(V.charCodeAt(0)));this._tmpCtx.fillStyle=A0.css;let s0=h0?0:4,H0=!1;this._config.customGlyphs!==!1&&(H0=(0,v.tryDrawCustomChar)(this._tmpCtx,V,s0,s0,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let J,D0=!t0;if(J=typeof y=="number"?this._unicodeService.wcwidth(y):this._unicodeService.getStringCellWidth(y),U){this._tmpCtx.save();let g0=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),M0=g0%2==1?.5:0;if(this._tmpCtx.lineWidth=g0,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())D0=!1,this._tmpCtx.strokeStyle=`rgb(${n.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{D0=!1;let P0=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&P0<8&&(P0+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(P0).css}this._tmpCtx.beginPath();let R0=s0,F0=Math.ceil(s0+this._config.deviceCharHeight)-M0,x1=s0+this._config.deviceCharHeight+g0-M0,z1=Math.ceil(s0+this._config.deviceCharHeight+2*g0)-M0;for(let P0=0;P0<J;P0++){this._tmpCtx.save();let k0=R0+P0*this._config.deviceCellWidth,K0=R0+(P0+1)*this._config.deviceCellWidth,D2=k0+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(k0,F0),this._tmpCtx.lineTo(K0,F0),this._tmpCtx.moveTo(k0,z1),this._tmpCtx.lineTo(K0,z1);break;case 3:let E1=g0<=1?z1:Math.ceil(s0+this._config.deviceCharHeight-g0/2)-M0,R1=g0<=1?F0:Math.ceil(s0+this._config.deviceCharHeight+g0/2)-M0,u3=new Path2D;u3.rect(k0,F0,this._config.deviceCellWidth,z1-F0),this._tmpCtx.clip(u3),this._tmpCtx.moveTo(k0-this._config.deviceCellWidth/2,x1),this._tmpCtx.bezierCurveTo(k0-this._config.deviceCellWidth/2,R1,k0,R1,k0,x1),this._tmpCtx.bezierCurveTo(k0,E1,D2,E1,D2,x1),this._tmpCtx.bezierCurveTo(D2,R1,K0,R1,K0,x1),this._tmpCtx.bezierCurveTo(K0,E1,K0+this._config.deviceCellWidth/2,E1,K0+this._config.deviceCellWidth/2,x1);break;case 4:this._tmpCtx.setLineDash([2*this._config.devicePixelRatio,this._config.devicePixelRatio]),this._tmpCtx.moveTo(k0,F0),this._tmpCtx.lineTo(K0,F0);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(k0,F0),this._tmpCtx.lineTo(K0,F0);break;default:this._tmpCtx.moveTo(k0,F0),this._tmpCtx.lineTo(K0,F0)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!H0&&this._config.fontSize>=12&&!this._config.allowTransparency&&V!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";let P0=this._tmpCtx.measureText(V);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in P0&&P0.actualBoundingBoxDescent>0){this._tmpCtx.save();let k0=new Path2D;k0.rect(R0,F0-Math.ceil(g0/2),this._config.deviceCellWidth,z1-F0+Math.ceil(g0/2)),this._tmpCtx.clip(k0),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=j.css,this._tmpCtx.strokeText(V,s0,s0+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(H0||this._tmpCtx.fillText(V,s0,s0+this._config.deviceCharHeight),V==="_"&&!this._config.allowTransparency){let g0=_(this._tmpCtx.getImageData(s0,s0,this._config.deviceCellWidth,this._config.deviceCellHeight),j,A0,D0);if(g0)for(let M0=1;M0<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=j.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(V,s0,s0+this._config.deviceCharHeight-M0),g0=_(this._tmpCtx.getImageData(s0,s0,this._config.deviceCellWidth,this._config.deviceCellHeight),j,A0,D0),g0);M0++);}if(K){let g0=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),M0=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=g0,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(s0,s0+Math.floor(this._config.deviceCharHeight/2)-M0),this._tmpCtx.lineTo(s0+this._config.deviceCharWidth*J,s0+Math.floor(this._config.deviceCharHeight/2)-M0),this._tmpCtx.stroke()}this._tmpCtx.restore();let u0=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height),H2;if(H2=this._config.allowTransparency?function(g0){for(let M0=0;M0<g0.data.length;M0+=4)if(g0.data[M0+3]>0)return!1;return!0}(u0):_(u0,j,A0,D0),H2)return d;let x0=this._findGlyphBoundingBox(u0,this._workBoundingBox,Z,h0,H0,s0),w0,_0;for(;;){if(this._activePages.length===0){let g0=this._createNewPage();w0=g0,_0=g0.currentRow,_0.height=x0.size.y;break}w0=this._activePages[this._activePages.length-1],_0=w0.currentRow;for(let g0 of this._activePages)x0.size.y<=g0.currentRow.height&&(w0=g0,_0=g0.currentRow);for(let g0=this._activePages.length-1;g0>=0;g0--)for(let M0 of this._activePages[g0].fixedRows)M0.height<=_0.height&&x0.size.y<=M0.height&&(w0=this._activePages[g0],_0=M0);if(_0.y+x0.size.y>=w0.canvas.height||_0.height>x0.size.y+2){let g0=!1;if(w0.currentRow.y+w0.currentRow.height+x0.size.y>=w0.canvas.height){let M0;for(let R0 of this._activePages)if(R0.currentRow.y+R0.currentRow.height+x0.size.y<R0.canvas.height){M0=R0;break}if(M0)w0=M0;else{let R0=this._createNewPage();w0=R0,_0=R0.currentRow,_0.height=x0.size.y,g0=!0}}g0||(w0.currentRow.height>0&&w0.fixedRows.push(w0.currentRow),_0={x:0,y:w0.currentRow.y+w0.currentRow.height,height:x0.size.y},w0.fixedRows.push(_0),w0.currentRow={x:0,y:_0.y+_0.height,height:0})}if(_0.x+x0.size.x<=w0.canvas.width)break;_0===w0.currentRow?(_0.x=0,_0.y+=_0.height,_0.height=0):w0.fixedRows.splice(w0.fixedRows.indexOf(_0),1)}return x0.texturePage=this._pages.indexOf(w0),x0.texturePosition.x=_0.x,x0.texturePosition.y=_0.y,x0.texturePositionClipSpace.x=_0.x/w0.canvas.width,x0.texturePositionClipSpace.y=_0.y/w0.canvas.height,x0.sizeClipSpace.x/=w0.canvas.width,x0.sizeClipSpace.y/=w0.canvas.height,_0.height=Math.max(_0.height,x0.size.y),_0.x+=x0.size.x,w0.ctx.putImageData(u0,x0.texturePosition.x-this._workBoundingBox.left,x0.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,x0.size.x,x0.size.y),w0.addGlyph(x0),w0.version++,x0}_findGlyphBoundingBox(y,A,H,T,V,Z){A.top=0;let B=T?this._config.deviceCellHeight:this._tmpCanvas.height,N=T?this._config.deviceCellWidth:H,E=!1;for(let P=0;P<B;P++){for(let I=0;I<N;I++){let U=P*this._tmpCanvas.width*4+4*I+3;if(y.data[U]!==0){A.top=P,E=!0;break}}if(E)break}A.left=0,E=!1;for(let P=0;P<Z+N;P++){for(let I=0;I<B;I++){let U=I*this._tmpCanvas.width*4+4*P+3;if(y.data[U]!==0){A.left=P,E=!0;break}}if(E)break}A.right=N,E=!1;for(let P=Z+N-1;P>=Z;P--){for(let I=0;I<B;I++){let U=I*this._tmpCanvas.width*4+4*P+3;if(y.data[U]!==0){A.right=P,E=!0;break}}if(E)break}A.bottom=B,E=!1;for(let P=B-1;P>=0;P--){for(let I=0;I<N;I++){let U=P*this._tmpCanvas.width*4+4*I+3;if(y.data[U]!==0){A.bottom=P,E=!0;break}}if(E)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:A.right-A.left+1,y:A.bottom-A.top+1},sizeClipSpace:{x:A.right-A.left+1,y:A.bottom-A.top+1},offset:{x:-A.left+Z+(T||V?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-A.top+Z+(T||V?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}e.TextureAtlas=z;class M{constructor(y,A,H){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],H)for(let T of H)this._glyphs.push(...T.glyphs),this._usedPixels+=T._usedPixels;this.canvas=L(y,A,A),this.ctx=(0,f.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(y){this._glyphs.push(y),this._usedPixels+=y.size.x*y.size.y}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function _(S,y,A,H){let T=y.rgba>>>24,V=y.rgba>>>16&255,Z=y.rgba>>>8&255,B=A.rgba>>>24,N=A.rgba>>>16&255,E=A.rgba>>>8&255,P=Math.floor((Math.abs(T-B)+Math.abs(V-N)+Math.abs(Z-E))/12),I=!0;for(let U=0;U<S.data.length;U+=4)S.data[U]===T&&S.data[U+1]===V&&S.data[U+2]===Z||H&&Math.abs(S.data[U]-T)+Math.abs(S.data[U+1]-V)+Math.abs(S.data[U+2]-Z)<P?S.data[U+3]=0:I=!1;return I}function L(S,y,A){let H=S.createElement("canvas");return H.width=y,H.height=A,H}},577:function(b,e,a){var m=this&&this.__decorate||function(p,d,r,z){var M,_=arguments.length,L=_<3?d:z===null?z=Object.getOwnPropertyDescriptor(d,r):z;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(p,d,r,z);else for(var S=p.length-1;S>=0;S--)(M=p[S])&&(L=(_<3?M(L):_>3?M(d,r,L):M(d,r))||L);return _>3&&L&&Object.defineProperty(d,r,L),L},o=this&&this.__param||function(p,d){return function(r,z){d(r,z,p)}};Object.defineProperty(e,"__esModule",{value:!0}),e.CharacterJoinerService=e.JoinedCellData=void 0;let n=a(147),c=a(855),v=a(782),f=a(97);class i extends n.AttributeData{constructor(d,r,z){super(),this.content=0,this.combinedData="",this.fg=d.fg,this.bg=d.bg,this.combinedData=r,this._width=z}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(d){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}e.JoinedCellData=i;let t=class As{constructor(d){this._bufferService=d,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new v.CellData}register(d){let r={id:this._nextCharacterJoinerId++,handler:d};return this._characterJoiners.push(r),r.id}deregister(d){for(let r=0;r<this._characterJoiners.length;r++)if(this._characterJoiners[r].id===d)return this._characterJoiners.splice(r,1),!0;return!1}getJoinedCharacters(d){if(this._characterJoiners.length===0)return[];let r=this._bufferService.buffer.lines.get(d);if(!r||r.length===0)return[];let z=[],M=r.translateToString(!0),_=0,L=0,S=0,y=r.getFg(0),A=r.getBg(0);for(let H=0;H<r.getTrimmedLength();H++)if(r.loadCell(H,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==y||this._workCell.bg!==A){if(H-_>1){let T=this._getJoinedRanges(M,S,L,r,_);for(let V=0;V<T.length;V++)z.push(T[V])}_=H,S=L,y=this._workCell.fg,A=this._workCell.bg}L+=this._workCell.getChars().length||c.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-_>1){let H=this._getJoinedRanges(M,S,L,r,_);for(let T=0;T<H.length;T++)z.push(H[T])}return z}_getJoinedRanges(d,r,z,M,_){let L=d.substring(r,z),S=[];try{S=this._characterJoiners[0].handler(L)}catch(y){console.error(y)}for(let y=1;y<this._characterJoiners.length;y++)try{let A=this._characterJoiners[y].handler(L);for(let H=0;H<A.length;H++)As._mergeRanges(S,A[H])}catch(A){console.error(A)}return this._stringRangesToCellRanges(S,M,_),S}_stringRangesToCellRanges(d,r,z){let M=0,_=!1,L=0,S=d[M];if(S){for(let y=z;y<this._bufferService.cols;y++){let A=r.getWidth(y),H=r.getString(y).length||c.WHITESPACE_CELL_CHAR.length;if(A!==0){if(!_&&S[0]<=L&&(S[0]=y,_=!0),S[1]<=L){if(S[1]=y,S=d[++M],!S)break;S[0]<=L?(S[0]=y,_=!0):_=!1}L+=H}}S&&(S[1]=this._bufferService.cols)}}static _mergeRanges(d,r){let z=!1;for(let M=0;M<d.length;M++){let _=d[M];if(z){if(r[1]<=_[0])return d[M-1][1]=r[1],d;if(r[1]<=_[1])return d[M-1][1]=Math.max(r[1],_[1]),d.splice(M,1),d;d.splice(M,1),M--}else{if(r[1]<=_[0])return d.splice(M,0,r),d;if(r[1]<=_[1])return _[0]=Math.min(r[0],_[0]),d;r[0]<_[1]&&(_[0]=Math.min(r[0],_[0]),z=!0)}}return z?d[d.length-1][1]=r[1]:d.push(r),d}};t=m([o(0,f.IBufferService)],t),e.CharacterJoinerService=t},160:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.contrastRatio=e.toPaddedHex=e.rgba=e.rgb=e.css=e.color=e.channels=e.NULL_COLOR=void 0;let m=a(399),o=0,n=0,c=0,v=0;var f,i,t;function p(r){let z=r.toString(16);return z.length<2?"0"+z:z}function d(r,z){return r<z?(z+.05)/(r+.05):(r+.05)/(z+.05)}e.NULL_COLOR={css:"#00000000",rgba:0},function(r){r.toCss=function(z,M,_,L){return L!==void 0?`#${p(z)}${p(M)}${p(_)}${p(L)}`:`#${p(z)}${p(M)}${p(_)}`},r.toRgba=function(z,M,_,L=255){return(z<<24|M<<16|_<<8|L)>>>0}}(f=e.channels||(e.channels={})),function(r){function z(M,_){return v=Math.round(255*_),[o,n,c]=t.toChannels(M.rgba),{css:f.toCss(o,n,c,v),rgba:f.toRgba(o,n,c,v)}}r.blend=function(M,_){if(v=(255&_.rgba)/255,v===1)return{css:_.css,rgba:_.rgba};let L=_.rgba>>24&255,S=_.rgba>>16&255,y=_.rgba>>8&255,A=M.rgba>>24&255,H=M.rgba>>16&255,T=M.rgba>>8&255;return o=A+Math.round((L-A)*v),n=H+Math.round((S-H)*v),c=T+Math.round((y-T)*v),{css:f.toCss(o,n,c),rgba:f.toRgba(o,n,c)}},r.isOpaque=function(M){return(255&M.rgba)==255},r.ensureContrastRatio=function(M,_,L){let S=t.ensureContrastRatio(M.rgba,_.rgba,L);if(S)return t.toColor(S>>24&255,S>>16&255,S>>8&255)},r.opaque=function(M){let _=(255|M.rgba)>>>0;return[o,n,c]=t.toChannels(_),{css:f.toCss(o,n,c),rgba:_}},r.opacity=z,r.multiplyOpacity=function(M,_){return v=255&M.rgba,z(M,v*_/255)},r.toColorRGB=function(M){return[M.rgba>>24&255,M.rgba>>16&255,M.rgba>>8&255]}}(e.color||(e.color={})),function(r){let z,M;if(!m.isNode){let _=document.createElement("canvas");_.width=1,_.height=1;let L=_.getContext("2d",{willReadFrequently:!0});L&&(z=L,z.globalCompositeOperation="copy",M=z.createLinearGradient(0,0,1,1))}r.toColor=function(_){if(_.match(/#[\da-f]{3,8}/i))switch(_.length){case 4:return o=parseInt(_.slice(1,2).repeat(2),16),n=parseInt(_.slice(2,3).repeat(2),16),c=parseInt(_.slice(3,4).repeat(2),16),t.toColor(o,n,c);case 5:return o=parseInt(_.slice(1,2).repeat(2),16),n=parseInt(_.slice(2,3).repeat(2),16),c=parseInt(_.slice(3,4).repeat(2),16),v=parseInt(_.slice(4,5).repeat(2),16),t.toColor(o,n,c,v);case 7:return{css:_,rgba:(parseInt(_.slice(1),16)<<8|255)>>>0};case 9:return{css:_,rgba:parseInt(_.slice(1),16)>>>0}}let L=_.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(L)return o=parseInt(L[1]),n=parseInt(L[2]),c=parseInt(L[3]),v=Math.round(255*(L[5]===void 0?1:parseFloat(L[5]))),t.toColor(o,n,c,v);if(!z||!M)throw new Error("css.toColor: Unsupported css format");if(z.fillStyle=M,z.fillStyle=_,typeof z.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(z.fillRect(0,0,1,1),[o,n,c,v]=z.getImageData(0,0,1,1).data,v!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:f.toRgba(o,n,c,v),css:_}}}(e.css||(e.css={})),function(r){function z(M,_,L){let S=M/255,y=_/255,A=L/255;return .2126*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.7152*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.0722*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))}r.relativeLuminance=function(M){return z(M>>16&255,M>>8&255,255&M)},r.relativeLuminance2=z}(i=e.rgb||(e.rgb={})),function(r){function z(_,L,S){let y=_>>24&255,A=_>>16&255,H=_>>8&255,T=L>>24&255,V=L>>16&255,Z=L>>8&255,B=d(i.relativeLuminance2(T,V,Z),i.relativeLuminance2(y,A,H));for(;B<S&&(T>0||V>0||Z>0);)T-=Math.max(0,Math.ceil(.1*T)),V-=Math.max(0,Math.ceil(.1*V)),Z-=Math.max(0,Math.ceil(.1*Z)),B=d(i.relativeLuminance2(T,V,Z),i.relativeLuminance2(y,A,H));return(T<<24|V<<16|Z<<8|255)>>>0}function M(_,L,S){let y=_>>24&255,A=_>>16&255,H=_>>8&255,T=L>>24&255,V=L>>16&255,Z=L>>8&255,B=d(i.relativeLuminance2(T,V,Z),i.relativeLuminance2(y,A,H));for(;B<S&&(T<255||V<255||Z<255);)T=Math.min(255,T+Math.ceil(.1*(255-T))),V=Math.min(255,V+Math.ceil(.1*(255-V))),Z=Math.min(255,Z+Math.ceil(.1*(255-Z))),B=d(i.relativeLuminance2(T,V,Z),i.relativeLuminance2(y,A,H));return(T<<24|V<<16|Z<<8|255)>>>0}r.ensureContrastRatio=function(_,L,S){let y=i.relativeLuminance(_>>8),A=i.relativeLuminance(L>>8);if(d(y,A)<S){if(A<y){let V=z(_,L,S),Z=d(y,i.relativeLuminance(V>>8));if(Z<S){let B=M(_,L,S);return Z>d(y,i.relativeLuminance(B>>8))?V:B}return V}let H=M(_,L,S),T=d(y,i.relativeLuminance(H>>8));if(T<S){let V=z(_,L,S);return T>d(y,i.relativeLuminance(V>>8))?H:V}return H}},r.reduceLuminance=z,r.increaseLuminance=M,r.toChannels=function(_){return[_>>24&255,_>>16&255,_>>8&255,255&_]},r.toColor=function(_,L,S,y){return{css:f.toCss(_,L,S,y),rgba:f.toRgba(_,L,S,y)}}}(t=e.rgba||(e.rgba={})),e.toPaddedHex=p,e.contrastRatio=d},345:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forwardEvent=e.EventEmitter=void 0,e.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let m=0;m<this._listeners.length;m++)if(this._listeners[m]===a)return void this._listeners.splice(m,1)}}})),this._event}fire(a,m){let o=[];for(let n=0;n<this._listeners.length;n++)o.push(this._listeners[n]);for(let n=0;n<o.length;n++)o[n].call(void 0,a,m)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},e.forwardEvent=function(a,m){return a(o=>m.fire(o))}},859:(b,e)=>{function a(m){for(let o of m)o.dispose();m.length=0}Object.defineProperty(e,"__esModule",{value:!0}),e.getDisposeArrayDisposable=e.disposeArray=e.toDisposable=e.Disposable=void 0,e.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let m of this._disposables)m.dispose();this._disposables.length=0}register(m){return this._disposables.push(m),m}unregister(m){let o=this._disposables.indexOf(m);o!==-1&&this._disposables.splice(o,1)}},e.toDisposable=function(m){return{dispose:m}},e.disposeArray=a,e.getDisposeArrayDisposable=function(m){return{dispose:()=>a(m)}}},485:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FourKeyMap=e.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(o,n,c){this._data[o]||(this._data[o]={}),this._data[o][n]=c}get(o,n){return this._data[o]?this._data[o][n]:void 0}clear(){this._data={}}}e.TwoKeyMap=a,e.FourKeyMap=class{constructor(){this._data=new a}set(m,o,n,c,v){this._data.get(m,o)||this._data.set(m,o,new a),this._data.get(m,o).set(n,c,v)}get(m,o,n,c){var v;return(v=this._data.get(m,o))===null||v===void 0?void 0:v.get(n,c)}clear(){this._data.clear()}}},399:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isChromeOS=e.isLinux=e.isWindows=e.isIphone=e.isIpad=e.isMac=e.getSafariVersion=e.isSafari=e.isLegacyEdge=e.isFirefox=e.isNode=void 0,e.isNode=typeof navigator=="undefined";let a=e.isNode?"node":navigator.userAgent,m=e.isNode?"node":navigator.platform;e.isFirefox=a.includes("Firefox"),e.isLegacyEdge=a.includes("Edge"),e.isSafari=/^((?!chrome|android).)*safari/i.test(a),e.getSafariVersion=function(){if(!e.isSafari)return 0;let o=a.match(/Version\/(\d+)/);return o===null||o.length<2?0:parseInt(o[1])},e.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(m),e.isIpad=m==="iPad",e.isIphone=m==="iPhone",e.isWindows=["Windows","Win16","Win32","WinCE"].includes(m),e.isLinux=m.indexOf("Linux")>=0,e.isChromeOS=/\bCrOS\b/.test(a)},385:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DebouncedIdleTask=e.IdleTaskQueue=e.PriorityTaskQueue=void 0;let m=a(399);class o{constructor(){this._tasks=[],this._i=0}enqueue(v){this._tasks.push(v),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(v){this._idleCallback=void 0;let f=0,i=0,t=v.timeRemaining(),p=0;for(;this._i<this._tasks.length;){if(f=Date.now(),this._tasks[this._i]()||this._i++,f=Math.max(1,Date.now()-f),i=Math.max(f,i),p=v.timeRemaining(),1.5*i>p)return t-f<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(t-f))}ms`),void this._start();t=p}this.clear()}}class n extends o{_requestCallback(v){return setTimeout(()=>v(this._createDeadline(16)))}_cancelCallback(v){clearTimeout(v)}_createDeadline(v){let f=Date.now()+v;return{timeRemaining:()=>Math.max(0,f-Date.now())}}}e.PriorityTaskQueue=n,e.IdleTaskQueue=!m.isNode&&"requestIdleCallback"in window?class extends o{_requestCallback(c){return requestIdleCallback(c)}_cancelCallback(c){cancelIdleCallback(c)}}:n,e.DebouncedIdleTask=class{constructor(){this._queue=new e.IdleTaskQueue}set(c){this._queue.clear(),this._queue.enqueue(c)}flush(){this._queue.flush()}}},147:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExtendedAttrs=e.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new m}static toColorRGB(n){return[n>>>16&255,n>>>8&255,255&n]}static fromColorRGB(n){return(255&n[0])<<16|(255&n[1])<<8|255&n[2]}clone(){let n=new a;return n.fg=this.fg,n.bg=this.bg,n.extended=this.extended.clone(),n}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}e.AttributeData=a;class m{constructor(n=0,c=0){this._ext=0,this._urlId=0,this._ext=n,this._urlId=c}get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(n){this._ext=n}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(n){this._ext&=-469762049,this._ext|=n<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(n){this._ext&=-67108864,this._ext|=67108863&n}get urlId(){return this._urlId}set urlId(n){this._urlId=n}clone(){return new m(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}e.ExtendedAttrs=m},782:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CellData=void 0;let m=a(133),o=a(855),n=a(147);class c extends n.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new n.ExtendedAttrs,this.combinedData=""}static fromCharData(f){let i=new c;return i.setFromCharData(f),i}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,m.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(f){this.fg=f[o.CHAR_DATA_ATTR_INDEX],this.bg=0;let i=!1;if(f[o.CHAR_DATA_CHAR_INDEX].length>2)i=!0;else if(f[o.CHAR_DATA_CHAR_INDEX].length===2){let t=f[o.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=t&&t<=56319){let p=f[o.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=p&&p<=57343?this.content=1024*(t-55296)+p-56320+65536|f[o.CHAR_DATA_WIDTH_INDEX]<<22:i=!0}else i=!0}else this.content=f[o.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|f[o.CHAR_DATA_WIDTH_INDEX]<<22;i&&(this.combinedData=f[o.CHAR_DATA_CHAR_INDEX],this.content=2097152|f[o.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}e.CellData=c},855:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WHITESPACE_CELL_CODE=e.WHITESPACE_CELL_WIDTH=e.WHITESPACE_CELL_CHAR=e.NULL_CELL_CODE=e.NULL_CELL_WIDTH=e.NULL_CELL_CHAR=e.CHAR_DATA_CODE_INDEX=e.CHAR_DATA_WIDTH_INDEX=e.CHAR_DATA_CHAR_INDEX=e.CHAR_DATA_ATTR_INDEX=e.DEFAULT_EXT=e.DEFAULT_ATTR=e.DEFAULT_COLOR=void 0,e.DEFAULT_COLOR=0,e.DEFAULT_ATTR=256|e.DEFAULT_COLOR<<9,e.DEFAULT_EXT=0,e.CHAR_DATA_ATTR_INDEX=0,e.CHAR_DATA_CHAR_INDEX=1,e.CHAR_DATA_WIDTH_INDEX=2,e.CHAR_DATA_CODE_INDEX=3,e.NULL_CELL_CHAR="",e.NULL_CELL_WIDTH=1,e.NULL_CELL_CODE=0,e.WHITESPACE_CELL_CHAR=" ",e.WHITESPACE_CELL_WIDTH=1,e.WHITESPACE_CELL_CODE=32},133:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Utf8ToUtf32=e.StringToUtf32=e.utf32ToString=e.stringFromCodePoint=void 0,e.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},e.utf32ToString=function(a,m=0,o=a.length){let n="";for(let c=m;c<o;++c){let v=a[c];v>65535?(v-=65536,n+=String.fromCharCode(55296+(v>>10))+String.fromCharCode(v%1024+56320)):n+=String.fromCharCode(v)}return n},e.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,m){let o=a.length;if(!o)return 0;let n=0,c=0;if(this._interim){let v=a.charCodeAt(c++);56320<=v&&v<=57343?m[n++]=1024*(this._interim-55296)+v-56320+65536:(m[n++]=this._interim,m[n++]=v),this._interim=0}for(let v=c;v<o;++v){let f=a.charCodeAt(v);if(55296<=f&&f<=56319){if(++v>=o)return this._interim=f,n;let i=a.charCodeAt(v);56320<=i&&i<=57343?m[n++]=1024*(f-55296)+i-56320+65536:(m[n++]=f,m[n++]=i)}else f!==65279&&(m[n++]=f)}return n}},e.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,m){let o=a.length;if(!o)return 0;let n,c,v,f,i=0,t=0,p=0;if(this.interim[0]){let z=!1,M=this.interim[0];M&=(224&M)==192?31:(240&M)==224?15:7;let _,L=0;for(;(_=63&this.interim[++L])&&L<4;)M<<=6,M|=_;let S=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,y=S-L;for(;p<y;){if(p>=o)return 0;if(_=a[p++],(192&_)!=128){p--,z=!0;break}this.interim[L++]=_,M<<=6,M|=63&_}z||(S===2?M<128?p--:m[i++]=M:S===3?M<2048||M>=55296&&M<=57343||M===65279||(m[i++]=M):M<65536||M>1114111||(m[i++]=M)),this.interim.fill(0)}let d=o-4,r=p;for(;r<o;){for(;!(!(r<d)||128&(n=a[r])||128&(c=a[r+1])||128&(v=a[r+2])||128&(f=a[r+3]));)m[i++]=n,m[i++]=c,m[i++]=v,m[i++]=f,r+=4;if(n=a[r++],n<128)m[i++]=n;else if((224&n)==192){if(r>=o)return this.interim[0]=n,i;if(c=a[r++],(192&c)!=128){r--;continue}if(t=(31&n)<<6|63&c,t<128){r--;continue}m[i++]=t}else if((240&n)==224){if(r>=o)return this.interim[0]=n,i;if(c=a[r++],(192&c)!=128){r--;continue}if(r>=o)return this.interim[0]=n,this.interim[1]=c,i;if(v=a[r++],(192&v)!=128){r--;continue}if(t=(15&n)<<12|(63&c)<<6|63&v,t<2048||t>=55296&&t<=57343||t===65279)continue;m[i++]=t}else if((248&n)==240){if(r>=o)return this.interim[0]=n,i;if(c=a[r++],(192&c)!=128){r--;continue}if(r>=o)return this.interim[0]=n,this.interim[1]=c,i;if(v=a[r++],(192&v)!=128){r--;continue}if(r>=o)return this.interim[0]=n,this.interim[1]=c,this.interim[2]=v,i;if(f=a[r++],(192&f)!=128){r--;continue}if(t=(7&n)<<18|(63&c)<<12|(63&v)<<6|63&f,t<65536||t>1114111)continue;m[i++]=t}}return i}}},726:(b,e)=>{function a(m,o,n){o.di$target===o?o.di$dependencies.push({id:m,index:n}):(o.di$dependencies=[{id:m,index:n}],o.di$target=o)}Object.defineProperty(e,"__esModule",{value:!0}),e.createDecorator=e.getServiceDependencies=e.serviceRegistry=void 0,e.serviceRegistry=new Map,e.getServiceDependencies=function(m){return m.di$dependencies||[]},e.createDecorator=function(m){if(e.serviceRegistry.has(m))return e.serviceRegistry.get(m);let o=function(n,c,v){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");a(o,n,v)};return o.toString=()=>m,e.serviceRegistry.set(m,o),o}},97:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IDecorationService=e.IUnicodeService=e.IOscLinkService=e.IOptionsService=e.ILogService=e.LogLevelEnum=e.IInstantiationService=e.ICharsetService=e.ICoreService=e.ICoreMouseService=e.IBufferService=void 0;let m=a(726);var o;e.IBufferService=(0,m.createDecorator)("BufferService"),e.ICoreMouseService=(0,m.createDecorator)("CoreMouseService"),e.ICoreService=(0,m.createDecorator)("CoreService"),e.ICharsetService=(0,m.createDecorator)("CharsetService"),e.IInstantiationService=(0,m.createDecorator)("InstantiationService"),(o=e.LogLevelEnum||(e.LogLevelEnum={}))[o.DEBUG=0]="DEBUG",o[o.INFO=1]="INFO",o[o.WARN=2]="WARN",o[o.ERROR=3]="ERROR",o[o.OFF=4]="OFF",e.ILogService=(0,m.createDecorator)("LogService"),e.IOptionsService=(0,m.createDecorator)("OptionsService"),e.IOscLinkService=(0,m.createDecorator)("OscLinkService"),e.IUnicodeService=(0,m.createDecorator)("UnicodeService"),e.IDecorationService=(0,m.createDecorator)("DecorationService")}},u={};function g(b){var e=u[b];if(e!==void 0)return e.exports;var a=u[b]={exports:{}};return l[b].call(a.exports,a,a.exports,g),a.exports}var w={};return(()=>{var b=w;Object.defineProperty(b,"__esModule",{value:!0}),b.CanvasAddon=void 0;let e=g(949),a=g(345),m=g(859);class o extends m.Disposable{constructor(){super(...arguments),this._onChangeTextureAtlas=this.register(new a.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new a.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event}get textureAtlas(){var c;return(c=this._renderer)===null||c===void 0?void 0:c.textureAtlas}activate(c){let v=c._core;if(!c.element)return void this.register(v.onWillOpen(()=>this.activate(c)));this._terminal=c;let f=v.coreService,i=v.optionsService,t=v.screenElement,p=v.linkifier2,d=v,r=d._bufferService,z=d._renderService,M=d._characterJoinerService,_=d._charSizeService,L=d._coreBrowserService,S=d._decorationService,y=d._themeService;this._renderer=new e.CanvasRenderer(c,t,p,r,_,i,M,f,L,S,y),this.register((0,a.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,a.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),z.setRenderer(this._renderer),z.handleResize(r.cols,r.rows),this.register((0,m.toDisposable)(()=>{var A;z.setRenderer(this._terminal._core._createRenderer()),z.handleResize(c.cols,c.rows),(A=this._renderer)===null||A===void 0||A.dispose(),this._renderer=void 0}))}}b.CanvasAddon=o})(),w})()})});var Ns=W0((a0,T8)=>{/*! For license information please see xterm-addon-ligatures.js.LICENSE.txt */(function(l,u){typeof a0=="object"&&typeof T8=="object"?T8.exports=u(require("fs"),require("path"),require("util"),require("stream")):typeof define=="function"&&define.amd?define(["fs","path","util","stream"],u):typeof a0=="object"?a0.LigaturesAddon=u(require("fs"),require("path"),require("util"),require("stream")):l.LigaturesAddon=u(l.fs,l.path,l.util,l.stream)})(self,function(l,u,g,w){return(()=>{var b={185:(o,n)=>{"use strict";function c(f){let i={};for(let[t,p]of Object.entries(f.individual))i[t]=v(p);for(let{range:t,entry:p}of f.range){let d=v(p);for(let r=t[0];r<t[1];r++)i[r]=d}return i}function v(f){let i={};return f.forward&&(i.forward=c(f.forward)),f.reverse&&(i.reverse=c(f.reverse)),f.lookup&&(i.lookup=f.lookup),i}Object.defineProperty(n,"__esModule",{value:!0}),n.default=c},98:(o,n,c)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});let v=c(602),f=c(593),i=c(233),t=c(694),p=c(532),d=c(595),r=c(223),z=c(439),M=c(349),_=c(185);class L{constructor(A,H){this._lookupTrees=[],this._glyphLookups={},this._font=A,H.cacheSize>0&&(this._cache=new f({max:H.cacheSize,length:(B,N)=>N.length}));let T=(this._font.tables.gsub&&this._font.tables.gsub.features.filter(B=>B.tag==="calt")||[]).reduce((B,N)=>[...B,...N.feature.lookupListIndexes],[]),V=this._font.tables.gsub&&this._font.tables.gsub.lookups||[],Z=V.filter((B,N)=>T.some(E=>E===N));for(let[B,N]of Z.entries()){let E=[];switch(N.lookupType){case 6:for(let[I,U]of N.subtables.entries())switch(U.substFormat){case 1:E.push(d.default(U,V,I));break;case 2:E.push(r.default(U,V,I));break;case 3:E.push(z.default(U,V,I))}break;case 8:for(let[I,U]of N.subtables.entries())E.push(M.default(U,I))}let P=_.default(i.default(E));this._lookupTrees.push({tree:P,processForward:N.lookupType!==8});for(let I of Object.keys(P))this._glyphLookups[I]||(this._glyphLookups[I]=[]),this._glyphLookups[I].push(B)}}findLigatures(A){let H=this._cache&&this._cache.get(A);if(H&&!Array.isArray(H))return H;let T=[];for(let B of A)T.push(this._font.charToGlyphIndex(B));if(this._lookupTrees.length===0)return{inputGlyphs:T,outputGlyphs:T,contextRanges:[]};let V=this._findInternal(T.slice()),Z={inputGlyphs:T,outputGlyphs:V.sequence,contextRanges:V.ranges};return this._cache&&this._cache.set(A,Z),Z}findLigatureRanges(A){if(this._lookupTrees.length===0)return[];let H=this._cache&&this._cache.get(A);if(H)return Array.isArray(H)?H:H.contextRanges;let T=[];for(let Z of A)T.push(this._font.charToGlyphIndex(Z));let V=this._findInternal(T);return this._cache&&this._cache.set(A,V.ranges),V.ranges}_findInternal(A){let H=[],T=this._getNextLookup(A,0);for(;T.index!==null;){let V=this._lookupTrees[T.index];if(V.processForward){let Z=T.last;for(let B=T.first;B<Z;B++){let N=t.default(V.tree,A,B,B);if(N){for(let E=0;E<N.substitutions.length;E++){let P=N.substitutions[E];P!==null&&(A[B+E]=P)}p.default(H,N.contextRange[0]+B,N.contextRange[1]+B),B+N.length>=Z&&(Z=B+N.length+1),B+=N.length-1}}}else for(let Z=T.last-1;Z>=T.first;Z--){let B=t.default(V.tree,A,Z,Z);if(B){for(let N=0;N<B.substitutions.length;N++){let E=B.substitutions[N];E!==null&&(A[Z+N]=E)}p.default(H,B.contextRange[0]+Z,B.contextRange[1]+Z),Z-=B.length-1}}T=this._getNextLookup(A,T.index+1)}return{sequence:A,ranges:H}}_getNextLookup(A,H){let T={index:null,first:1/0,last:-1};for(let V=0;V<A.length;V++){let Z=this._glyphLookups[A[V]];if(Z)for(let B=0;B<Z.length;B++){let N=Z[B];if(N>=H){(T.index===null||N<=T.index)&&(T.index=N,T.first>V&&(T.first=V),T.last=V+1);break}}}return T}}async function S(y,A){let H=await Promise.resolve().then(()=>c(269)).then(T=>T.promisify(v.load)(y));return new L(H,Object.assign({cacheSize:0},A))}n.load=async function(y,A){let[H]=await Promise.resolve().then(()=>c(781)).then(T=>T.listVariants(y));if(!H)throw new Error(`Font ${y} not found`);return S(H.path,A)},n.loadFile=S,n.loadBuffer=function(y,A){let H=v.parse(y);return new L(H,Object.assign({cacheSize:0},A))}},233:(o,n)=>{"use strict";function c(r,z){for(let[M,_]of Object.entries(z.individual))if(r.individual[M])v(r.individual[M],_);else{let L=!1;for(let[S,{range:y,entry:A}]of r.range.entries()){let H=i(Number(M),y);if(H.both!==null){L=!0,r.individual[M]=_,v(r.individual[M],p(A)),r.range.splice(S,1);for(let T of H.second)Array.isArray(T)?r.range.push({range:T,entry:p(A)}):r.individual[T]=p(A)}}L||(r.individual[M]=_)}for(let{range:M,entry:_}of z.range){let L=[M];for(let S=0;S<r.range.length;S++){let{range:y,entry:A}=r.range[S];for(let[H,T]of L.entries()){if(!Array.isArray(T)){let V=i(T,y);if(V.both===null)continue;r.individual[T]=p(_),v(r.individual[T],p(A)),r.range.splice(S,1),S--;for(let Z of V.second)Array.isArray(Z)?r.range.push({range:Z,entry:p(A)}):r.individual[Z]=p(A);L.splice(H,1,...V.first);break}{let V=f(T,y);if(V.both===null)continue;r.range.splice(S,1),S--;let Z=p(A);Array.isArray(V.both)?r.range.push({range:V.both,entry:Z}):r.individual[V.both]=Z,v(Z,p(_));for(let B of V.second)Array.isArray(B)?r.range.push({range:B,entry:p(A)}):r.individual[B]=p(A);L=V.first}}}for(let S of Object.keys(r.individual))for(let[y,A]of L.entries()){if(Array.isArray(A)){let H=i(Number(S),A);if(H.both===null)continue;v(r.individual[S],p(_)),L.splice(y,1,...H.second);break}if(Number(S)===A){v(r.individual[S],p(_));break}}for(let S of L)Array.isArray(S)?r.range.push({range:S,entry:p(_)}):r.individual[S]=p(_)}}function v(r,z){z.lookup&&(!r.lookup||r.lookup.index>z.lookup.index||r.lookup.index===z.lookup.index&&r.lookup.subIndex>z.lookup.subIndex)&&(r.lookup=z.lookup),z.forward&&(r.forward?c(r.forward,z.forward):r.forward=z.forward),z.reverse&&(r.reverse?c(r.reverse,z.reverse):r.reverse=z.reverse)}function f(r,z){let M={first:[],second:[],both:null};if(r[0]<z[1]&&z[0]<r[1]){let _=Math.max(r[0],z[0]),L=Math.min(r[1],z[1]);M.both=t(_,L)}if(r[0]<z[0]){let _=r[0],L=Math.min(z[0],r[1]);M.first.push(t(_,L))}else if(z[0]<r[0]){let _=z[0],L=Math.min(z[1],r[0]);M.second.push(t(_,L))}if(r[1]>z[1]){let _=Math.max(r[0],z[1]),L=r[1];M.first.push(t(_,L))}else if(z[1]>r[1]){let _=Math.max(r[1],z[0]),L=z[1];M.second.push(t(_,L))}return M}function i(r,z){if(r<z[0]||r>z[1])return{first:[r],second:[z],both:null};let M={first:[],second:[],both:r};return z[0]<r&&M.second.push(t(z[0],r)),z[1]>r&&M.second.push(t(r+1,z[1])),M}function t(r,z){return z-r==1?r:[r,z]}function p(r){let z={};return r.forward&&(z.forward=d(r.forward)),r.reverse&&(z.reverse=d(r.reverse)),r.lookup&&(z.lookup={contextRange:r.lookup.contextRange.slice(),index:r.lookup.index,length:r.lookup.length,subIndex:r.lookup.subIndex,substitutions:r.lookup.substitutions.slice()}),z}function d(r){let z={};for(let[M,_]of Object.entries(r.individual))z[M]=p(_);return{individual:z,range:r.range.map(({range:M,entry:_})=>({range:M.slice(),entry:p(_)}))}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(r){let z={individual:{},range:[]};for(let M of r)c(z,M);return z}},532:(o,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(c,v,f){let i=!1;for(let t=0;t<c.length;t++){let p=c[t];if(i){if(f<=p[0])return c[t-1][1]=f,c;if(f<=p[1])return c[t-1][1]=Math.max(f,p[1]),c.splice(t,1),i=!1,c;c.splice(t,1),t--}else{if(f<=p[0])return c.splice(t,0,[v,f]),c;if(f<=p[1])return p[0]=Math.min(v,p[0]),c;if(!(v<p[1]))continue;p[0]=Math.min(v,p[0]),i=!0}}return i?c[c.length-1][1]=f:c.push([v,f]),c}},595:(o,n,c)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});let v=c(283),f=c(267);n.default=function(i,t,p){let d={individual:{},range:[]},r=v.listGlyphsByIndex(i.coverage);for(let{glyphId:z,index:M}of r){let _=i.chainRuleSets[M];if(_)for(let[L,S]of _.entries()){let y=f.getInputTree(d,S.lookupRecords,t,0,z).map(({entry:A,substitution:H})=>({entry:A,substitutions:[H]}));for(let[A,H]of S.input.entries())y=f.processInputPosition([H],A+1,y,S.lookupRecords,t);for(let A of S.lookahead)y=f.processLookaheadPosition([A],y);for(let A of S.backtrack)y=f.processBacktrackPosition([A],y);for(let{entry:A,substitutions:H}of y)A.lookup={substitutions:H,length:S.input.length+1,index:p,subIndex:L,contextRange:[-1*S.backtrack.length,1+S.input.length+S.lookahead.length]}}}return d}},223:(o,n,c)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});let v=c(233),f=c(283),i=c(91),t=c(267);n.default=function(p,d,r){let z=[],M=f.listGlyphsByIndex(p.coverage);for(let{glyphId:_}of M){let L=i.default(p.inputClassDef,_);for(let[S,y]of L.entries()){if(y===null)continue;let A=p.chainClassSet[y];if(A)for(let[H,T]of A.entries()){let V={individual:{},range:[]},Z=t.getInputTree(V,T.lookupRecords,d,0,S).map(({entry:B,substitution:N})=>({entry:B,substitutions:[N]}));for(let[B,N]of T.input.entries())Z=t.processInputPosition(i.listClassGlyphs(p.inputClassDef,N),B+1,Z,T.lookupRecords,d);for(let B of T.lookahead)Z=t.processLookaheadPosition(i.listClassGlyphs(p.lookaheadClassDef,B),Z);for(let B of T.backtrack)Z=t.processBacktrackPosition(i.listClassGlyphs(p.backtrackClassDef,B),Z);for(let{entry:B,substitutions:N}of Z)B.lookup={substitutions:N,index:r,subIndex:H,length:T.input.length+1,contextRange:[-1*T.backtrack.length,1+T.input.length+T.lookahead.length]};z.push(V)}}}return v.default(z)}},439:(o,n,c)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});let v=c(283),f=c(267);n.default=function(i,t,p){let d={individual:{},range:[]},r=v.listGlyphsByIndex(i.inputCoverage[0]);for(let{glyphId:z}of r){let M=f.getInputTree(d,i.lookupRecords,t,0,z).map(({entry:_,substitution:L})=>({entry:_,substitutions:[L]}));for(let[_,L]of i.inputCoverage.slice(1).entries())M=f.processInputPosition(v.listGlyphsByIndex(L).map(S=>S.glyphId),_+1,M,i.lookupRecords,t);for(let _ of i.lookaheadCoverage)M=f.processLookaheadPosition(v.listGlyphsByIndex(_).map(L=>L.glyphId),M);for(let _ of i.backtrackCoverage)M=f.processBacktrackPosition(v.listGlyphsByIndex(_).map(L=>L.glyphId),M);for(let{entry:_,substitutions:L}of M)_.lookup={substitutions:L,index:p,subIndex:0,length:i.inputCoverage.length,contextRange:[-1*i.backtrackCoverage.length,i.inputCoverage.length+i.lookaheadCoverage.length]}}return d}},349:(o,n,c)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});let v=c(283),f=c(267);n.default=function(i,t){let p={individual:{},range:[]},d=v.listGlyphsByIndex(i.coverage);for(let{glyphId:r,index:z}of d){let M={};Array.isArray(r)?p.range.push({entry:M,range:r}):p.individual[r]=M;let _=[{entry:M,substitutions:[i.substitutes[z]]}];for(let L of i.lookaheadCoverage)_=f.processLookaheadPosition(v.listGlyphsByIndex(L).map(S=>S.glyphId),_);for(let L of i.backtrackCoverage)_=f.processBacktrackPosition(v.listGlyphsByIndex(L).map(S=>S.glyphId),_);for(let{entry:L,substitutions:S}of _)L.lookup={substitutions:S,index:t,subIndex:0,length:1,contextRange:[-1*i.backtrackCoverage.length,1+i.lookaheadCoverage.length]}}return p}},91:(o,n)=>{"use strict";function c(v,f){for(let i of v.ranges)if(i.start<=f&&i.end>=f)return i.classId;return null}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(v,f){return v.format===2?Array.isArray(f)?function(i,t){let p=t[0],d=c(i,p),r=t[0]+1,z=new Map;for(;r<t[1];)c(i,r)!==d&&(r-p<=1?z.set(p,d):z.set([p,r],d)),r++;return r-p<=1?z.set(p,d):z.set([p,r],d),z}(v,f):new Map([[f,c(v,f)]]):new Map([[f,null]])},n.listClassGlyphs=function(v,f){if(v.format===2){let i=[];for(let t of v.ranges)t.classId===f&&(t.end===t.start?i.push(t.start):i.push([t.start,t.end+1]));return i}return[]}},283:(o,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(c,v){switch(c.format){case 1:let f=c.glyphs.indexOf(v);return f!==-1?f:null;case 2:let i=c.ranges.find(t=>t.start<=v&&t.end>=v);return i?i.index:null}},n.listGlyphsByIndex=function(c){switch(c.format){case 1:return c.glyphs.map((f,i)=>({glyphId:f,index:i}));case 2:let v=[];for(let[f,i]of c.ranges.entries())i.end===i.start?v.push({glyphId:i.start,index:f}):v.push({glyphId:[i.start,i.end+1],index:f});return v}}},267:(o,n,c)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});let v=c(603);function f(t,p,d,r,z){let M=[];if(Array.isArray(z)){let _=function(L,S,y,A){for(let H of L.filter(T=>T.sequenceIndex===y))for(let T of S[H.lookupListIndex].subtables){let V=v.getRangeSubstitutionGlyphs(T,A);if(!Array.from(V.values()).every(Z=>Z!==null))return V}return new Map([[A,null]])}(p,d,r,z);for(let[L,S]of _){let y={};Array.isArray(L)?t.range.push({range:L,entry:y}):t.individual[L]={},M.push({entry:y,substitution:S})}}else t.individual[z]={},M.push({entry:t.individual[z],substitution:i(p,d,r,z)});return M}function i(t,p,d,r){for(let z of t.filter(M=>M.sequenceIndex===d))for(let M of p[z.lookupListIndex].subtables){let _=v.getIndividualSubstitutionGlyph(M,r);if(_!==null)return _}return null}n.processInputPosition=function(t,p,d,r,z){let M=[];for(let _ of d){_.entry.forward={individual:{},range:[]};for(let L of t)M.push(...f(_.entry.forward,r,z,p,L).map(({entry:S,substitution:y})=>({entry:S,substitutions:[..._.substitutions,y]})))}return M},n.processLookaheadPosition=function(t,p){let d=[];for(let r of p)for(let z of t){let M={};r.entry.forward||(r.entry.forward={individual:{},range:[]}),d.push({entry:M,substitutions:r.substitutions}),Array.isArray(z)?r.entry.forward.range.push({entry:M,range:z}):r.entry.forward.individual[z]=M}return d},n.processBacktrackPosition=function(t,p){let d=[];for(let r of p)for(let z of t){let M={};r.entry.reverse||(r.entry.reverse={individual:{},range:[]}),d.push({entry:M,substitutions:r.substitutions}),Array.isArray(z)?r.entry.reverse.range.push({entry:M,range:z}):r.entry.reverse.individual[z]=M}return d},n.getInputTree=f},603:(o,n,c)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});let v=c(283);function f(i,t){let p=v.default(i.coverage,t);if(p===null)return null;switch(i.substFormat){case 1:return(t+i.deltaGlyphId)%65536;case 2:return i.substitute[p]!=null?i.substitute[p]:null}}n.getRangeSubstitutionGlyphs=function(i,t){let p=t[0],d=f(i,p),r=t[0]+1,z=new Map;for(;r<t[1];)f(i,r)!==d&&(r-p<=1?z.set(p,d):z.set([p,r],d)),r++;return r-p<=1?z.set(p,d):z.set([p,r],d),z},n.getIndividualSubstitutionGlyph=f},694:(o,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function c(v,f,i,t){let p=v[f[t]];if(!p)return;let d=p.lookup;if(p.reverse){let z=function(M,_,L){let S=M[_[--L]],y=S&&S.lookup;for(;S&&((!y&&S.lookup||S.lookup&&y&&y.index>S.lookup.index)&&(y=S.lookup),!(--L<0)&&S.reverse);)S=S.reverse[_[L]];return y}(p.reverse,f,i);(!d&&z||z&&d&&(d.index>z.index||d.index===z.index&&d.subIndex>z.subIndex))&&(d=z)}if(++t>=f.length||!p.forward)return d;let r=c(p.forward,f,i,t);return(!d&&r||r&&d&&(d.index>r.index||d.index===r.index&&d.subIndex>r.subIndex))&&(d=r),d}},814:(o,n,c)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});let v=c(82);var f,i;(function(r){r.Serif="serif",r.SansSerif="sansSerif",r.Monospace="monospace",r.Cursive="cursive",r.Unknown="unknown"})(f=n.Type||(n.Type={})),function(r){r.Regular="regular",r.Italic="italic",r.Oblique="oblique",r.Bold="bold",r.BoldItalic="boldItalic",r.BoldOblique="boldOblique",r.Other="other"}(i=n.Style||(n.Style={}));let t=[" Regular"," Bold"," Bold Italic"," Bold Oblique"," Italic"," Oblique"];function p(r){if(!r.os2&&!r.head)return i.Other;let z=r.os2?32&r.os2.fsSelection:1&r.head.macStyle,M=r.os2?1&r.os2.fsSelection:r.post?r.post.italicAngle<0:2&r.head.macStyle,_=r.os2?512&r.os2.fsSelection:r.post?r.post.italicAngle>0:0,L=r.os2?320&r.os2.fsSelection:1;return z?_?i.BoldOblique:M?i.BoldItalic:i.Bold:_?i.Oblique:M?i.Italic:L?i.Regular:i.Other}n.name=function(r,z){let M=r.names.preferredFamily&&r.names.preferredFamily[z]?r.names.preferredFamily[z]:r.names.fontFamily[z];if(v.platform()==="win32"){let _=`${M} ${r.names.preferredSubfamily&&r.names.preferredSubfamily[z]?r.names.preferredSubfamily[z]:r.names.fontSubfamily[z]}`,L=-1;for(let S of t){let y=_.lastIndexOf(S);if(y!==-1){L=y;break}}return L!==-1?_.substring(0,L):_}return M},n.type=function(r){if(r.os2)switch(r.os2.panose[0]){case 2:return r.os2.panose[3]===9?f.Monospace:r.os2.panose[1]>=11&&r.os2.panose[1]<=15||r.os2.panose[1]===0?f.SansSerif:f.Serif;case 3:return f.Cursive}else if(r.post&&r.post.isFixedPitch)return f.Monospace;return f.Unknown},n.style=p;let d=[i.Bold,i.BoldItalic,i.BoldOblique];n.weight=function(r){return r.os2?r.os2.usWeightClass:d.includes(p(r))?700:400}},781:function(o,n,c){"use strict";var v=this&&this.__rest||function(z,M){var _={};for(var L in z)Object.prototype.hasOwnProperty.call(z,L)&&M.indexOf(L)<0&&(_[L]=z[L]);if(z!=null&&typeof Object.getOwnPropertySymbols=="function"){var S=0;for(L=Object.getOwnPropertySymbols(z);S<L.length;S++)M.indexOf(L[S])<0&&(_[L[S]]=z[L[S]])}return _};Object.defineProperty(n,"__esModule",{value:!0});let f=c(459),i=c(934),t=c(814);var p=c(814);async function d(z){let M=Object.assign({concurrency:4,language:"en"},z),_=await f.default({extensions:["ttf","otf"]}),L=await async function(y,A,H){let T=[],V=0,Z=async N=>{T.push(await(async E=>{try{return r(E,await i.default(E),M.language)}catch(P){if(["TypeError","SyntaxError","ReferenceError","RangeError","AssertionError"].includes(P.name))throw P}})(A[N])),V<A.length&&await Z(V++)},B=[];for(;V<A.length&&V<H;V++)B.push(Z(V));return await Promise.all(B),T}(0,_,M.concurrency),S={};for(let y of L.filter(A=>A)){let{name:A}=y,H=v(y,["name"]);S[A]||(S[A]=[]),S[A].push(H)}return S}function r(z,M,_){return{name:t.name(M,_),path:z,type:t.type(M),weight:t.weight(M),style:t.style(M)}}n.Type=p.Type,n.Style=p.Style,n.list=d,n.listVariants=async function(z,M){return(await d(M))[z]||[]},n.get=async function(z,M){let _=Object.assign({language:"en"},M);return r(z,await i.default(z),_.language)}},934:(o,n,c)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});let v=c(89),f=c(896),i=c(380),t=c(879),p=c(130),d=c(731),r=c(954);var z;(function(L){L[L.TrueType=0]="TrueType",L[L.CFF=1]="CFF",L[L.Woff=2]="Woff"})(z||(z={}));let M={name:{tag:Buffer.from("name"),parse:i.default},ltag:{tag:Buffer.from("ltag"),parse:t.default},os2:{tag:Buffer.from("OS/2"),parse:p.default},head:{tag:Buffer.from("head"),parse:d.default},post:{tag:Buffer.from("post"),parse:r.default}};n.default=async function(L){return new Promise((S,y)=>{(async()=>{let A=f.default(),H=v.createReadStream(L),T=!1,V=()=>{T=!0};H.once("close",V),H.once("end",V),H.once("error",Z=>{T=!0,y(Z)}),H.pipe(A);try{switch(function(Z){if(Z.equals(_.one)||Z.equals(_.true)||Z.equals(_.typ1))return z.TrueType;if(Z.equals(_.otto))return z.CFF;if(Z.equals(_.woff))return z.Woff;throw new Error(`Unsupported signature type: ${Z}`)}(await A.read(4))){case z.TrueType:case z.CFF:let Z=(await A.read(2)).readUInt16BE(0);await A.skip(6);let B=await async function(I,U){let K={};for(let Q=0;Q<U;Q++){let r0=await I.read(4),e0=await I.read(12);for(let[c0,j]of Object.entries(M))if(r0.equals(j.tag)&&(K[c0]={offset:e0.readUInt32BE(4),length:e0.readUInt32BE(8)},K.name&&K.ltag&&K.os2))return K}return K}(A,Z),N=Object.entries(B).sort((I,U)=>I[1].offset-U[1].offset),E={};for(let[I,U]of N)await A.skip(U.offset-A.offset),E[I]=await A.read(U.length);let P=[];if(E.ltag&&(P=M.ltag.parse(E.ltag)),!E.name)throw new Error(`missing required OpenType table 'name' in font file: ${L}`);return{names:M.name.parse(E.name,P),os2:E.os2&&M.os2.parse(E.os2),head:E.head&&M.head.parse(E.head),post:E.post&&M.post.parse(E.post)};case z.Woff:default:throw new Error("provided font type is not supported yet")}}finally{H.unpipe(A),T||(H.destroy(),A.destroy())}})().then(S,y)})};let _={one:Buffer.from([0,1,0,0]),otto:Buffer.from("OTTO"),true:Buffer.from("true"),typ1:Buffer.from("typ1"),woff:Buffer.from("wOFF")}},731:(o,n,c)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});let v=c(980);n.default=function(f){return{version:v.formatFixed(f.readUInt16BE(0),f.readUInt16BE(2)),fontRevision:v.formatFixed(f.readUInt16BE(4),f.readUInt16BE(6)),checkSumAdjustment:f.readUInt32BE(8),magicNumber:f.readUInt32BE(12),flags:f.readUInt16BE(16),unitsPerEm:f.readUInt16BE(18),created:v.formatLongDateTime(f.readUInt32BE(20),f.readUInt32BE(24)),modified:v.formatLongDateTime(f.readUInt32BE(28),f.readUInt32BE(32)),xMin:f.readInt16BE(36),yMin:f.readInt16BE(38),xMax:f.readInt16BE(40),yMax:f.readInt16BE(42),macStyle:f.readUInt16BE(44),lowestRecPPEM:f.readUInt16BE(46),fontDirectionHint:f.readInt16BE(48),indexToLocFormat:f.readInt16BE(50),glyphDataFormat:f.readInt16BE(52)}}},879:(o,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(c){if(c.readUInt32BE(0)!==1)throw new Error("Unsupported ltag table version.");let v=c.readUInt32BE(8),f=[];for(let i=0;i<v;i++){let t="",p=c.readUInt16BE(12+4*i),d=c.readUInt16BE(14+4*i);for(let r=p;r<p+d;++r)t+=String.fromCharCode(c.readInt8(r));f.push(t)}return f}},380:(o,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});let c=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],v={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},f={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function i(_,L,S){switch(_){case 0:if(L===65535)return"und";if(S)return S[L];break;case 1:return v[L];case 3:return f[L]}}let t="utf-16",p={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},d={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function r(_,L,S){switch(_){case 0:return t;case 1:return d[S]||p[L];case 3:if(L===1||L===10)return t}}n.default=function(_,L){let S={},y=_.readUInt16BE(2),A=_.readUInt16BE(4),H=6;for(let T=0;T<y;T++){let V=_.readUInt16BE(H+0),Z=_.readUInt16BE(H+2),B=_.readUInt16BE(H+4),N=_.readUInt16BE(H+6),E=c[N]||String(N),P=_.readUInt16BE(H+8),I=_.readUInt16BE(H+10),U=i(V,B,L),K=r(V,Z,B);if(H+=12,K!==void 0&&U!==void 0){let Q;if(K===t){let r0=P/2,e0=Array(r0);for(let c0=0;c0<r0;c0++)e0[c0]=_.readUInt16BE(A+I+2*c0);Q=String.fromCharCode(...e0)}else Q=M(_,A+I,P,K);if(Q){let r0=S[E];r0===void 0&&(r0=S[E]={}),r0[U]=Q}}}return S};let z={"x-mac-croatian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\u0160\u2122\xB4\xA8\u2260\u017D\xD8\u221E\xB1\u2264\u2265\u2206\xB5\u2202\u2211\u220F\u0161\u222B\xAA\xBA\u03A9\u017E\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u0106\xAB\u010C\u2026 \xC0\xC3\xD5\u0152\u0153\u0110\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\uF8FF\xA9\u2044\u20AC\u2039\u203A\xC6\xBB\u2013\xB7\u201A\u201E\u2030\xC2\u0107\xC1\u010D\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u0111\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u03C0\xCB\u02DA\xB8\xCA\xE6\u02C7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F\u2020\xB0\u0490\xA3\xA7\u2022\xB6\u0406\xAE\xA9\u2122\u0402\u0452\u2260\u0403\u0453\u221E\xB1\u2264\u2265\u0456\xB5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026 \u040B\u045B\u040C\u045C\u0455\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u201E\u040E\u045E\u040F\u045F\u2116\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E","x-mac-gaelic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u1E02\xB1\u2264\u2265\u1E03\u010A\u010B\u1E0A\u1E0B\u1E1E\u1E1F\u0120\u0121\u1E40\xE6\xF8\u1E41\u1E56\u1E57\u027C\u0192\u017F\u1E60\xAB\xBB\u2026 \xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\u1E61\u1E9B\xFF\u0178\u1E6A\u20AC\u2039\u203A\u0176\u0177\u1E6B\xB7\u1EF2\u1EF3\u204A\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u2663\xD2\xDA\xDB\xD9\u0131\xDD\xFD\u0174\u0175\u1E84\u1E85\u1E80\u1E81\u1E82\u1E83","x-mac-greek":"\xC4\xB9\xB2\xC9\xB3\xD6\xDC\u0385\xE0\xE2\xE4\u0384\xA8\xE7\xE9\xE8\xEA\xEB\xA3\u2122\xEE\xEF\u2022\xBD\u2030\xF4\xF6\xA6\u20AC\xF9\xFB\xFC\u2020\u0393\u0394\u0398\u039B\u039E\u03A0\xDF\xAE\xA9\u03A3\u03AA\xA7\u2260\xB0\xB7\u0391\xB1\u2264\u2265\xA5\u0392\u0395\u0396\u0397\u0399\u039A\u039C\u03A6\u03AB\u03A8\u03A9\u03AC\u039D\xAC\u039F\u03A1\u2248\u03A4\xAB\xBB\u2026 \u03A5\u03A7\u0386\u0388\u0153\u2013\u2015\u201C\u201D\u2018\u2019\xF7\u0389\u038A\u038C\u038E\u03AD\u03AE\u03AF\u03CC\u038F\u03CD\u03B1\u03B2\u03C8\u03B4\u03B5\u03C6\u03B3\u03B7\u03B9\u03BE\u03BA\u03BB\u03BC\u03BD\u03BF\u03C0\u03CE\u03C1\u03C3\u03C4\u03B8\u03C9\u03C2\u03C7\u03C5\u03B6\u03CA\u03CB\u0390\u03B0\xAD","x-mac-icelandic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\xDD\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026 \xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\xD0\xF0\xDE\xFE\xFD\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140A\u140B\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144E\u144F\u1450\u1451\u1455\u1456\u1466\u146D\u146E\u146F\u1470\u1472\u1473\u1483\u148B\u148C\u148D\u148E\u1490\u1491\xB0\u14A1\u14A5\u14A6\u2022\xB6\u14A7\xAE\xA9\u2122\u14A8\u14AA\u14AB\u14BB\u14C2\u14C3\u14C4\u14C5\u14C7\u14C8\u14D0\u14EF\u14F0\u14F1\u14F2\u14F4\u14F5\u1505\u14D5\u14D6\u14D7\u14D8\u14DA\u14DB\u14EA\u1528\u1529\u152A\u152B\u152D\u2026 \u152E\u153E\u1555\u1556\u1557\u2013\u2014\u201C\u201D\u2018\u2019\u1558\u1559\u155A\u155D\u1546\u1547\u1548\u1549\u154B\u154C\u1550\u157F\u1580\u1581\u1582\u1583\u1584\u1585\u158F\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15A0\u15A1\u15A2\u15A3\u15A4\u15A5\u15A6\u157C\u0141\u0142","x-mac-ce":"\xC4\u0100\u0101\xC9\u0104\xD6\xDC\xE1\u0105\u010C\xE4\u010D\u0106\u0107\xE9\u0179\u017A\u010E\xED\u010F\u0112\u0113\u0116\xF3\u0117\xF4\xF6\xF5\xFA\u011A\u011B\xFC\u2020\xB0\u0118\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\u0119\xA8\u2260\u0123\u012E\u012F\u012A\u2264\u2265\u012B\u0136\u2202\u2211\u0142\u013B\u013C\u013D\u013E\u0139\u013A\u0145\u0146\u0143\xAC\u221A\u0144\u0147\u2206\xAB\xBB\u2026 \u0148\u0150\xD5\u0151\u014C\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\u014D\u0154\u0155\u0158\u2039\u203A\u0159\u0156\u0157\u0160\u201A\u201E\u0161\u015A\u015B\xC1\u0164\u0165\xCD\u017D\u017E\u016A\xD3\xD4\u016B\u016E\xDA\u016F\u0170\u0171\u0172\u0173\xDD\xFD\u0137\u017B\u0141\u017C\u0122\u02C7",macintosh:"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026 \xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-romanian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\u0102\u0218\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\u0103\u0219\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026 \xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\u021A\u021B\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-turkish":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026 \xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u011E\u011F\u0130\u0131\u015E\u015F\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\uF8A0\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7"};function M(_,L,S,y){let A=z[y];if(A===void 0)return;let H="";for(let T=0;T<S;T++){let V=_.readUInt8(L+T);H+=V<=127?String.fromCharCode(V):A[127&V]}return H}},130:(o,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(c){let v={version:c.readUInt16BE(0),xAvgCharWidth:c.readUInt16BE(2),usWeightClass:c.readUInt16BE(4),usWidthClass:c.readUInt16BE(6),fsType:c.readUInt16BE(8),ySubscriptXSize:c.readInt16BE(10),ySubscriptYSize:c.readInt16BE(12),ySubscriptXOffset:c.readInt16BE(14),ySubscriptYOffset:c.readInt16BE(16),ySuperscriptXSize:c.readInt16BE(18),ySuperscriptYSize:c.readInt16BE(20),ySuperscriptXOffset:c.readInt16BE(22),ySuperscriptYOffset:c.readInt16BE(24),yStrikeoutSize:c.readInt16BE(26),yStrikeoutPosition:c.readInt16BE(28),sFamilyClass:c.readInt16BE(30),panose:[c.readUInt8(32),c.readUInt8(33),c.readUInt8(34),c.readUInt8(35),c.readUInt8(36),c.readUInt8(37),c.readUInt8(38),c.readUInt8(39),c.readUInt8(40),c.readUInt8(41)],ulUnicodeRange1:c.readUInt32BE(42),ulUnicodeRange2:c.readUInt32BE(46),ulUnicodeRange3:c.readUInt32BE(50),ulUnicodeRange4:c.readUInt32BE(54),achVendID:String.fromCharCode(c.readUInt8(58),c.readUInt8(59),c.readUInt8(60),c.readUInt8(61)),fsSelection:c.readUInt16BE(62),usFirstCharIndex:c.readUInt16BE(64),usLastCharIndex:c.readUInt16BE(66),sTypoAscender:c.readInt16BE(68),sTypoDescender:c.readInt16BE(70),sTypoLineGap:c.readInt16BE(72),usWinAscent:c.readUInt16BE(74),usWinDescent:c.readUInt16BE(76)};return v.version>=1&&(v.ulCodePageRange1=c.readUInt32BE(78),v.ulCodePageRange2=c.readUInt32BE(82)),v.version>=2&&(v.sxHeight=c.readInt16BE(86),v.sCapHeight=c.readInt16BE(88),v.usDefaultChar=c.readUInt16BE(90),v.usBreakChar=c.readUInt16BE(92),v.usMaxContent=c.readUInt16BE(94)),v}},954:(o,n,c)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});let v=c(980);n.default=function(f){return{version:v.formatFixed(f.readUInt16BE(0),f.readUInt16BE(2)),italicAngle:v.formatFixed(f.readUInt16BE(4),f.readUInt16BE(6)),underlinePosition:f.readInt16BE(8),underlineThickness:f.readInt16BE(10),isFixedPitch:f.readUInt32BE(12),minMemType42:f.readUInt32BE(16),maxMemType42:f.readUInt32BE(20),minMemType1:f.readUInt32BE(24),maxMemType1:f.readUInt32BE(28)}}},980:(o,n)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.formatFixed=function(c,v){return c+v/65536},n.formatLongDateTime=function(c,v){return 1e3*(c*4294967296+v-2082844800)}},459:(o,n,c)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});let v=c(56),f=c(456),i=c(49),t={win32:()=>process.env.WINDIR?[v.join(process.env.WINDIR,"Fonts")]:["C:\\Windows\\Fonts"],darwin:()=>{let d=f.homedir();return[...d?[v.join(d,"/Library/Fonts")]:[],"/Library/Fonts","/Network/Library/Fonts","/System/Library/Fonts","/System Folder/Fonts"]},linux:()=>{let d=f.homedir();return["/usr/share/fonts","/usr/local/share/fonts",...d?[v.join(d,".fonts"),v.join(d,".local/share/fonts")]:[]]}};function p(d){let r=Object.assign({extensions:["ttf","otf","ttc","woff","woff2"],additionalFolders:[]},d),z=f.platform(),M=t[z];if(!M)throw new Error(`Unsupported platform: ${z}`);let _=M();return i.default([..._,...r.additionalFolders],r.extensions)}o.exports=Object.assign(p,{default:p}),n.default=p},49:(o,n,c)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});let v=c(89),f=c(269),i=c(56),t=f.promisify(v.readdir),p=f.promisify(v.stat);async function d(r,z,M=10){if(M<=0)return[];let _;try{_=await t(r)}catch(S){return[]}let L=[];return await Promise.all(_.map(async S=>{let y=i.join(r,S),A;try{A=await p(y)}catch(H){return}A.isFile()&&z.test(y)?L.push(y):A.isDirectory()&&L.push(...await d(y,z,M-1))})),L}n.default=async function(r,z){let M=new Set;return await Promise.all(r.map(async _=>{let L=await d(i.resolve(_),new RegExp(`\\.${z.map(S=>`(?:${S})`).join("|")}$`));for(let S of L)M.add(S)})),[...M]}},593:(o,n,c)=>{"use strict";let v=c(411),f=Symbol("max"),i=Symbol("length"),t=Symbol("lengthCalculator"),p=Symbol("allowStale"),d=Symbol("maxAge"),r=Symbol("dispose"),z=Symbol("noDisposeOnSet"),M=Symbol("lruList"),_=Symbol("cache"),L=Symbol("updateAgeOnGet"),S=()=>1,y=(B,N,E)=>{let P=B[_].get(N);if(P){let I=P.value;if(A(B,I)){if(T(B,P),!B[p])return}else E&&(B[L]&&(P.value.now=Date.now()),B[M].unshiftNode(P));return I.value}},A=(B,N)=>{if(!N||!N.maxAge&&!B[d])return!1;let E=Date.now()-N.now;return N.maxAge?E>N.maxAge:B[d]&&E>B[d]},H=B=>{if(B[i]>B[f])for(let N=B[M].tail;B[i]>B[f]&&N!==null;){let E=N.prev;T(B,N),N=E}},T=(B,N)=>{if(N){let E=N.value;B[r]&&B[r](E.key,E.value),B[i]-=E.length,B[_].delete(E.key),B[M].removeNode(N)}};class V{constructor(N,E,P,I,U){this.key=N,this.value=E,this.length=P,this.now=I,this.maxAge=U||0}}let Z=(B,N,E,P)=>{let I=E.value;A(B,I)&&(T(B,E),B[p]||(I=void 0)),I&&N.call(P,I.value,I.key,B)};o.exports=class{constructor(B){if(typeof B=="number"&&(B={max:B}),B||(B={}),B.max&&(typeof B.max!="number"||B.max<0))throw new TypeError("max must be a non-negative number");this[f]=B.max||1/0;let N=B.length||S;if(this[t]=typeof N!="function"?S:N,this[p]=B.stale||!1,B.maxAge&&typeof B.maxAge!="number")throw new TypeError("maxAge must be a number");this[d]=B.maxAge||0,this[r]=B.dispose,this[z]=B.noDisposeOnSet||!1,this[L]=B.updateAgeOnGet||!1,this.reset()}set max(B){if(typeof B!="number"||B<0)throw new TypeError("max must be a non-negative number");this[f]=B||1/0,H(this)}get max(){return this[f]}set allowStale(B){this[p]=!!B}get allowStale(){return this[p]}set maxAge(B){if(typeof B!="number")throw new TypeError("maxAge must be a non-negative number");this[d]=B,H(this)}get maxAge(){return this[d]}set lengthCalculator(B){typeof B!="function"&&(B=S),B!==this[t]&&(this[t]=B,this[i]=0,this[M].forEach(N=>{N.length=this[t](N.value,N.key),this[i]+=N.length})),H(this)}get lengthCalculator(){return this[t]}get length(){return this[i]}get itemCount(){return this[M].length}rforEach(B,N){N=N||this;for(let E=this[M].tail;E!==null;){let P=E.prev;Z(this,B,E,N),E=P}}forEach(B,N){N=N||this;for(let E=this[M].head;E!==null;){let P=E.next;Z(this,B,E,N),E=P}}keys(){return this[M].toArray().map(B=>B.key)}values(){return this[M].toArray().map(B=>B.value)}reset(){this[r]&&this[M]&&this[M].length&&this[M].forEach(B=>this[r](B.key,B.value)),this[_]=new Map,this[M]=new v,this[i]=0}dump(){return this[M].map(B=>!A(this,B)&&{k:B.key,v:B.value,e:B.now+(B.maxAge||0)}).toArray().filter(B=>B)}dumpLru(){return this[M]}set(B,N,E){if((E=E||this[d])&&typeof E!="number")throw new TypeError("maxAge must be a number");let P=E?Date.now():0,I=this[t](N,B);if(this[_].has(B)){if(I>this[f])return T(this,this[_].get(B)),!1;let K=this[_].get(B).value;return this[r]&&(this[z]||this[r](B,K.value)),K.now=P,K.maxAge=E,K.value=N,this[i]+=I-K.length,K.length=I,this.get(B),H(this),!0}let U=new V(B,N,I,P,E);return U.length>this[f]?(this[r]&&this[r](B,N),!1):(this[i]+=U.length,this[M].unshift(U),this[_].set(B,this[M].head),H(this),!0)}has(B){if(!this[_].has(B))return!1;let N=this[_].get(B).value;return!A(this,N)}get(B){return y(this,B,!0)}peek(B){return y(this,B,!1)}pop(){let B=this[M].tail;return B?(T(this,B),B.value):null}del(B){T(this,this[_].get(B))}load(B){this.reset();let N=Date.now();for(let E=B.length-1;E>=0;E--){let P=B[E],I=P.e||0;if(I===0)this.set(P.k,P.v);else{let U=I-N;U>0&&this.set(P.k,P.v,U)}}}prune(){this[_].forEach((B,N)=>y(this,N,!1))}}},602:(o,n,c)=>{"use strict";c.r(n),c.d(n,{BoundingBox:()=>p,Font:()=>Z9,Glyph:()=>y5,Path:()=>r,_parse:()=>u0,load:()=>ca,loadSync:()=>ra,parse:()=>P6});var v=c(311),f=c.n(v);function i(s,h,C,x,k){return Math.pow(1-k,3)*s+3*Math.pow(1-k,2)*k*h+3*(1-k)*Math.pow(k,2)*C+Math.pow(k,3)*x}function t(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}t.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},t.prototype.addPoint=function(s,h){typeof s=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=s,this.x2=s),s<this.x1&&(this.x1=s),s>this.x2&&(this.x2=s)),typeof h=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=h,this.y2=h),h<this.y1&&(this.y1=h),h>this.y2&&(this.y2=h))},t.prototype.addX=function(s){this.addPoint(s,null)},t.prototype.addY=function(s){this.addPoint(null,s)},t.prototype.addBezier=function(s,h,C,x,k,D,R,O){let F=[s,h],W=[C,x],$=[k,D],Y=[R,O];this.addPoint(s,h),this.addPoint(R,O);for(let X=0;X<=1;X++){let m0=6*F[X]-12*W[X]+6*$[X],l0=-3*F[X]+9*W[X]-9*$[X]+3*Y[X],C0=3*W[X]-3*F[X];if(l0===0){if(m0===0)continue;let L0=-C0/m0;0<L0&&L0<1&&(X===0&&this.addX(i(F[X],W[X],$[X],Y[X],L0)),X===1&&this.addY(i(F[X],W[X],$[X],Y[X],L0)));continue}let i0=Math.pow(m0,2)-4*C0*l0;if(i0<0)continue;let n0=(-m0+Math.sqrt(i0))/(2*l0);0<n0&&n0<1&&(X===0&&this.addX(i(F[X],W[X],$[X],Y[X],n0)),X===1&&this.addY(i(F[X],W[X],$[X],Y[X],n0)));let y0=(-m0-Math.sqrt(i0))/(2*l0);0<y0&&y0<1&&(X===0&&this.addX(i(F[X],W[X],$[X],Y[X],y0)),X===1&&this.addY(i(F[X],W[X],$[X],Y[X],y0)))}},t.prototype.addQuad=function(s,h,C,x,k,D){let R=s+.6666666666666666*(C-s),O=h+2/3*(x-h),F=R+1/3*(k-s),W=O+1/3*(D-h);this.addBezier(s,h,R,O,F,W,k,D)};let p=t;function d(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}d.prototype.moveTo=function(s,h){this.commands.push({type:"M",x:s,y:h})},d.prototype.lineTo=function(s,h){this.commands.push({type:"L",x:s,y:h})},d.prototype.curveTo=d.prototype.bezierCurveTo=function(s,h,C,x,k,D){this.commands.push({type:"C",x1:s,y1:h,x2:C,y2:x,x:k,y:D})},d.prototype.quadTo=d.prototype.quadraticCurveTo=function(s,h,C,x){this.commands.push({type:"Q",x1:s,y1:h,x:C,y:x})},d.prototype.close=d.prototype.closePath=function(){this.commands.push({type:"Z"})},d.prototype.extend=function(s){if(s.commands)s=s.commands;else if(s instanceof p){let h=s;return this.moveTo(h.x1,h.y1),this.lineTo(h.x2,h.y1),this.lineTo(h.x2,h.y2),this.lineTo(h.x1,h.y2),void this.close()}Array.prototype.push.apply(this.commands,s)},d.prototype.getBoundingBox=function(){let s=new p,h=0,C=0,x=0,k=0;for(let D=0;D<this.commands.length;D++){let R=this.commands[D];switch(R.type){case"M":s.addPoint(R.x,R.y),h=x=R.x,C=k=R.y;break;case"L":s.addPoint(R.x,R.y),x=R.x,k=R.y;break;case"Q":s.addQuad(x,k,R.x1,R.y1,R.x,R.y),x=R.x,k=R.y;break;case"C":s.addBezier(x,k,R.x1,R.y1,R.x2,R.y2,R.x,R.y),x=R.x,k=R.y;break;case"Z":x=h,k=C;break;default:throw new Error("Unexpected path command "+R.type)}}return s.isEmpty()&&s.addPoint(0,0),s},d.prototype.draw=function(s){s.beginPath();for(let h=0;h<this.commands.length;h+=1){let C=this.commands[h];C.type==="M"?s.moveTo(C.x,C.y):C.type==="L"?s.lineTo(C.x,C.y):C.type==="C"?s.bezierCurveTo(C.x1,C.y1,C.x2,C.y2,C.x,C.y):C.type==="Q"?s.quadraticCurveTo(C.x1,C.y1,C.x,C.y):C.type==="Z"&&s.closePath()}this.fill&&(s.fillStyle=this.fill,s.fill()),this.stroke&&(s.strokeStyle=this.stroke,s.lineWidth=this.strokeWidth,s.stroke())},d.prototype.toPathData=function(s){function h(k){return Math.round(k)===k?""+Math.round(k):k.toFixed(s)}function C(){let k="";for(let D=0;D<arguments.length;D+=1){let R=arguments[D];R>=0&&D>0&&(k+=" "),k+=h(R)}return k}s=s!==void 0?s:2;let x="";for(let k=0;k<this.commands.length;k+=1){let D=this.commands[k];D.type==="M"?x+="M"+C(D.x,D.y):D.type==="L"?x+="L"+C(D.x,D.y):D.type==="C"?x+="C"+C(D.x1,D.y1,D.x2,D.y2,D.x,D.y):D.type==="Q"?x+="Q"+C(D.x1,D.y1,D.x,D.y):D.type==="Z"&&(x+="Z")}return x},d.prototype.toSVG=function(s){let h='<path d="';return h+=this.toPathData(s),h+='"',this.fill&&this.fill!=="black"&&(this.fill===null?h+=' fill="none"':h+=' fill="'+this.fill+'"'),this.stroke&&(h+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),h+="/>",h},d.prototype.toDOMElement=function(s){let h=this.toPathData(s),C=document.createElementNS("http://www.w3.org/2000/svg","path");return C.setAttribute("d",h),C};let r=d;function z(s){throw new Error(s)}function M(s,h){s||z(h)}let _={fail:z,argument:M,assert:M},L=2147483648,S={},y={},A={};function H(s){return function(){return s}}y.BYTE=function(s){return _.argument(s>=0&&s<=255,"Byte value should be between 0 and 255."),[s]},A.BYTE=H(1),y.CHAR=function(s){return[s.charCodeAt(0)]},A.CHAR=H(1),y.CHARARRAY=function(s){let h=[];for(let C=0;C<s.length;C+=1)h[C]=s.charCodeAt(C);return h},A.CHARARRAY=function(s){return s.length},y.USHORT=function(s){return[s>>8&255,255&s]},A.USHORT=H(2),y.SHORT=function(s){return s>=32768&&(s=-(65536-s)),[s>>8&255,255&s]},A.SHORT=H(2),y.UINT24=function(s){return[s>>16&255,s>>8&255,255&s]},A.UINT24=H(3),y.ULONG=function(s){return[s>>24&255,s>>16&255,s>>8&255,255&s]},A.ULONG=H(4),y.LONG=function(s){return s>=L&&(s=-(2*L-s)),[s>>24&255,s>>16&255,s>>8&255,255&s]},A.LONG=H(4),y.FIXED=y.ULONG,A.FIXED=A.ULONG,y.FWORD=y.SHORT,A.FWORD=A.SHORT,y.UFWORD=y.USHORT,A.UFWORD=A.USHORT,y.LONGDATETIME=function(s){return[0,0,0,0,s>>24&255,s>>16&255,s>>8&255,255&s]},A.LONGDATETIME=H(8),y.TAG=function(s){return _.argument(s.length===4,"Tag should be exactly 4 ASCII characters."),[s.charCodeAt(0),s.charCodeAt(1),s.charCodeAt(2),s.charCodeAt(3)]},A.TAG=H(4),y.Card8=y.BYTE,A.Card8=A.BYTE,y.Card16=y.USHORT,A.Card16=A.USHORT,y.OffSize=y.BYTE,A.OffSize=A.BYTE,y.SID=y.USHORT,A.SID=A.USHORT,y.NUMBER=function(s){return s>=-107&&s<=107?[s+139]:s>=108&&s<=1131?[247+((s-=108)>>8),255&s]:s>=-1131&&s<=-108?[251+((s=-s-108)>>8),255&s]:s>=-32768&&s<=32767?y.NUMBER16(s):y.NUMBER32(s)},A.NUMBER=function(s){return y.NUMBER(s).length},y.NUMBER16=function(s){return[28,s>>8&255,255&s]},A.NUMBER16=H(3),y.NUMBER32=function(s){return[29,s>>24&255,s>>16&255,s>>8&255,255&s]},A.NUMBER32=H(5),y.REAL=function(s){let h=s.toString(),C=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(h);if(C){let D=parseFloat("1e"+((C[2]?+C[2]:0)+C[1].length));h=(Math.round(s*D)/D).toString()}let x="";for(let D=0,R=h.length;D<R;D+=1){let O=h[D];x+=O==="e"?h[++D]==="-"?"c":"b":O==="."?"a":O==="-"?"e":O}x+=1&x.length?"f":"ff";let k=[30];for(let D=0,R=x.length;D<R;D+=2)k.push(parseInt(x.substr(D,2),16));return k},A.REAL=function(s){return y.REAL(s).length},y.NAME=y.CHARARRAY,A.NAME=A.CHARARRAY,y.STRING=y.CHARARRAY,A.STRING=A.CHARARRAY,S.UTF8=function(s,h,C){let x=[],k=C;for(let D=0;D<k;D++,h+=1)x[D]=s.getUint8(h);return String.fromCharCode.apply(null,x)},S.UTF16=function(s,h,C){let x=[],k=C/2;for(let D=0;D<k;D++,h+=2)x[D]=s.getUint16(h);return String.fromCharCode.apply(null,x)},y.UTF16=function(s){let h=[];for(let C=0;C<s.length;C+=1){let x=s.charCodeAt(C);h[h.length]=x>>8&255,h[h.length]=255&x}return h},A.UTF16=function(s){return 2*s.length};let T={"x-mac-croatian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\u0160\u2122\xB4\xA8\u2260\u017D\xD8\u221E\xB1\u2264\u2265\u2206\xB5\u2202\u2211\u220F\u0161\u222B\xAA\xBA\u03A9\u017E\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u0106\xAB\u010C\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u0110\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\uF8FF\xA9\u2044\u20AC\u2039\u203A\xC6\xBB\u2013\xB7\u201A\u201E\u2030\xC2\u0107\xC1\u010D\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u0111\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u03C0\xCB\u02DA\xB8\xCA\xE6\u02C7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F\u2020\xB0\u0490\xA3\xA7\u2022\xB6\u0406\xAE\xA9\u2122\u0402\u0452\u2260\u0403\u0453\u221E\xB1\u2264\u2265\u0456\xB5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\u040B\u045B\u040C\u045C\u0455\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u201E\u040E\u045E\u040F\u045F\u2116\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E","x-mac-gaelic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u1E02\xB1\u2264\u2265\u1E03\u010A\u010B\u1E0A\u1E0B\u1E1E\u1E1F\u0120\u0121\u1E40\xE6\xF8\u1E41\u1E56\u1E57\u027C\u0192\u017F\u1E60\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\u1E61\u1E9B\xFF\u0178\u1E6A\u20AC\u2039\u203A\u0176\u0177\u1E6B\xB7\u1EF2\u1EF3\u204A\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u2663\xD2\xDA\xDB\xD9\u0131\xDD\xFD\u0174\u0175\u1E84\u1E85\u1E80\u1E81\u1E82\u1E83","x-mac-greek":"\xC4\xB9\xB2\xC9\xB3\xD6\xDC\u0385\xE0\xE2\xE4\u0384\xA8\xE7\xE9\xE8\xEA\xEB\xA3\u2122\xEE\xEF\u2022\xBD\u2030\xF4\xF6\xA6\u20AC\xF9\xFB\xFC\u2020\u0393\u0394\u0398\u039B\u039E\u03A0\xDF\xAE\xA9\u03A3\u03AA\xA7\u2260\xB0\xB7\u0391\xB1\u2264\u2265\xA5\u0392\u0395\u0396\u0397\u0399\u039A\u039C\u03A6\u03AB\u03A8\u03A9\u03AC\u039D\xAC\u039F\u03A1\u2248\u03A4\xAB\xBB\u2026\xA0\u03A5\u03A7\u0386\u0388\u0153\u2013\u2015\u201C\u201D\u2018\u2019\xF7\u0389\u038A\u038C\u038E\u03AD\u03AE\u03AF\u03CC\u038F\u03CD\u03B1\u03B2\u03C8\u03B4\u03B5\u03C6\u03B3\u03B7\u03B9\u03BE\u03BA\u03BB\u03BC\u03BD\u03BF\u03C0\u03CE\u03C1\u03C3\u03C4\u03B8\u03C9\u03C2\u03C7\u03C5\u03B6\u03CA\u03CB\u0390\u03B0\xAD","x-mac-icelandic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\xDD\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\xD0\xF0\xDE\xFE\xFD\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140A\u140B\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144E\u144F\u1450\u1451\u1455\u1456\u1466\u146D\u146E\u146F\u1470\u1472\u1473\u1483\u148B\u148C\u148D\u148E\u1490\u1491\xB0\u14A1\u14A5\u14A6\u2022\xB6\u14A7\xAE\xA9\u2122\u14A8\u14AA\u14AB\u14BB\u14C2\u14C3\u14C4\u14C5\u14C7\u14C8\u14D0\u14EF\u14F0\u14F1\u14F2\u14F4\u14F5\u1505\u14D5\u14D6\u14D7\u14D8\u14DA\u14DB\u14EA\u1528\u1529\u152A\u152B\u152D\u2026\xA0\u152E\u153E\u1555\u1556\u1557\u2013\u2014\u201C\u201D\u2018\u2019\u1558\u1559\u155A\u155D\u1546\u1547\u1548\u1549\u154B\u154C\u1550\u157F\u1580\u1581\u1582\u1583\u1584\u1585\u158F\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15A0\u15A1\u15A2\u15A3\u15A4\u15A5\u15A6\u157C\u0141\u0142","x-mac-ce":"\xC4\u0100\u0101\xC9\u0104\xD6\xDC\xE1\u0105\u010C\xE4\u010D\u0106\u0107\xE9\u0179\u017A\u010E\xED\u010F\u0112\u0113\u0116\xF3\u0117\xF4\xF6\xF5\xFA\u011A\u011B\xFC\u2020\xB0\u0118\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\u0119\xA8\u2260\u0123\u012E\u012F\u012A\u2264\u2265\u012B\u0136\u2202\u2211\u0142\u013B\u013C\u013D\u013E\u0139\u013A\u0145\u0146\u0143\xAC\u221A\u0144\u0147\u2206\xAB\xBB\u2026\xA0\u0148\u0150\xD5\u0151\u014C\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\u014D\u0154\u0155\u0158\u2039\u203A\u0159\u0156\u0157\u0160\u201A\u201E\u0161\u015A\u015B\xC1\u0164\u0165\xCD\u017D\u017E\u016A\xD3\xD4\u016B\u016E\xDA\u016F\u0170\u0171\u0172\u0173\xDD\xFD\u0137\u017B\u0141\u017C\u0122\u02C7",macintosh:"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-romanian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\u0102\u0218\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\u0103\u0219\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\u021A\u021B\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-turkish":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u011E\u011F\u0130\u0131\u015E\u015F\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\uF8A0\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7"};S.MACSTRING=function(s,h,C,x){let k=T[x];if(k===void 0)return;let D="";for(let R=0;R<C;R++){let O=s.getUint8(h+R);D+=O<=127?String.fromCharCode(O):k[127&O]}return D};let V=typeof WeakMap=="function"&&new WeakMap,Z;function B(s){return s>=-128&&s<=127}function N(s,h,C){let x=0,k=s.length;for(;h<k&&x<64&&s[h]===0;)++h,++x;return C.push(128|x-1),h}function E(s,h,C){let x=0,k=s.length,D=h;for(;D<k&&x<64;){let R=s[D];if(!B(R)||R===0&&D+1<k&&s[D+1]===0)break;++D,++x}C.push(x-1);for(let R=h;R<D;++R)C.push(s[R]+256&255);return D}function P(s,h,C){let x=0,k=s.length,D=h;for(;D<k&&x<64;){let R=s[D];if(R===0||B(R)&&D+1<k&&B(s[D+1]))break;++D,++x}C.push(64|x-1);for(let R=h;R<D;++R){let O=s[R];C.push(O+65536>>8&255,O+256&255)}return D}y.MACSTRING=function(s,h){let C=function(k){if(!Z){Z={};for(let F in T)Z[F]=new String(F)}let D=Z[k];if(D===void 0)return;if(V){let F=V.get(D);if(F!==void 0)return F}let R=T[k];if(R===void 0)return;let O={};for(let F=0;F<R.length;F++)O[R.charCodeAt(F)]=F+128;return V&&V.set(D,O),O}(h);if(C===void 0)return;let x=[];for(let k=0;k<s.length;k++){let D=s.charCodeAt(k);if(D>=128&&(D=C[D],D===void 0))return;x[k]=D}return x},A.MACSTRING=function(s,h){let C=y.MACSTRING(s,h);return C!==void 0?C.length:0},y.VARDELTAS=function(s){let h=0,C=[];for(;h<s.length;){let x=s[h];h=x===0?N(s,h,C):x>=-128&&x<=127?E(s,h,C):P(s,h,C)}return C},y.INDEX=function(s){let h=1,C=[h],x=[];for(let O=0;O<s.length;O+=1){let F=y.OBJECT(s[O]);Array.prototype.push.apply(x,F),h+=F.length,C.push(h)}if(x.length===0)return[0,0];let k=[],D=1+Math.floor(Math.log(h)/Math.log(2))/8|0,R=[void 0,y.BYTE,y.USHORT,y.UINT24,y.ULONG][D];for(let O=0;O<C.length;O+=1){let F=R(C[O]);Array.prototype.push.apply(k,F)}return Array.prototype.concat(y.Card16(s.length),y.OffSize(D),k,x)},A.INDEX=function(s){return y.INDEX(s).length},y.DICT=function(s){let h=[],C=Object.keys(s),x=C.length;for(let k=0;k<x;k+=1){let D=parseInt(C[k],0),R=s[D];h=h.concat(y.OPERAND(R.value,R.type)),h=h.concat(y.OPERATOR(D))}return h},A.DICT=function(s){return y.DICT(s).length},y.OPERATOR=function(s){return s<1200?[s]:[12,s-1200]},y.OPERAND=function(s,h){let C=[];if(Array.isArray(h))for(let x=0;x<h.length;x+=1)_.argument(s.length===h.length,"Not enough arguments given for type"+h),C=C.concat(y.OPERAND(s[x],h[x]));else if(h==="SID")C=C.concat(y.NUMBER(s));else if(h==="offset")C=C.concat(y.NUMBER32(s));else if(h==="number")C=C.concat(y.NUMBER(s));else{if(h!=="real")throw new Error("Unknown operand type "+h);C=C.concat(y.REAL(s))}return C},y.OP=y.BYTE,A.OP=A.BYTE;let I=typeof WeakMap=="function"&&new WeakMap;function U(s,h,C){for(let x=0;x<h.length;x+=1){let k=h[x];this[k.name]=k.value}if(this.tableName=s,this.fields=h,C){let x=Object.keys(C);for(let k=0;k<x.length;k+=1){let D=x[k],R=C[D];this[D]!==void 0&&(this[D]=R)}}}function K(s,h,C){C===void 0&&(C=h.length);let x=new Array(h.length+1);x[0]={name:s+"Count",type:"USHORT",value:C};for(let k=0;k<h.length;k++)x[k+1]={name:s+k,type:"USHORT",value:h[k]};return x}function Q(s,h,C){let x=h.length,k=new Array(x+1);k[0]={name:s+"Count",type:"USHORT",value:x};for(let D=0;D<x;D++)k[D+1]={name:s+D,type:"TABLE",value:C(h[D],D)};return k}function r0(s,h,C){let x=h.length,k=[];k[0]={name:s+"Count",type:"USHORT",value:x};for(let D=0;D<x;D++)k=k.concat(C(h[D],D));return k}function e0(s){s.format===1?U.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(K("glyph",s.glyphs))):_.assert(!1,"Can't create coverage table format 2 yet.")}function c0(s){U.call(this,"scriptListTable",r0("scriptRecord",s,function(h,C){let x=h.script,k=x.defaultLangSys;return _.assert(!!k,"Unable to write GSUB: script "+h.tag+" has no default language system."),[{name:"scriptTag"+C,type:"TAG",value:h.tag},{name:"script"+C,type:"TABLE",value:new U("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new U("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:k.reqFeatureIndex}].concat(K("featureIndex",k.featureIndexes)))}].concat(r0("langSys",x.langSysRecords,function(D,R){let O=D.langSys;return[{name:"langSysTag"+R,type:"TAG",value:D.tag},{name:"langSys"+R,type:"TABLE",value:new U("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:O.reqFeatureIndex}].concat(K("featureIndex",O.featureIndexes)))}]})))}]}))}function j(s){U.call(this,"featureListTable",r0("featureRecord",s,function(h,C){let x=h.feature;return[{name:"featureTag"+C,type:"TAG",value:h.tag},{name:"feature"+C,type:"TABLE",value:new U("featureTable",[{name:"featureParams",type:"USHORT",value:x.featureParams}].concat(K("lookupListIndex",x.lookupListIndexes)))}]}))}function q(s,h){U.call(this,"lookupListTable",Q("lookup",s,function(C){let x=h[C.lookupType];return _.assert(!!x,"Unable to write GSUB lookup type "+C.lookupType+" tables."),new U("lookupTable",[{name:"lookupType",type:"USHORT",value:C.lookupType},{name:"lookupFlag",type:"USHORT",value:C.lookupFlag}].concat(Q("subtable",C.subtables,x)))}))}y.CHARSTRING=function(s){if(I){let x=I.get(s);if(x!==void 0)return x}let h=[],C=s.length;for(let x=0;x<C;x+=1){let k=s[x];h=h.concat(y[k.type](k.value))}return I&&I.set(s,h),h},A.CHARSTRING=function(s){return y.CHARSTRING(s).length},y.OBJECT=function(s){let h=y[s.type];return _.argument(h!==void 0,"No encoding function for type "+s.type),h(s.value)},A.OBJECT=function(s){let h=A[s.type];return _.argument(h!==void 0,"No sizeOf function for type "+s.type),h(s.value)},y.TABLE=function(s){let h=[],C=s.fields.length,x=[],k=[];for(let D=0;D<C;D+=1){let R=s.fields[D],O=y[R.type];_.argument(O!==void 0,"No encoding function for field type "+R.type+" ("+R.name+")");let F=s[R.name];F===void 0&&(F=R.value);let W=O(F);R.type==="TABLE"?(k.push(h.length),h=h.concat([0,0]),x.push(W)):h=h.concat(W)}for(let D=0;D<x.length;D+=1){let R=k[D],O=h.length;_.argument(O<65536,"Table "+s.tableName+" too big."),h[R]=O>>8,h[R+1]=255&O,h=h.concat(x[D])}return h},A.TABLE=function(s){let h=0,C=s.fields.length;for(let x=0;x<C;x+=1){let k=s.fields[x],D=A[k.type];_.argument(D!==void 0,"No sizeOf function for field type "+k.type+" ("+k.name+")");let R=s[k.name];R===void 0&&(R=k.value),h+=D(R),k.type==="TABLE"&&(h+=2)}return h},y.RECORD=y.TABLE,A.RECORD=A.TABLE,y.LITERAL=function(s){return s},A.LITERAL=function(s){return s.length},U.prototype.encode=function(){return y.TABLE(this)},U.prototype.sizeOf=function(){return A.TABLE(this)},e0.prototype=Object.create(U.prototype),e0.prototype.constructor=e0,c0.prototype=Object.create(U.prototype),c0.prototype.constructor=c0,j.prototype=Object.create(U.prototype),j.prototype.constructor=j,q.prototype=Object.create(U.prototype),q.prototype.constructor=q;let G={Table:U,Record:U,Coverage:e0,ScriptList:c0,FeatureList:j,LookupList:q,ushortList:K,tableList:Q,recordList:r0};function t0(s,h){return s.getUint8(h)}function h0(s,h){return s.getUint16(h,!1)}function A0(s,h){return s.getUint32(h,!1)}function s0(s,h){return s.getInt16(h,!1)+s.getUint16(h+2,!1)/65535}let H0={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function J(s,h){this.data=s,this.offset=h,this.relativeOffset=0}J.prototype.parseByte=function(){let s=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,s},J.prototype.parseChar=function(){let s=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,s},J.prototype.parseCard8=J.prototype.parseByte,J.prototype.parseUShort=function(){let s=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,s},J.prototype.parseCard16=J.prototype.parseUShort,J.prototype.parseSID=J.prototype.parseUShort,J.prototype.parseOffset16=J.prototype.parseUShort,J.prototype.parseShort=function(){let s=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,s},J.prototype.parseF2Dot14=function(){let s=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,s},J.prototype.parseULong=function(){let s=A0(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,s},J.prototype.parseOffset32=J.prototype.parseULong,J.prototype.parseFixed=function(){let s=s0(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,s},J.prototype.parseString=function(s){let h=this.data,C=this.offset+this.relativeOffset,x="";this.relativeOffset+=s;for(let k=0;k<s;k++)x+=String.fromCharCode(h.getUint8(C+k));return x},J.prototype.parseTag=function(){return this.parseString(4)},J.prototype.parseLongDateTime=function(){let s=A0(this.data,this.offset+this.relativeOffset+4);return s-=2082844800,this.relativeOffset+=8,s},J.prototype.parseVersion=function(s){let h=h0(this.data,this.offset+this.relativeOffset),C=h0(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,s===void 0&&(s=4096),h+C/s/10},J.prototype.skip=function(s,h){h===void 0&&(h=1),this.relativeOffset+=H0[s]*h},J.prototype.parseULongList=function(s){s===void 0&&(s=this.parseULong());let h=new Array(s),C=this.data,x=this.offset+this.relativeOffset;for(let k=0;k<s;k++)h[k]=C.getUint32(x),x+=4;return this.relativeOffset+=4*s,h},J.prototype.parseOffset16List=J.prototype.parseUShortList=function(s){s===void 0&&(s=this.parseUShort());let h=new Array(s),C=this.data,x=this.offset+this.relativeOffset;for(let k=0;k<s;k++)h[k]=C.getUint16(x),x+=2;return this.relativeOffset+=2*s,h},J.prototype.parseShortList=function(s){let h=new Array(s),C=this.data,x=this.offset+this.relativeOffset;for(let k=0;k<s;k++)h[k]=C.getInt16(x),x+=2;return this.relativeOffset+=2*s,h},J.prototype.parseByteList=function(s){let h=new Array(s),C=this.data,x=this.offset+this.relativeOffset;for(let k=0;k<s;k++)h[k]=C.getUint8(x++);return this.relativeOffset+=s,h},J.prototype.parseList=function(s,h){h||(h=s,s=this.parseUShort());let C=new Array(s);for(let x=0;x<s;x++)C[x]=h.call(this);return C},J.prototype.parseList32=function(s,h){h||(h=s,s=this.parseULong());let C=new Array(s);for(let x=0;x<s;x++)C[x]=h.call(this);return C},J.prototype.parseRecordList=function(s,h){h||(h=s,s=this.parseUShort());let C=new Array(s),x=Object.keys(h);for(let k=0;k<s;k++){let D={};for(let R=0;R<x.length;R++){let O=x[R],F=h[O];D[O]=F.call(this)}C[k]=D}return C},J.prototype.parseRecordList32=function(s,h){h||(h=s,s=this.parseULong());let C=new Array(s),x=Object.keys(h);for(let k=0;k<s;k++){let D={};for(let R=0;R<x.length;R++){let O=x[R],F=h[O];D[O]=F.call(this)}C[k]=D}return C},J.prototype.parseStruct=function(s){if(typeof s=="function")return s.call(this);{let h=Object.keys(s),C={};for(let x=0;x<h.length;x++){let k=h[x],D=s[k];C[k]=D.call(this)}return C}},J.prototype.parseValueRecord=function(s){if(s===void 0&&(s=this.parseUShort()),s===0)return;let h={};return 1&s&&(h.xPlacement=this.parseShort()),2&s&&(h.yPlacement=this.parseShort()),4&s&&(h.xAdvance=this.parseShort()),8&s&&(h.yAdvance=this.parseShort()),16&s&&(h.xPlaDevice=void 0,this.parseShort()),32&s&&(h.yPlaDevice=void 0,this.parseShort()),64&s&&(h.xAdvDevice=void 0,this.parseShort()),128&s&&(h.yAdvDevice=void 0,this.parseShort()),h},J.prototype.parseValueRecordList=function(){let s=this.parseUShort(),h=this.parseUShort(),C=new Array(h);for(let x=0;x<h;x++)C[x]=this.parseValueRecord(s);return C},J.prototype.parsePointer=function(s){let h=this.parseOffset16();if(h>0)return new J(this.data,this.offset+h).parseStruct(s)},J.prototype.parsePointer32=function(s){let h=this.parseOffset32();if(h>0)return new J(this.data,this.offset+h).parseStruct(s)},J.prototype.parseListOfLists=function(s){let h=this.parseOffset16List(),C=h.length,x=this.relativeOffset,k=new Array(C);for(let D=0;D<C;D++){let R=h[D];if(R!==0)if(this.relativeOffset=R,s){let O=this.parseOffset16List(),F=new Array(O.length);for(let W=0;W<O.length;W++)this.relativeOffset=R+O[W],F[W]=s.call(this);k[D]=F}else k[D]=this.parseUShortList();else k[D]=void 0}return this.relativeOffset=x,k},J.prototype.parseCoverage=function(){let s=this.offset+this.relativeOffset,h=this.parseUShort(),C=this.parseUShort();if(h===1)return{format:1,glyphs:this.parseUShortList(C)};if(h===2){let x=new Array(C);for(let k=0;k<C;k++)x[k]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:x}}throw new Error("0x"+s.toString(16)+": Coverage format must be 1 or 2.")},J.prototype.parseClassDef=function(){let s=this.offset+this.relativeOffset,h=this.parseUShort();if(h===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(h===2)return{format:2,ranges:this.parseRecordList({start:J.uShort,end:J.uShort,classId:J.uShort})};throw new Error("0x"+s.toString(16)+": ClassDef format must be 1 or 2.")},J.list=function(s,h){return function(){return this.parseList(s,h)}},J.list32=function(s,h){return function(){return this.parseList32(s,h)}},J.recordList=function(s,h){return function(){return this.parseRecordList(s,h)}},J.recordList32=function(s,h){return function(){return this.parseRecordList32(s,h)}},J.pointer=function(s){return function(){return this.parsePointer(s)}},J.pointer32=function(s){return function(){return this.parsePointer32(s)}},J.tag=J.prototype.parseTag,J.byte=J.prototype.parseByte,J.uShort=J.offset16=J.prototype.parseUShort,J.uShortList=J.prototype.parseUShortList,J.uLong=J.offset32=J.prototype.parseULong,J.uLongList=J.prototype.parseULongList,J.struct=J.prototype.parseStruct,J.coverage=J.prototype.parseCoverage,J.classDef=J.prototype.parseClassDef;let D0={reserved:J.uShort,reqFeatureIndex:J.uShort,featureIndexes:J.uShortList};J.prototype.parseScriptList=function(){return this.parsePointer(J.recordList({tag:J.tag,script:J.pointer({defaultLangSys:J.pointer(D0),langSysRecords:J.recordList({tag:J.tag,langSys:J.pointer(D0)})})}))||[]},J.prototype.parseFeatureList=function(){return this.parsePointer(J.recordList({tag:J.tag,feature:J.pointer({featureParams:J.offset16,lookupListIndexes:J.uShortList})}))||[]},J.prototype.parseLookupList=function(s){return this.parsePointer(J.list(J.pointer(function(){let h=this.parseUShort();_.argument(1<=h&&h<=9,"GPOS/GSUB lookup type "+h+" unknown.");let C=this.parseUShort(),x=16&C;return{lookupType:h,lookupFlag:C,subtables:this.parseList(J.pointer(s[h])),markFilteringSet:x?this.parseUShort():void 0}})))||[]},J.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){let s=this.parseUShort(),h=this.parseUShort();return _.argument(s===1&&h<1,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:J.offset32,featureTableSubstitutionOffset:J.offset32})})||[]};let u0={getByte:t0,getCard8:t0,getUShort:h0,getCard16:h0,getShort:function(s,h){return s.getInt16(h,!1)},getULong:A0,getFixed:s0,getTag:function(s,h){let C="";for(let x=h;x<h+4;x+=1)C+=String.fromCharCode(s.getInt8(x));return C},getOffset:function(s,h,C){let x=0;for(let k=0;k<C;k+=1)x<<=8,x+=s.getUint8(h+k);return x},getBytes:function(s,h,C){let x=[];for(let k=h;k<C;k+=1)x.push(s.getUint8(k));return x},bytesToString:function(s){let h="";for(let C=0;C<s.length;C+=1)h+=String.fromCharCode(s[C]);return h},Parser:J};function H2(s,h,C){s.segments.push({end:h,start:h,delta:-(h-C),offset:0,glyphIndex:C})}let x0=function(s,h){let C={};C.version=u0.getUShort(s,h),_.argument(C.version===0,"cmap table version should be 0."),C.numTables=u0.getUShort(s,h+2);let x=-1;for(let D=C.numTables-1;D>=0;D-=1){let R=u0.getUShort(s,h+4+8*D),O=u0.getUShort(s,h+4+8*D+2);if(R===3&&(O===0||O===1||O===10)){x=u0.getULong(s,h+4+8*D+4);break}}if(x===-1)throw new Error("No valid cmap sub-tables found.");let k=new u0.Parser(s,h+x);if(C.format=k.parseUShort(),C.format===12)(function(D,R){let O;R.parseUShort(),D.length=R.parseULong(),D.language=R.parseULong(),D.groupCount=O=R.parseULong(),D.glyphIndexMap={};for(let F=0;F<O;F+=1){let W=R.parseULong(),$=R.parseULong(),Y=R.parseULong();for(let X=W;X<=$;X+=1)D.glyphIndexMap[X]=Y,Y++}})(C,k);else{if(C.format!==4)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+C.format+").");(function(D,R,O,F,W){let $;D.length=R.parseUShort(),D.language=R.parseUShort(),D.segCount=$=R.parseUShort()>>1,R.skip("uShort",3),D.glyphIndexMap={};let Y=new u0.Parser(O,F+W+14),X=new u0.Parser(O,F+W+16+2*$),m0=new u0.Parser(O,F+W+16+4*$),l0=new u0.Parser(O,F+W+16+6*$),C0=F+W+16+8*$;for(let i0=0;i0<$-1;i0+=1){let n0,y0=Y.parseUShort(),L0=X.parseUShort(),T0=m0.parseShort(),p0=l0.parseUShort();for(let d0=L0;d0<=y0;d0+=1)p0!==0?(C0=l0.offset+l0.relativeOffset-2,C0+=p0,C0+=2*(d0-L0),n0=u0.getUShort(O,C0),n0!==0&&(n0=n0+T0&65535)):n0=d0+T0&65535,D.glyphIndexMap[d0]=n0}})(C,k,s,h,x)}return C},w0=function(s){let h,C=!0;for(h=s.length-1;h>0;h-=1)if(s.get(h).unicode>65535){console.log("Adding CMAP format 12 (needed!)"),C=!1;break}let x=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:C?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:C?12:20}];C||(x=x.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),x=x.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);let k=new G.Table("cmap",x);for(k.segments=[],h=0;h<s.length;h+=1){let m0=s.get(h);for(let l0=0;l0<m0.unicodes.length;l0+=1)H2(k,m0.unicodes[l0],h);k.segments=k.segments.sort(function(l0,C0){return l0.start-C0.start})}(function(m0){m0.segments.push({end:65535,start:65535,delta:1,offset:0})})(k);let D=k.segments.length,R=0,O=[],F=[],W=[],$=[],Y=[],X=[];for(h=0;h<D;h+=1){let m0=k.segments[h];m0.end<=65535&&m0.start<=65535?(O=O.concat({name:"end_"+h,type:"USHORT",value:m0.end}),F=F.concat({name:"start_"+h,type:"USHORT",value:m0.start}),W=W.concat({name:"idDelta_"+h,type:"SHORT",value:m0.delta}),$=$.concat({name:"idRangeOffset_"+h,type:"USHORT",value:m0.offset}),m0.glyphId!==void 0&&(Y=Y.concat({name:"glyph_"+h,type:"USHORT",value:m0.glyphId}))):R+=1,C||m0.glyphIndex===void 0||(X=X.concat({name:"cmap12Start_"+h,type:"ULONG",value:m0.start}),X=X.concat({name:"cmap12End_"+h,type:"ULONG",value:m0.end}),X=X.concat({name:"cmap12Glyph_"+h,type:"ULONG",value:m0.glyphIndex}))}if(k.segCountX2=2*(D-R),k.searchRange=2*Math.pow(2,Math.floor(Math.log(D-R)/Math.log(2))),k.entrySelector=Math.log(k.searchRange/2)/Math.log(2),k.rangeShift=k.segCountX2-k.searchRange,k.fields=k.fields.concat(O),k.fields.push({name:"reservedPad",type:"USHORT",value:0}),k.fields=k.fields.concat(F),k.fields=k.fields.concat(W),k.fields=k.fields.concat($),k.fields=k.fields.concat(Y),k.cmap4Length=14+2*O.length+2+2*F.length+2*W.length+2*$.length+2*Y.length,!C){let m0=16+4*X.length;k.cmap12Offset=20+k.cmap4Length,k.fields=k.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:m0},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:X.length/3}]),k.fields=k.fields.concat(X)}return k},_0=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],g0=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],M0=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],R0=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function F0(s){this.font=s}function x1(s){this.cmap=s}function z1(s,h){this.encoding=s,this.charset=h}function P0(s){switch(s.version){case 1:this.names=R0.slice();break;case 2:this.names=new Array(s.numberOfGlyphs);for(let h=0;h<s.numberOfGlyphs;h++)s.glyphNameIndex[h]<R0.length?this.names[h]=R0[s.glyphNameIndex[h]]:this.names[h]=s.names[s.glyphNameIndex[h]-R0.length];break;case 2.5:this.names=new Array(s.numberOfGlyphs);for(let h=0;h<s.numberOfGlyphs;h++)this.names[h]=R0[h+s.glyphNameIndex[h]];break;default:this.names=[]}}F0.prototype.charToGlyphIndex=function(s){let h=s.charCodeAt(0),C=this.font.glyphs;if(C)for(let x=0;x<C.length;x+=1){let k=C.get(x);for(let D=0;D<k.unicodes.length;D+=1)if(k.unicodes[D]===h)return x}return null},x1.prototype.charToGlyphIndex=function(s){return this.cmap.glyphIndexMap[s.charCodeAt(0)]||0},z1.prototype.charToGlyphIndex=function(s){let h=s.charCodeAt(0),C=this.encoding[h];return this.charset.indexOf(C)},P0.prototype.nameToGlyphIndex=function(s){return this.names.indexOf(s)},P0.prototype.glyphIndexToName=function(s){return this.names[s]};let k0=function(s,h,C,x,k){s.beginPath(),s.moveTo(h,C),s.lineTo(x,k),s.stroke()};function K0(s,h,C,x,k){let D;return(h&x)>0?(D=s.parseByte(),!(h&k)&&(D=-D),D=C+D):D=(h&k)>0?C:C+s.parseShort(),D}function D2(s,h,C){let x=new u0.Parser(h,C),k,D;if(s.numberOfContours=x.parseShort(),s._xMin=x.parseShort(),s._yMin=x.parseShort(),s._xMax=x.parseShort(),s._yMax=x.parseShort(),s.numberOfContours>0){let R=s.endPointIndices=[];for(let F=0;F<s.numberOfContours;F+=1)R.push(x.parseUShort());s.instructionLength=x.parseUShort(),s.instructions=[];for(let F=0;F<s.instructionLength;F+=1)s.instructions.push(x.parseByte());let O=R[R.length-1]+1;k=[];for(let F=0;F<O;F+=1)if(D=x.parseByte(),k.push(D),(8&D)>0){let W=x.parseByte();for(let $=0;$<W;$+=1)k.push(D),F+=1}if(_.argument(k.length===O,"Bad flags."),R.length>0){let F=[],W;if(O>0){for(let X=0;X<O;X+=1)D=k[X],W={},W.onCurve=!!(1&D),W.lastPointOfContour=R.indexOf(X)>=0,F.push(W);let $=0;for(let X=0;X<O;X+=1)D=k[X],W=F[X],W.x=K0(x,D,$,2,16),$=W.x;let Y=0;for(let X=0;X<O;X+=1)D=k[X],W=F[X],W.y=K0(x,D,Y,4,32),Y=W.y}s.points=F}else s.points=[]}else if(s.numberOfContours===0)s.points=[];else{s.isComposite=!0,s.points=[],s.components=[];let R=!0;for(;R;){k=x.parseUShort();let O={glyphIndex:x.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&k)>0?(2&k)>0?(O.dx=x.parseShort(),O.dy=x.parseShort()):O.matchedPoints=[x.parseUShort(),x.parseUShort()]:(2&k)>0?(O.dx=x.parseChar(),O.dy=x.parseChar()):O.matchedPoints=[x.parseByte(),x.parseByte()],(8&k)>0?O.xScale=O.yScale=x.parseF2Dot14():(64&k)>0?(O.xScale=x.parseF2Dot14(),O.yScale=x.parseF2Dot14()):(128&k)>0&&(O.xScale=x.parseF2Dot14(),O.scale01=x.parseF2Dot14(),O.scale10=x.parseF2Dot14(),O.yScale=x.parseF2Dot14()),s.components.push(O),R=!!(32&k)}if(256&k){s.instructionLength=x.parseUShort(),s.instructions=[];for(let O=0;O<s.instructionLength;O+=1)s.instructions.push(x.parseByte())}}}function E1(s,h){let C=[];for(let x=0;x<s.length;x+=1){let k=s[x],D={x:h.xScale*k.x+h.scale01*k.y+h.dx,y:h.scale10*k.x+h.yScale*k.y+h.dy,onCurve:k.onCurve,lastPointOfContour:k.lastPointOfContour};C.push(D)}return C}function R1(s){let h=new r;if(!s)return h;let C=function(x){let k=[],D=[];for(let R=0;R<x.length;R+=1){let O=x[R];D.push(O),O.lastPointOfContour&&(k.push(D),D=[])}return _.argument(D.length===0,"There are still points left in the current contour."),k}(s);for(let x=0;x<C.length;++x){let k=C[x],D=null,R=k[k.length-1],O=k[0];if(R.onCurve)h.moveTo(R.x,R.y);else if(O.onCurve)h.moveTo(O.x,O.y);else{let F={x:.5*(R.x+O.x),y:.5*(R.y+O.y)};h.moveTo(F.x,F.y)}for(let F=0;F<k.length;++F)if(D=R,R=O,O=k[(F+1)%k.length],R.onCurve)h.lineTo(R.x,R.y);else{let W=D,$=O;D.onCurve||(W={x:.5*(R.x+D.x),y:.5*(R.y+D.y)},h.lineTo(W.x,W.y)),O.onCurve||($={x:.5*(R.x+O.x),y:.5*(R.y+O.y)}),h.lineTo(W.x,W.y),h.quadraticCurveTo(R.x,R.y,$.x,$.y)}h.closePath()}return h}function u3(s,h){if(h.isComposite)for(let C=0;C<h.components.length;C+=1){let x=h.components[C],k=s.get(x.glyphIndex);if(k.getPath(),k.points){let D;if(x.matchedPoints===void 0)D=E1(k.points,x);else{if(x.matchedPoints[0]>h.points.length-1||x.matchedPoints[1]>k.points.length-1)throw Error("Matched points out of range in "+h.name);let R=h.points[x.matchedPoints[0]],O=k.points[x.matchedPoints[1]],F={xScale:x.xScale,scale01:x.scale01,scale10:x.scale10,yScale:x.yScale,dx:0,dy:0};O=E1([O],F)[0],F.dx=R.x-O.x,F.dy=R.y-O.y,D=E1(k.points,F)}h.points=h.points.concat(D)}}return R1(h.points)}let G8={getPath:R1,parse:function(s,h,C,x){let k=new B3.GlyphSet(x);for(let D=0;D<C.length-1;D+=1){let R=C[D];R!==C[D+1]?k.push(D,B3.ttfGlyphLoader(x,D,D2,s,h+R,u3)):k.push(D,B3.glyphLoader(x,D))}return k}};function C2(s){this.bindConstructorValues(s)}C2.prototype.bindConstructorValues=function(s){this.index=s.index||0,this.name=s.name||null,this.unicode=s.unicode||void 0,this.unicodes=s.unicodes||s.unicode!==void 0?[s.unicode]:[],s.xMin&&(this.xMin=s.xMin),s.yMin&&(this.yMin=s.yMin),s.xMax&&(this.xMax=s.xMax),s.yMax&&(this.yMax=s.yMax),s.advanceWidth&&(this.advanceWidth=s.advanceWidth),Object.defineProperty(this,"path",function(h,C){let x=C||new r;return{configurable:!0,get:function(){return typeof x=="function"&&(x=x()),x},set:function(k){x=k}}}(0,s.path))},C2.prototype.addUnicode=function(s){this.unicodes.length===0&&(this.unicode=s),this.unicodes.push(s)},C2.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},C2.prototype.getPath=function(s,h,C,x,k){let D,R;s=s!==void 0?s:0,h=h!==void 0?h:0,C=C!==void 0?C:72,x||(x={});let O=x.xScale,F=x.yScale;if(x.hinting&&k&&k.hinting&&(R=this.path&&k.hinting.exec(this,C)),R)D=G8.getPath(R).commands,s=Math.round(s),h=Math.round(h),O=F=1;else{D=this.path.commands;let $=1/this.path.unitsPerEm*C;O===void 0&&(O=$),F===void 0&&(F=$)}let W=new r;for(let $=0;$<D.length;$+=1){let Y=D[$];Y.type==="M"?W.moveTo(s+Y.x*O,h+-Y.y*F):Y.type==="L"?W.lineTo(s+Y.x*O,h+-Y.y*F):Y.type==="Q"?W.quadraticCurveTo(s+Y.x1*O,h+-Y.y1*F,s+Y.x*O,h+-Y.y*F):Y.type==="C"?W.curveTo(s+Y.x1*O,h+-Y.y1*F,s+Y.x2*O,h+-Y.y2*F,s+Y.x*O,h+-Y.y*F):Y.type==="Z"&&W.closePath()}return W},C2.prototype.getContours=function(){if(this.points===void 0)return[];let s=[],h=[];for(let C=0;C<this.points.length;C+=1){let x=this.points[C];h.push(x),x.lastPointOfContour&&(s.push(h),h=[])}return _.argument(h.length===0,"There are still points left in the current contour."),s},C2.prototype.getMetrics=function(){let s=this.path.commands,h=[],C=[];for(let k=0;k<s.length;k+=1){let D=s[k];D.type!=="Z"&&(h.push(D.x),C.push(D.y)),D.type!=="Q"&&D.type!=="C"||(h.push(D.x1),C.push(D.y1)),D.type==="C"&&(h.push(D.x2),C.push(D.y2))}let x={xMin:Math.min.apply(null,h),yMin:Math.min.apply(null,C),xMax:Math.max.apply(null,h),yMax:Math.max.apply(null,C),leftSideBearing:this.leftSideBearing};return isFinite(x.xMin)||(x.xMin=0),isFinite(x.xMax)||(x.xMax=this.advanceWidth),isFinite(x.yMin)||(x.yMin=0),isFinite(x.yMax)||(x.yMax=0),x.rightSideBearing=this.advanceWidth-x.leftSideBearing-(x.xMax-x.xMin),x},C2.prototype.draw=function(s,h,C,x,k){this.getPath(h,C,x,k).draw(s)},C2.prototype.drawPoints=function(s,h,C,x){function k(W,$,Y,X){let m0=2*Math.PI;s.beginPath();for(let l0=0;l0<W.length;l0+=1)s.moveTo($+W[l0].x*X,Y+W[l0].y*X),s.arc($+W[l0].x*X,Y+W[l0].y*X,2,0,m0,!1);s.closePath(),s.fill()}h=h!==void 0?h:0,C=C!==void 0?C:0,x=x!==void 0?x:24;let D=1/this.path.unitsPerEm*x,R=[],O=[],F=this.path;for(let W=0;W<F.commands.length;W+=1){let $=F.commands[W];$.x!==void 0&&R.push({x:$.x,y:-$.y}),$.x1!==void 0&&O.push({x:$.x1,y:-$.y1}),$.x2!==void 0&&O.push({x:$.x2,y:-$.y2})}s.fillStyle="blue",k(R,h,C,D),s.fillStyle="red",k(O,h,C,D)},C2.prototype.drawMetrics=function(s,h,C,x){let k;h=h!==void 0?h:0,C=C!==void 0?C:0,x=x!==void 0?x:24,k=1/this.path.unitsPerEm*x,s.lineWidth=1,s.strokeStyle="black",k0(s,h,-1e4,h,1e4),k0(s,-1e4,C,1e4,C);let D=this.xMin||0,R=this.yMin||0,O=this.xMax||0,F=this.yMax||0,W=this.advanceWidth||0;s.strokeStyle="blue",k0(s,h+D*k,-1e4,h+D*k,1e4),k0(s,h+O*k,-1e4,h+O*k,1e4),k0(s,-1e4,C+-R*k,1e4,C+-R*k),k0(s,-1e4,C+-F*k,1e4,C+-F*k),s.strokeStyle="green",k0(s,h+W*k,-1e4,h+W*k,1e4)};let y5=C2;function C5(s,h,C){Object.defineProperty(s,h,{get:function(){return s.path,s[C]},set:function(x){s[C]=x},enumerable:!0,configurable:!0})}function k6(s,h){if(this.font=s,this.glyphs={},Array.isArray(h))for(let C=0;C<h.length;C++)this.glyphs[C]=h[C];this.length=h&&h.length||0}k6.prototype.get=function(s){return typeof this.glyphs[s]=="function"&&(this.glyphs[s]=this.glyphs[s]()),this.glyphs[s]},k6.prototype.push=function(s,h){this.glyphs[s]=h,this.length++};let B3={GlyphSet:k6,glyphLoader:function(s,h){return new y5({index:h,font:s})},ttfGlyphLoader:function(s,h,C,x,k,D){return function(){let R=new y5({index:h,font:s});return R.path=function(){C(R,x,k);let O=D(s.glyphs,R);return O.unitsPerEm=s.unitsPerEm,O},C5(R,"xMin","_xMin"),C5(R,"xMax","_xMax"),C5(R,"yMin","_yMin"),C5(R,"yMax","_yMax"),R}},cffGlyphLoader:function(s,h,C,x){return function(){let k=new y5({index:h,font:s});return k.path=function(){let D=C(s,k,x);return D.unitsPerEm=s.unitsPerEm,D},k}}};function q8(s,h){if(s===h)return!0;if(Array.isArray(s)&&Array.isArray(h)){if(s.length!==h.length)return!1;for(let C=0;C<s.length;C+=1)if(!q8(s[C],h[C]))return!1;return!0}return!1}function E6(s){let h;return h=s.length<1240?107:s.length<33900?1131:32768,h}function W2(s,h,C){let x=[],k=[],D=u0.getCard16(s,h),R,O;if(D!==0){let F=u0.getByte(s,h+2);R=h+(D+1)*F+2;let W=h+3;for(let $=0;$<D+1;$+=1)x.push(u0.getOffset(s,W,F)),W+=F;O=R+x[D]}else O=h+2;for(let F=0;F<x.length-1;F+=1){let W=u0.getBytes(s,R+x[F],R+x[F+1]);C&&(W=C(W)),k.push(W)}return{objects:k,startOffset:h,endOffset:O}}function li(s,h){let C,x,k,D;if(h===28)return C=s.parseByte(),x=s.parseByte(),C<<8|x;if(h===29)return C=s.parseByte(),x=s.parseByte(),k=s.parseByte(),D=s.parseByte(),C<<24|x<<16|k<<8|D;if(h===30)return function(R){let O="",F=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];for(;;){let W=R.parseByte(),$=W>>4,Y=15&W;if($===15||(O+=F[$],Y===15))break;O+=F[Y]}return parseFloat(O)}(s);if(h>=32&&h<=246)return h-139;if(h>=247&&h<=250)return C=s.parseByte(),256*(h-247)+C+108;if(h>=251&&h<=254)return C=s.parseByte(),256*-(h-251)-C-108;throw new Error("Invalid b0 "+h)}function $8(s,h,C){h=h!==void 0?h:0;let x=new u0.Parser(s,h),k=[],D=[];for(C=C!==void 0?C:s.length;x.relativeOffset<C;){let R=x.parseByte();R<=21?(R===12&&(R=1200+x.parseByte()),k.push([R,D]),D=[]):D.push(li(x,R))}return function(R){let O={};for(let F=0;F<R.length;F+=1){let W=R[F][0],$=R[F][1],Y;if(Y=$.length===1?$[0]:$,O.hasOwnProperty(W)&&!isNaN(O[W]))throw new Error("Object "+O+" already has key "+W);O[W]=Y}return O}(k)}function y4(s,h){return h<=390?_0[h]:s[h-391]}function K8(s,h,C){let x={},k;for(let D=0;D<h.length;D+=1){let R=h[D];if(Array.isArray(R.type)){let O=[];O.length=R.type.length;for(let F=0;F<R.type.length;F++)k=s[R.op]!==void 0?s[R.op][F]:void 0,k===void 0&&(k=R.value!==void 0&&R.value[F]!==void 0?R.value[F]:null),R.type[F]==="SID"&&(k=y4(C,k)),O[F]=k;x[R.name]=O}else k=s[R.op],k===void 0&&(k=R.value!==void 0?R.value:null),R.type==="SID"&&(k=y4(C,k)),x[R.name]=k}return x}let Y8=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],X8=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function oi(s,h){return K8($8(s,0,s.byteLength),Y8,h)}function J8(s,h,C,x){return K8($8(s,h,C),X8,x)}function Q8(s,h,C,x){let k=[];for(let D=0;D<C.length;D+=1){let R=oi(new DataView(new Uint8Array(C[D]).buffer),x);R._subrs=[],R._subrsBias=0;let O=R.private[0],F=R.private[1];if(O!==0&&F!==0){let W=J8(s,F+h,O,x);if(R._defaultWidthX=W.defaultWidthX,R._nominalWidthX=W.nominalWidthX,W.subrs!==0){let $=W2(s,F+W.subrs+h);R._subrs=$.objects,R._subrsBias=E6(R._subrs)}R._privateDict=W}k.push(R)}return k}function ni(s,h,C){let x,k,D,R,O=new r,F=[],W,$,Y,X,m0=0,l0=!1,C0=!1,i0=0,n0=0;if(s.isCIDFont){let p0=s.tables.cff.topDict._fdSelect[h.index],d0=s.tables.cff.topDict._fdArray[p0];W=d0._subrs,$=d0._subrsBias,Y=d0._defaultWidthX,X=d0._nominalWidthX}else W=s.tables.cff.topDict._subrs,$=s.tables.cff.topDict._subrsBias,Y=s.tables.cff.topDict._defaultWidthX,X=s.tables.cff.topDict._nominalWidthX;let y0=Y;function L0(p0,d0){C0&&O.closePath(),O.moveTo(p0,d0),C0=!0}function T0(){let p0;p0=F.length%2!=0,p0&&!l0&&(y0=F.shift()+X),m0+=F.length>>1,F.length=0,l0=!0}return function p0(d0){let f0,O0,E0,a1,b1,S1,m1,y1,h1,w1,v1,H1,X0=0;for(;X0<d0.length;){let C1=d0[X0];switch(X0+=1,C1){case 1:case 3:case 18:case 23:T0();break;case 4:F.length>1&&!l0&&(y0=F.shift()+X,l0=!0),n0+=F.pop(),L0(i0,n0);break;case 5:for(;F.length>0;)i0+=F.shift(),n0+=F.shift(),O.lineTo(i0,n0);break;case 6:for(;F.length>0&&(i0+=F.shift(),O.lineTo(i0,n0),F.length!==0);)n0+=F.shift(),O.lineTo(i0,n0);break;case 7:for(;F.length>0&&(n0+=F.shift(),O.lineTo(i0,n0),F.length!==0);)i0+=F.shift(),O.lineTo(i0,n0);break;case 8:for(;F.length>0;)x=i0+F.shift(),k=n0+F.shift(),D=x+F.shift(),R=k+F.shift(),i0=D+F.shift(),n0=R+F.shift(),O.curveTo(x,k,D,R,i0,n0);break;case 10:b1=F.pop()+$,S1=W[b1],S1&&p0(S1);break;case 11:return;case 12:switch(C1=d0[X0],X0+=1,C1){case 35:x=i0+F.shift(),k=n0+F.shift(),D=x+F.shift(),R=k+F.shift(),m1=D+F.shift(),y1=R+F.shift(),h1=m1+F.shift(),w1=y1+F.shift(),v1=h1+F.shift(),H1=w1+F.shift(),i0=v1+F.shift(),n0=H1+F.shift(),F.shift(),O.curveTo(x,k,D,R,m1,y1),O.curveTo(h1,w1,v1,H1,i0,n0);break;case 34:x=i0+F.shift(),k=n0,D=x+F.shift(),R=k+F.shift(),m1=D+F.shift(),y1=R,h1=m1+F.shift(),w1=R,v1=h1+F.shift(),H1=n0,i0=v1+F.shift(),O.curveTo(x,k,D,R,m1,y1),O.curveTo(h1,w1,v1,H1,i0,n0);break;case 36:x=i0+F.shift(),k=n0+F.shift(),D=x+F.shift(),R=k+F.shift(),m1=D+F.shift(),y1=R,h1=m1+F.shift(),w1=R,v1=h1+F.shift(),H1=w1+F.shift(),i0=v1+F.shift(),O.curveTo(x,k,D,R,m1,y1),O.curveTo(h1,w1,v1,H1,i0,n0);break;case 37:x=i0+F.shift(),k=n0+F.shift(),D=x+F.shift(),R=k+F.shift(),m1=D+F.shift(),y1=R+F.shift(),h1=m1+F.shift(),w1=y1+F.shift(),v1=h1+F.shift(),H1=w1+F.shift(),Math.abs(v1-i0)>Math.abs(H1-n0)?i0=v1+F.shift():n0=H1+F.shift(),O.curveTo(x,k,D,R,m1,y1),O.curveTo(h1,w1,v1,H1,i0,n0);break;default:console.log("Glyph "+h.index+": unknown operator 1200"+C1),F.length=0}break;case 14:F.length>0&&!l0&&(y0=F.shift()+X,l0=!0),C0&&(O.closePath(),C0=!1);break;case 19:case 20:T0(),X0+=m0+7>>3;break;case 21:F.length>2&&!l0&&(y0=F.shift()+X,l0=!0),n0+=F.pop(),i0+=F.pop(),L0(i0,n0);break;case 22:F.length>1&&!l0&&(y0=F.shift()+X,l0=!0),i0+=F.pop(),L0(i0,n0);break;case 24:for(;F.length>2;)x=i0+F.shift(),k=n0+F.shift(),D=x+F.shift(),R=k+F.shift(),i0=D+F.shift(),n0=R+F.shift(),O.curveTo(x,k,D,R,i0,n0);i0+=F.shift(),n0+=F.shift(),O.lineTo(i0,n0);break;case 25:for(;F.length>6;)i0+=F.shift(),n0+=F.shift(),O.lineTo(i0,n0);x=i0+F.shift(),k=n0+F.shift(),D=x+F.shift(),R=k+F.shift(),i0=D+F.shift(),n0=R+F.shift(),O.curveTo(x,k,D,R,i0,n0);break;case 26:for(F.length%2&&(i0+=F.shift());F.length>0;)x=i0,k=n0+F.shift(),D=x+F.shift(),R=k+F.shift(),i0=D,n0=R+F.shift(),O.curveTo(x,k,D,R,i0,n0);break;case 27:for(F.length%2&&(n0+=F.shift());F.length>0;)x=i0+F.shift(),k=n0,D=x+F.shift(),R=k+F.shift(),i0=D+F.shift(),n0=R,O.curveTo(x,k,D,R,i0,n0);break;case 28:f0=d0[X0],O0=d0[X0+1],F.push((f0<<24|O0<<16)>>16),X0+=2;break;case 29:b1=F.pop()+s.gsubrsBias,S1=s.gsubrs[b1],S1&&p0(S1);break;case 30:for(;F.length>0&&(x=i0,k=n0+F.shift(),D=x+F.shift(),R=k+F.shift(),i0=D+F.shift(),n0=R+(F.length===1?F.shift():0),O.curveTo(x,k,D,R,i0,n0),F.length!==0);)x=i0+F.shift(),k=n0,D=x+F.shift(),R=k+F.shift(),n0=R+F.shift(),i0=D+(F.length===1?F.shift():0),O.curveTo(x,k,D,R,i0,n0);break;case 31:for(;F.length>0&&(x=i0+F.shift(),k=n0,D=x+F.shift(),R=k+F.shift(),n0=R+F.shift(),i0=D+(F.length===1?F.shift():0),O.curveTo(x,k,D,R,i0,n0),F.length!==0);)x=i0,k=n0+F.shift(),D=x+F.shift(),R=k+F.shift(),i0=D+F.shift(),n0=R+(F.length===1?F.shift():0),O.curveTo(x,k,D,R,i0,n0);break;default:C1<32?console.log("Glyph "+h.index+": unknown operator "+C1):C1<247?F.push(C1-139):C1<251?(f0=d0[X0],X0+=1,F.push(256*(C1-247)+f0+108)):C1<255?(f0=d0[X0],X0+=1,F.push(256*-(C1-251)-f0-108)):(f0=d0[X0],O0=d0[X0+1],E0=d0[X0+2],a1=d0[X0+3],X0+=4,F.push((f0<<24|O0<<16|E0<<8|a1)/65536))}}}(C),h.advanceWidth=y0,O}function e9(s,h){let C,x=_0.indexOf(s);return x>=0&&(C=x),x=h.indexOf(s),x>=0?C=x+_0.length:(C=_0.length+h.length,h.push(s)),C}function t9(s,h,C){let x={};for(let k=0;k<s.length;k+=1){let D=s[k],R=h[D.name];R===void 0||q8(R,D.value)||(D.type==="SID"&&(R=e9(R,C)),x[D.op]={name:D.name,type:D.type,value:R})}return x}function s9(s,h){let C=new G.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return C.dict=t9(Y8,s,h),C}function i9(s){let h=new G.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return h.topDicts=[{name:"topDict_0",type:"TABLE",value:s}],h}function hi(s){let h=[],C=s.path;h.push({name:"width",type:"NUMBER",value:s.advanceWidth});let x=0,k=0;for(let D=0;D<C.commands.length;D+=1){let R,O,F=C.commands[D];if(F.type==="Q"){let W=.3333333333333333,$=2/3;F={type:"C",x:F.x,y:F.y,x1:W*x+$*F.x1,y1:W*k+$*F.y1,x2:W*F.x+$*F.x1,y2:W*F.y+$*F.y1}}if(F.type==="M")R=Math.round(F.x-x),O=Math.round(F.y-k),h.push({name:"dx",type:"NUMBER",value:R}),h.push({name:"dy",type:"NUMBER",value:O}),h.push({name:"rmoveto",type:"OP",value:21}),x=Math.round(F.x),k=Math.round(F.y);else if(F.type==="L")R=Math.round(F.x-x),O=Math.round(F.y-k),h.push({name:"dx",type:"NUMBER",value:R}),h.push({name:"dy",type:"NUMBER",value:O}),h.push({name:"rlineto",type:"OP",value:5}),x=Math.round(F.x),k=Math.round(F.y);else if(F.type==="C"){let W=Math.round(F.x1-x),$=Math.round(F.y1-k),Y=Math.round(F.x2-F.x1),X=Math.round(F.y2-F.y1);R=Math.round(F.x-F.x2),O=Math.round(F.y-F.y2),h.push({name:"dx1",type:"NUMBER",value:W}),h.push({name:"dy1",type:"NUMBER",value:$}),h.push({name:"dx2",type:"NUMBER",value:Y}),h.push({name:"dy2",type:"NUMBER",value:X}),h.push({name:"dx",type:"NUMBER",value:R}),h.push({name:"dy",type:"NUMBER",value:O}),h.push({name:"rrcurveto",type:"OP",value:8}),x=Math.round(F.x),k=Math.round(F.y)}}return h.push({name:"endchar",type:"OP",value:14}),h}let ui=function(s,h,C){C.tables.cff={};let x=function(l0,C0){let i0={};return i0.formatMajor=u0.getCard8(l0,C0),i0.formatMinor=u0.getCard8(l0,C0+1),i0.size=u0.getCard8(l0,C0+2),i0.offsetSize=u0.getCard8(l0,C0+3),i0.startOffset=C0,i0.endOffset=C0+4,i0}(s,h),k=W2(s,x.endOffset,u0.bytesToString),D=W2(s,k.endOffset),R=W2(s,D.endOffset,u0.bytesToString),O=W2(s,R.endOffset);C.gsubrs=O.objects,C.gsubrsBias=E6(C.gsubrs);let F=Q8(s,h,D.objects,R.objects);if(F.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+F.length);let W=F[0];if(C.tables.cff.topDict=W,W._privateDict&&(C.defaultWidthX=W._privateDict.defaultWidthX,C.nominalWidthX=W._privateDict.nominalWidthX),W.ros[0]!==void 0&&W.ros[1]!==void 0&&(C.isCIDFont=!0),C.isCIDFont){let l0=W.fdArray,C0=W.fdSelect;if(l0===0||C0===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");l0+=h;let i0=Q8(s,h,W2(s,l0).objects,R.objects);W._fdArray=i0,C0+=h,W._fdSelect=function(n0,y0,L0,T0){let p0=[],d0,f0=new u0.Parser(n0,y0),O0=f0.parseCard8();if(O0===0)for(let E0=0;E0<L0;E0++){if(d0=f0.parseCard8(),d0>=T0)throw new Error("CFF table CID Font FDSelect has bad FD index value "+d0+" (FD count "+T0+")");p0.push(d0)}else{if(O0!==3)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+O0);{let E0=f0.parseCard16(),a1,b1=f0.parseCard16();if(b1!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+b1);for(let S1=0;S1<E0;S1++){if(d0=f0.parseCard8(),a1=f0.parseCard16(),d0>=T0)throw new Error("CFF table CID Font FDSelect has bad FD index value "+d0+" (FD count "+T0+")");if(a1>L0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+a1);for(;b1<a1;b1++)p0.push(d0);b1=a1}if(a1!==L0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+a1)}}return p0}(s,C0,C.numGlyphs,i0.length)}let $=h+W.private[1],Y=J8(s,$,W.private[0],R.objects);if(C.defaultWidthX=Y.defaultWidthX,C.nominalWidthX=Y.nominalWidthX,Y.subrs!==0){let l0=W2(s,$+Y.subrs);C.subrs=l0.objects,C.subrsBias=E6(C.subrs)}else C.subrs=[],C.subrsBias=0;let X=W2(s,h+W.charStrings);C.nGlyphs=X.objects.length;let m0=function(l0,C0,i0,n0){let y0,L0,T0=new u0.Parser(l0,C0);i0-=1;let p0=[".notdef"],d0=T0.parseCard8();if(d0===0)for(let f0=0;f0<i0;f0+=1)y0=T0.parseSID(),p0.push(y4(n0,y0));else if(d0===1)for(;p0.length<=i0;){y0=T0.parseSID(),L0=T0.parseCard8();for(let f0=0;f0<=L0;f0+=1)p0.push(y4(n0,y0)),y0+=1}else{if(d0!==2)throw new Error("Unknown charset format "+d0);for(;p0.length<=i0;){y0=T0.parseSID(),L0=T0.parseCard16();for(let f0=0;f0<=L0;f0+=1)p0.push(y4(n0,y0)),y0+=1}}return p0}(s,h+W.charset,C.nGlyphs,R.objects);W.encoding===0?C.cffEncoding=new z1(g0,m0):W.encoding===1?C.cffEncoding=new z1(M0,m0):C.cffEncoding=function(l0,C0,i0){let n0,y0={},L0=new u0.Parser(l0,C0),T0=L0.parseCard8();if(T0===0){let p0=L0.parseCard8();for(let d0=0;d0<p0;d0+=1)n0=L0.parseCard8(),y0[n0]=d0}else{if(T0!==1)throw new Error("Unknown encoding format "+T0);{let p0=L0.parseCard8();n0=1;for(let d0=0;d0<p0;d0+=1){let f0=L0.parseCard8(),O0=L0.parseCard8();for(let E0=f0;E0<=f0+O0;E0+=1)y0[E0]=n0,n0+=1}}}return new z1(y0,i0)}(s,h+W.encoding,m0),C.encoding=C.encoding||C.cffEncoding,C.glyphs=new B3.GlyphSet(C);for(let l0=0;l0<C.nGlyphs;l0+=1){let C0=X.objects[l0];C.glyphs.push(l0,B3.cffGlyphLoader(C,l0,ni,C0))}},di=function(s,h){let C=new G.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),x=1/h.unitsPerEm,k={version:h.version,fullName:h.fullName,familyName:h.familyName,weight:h.weightName,fontBBox:h.fontBBox||[0,0,0,0],fontMatrix:[x,0,0,x,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},D=[],R;for(let $=1;$<s.length;$+=1)R=s.get($),D.push(R.name);let O=[];C.header=new G.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}]),C.nameIndex=function($){let Y=new G.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);Y.names=[];for(let X=0;X<$.length;X+=1)Y.names.push({name:"name_"+X,type:"NAME",value:$[X]});return Y}([h.postScriptName]);let F=s9(k,O);C.topDictIndex=i9(F),C.globalSubrIndex=new G.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}]),C.charsets=function($,Y){let X=new G.Record("Charsets",[{name:"format",type:"Card8",value:0}]);for(let m0=0;m0<$.length;m0+=1){let l0=e9($[m0],Y);X.fields.push({name:"glyph_"+m0,type:"SID",value:l0})}return X}(D,O),C.charStringsIndex=function($){let Y=new G.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]);for(let X=0;X<$.length;X+=1){let m0=$.get(X),l0=hi(m0);Y.charStrings.push({name:m0.name,type:"CHARSTRING",value:l0})}return Y}(s),C.privateDict=function($,Y){let X=new G.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return X.dict=t9(X8,{},Y),X}(0,O),C.stringIndex=function($){let Y=new G.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);Y.strings=[];for(let X=0;X<$.length;X+=1)Y.strings.push({name:"string_"+X,type:"STRING",value:$[X]});return Y}(O);let W=C.header.sizeOf()+C.nameIndex.sizeOf()+C.topDictIndex.sizeOf()+C.stringIndex.sizeOf()+C.globalSubrIndex.sizeOf();return k.charset=W,k.encoding=0,k.charStrings=k.charset+C.charsets.sizeOf(),k.private[1]=k.charStrings+C.charStringsIndex.sizeOf(),F=s9(k,O),C.topDictIndex=i9(F),C},mi=function(s,h){let C={},x=new u0.Parser(s,h);return C.version=x.parseVersion(),C.fontRevision=Math.round(1e3*x.parseFixed())/1e3,C.checkSumAdjustment=x.parseULong(),C.magicNumber=x.parseULong(),_.argument(C.magicNumber===1594834165,"Font header has wrong magic number."),C.flags=x.parseUShort(),C.unitsPerEm=x.parseUShort(),C.created=x.parseLongDateTime(),C.modified=x.parseLongDateTime(),C.xMin=x.parseShort(),C.yMin=x.parseShort(),C.xMax=x.parseShort(),C.yMax=x.parseShort(),C.macStyle=x.parseUShort(),C.lowestRecPPEM=x.parseUShort(),C.fontDirectionHint=x.parseShort(),C.indexToLocFormat=x.parseShort(),C.glyphDataFormat=x.parseShort(),C},vi=function(s){let h=Math.round(new Date().getTime()/1e3)+2082844800,C=h;return s.createdTimestamp&&(C=s.createdTimestamp+2082844800),new G.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:C},{name:"modified",type:"LONGDATETIME",value:h},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],s)},gi=function(s,h){let C={},x=new u0.Parser(s,h);return C.version=x.parseVersion(),C.ascender=x.parseShort(),C.descender=x.parseShort(),C.lineGap=x.parseShort(),C.advanceWidthMax=x.parseUShort(),C.minLeftSideBearing=x.parseShort(),C.minRightSideBearing=x.parseShort(),C.xMaxExtent=x.parseShort(),C.caretSlopeRise=x.parseShort(),C.caretSlopeRun=x.parseShort(),C.caretOffset=x.parseShort(),x.relativeOffset+=8,C.metricDataFormat=x.parseShort(),C.numberOfHMetrics=x.parseUShort(),C},pi=function(s){return new G.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],s)},fi=function(s,h,C,x,k){let D,R,O=new u0.Parser(s,h);for(let F=0;F<x;F+=1){F<C&&(D=O.parseUShort(),R=O.parseShort());let W=k.get(F);W.advanceWidth=D,W.leftSideBearing=R}},zi=function(s){let h=new G.Table("hmtx",[]);for(let C=0;C<s.length;C+=1){let x=s.get(C),k=x.advanceWidth||0,D=x.leftSideBearing||0;h.fields.push({name:"advanceWidth_"+C,type:"USHORT",value:k}),h.fields.push({name:"leftSideBearing_"+C,type:"SHORT",value:D})}return h},bi=function(s){let h=new G.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:s.length}]),C="",x=12+4*s.length;for(let k=0;k<s.length;++k){let D=C.indexOf(s[k]);D<0&&(D=C.length,C+=s[k]),h.fields.push({name:"offset "+k,type:"USHORT",value:x+D}),h.fields.push({name:"length "+k,type:"USHORT",value:s[k].length})}return h.fields.push({name:"stringPool",type:"CHARARRAY",value:C}),h},wi=function(s,h){let C=new u0.Parser(s,h),x=C.parseULong();_.argument(x===1,"Unsupported ltag table version."),C.skip("uLong",1);let k=C.parseULong(),D=[];for(let R=0;R<k;R++){let O="",F=h+C.parseUShort(),W=C.parseUShort();for(let $=F;$<F+W;++$)O+=String.fromCharCode(s.getInt8($));D.push(O)}return D},_i=function(s,h){let C={},x=new u0.Parser(s,h);return C.version=x.parseVersion(),C.numGlyphs=x.parseUShort(),C.version===1&&(C.maxPoints=x.parseUShort(),C.maxContours=x.parseUShort(),C.maxCompositePoints=x.parseUShort(),C.maxCompositeContours=x.parseUShort(),C.maxZones=x.parseUShort(),C.maxTwilightPoints=x.parseUShort(),C.maxStorage=x.parseUShort(),C.maxFunctionDefs=x.parseUShort(),C.maxInstructionDefs=x.parseUShort(),C.maxStackElements=x.parseUShort(),C.maxSizeOfInstructions=x.parseUShort(),C.maxComponentElements=x.parseUShort(),C.maxComponentDepth=x.parseUShort()),C},yi=function(s){return new G.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:s}])},a9=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],c9={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Ci={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},r9={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function Mi(s,h,C){switch(s){case 0:if(h===65535)return"und";if(C)return C[h];break;case 1:return c9[h];case 3:return r9[h]}}let H6="utf-16",xi={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Si={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function l9(s,h,C){switch(s){case 0:return H6;case 1:return Si[C]||xi[h];case 3:if(h===1||h===10)return H6}}function D6(s){let h={};for(let C in s)h[s[C]]=parseInt(C);return h}function o9(s,h,C,x,k,D){return new G.Record("NameRecord",[{name:"platformID",type:"USHORT",value:s},{name:"encodingID",type:"USHORT",value:h},{name:"languageID",type:"USHORT",value:C},{name:"nameID",type:"USHORT",value:x},{name:"length",type:"USHORT",value:k},{name:"offset",type:"USHORT",value:D}])}function n9(s,h){let C=function(x,k){let D=x.length,R=k.length-D+1;e:for(let O=0;O<R;O++)for(;O<R;O++){for(let F=0;F<D;F++)if(k[O+F]!==x[F])continue e;return O}return-1}(s,h);if(C<0){C=h.length;let x=0,k=s.length;for(;x<k;++x)h.push(s[x])}return C}let Li=function(s,h,C){let x={},k=new u0.Parser(s,h),D=k.parseUShort(),R=k.parseUShort(),O=k.offset+k.parseUShort();for(let W=0;W<R;W++){let $=k.parseUShort(),Y=k.parseUShort(),X=k.parseUShort(),m0=k.parseUShort(),l0=a9[m0]||m0,C0=k.parseUShort(),i0=k.parseUShort(),n0=Mi($,X,C),y0=l9($,Y,X);if(y0!==void 0&&n0!==void 0){let L0;if(L0=y0===H6?S.UTF16(s,O+i0,C0):S.MACSTRING(s,O+i0,C0,y0),L0){let T0=x[l0];T0===void 0&&(T0=x[l0]={}),T0[n0]=L0}}}let F=0;return D===1&&k.parseUShort(),x},Ai=function(s,h){let C,x=[],k={},D=D6(a9);for(let Y in s){let X=D[Y];if(X===void 0&&(X=Y),C=parseInt(X),isNaN(C))throw new Error('Name table entry "'+Y+'" does not exist, see nameTableNames for complete list.');k[C]=s[Y],x.push(C)}let R=D6(c9),O=D6(r9),F=[],W=[];for(let Y=0;Y<x.length;Y++){C=x[Y];let X=k[C];for(let m0 in X){let l0=X[m0],C0=1,i0=R[m0],n0=Ci[i0],y0=l9(C0,n0,i0),L0=y.MACSTRING(l0,y0);L0===void 0&&(C0=0,i0=h.indexOf(m0),i0<0&&(i0=h.length,h.push(m0)),n0=4,L0=y.UTF16(l0));let T0=n9(L0,W);F.push(o9(C0,n0,i0,C,L0.length,T0));let p0=O[m0];if(p0!==void 0){let d0=y.UTF16(l0),f0=n9(d0,W);F.push(o9(3,1,p0,C,d0.length,f0))}}}F.sort(function(Y,X){return Y.platformID-X.platformID||Y.encodingID-X.encodingID||Y.languageID-X.languageID||Y.nameID-X.nameID});let $=new G.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:F.length},{name:"stringOffset",type:"USHORT",value:6+12*F.length}]);for(let Y=0;Y<F.length;Y++)$.fields.push({name:"record_"+Y,type:"RECORD",value:F[Y]});return $.fields.push({name:"strings",type:"LITERAL",value:W}),$},h9=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],ki=function(s,h){let C={},x=new u0.Parser(s,h);C.version=x.parseUShort(),C.xAvgCharWidth=x.parseShort(),C.usWeightClass=x.parseUShort(),C.usWidthClass=x.parseUShort(),C.fsType=x.parseUShort(),C.ySubscriptXSize=x.parseShort(),C.ySubscriptYSize=x.parseShort(),C.ySubscriptXOffset=x.parseShort(),C.ySubscriptYOffset=x.parseShort(),C.ySuperscriptXSize=x.parseShort(),C.ySuperscriptYSize=x.parseShort(),C.ySuperscriptXOffset=x.parseShort(),C.ySuperscriptYOffset=x.parseShort(),C.yStrikeoutSize=x.parseShort(),C.yStrikeoutPosition=x.parseShort(),C.sFamilyClass=x.parseShort(),C.panose=[];for(let k=0;k<10;k++)C.panose[k]=x.parseByte();return C.ulUnicodeRange1=x.parseULong(),C.ulUnicodeRange2=x.parseULong(),C.ulUnicodeRange3=x.parseULong(),C.ulUnicodeRange4=x.parseULong(),C.achVendID=String.fromCharCode(x.parseByte(),x.parseByte(),x.parseByte(),x.parseByte()),C.fsSelection=x.parseUShort(),C.usFirstCharIndex=x.parseUShort(),C.usLastCharIndex=x.parseUShort(),C.sTypoAscender=x.parseShort(),C.sTypoDescender=x.parseShort(),C.sTypoLineGap=x.parseShort(),C.usWinAscent=x.parseUShort(),C.usWinDescent=x.parseUShort(),C.version>=1&&(C.ulCodePageRange1=x.parseULong(),C.ulCodePageRange2=x.parseULong()),C.version>=2&&(C.sxHeight=x.parseShort(),C.sCapHeight=x.parseShort(),C.usDefaultChar=x.parseUShort(),C.usBreakChar=x.parseUShort(),C.usMaxContent=x.parseUShort()),C},Ei=function(s){return new G.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],s)},Hi=function(s){for(let h=0;h<h9.length;h+=1){let C=h9[h];if(s>=C.begin&&s<C.end)return h}return-1},Di=function(s,h){let C={},x=new u0.Parser(s,h);switch(C.version=x.parseVersion(),C.italicAngle=x.parseFixed(),C.underlinePosition=x.parseShort(),C.underlineThickness=x.parseShort(),C.isFixedPitch=x.parseULong(),C.minMemType42=x.parseULong(),C.maxMemType42=x.parseULong(),C.minMemType1=x.parseULong(),C.maxMemType1=x.parseULong(),C.version){case 1:C.names=R0.slice();break;case 2:C.numberOfGlyphs=x.parseUShort(),C.glyphNameIndex=new Array(C.numberOfGlyphs);for(let k=0;k<C.numberOfGlyphs;k++)C.glyphNameIndex[k]=x.parseUShort();C.names=[];for(let k=0;k<C.numberOfGlyphs;k++)if(C.glyphNameIndex[k]>=R0.length){let D=x.parseChar();C.names.push(x.parseString(D))}break;case 2.5:C.numberOfGlyphs=x.parseUShort(),C.offset=new Array(C.numberOfGlyphs);for(let k=0;k<C.numberOfGlyphs;k++)C.offset[k]=x.parseChar()}return C},Ti=function(){return new G.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])},G1=new Array(9);G1[1]=function(){let s=this.offset+this.relativeOffset,h=this.parseUShort();return h===1?{substFormat:1,coverage:this.parsePointer(J.coverage),deltaGlyphId:this.parseUShort()}:h===2?{substFormat:2,coverage:this.parsePointer(J.coverage),substitute:this.parseOffset16List()}:void _.assert(!1,"0x"+s.toString(16)+": lookup type 1 format must be 1 or 2.")},G1[2]=function(){let s=this.parseUShort();return _.argument(s===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:s,coverage:this.parsePointer(J.coverage),sequences:this.parseListOfLists()}},G1[3]=function(){let s=this.parseUShort();return _.argument(s===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:s,coverage:this.parsePointer(J.coverage),alternateSets:this.parseListOfLists()}},G1[4]=function(){let s=this.parseUShort();return _.argument(s===1,"GSUB ligature table identifier-format must be 1"),{substFormat:s,coverage:this.parsePointer(J.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};let P3={sequenceIndex:J.uShort,lookupListIndex:J.uShort};G1[5]=function(){let s=this.offset+this.relativeOffset,h=this.parseUShort();if(h===1)return{substFormat:h,coverage:this.parsePointer(J.coverage),ruleSets:this.parseListOfLists(function(){let C=this.parseUShort(),x=this.parseUShort();return{input:this.parseUShortList(C-1),lookupRecords:this.parseRecordList(x,P3)}})};if(h===2)return{substFormat:h,coverage:this.parsePointer(J.coverage),classDef:this.parsePointer(J.classDef),classSets:this.parseListOfLists(function(){let C=this.parseUShort(),x=this.parseUShort();return{classes:this.parseUShortList(C-1),lookupRecords:this.parseRecordList(x,P3)}})};if(h===3){let C=this.parseUShort(),x=this.parseUShort();return{substFormat:h,coverages:this.parseList(C,J.pointer(J.coverage)),lookupRecords:this.parseRecordList(x,P3)}}_.assert(!1,"0x"+s.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},G1[6]=function(){let s=this.offset+this.relativeOffset,h=this.parseUShort();return h===1?{substFormat:1,coverage:this.parsePointer(J.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(P3)}})}:h===2?{substFormat:2,coverage:this.parsePointer(J.coverage),backtrackClassDef:this.parsePointer(J.classDef),inputClassDef:this.parsePointer(J.classDef),lookaheadClassDef:this.parsePointer(J.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(P3)}})}:h===3?{substFormat:3,backtrackCoverage:this.parseList(J.pointer(J.coverage)),inputCoverage:this.parseList(J.pointer(J.coverage)),lookaheadCoverage:this.parseList(J.pointer(J.coverage)),lookupRecords:this.parseRecordList(P3)}:void _.assert(!1,"0x"+s.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},G1[7]=function(){let s=this.parseUShort();_.argument(s===1,"GSUB Extension Substitution subtable identifier-format must be 1");let h=this.parseUShort(),C=new J(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:h,extension:G1[h].call(C)}},G1[8]=function(){let s=this.parseUShort();return _.argument(s===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:s,coverage:this.parsePointer(J.coverage),backtrackCoverage:this.parseList(J.pointer(J.coverage)),lookaheadCoverage:this.parseList(J.pointer(J.coverage)),substitutes:this.parseUShortList()}};let M5=new Array(9);M5[1]=function(s){return s.substFormat===1?new G.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new G.Coverage(s.coverage)},{name:"deltaGlyphID",type:"USHORT",value:s.deltaGlyphId}]):new G.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new G.Coverage(s.coverage)}].concat(G.ushortList("substitute",s.substitute)))},M5[3]=function(s){return _.assert(s.substFormat===1,"Lookup type 3 substFormat must be 1."),new G.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new G.Coverage(s.coverage)}].concat(G.tableList("altSet",s.alternateSets,function(h){return new G.Table("alternateSetTable",G.ushortList("alternate",h))})))},M5[4]=function(s){return _.assert(s.substFormat===1,"Lookup type 4 substFormat must be 1."),new G.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new G.Coverage(s.coverage)}].concat(G.tableList("ligSet",s.ligatureSets,function(h){return new G.Table("ligatureSetTable",G.tableList("ligature",h,function(C){return new G.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:C.ligGlyph}].concat(G.ushortList("component",C.components,C.components.length+1)))}))})))};let Vi=function(s,h){let C=new J(s,h=h||0),x=C.parseVersion(1);return _.argument(x===1||x===1.1,"Unsupported GSUB table version."),x===1?{version:x,scripts:C.parseScriptList(),features:C.parseFeatureList(),lookups:C.parseLookupList(G1)}:{version:x,scripts:C.parseScriptList(),features:C.parseFeatureList(),lookups:C.parseLookupList(G1),variations:C.parseFeatureVariationsList()}},Ri=function(s){return new G.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new G.ScriptList(s.scripts)},{name:"features",type:"TABLE",value:new G.FeatureList(s.features)},{name:"lookups",type:"TABLE",value:new G.LookupList(s.lookups,M5)}])},Fi=function(s,h){let C=new u0.Parser(s,h),x=C.parseULong();_.argument(x===1,"Unsupported META table version."),C.parseULong(),C.parseULong();let k=C.parseULong(),D={};for(let R=0;R<k;R++){let O=C.parseTag(),F=C.parseULong(),W=C.parseULong(),$=S.UTF8(s,h+F,W);D[O]=$}return D},Bi=function(s){let h=Object.keys(s).length,C="",x=16+12*h,k=new G.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:x},{name:"numTags",type:"ULONG",value:h}]);for(let D in s){let R=C.length;C+=s[D],k.fields.push({name:"tag "+D,type:"TAG",value:D}),k.fields.push({name:"offset "+D,type:"ULONG",value:x+R}),k.fields.push({name:"length "+D,type:"ULONG",value:s[D].length})}return k.fields.push({name:"stringPool",type:"CHARARRAY",value:C}),k};function u9(s){return Math.log(s)/Math.log(2)|0}function d9(s){for(;s.length%4!=0;)s.push(0);let h=0;for(let C=0;C<s.length;C+=4)h+=(s[C]<<24)+(s[C+1]<<16)+(s[C+2]<<8)+s[C+3];return h%=Math.pow(2,32),h}function m9(s,h,C,x){return new G.Record("Table Record",[{name:"tag",type:"TAG",value:s!==void 0?s:""},{name:"checkSum",type:"ULONG",value:h!==void 0?h:0},{name:"offset",type:"ULONG",value:C!==void 0?C:0},{name:"length",type:"ULONG",value:x!==void 0?x:0}])}function Pi(s){let h=new G.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);h.tables=s,h.numTables=s.length;let C=Math.pow(2,u9(h.numTables));h.searchRange=16*C,h.entrySelector=u9(C),h.rangeShift=16*h.numTables-h.searchRange;let x=[],k=[],D=h.sizeOf()+m9().sizeOf()*h.numTables;for(;D%4!=0;)D+=1,k.push({name:"padding",type:"BYTE",value:0});for(let R=0;R<s.length;R+=1){let O=s[R];_.argument(O.tableName.length===4,"Table name"+O.tableName+" is invalid.");let F=O.sizeOf(),W=m9(O.tableName,d9(O.encode()),D,F);for(x.push({name:W.tag+" Table Record",type:"RECORD",value:W}),k.push({name:O.tableName+" table",type:"RECORD",value:O}),D+=F,_.argument(!isNaN(D),"Something went wrong calculating the offset.");D%4!=0;)D+=1,k.push({name:"padding",type:"BYTE",value:0})}return x.sort(function(R,O){return R.value.tag>O.value.tag?1:-1}),h.fields=h.fields.concat(x),h.fields=h.fields.concat(k),h}function v9(s,h,C){for(let x=0;x<h.length;x+=1){let k=s.charToGlyphIndex(h[x]);if(k>0)return s.glyphs.get(k).getMetrics()}return C}function Oi(s){let h=0;for(let C=0;C<s.length;C+=1)h+=s[C];return h/s.length}let Ii=function(s){let h=[],C=[],x=[],k=[],D=[],R=[],O=[],F,W=0,$=0,Y=0,X=0,m0=0;for(let F1=0;F1<s.glyphs.length;F1+=1){let I3=s.glyphs.get(F1),Z3=0|I3.unicode;if(isNaN(I3.advanceWidth))throw new Error("Glyph "+I3.name+" ("+F1+"): advanceWidth is not a number.");(F>Z3||F===void 0)&&Z3>0&&(F=Z3),W<Z3&&(W=Z3);let $2=Hi(Z3);if($2<32)$|=1<<$2;else if($2<64)Y|=1<<$2-32;else if($2<96)X|=1<<$2-64;else{if(!($2<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");m0|=1<<$2-96}if(I3.name===".notdef")continue;let U3=I3.getMetrics();h.push(U3.xMin),C.push(U3.yMin),x.push(U3.xMax),k.push(U3.yMax),R.push(U3.leftSideBearing),O.push(U3.rightSideBearing),D.push(I3.advanceWidth)}let l0={xMin:Math.min.apply(null,h),yMin:Math.min.apply(null,C),xMax:Math.max.apply(null,x),yMax:Math.max.apply(null,k),advanceWidthMax:Math.max.apply(null,D),advanceWidthAvg:Oi(D),minLeftSideBearing:Math.min.apply(null,R),maxLeftSideBearing:Math.max.apply(null,R),minRightSideBearing:Math.min.apply(null,O)};l0.ascender=s.ascender,l0.descender=s.descender;let C0=vi({flags:3,unitsPerEm:s.unitsPerEm,xMin:l0.xMin,yMin:l0.yMin,xMax:l0.xMax,yMax:l0.yMax,lowestRecPPEM:3,createdTimestamp:s.createdTimestamp}),i0=pi({ascender:l0.ascender,descender:l0.descender,advanceWidthMax:l0.advanceWidthMax,minLeftSideBearing:l0.minLeftSideBearing,minRightSideBearing:l0.minRightSideBearing,xMaxExtent:l0.maxLeftSideBearing+(l0.xMax-l0.xMin),numberOfHMetrics:s.glyphs.length}),n0=yi(s.glyphs.length),y0=Ei({xAvgCharWidth:Math.round(l0.advanceWidthAvg),usWeightClass:s.tables.os2.usWeightClass,usWidthClass:s.tables.os2.usWidthClass,usFirstCharIndex:F,usLastCharIndex:W,ulUnicodeRange1:$,ulUnicodeRange2:Y,ulUnicodeRange3:X,ulUnicodeRange4:m0,fsSelection:s.tables.os2.fsSelection,sTypoAscender:l0.ascender,sTypoDescender:l0.descender,sTypoLineGap:0,usWinAscent:l0.yMax,usWinDescent:Math.abs(l0.yMin),ulCodePageRange1:1,sxHeight:v9(s,"xyvw",{yMax:Math.round(l0.ascender/2)}).yMax,sCapHeight:v9(s,"HIKLEFJMNTZBDPRAGOQSUVWXY",l0).yMax,usDefaultChar:s.hasChar(" ")?32:0,usBreakChar:s.hasChar(" ")?32:0}),L0=zi(s.glyphs),T0=w0(s.glyphs),p0=s.getEnglishName("fontFamily"),d0=s.getEnglishName("fontSubfamily"),f0=p0+" "+d0,O0=s.getEnglishName("postScriptName");O0||(O0=p0.replace(/\s/g,"")+"-"+d0);let E0={};for(let F1 in s.names)E0[F1]=s.names[F1];E0.uniqueID||(E0.uniqueID={en:s.getEnglishName("manufacturer")+":"+f0}),E0.postScriptName||(E0.postScriptName={en:O0}),E0.preferredFamily||(E0.preferredFamily=s.names.fontFamily),E0.preferredSubfamily||(E0.preferredSubfamily=s.names.fontSubfamily);let a1=[],b1=Ai(E0,a1),S1=a1.length>0?bi(a1):void 0,m1=Ti(),y1=di(s.glyphs,{version:s.getEnglishName("version"),fullName:f0,familyName:p0,weightName:d0,postScriptName:O0,unitsPerEm:s.unitsPerEm,fontBBox:[0,l0.yMin,l0.ascender,l0.advanceWidthMax]}),h1=s.metas&&Object.keys(s.metas).length>0?Bi(s.metas):void 0,w1=[C0,i0,n0,y0,b1,T0,m1,y1,L0];S1&&w1.push(S1),s.tables.gsub&&w1.push(Ri(s.tables.gsub)),h1&&w1.push(h1);let v1=Pi(w1),H1=d9(v1.encode()),X0=v1.fields,C1=!1;for(let F1=0;F1<X0.length;F1+=1)if(X0[F1].name==="head table"){X0[F1].value.checkSumAdjustment=2981146554-H1,C1=!0;break}if(!C1)throw new Error("Could not find head table with checkSum to adjust.");return v1};function T6(s,h){let C=0,x=s.length-1;for(;C<=x;){let k=C+x>>>1,D=s[k].tag;if(D===h)return k;D<h?C=k+1:x=k-1}return-C-1}function g9(s,h){let C=0,x=s.length-1;for(;C<=x;){let k=C+x>>>1,D=s[k];if(D===h)return k;D<h?C=k+1:x=k-1}return-C-1}function p9(s,h){let C,x=0,k=s.length-1;for(;x<=k;){let D=x+k>>>1;C=s[D];let R=C.start;if(R===h)return C;R<h?x=D+1:k=D-1}if(x>0)return C=s[x-1],h>C.end?0:C}function f9(s,h){this.font=s,this.tableName=h}f9.prototype={searchTag:T6,binSearch:g9,getTable:function(s){let h=this.font.tables[this.tableName];return!h&&s&&(h=this.font.tables[this.tableName]=this.createDefaultTable()),h},getScriptNames:function(){let s=this.getTable();return s?s.scripts.map(function(h){return h.tag}):[]},getDefaultScriptName:function(){let s=this.getTable();if(!s)return;let h=!1;for(let C=0;C<s.scripts.length;C++){let x=s.scripts[C].tag;if(x==="DFLT")return x;x==="latn"&&(h=!0)}return h?"latn":void 0},getScriptTable:function(s,h){let C=this.getTable(h);if(C){s=s||"DFLT";let x=C.scripts,k=T6(C.scripts,s);if(k>=0)return x[k].script;if(h){let D={tag:s,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return x.splice(-1-k,0,D),D.script}}},getLangSysTable:function(s,h,C){let x=this.getScriptTable(s,C);if(x){if(!h||h==="dflt"||h==="DFLT")return x.defaultLangSys;let k=T6(x.langSysRecords,h);if(k>=0)return x.langSysRecords[k].langSys;if(C){let D={tag:h,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return x.langSysRecords.splice(-1-k,0,D),D.langSys}}},getFeatureTable:function(s,h,C,x){let k=this.getLangSysTable(s,h,x);if(k){let D,R=k.featureIndexes,O=this.font.tables[this.tableName].features;for(let F=0;F<R.length;F++)if(D=O[R[F]],D.tag===C)return D.feature;if(x){let F=O.length;return _.assert(F===0||C>=O[F-1].tag,"Features must be added in alphabetical order."),D={tag:C,feature:{params:0,lookupListIndexes:[]}},O.push(D),R.push(F),D.feature}}},getLookupTables:function(s,h,C,x,k){let D=this.getFeatureTable(s,h,C,k),R=[];if(D){let O,F=D.lookupListIndexes,W=this.font.tables[this.tableName].lookups;for(let $=0;$<F.length;$++)O=W[F[$]],O.lookupType===x&&R.push(O);if(R.length===0&&k){O={lookupType:x,lookupFlag:0,subtables:[],markFilteringSet:void 0};let $=W.length;return W.push(O),F.push($),[O]}}return R},getGlyphClass:function(s,h){switch(s.format){case 1:return s.startGlyph<=h&&h<s.startGlyph+s.classes.length?s.classes[h-s.startGlyph]:0;case 2:let C=p9(s.ranges,h);return C?C.classId:0}},getCoverageIndex:function(s,h){switch(s.format){case 1:let C=g9(s.glyphs,h);return C>=0?C:-1;case 2:let x=p9(s.ranges,h);return x?x.index+h-x.start:-1}},expandCoverage:function(s){if(s.format===1)return s.glyphs;{let h=[],C=s.ranges;for(let x=0;x<C.length;x++){let k=C[x],D=k.start,R=k.end;for(let O=D;O<=R;O++)h.push(O)}return h}}};let x5=f9;function S5(s){x5.call(this,s,"gpos")}S5.prototype=x5.prototype,S5.prototype.getKerningValue=function(s,h,C){for(let x=0;x<s.length;x++){let k=s[x].subtables;for(let D=0;D<k.length;D++){let R=k[D],O=this.getCoverageIndex(R.coverage,h);if(!(O<0))switch(R.posFormat){case 1:let F=R.pairSets[O];for(let X=0;X<F.length;X++){let m0=F[X];if(m0.secondGlyph===C)return m0.value1&&m0.value1.xAdvance||0}break;case 2:let W=this.getGlyphClass(R.classDef1,h),$=this.getGlyphClass(R.classDef2,C),Y=R.classRecords[W][$];return Y.value1&&Y.value1.xAdvance||0}}}return 0},S5.prototype.getKerningTables=function(s,h){if(this.font.tables.gpos)return this.getLookupTables(s,h,"kern",2)};let Zi=S5;function q1(s){x5.call(this,s,"gsub")}function Ui(s,h){let C=s.length;if(C!==h.length)return!1;for(let x=0;x<C;x++)if(s[x]!==h[x])return!1;return!0}function z9(s,h,C){let x=s.subtables;for(let k=0;k<x.length;k++){let D=x[k];if(D.substFormat===h)return D}if(C)return x.push(C),C}q1.prototype=x5.prototype,q1.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},q1.prototype.getSingle=function(s,h,C){let x=[],k=this.getLookupTables(h,C,s,1);for(let D=0;D<k.length;D++){let R=k[D].subtables;for(let O=0;O<R.length;O++){let F=R[O],W=this.expandCoverage(F.coverage),$;if(F.substFormat===1){let Y=F.deltaGlyphId;for($=0;$<W.length;$++){let X=W[$];x.push({sub:X,by:X+Y})}}else{let Y=F.substitute;for($=0;$<W.length;$++)x.push({sub:W[$],by:Y[$]})}}}return x},q1.prototype.getAlternates=function(s,h,C){let x=[],k=this.getLookupTables(h,C,s,3);for(let D=0;D<k.length;D++){let R=k[D].subtables;for(let O=0;O<R.length;O++){let F=R[O],W=this.expandCoverage(F.coverage),$=F.alternateSets;for(let Y=0;Y<W.length;Y++)x.push({sub:W[Y],by:$[Y]})}}return x},q1.prototype.getLigatures=function(s,h,C){let x=[],k=this.getLookupTables(h,C,s,4);for(let D=0;D<k.length;D++){let R=k[D].subtables;for(let O=0;O<R.length;O++){let F=R[O],W=this.expandCoverage(F.coverage),$=F.ligatureSets;for(let Y=0;Y<W.length;Y++){let X=W[Y],m0=$[Y];for(let l0=0;l0<m0.length;l0++){let C0=m0[l0];x.push({sub:[X].concat(C0.components),by:C0.ligGlyph})}}}}return x},q1.prototype.addSingle=function(s,h,C,x){let k=z9(this.getLookupTables(C,x,s,1,!0)[0],2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});_.assert(k.coverage.format===1,"Ligature: unable to modify coverage table format "+k.coverage.format);let D=h.sub,R=this.binSearch(k.coverage.glyphs,D);R<0&&(R=-1-R,k.coverage.glyphs.splice(R,0,D),k.substitute.splice(R,0,0)),k.substitute[R]=h.by},q1.prototype.addAlternate=function(s,h,C,x){let k=z9(this.getLookupTables(C,x,s,3,!0)[0],1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});_.assert(k.coverage.format===1,"Ligature: unable to modify coverage table format "+k.coverage.format);let D=h.sub,R=this.binSearch(k.coverage.glyphs,D);R<0&&(R=-1-R,k.coverage.glyphs.splice(R,0,D),k.alternateSets.splice(R,0,0)),k.alternateSets[R]=h.by},q1.prototype.addLigature=function(s,h,C,x){let k=this.getLookupTables(C,x,s,4,!0)[0],D=k.subtables[0];D||(D={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},k.subtables[0]=D),_.assert(D.coverage.format===1,"Ligature: unable to modify coverage table format "+D.coverage.format);let R=h.sub[0],O=h.sub.slice(1),F={ligGlyph:h.by,components:O},W=this.binSearch(D.coverage.glyphs,R);if(W>=0){let $=D.ligatureSets[W];for(let Y=0;Y<$.length;Y++)if(Ui($[Y].components,O))return;$.push(F)}else W=-1-W,D.coverage.glyphs.splice(W,0,R),D.ligatureSets.splice(W,0,[F])},q1.prototype.getFeature=function(s,h,C){if(/ss\d\d/.test(s))return this.getSingle(s,h,C);switch(s){case"aalt":case"salt":return this.getSingle(s,h,C).concat(this.getAlternates(s,h,C));case"dlig":case"liga":case"rlig":return this.getLigatures(s,h,C)}},q1.prototype.add=function(s,h,C,x){if(/ss\d\d/.test(s))return this.addSingle(s,h,C,x);switch(s){case"aalt":case"salt":return typeof h.by=="number"?this.addSingle(s,h,C,x):this.addAlternate(s,h,C,x);case"dlig":case"liga":case"rlig":return this.addLigature(s,h,C,x)}};let Ni=q1;function b9(s){let h=new ArrayBuffer(s.length),C=new Uint8Array(h);for(let x=0;x<s.length;++x)C[x]=s[x];return h}function O3(s,h){if(!s)throw h}let w9,d3,_9,V6;function y9(s){this.font=s,this._fpgmState=this._prepState=void 0,this._errorState=0}function Wi(s){return s}function C9(s){return Math.sign(s)*Math.round(Math.abs(s))}function ji(s){return Math.sign(s)*Math.round(Math.abs(2*s))/2}function Gi(s){return Math.sign(s)*(Math.round(Math.abs(s)+.5)-.5)}function qi(s){return Math.sign(s)*Math.ceil(Math.abs(s))}function $i(s){return Math.sign(s)*Math.floor(Math.abs(s))}let M9=function(s){let h=this.srPeriod,C=this.srPhase,x=1;return s<0&&(s=-s,x=-1),s+=this.srThreshold-C,s=Math.trunc(s/h)*h,(s+=C)<0?C*x:s*x},M2={x:1,y:0,axis:"x",distance:function(s,h,C,x){return(C?s.xo:s.x)-(x?h.xo:h.x)},interpolate:function(s,h,C,x){let k,D,R,O,F,W,$;if(!x||x===this)return k=s.xo-h.xo,D=s.xo-C.xo,F=h.x-h.xo,W=C.x-C.xo,R=Math.abs(k),O=Math.abs(D),$=R+O,$===0?void(s.x=s.xo+(F+W)/2):void(s.x=s.xo+(F*O+W*R)/$);k=x.distance(s,h,!0,!0),D=x.distance(s,C,!0,!0),F=x.distance(h,h,!1,!0),W=x.distance(C,C,!1,!0),R=Math.abs(k),O=Math.abs(D),$=R+O,$!==0?M2.setRelative(s,s,(F*O+W*R)/$,x,!0):M2.setRelative(s,s,(F+W)/2,x,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(s,h,C,x,k){if(!x||x===this)return void(s.x=(k?h.xo:h.x)+C);let D=k?h.xo:h.x,R=k?h.yo:h.y,O=D+C*x.x,F=R+C*x.y;s.x=O+(s.y-F)/x.normalSlope},slope:0,touch:function(s){s.xTouched=!0},touched:function(s){return s.xTouched},untouch:function(s){s.xTouched=!1}},T2={x:0,y:1,axis:"y",distance:function(s,h,C,x){return(C?s.yo:s.y)-(x?h.yo:h.y)},interpolate:function(s,h,C,x){let k,D,R,O,F,W,$;if(!x||x===this)return k=s.yo-h.yo,D=s.yo-C.yo,F=h.y-h.yo,W=C.y-C.yo,R=Math.abs(k),O=Math.abs(D),$=R+O,$===0?void(s.y=s.yo+(F+W)/2):void(s.y=s.yo+(F*O+W*R)/$);k=x.distance(s,h,!0,!0),D=x.distance(s,C,!0,!0),F=x.distance(h,h,!1,!0),W=x.distance(C,C,!1,!0),R=Math.abs(k),O=Math.abs(D),$=R+O,$!==0?T2.setRelative(s,s,(F*O+W*R)/$,x,!0):T2.setRelative(s,s,(F+W)/2,x,!0)},normalSlope:0,setRelative:function(s,h,C,x,k){if(!x||x===this)return void(s.y=(k?h.yo:h.y)+C);let D=k?h.xo:h.x,R=k?h.yo:h.y,O=D+C*x.x,F=R+C*x.y;s.y=F+x.normalSlope*(s.x-O)},slope:Number.POSITIVE_INFINITY,touch:function(s){s.yTouched=!0},touched:function(s){return s.yTouched},untouch:function(s){s.yTouched=!1}};function C4(s,h){this.x=s,this.y=h,this.axis=void 0,this.slope=h/s,this.normalSlope=-s/h,Object.freeze(this)}function M4(s,h){let C=Math.sqrt(s*s+h*h);return h/=C,(s/=C)==1&&h===0?M2:s===0&&h===1?T2:new C4(s,h)}function V2(s,h,C,x){this.x=this.xo=Math.round(64*s)/64,this.y=this.yo=Math.round(64*h)/64,this.lastPointOfContour=C,this.onCurve=x,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Object.freeze(M2),Object.freeze(T2),C4.prototype.distance=function(s,h,C,x){return this.x*M2.distance(s,h,C,x)+this.y*T2.distance(s,h,C,x)},C4.prototype.interpolate=function(s,h,C,x){let k,D,R,O,F,W,$;R=x.distance(s,h,!0,!0),O=x.distance(s,C,!0,!0),k=x.distance(h,h,!1,!0),D=x.distance(C,C,!1,!0),F=Math.abs(R),W=Math.abs(O),$=F+W,$!==0?this.setRelative(s,s,(k*W+D*F)/$,x,!0):this.setRelative(s,s,(k+D)/2,x,!0)},C4.prototype.setRelative=function(s,h,C,x,k){x=x||this;let D=k?h.xo:h.x,R=k?h.yo:h.y,O=D+C*x.x,F=R+C*x.y,W=x.normalSlope,$=this.slope,Y=s.x,X=s.y;s.x=($*Y-W*O+F-X)/($-W),s.y=$*(s.x-Y)+X},C4.prototype.touch=function(s){s.xTouched=!0,s.yTouched=!0},V2.prototype.nextTouched=function(s){let h=this.nextPointOnContour;for(;!s.touched(h)&&h!==this;)h=h.nextPointOnContour;return h},V2.prototype.prevTouched=function(s){let h=this.prevPointOnContour;for(;!s.touched(h)&&h!==this;)h=h.prevPointOnContour;return h};let x4=Object.freeze(new V2(0,0)),Ki={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function j2(s,h){switch(this.env=s,this.stack=[],this.prog=h,s){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=M2,this.round=C9}}function L5(s){let h=s.tZone=new Array(s.gZone.length);for(let C=0;C<h.length;C++)h[C]=new V2(0,0)}function x9(s,h){let C=s.prog,x,k=s.ip,D=1;do if(x=C[++k],x===88)D++;else if(x===89)D--;else if(x===64)k+=C[k+1]+1;else if(x===65)k+=2*C[k+1]+1;else if(x>=176&&x<=183)k+=x-176+1;else if(x>=184&&x<=191)k+=2*(x-184+1);else if(h&&D===1&&x===27)break;while(D>0);s.ip=k}function S9(s,h){a0.DEBUG&&console.log(h.step,"SVTCA["+s.axis+"]"),h.fv=h.pv=h.dpv=s}function L9(s,h){a0.DEBUG&&console.log(h.step,"SPVTCA["+s.axis+"]"),h.pv=h.dpv=s}function A9(s,h){a0.DEBUG&&console.log(h.step,"SFVTCA["+s.axis+"]"),h.fv=s}function k9(s,h){let C=h.stack,x=C.pop(),k=C.pop(),D=h.z2[x],R=h.z1[k],O,F;a0.DEBUG&&console.log("SPVTL["+s+"]",x,k),s?(O=D.y-R.y,F=R.x-D.x):(O=R.x-D.x,F=R.y-D.y),h.pv=h.dpv=M4(O,F)}function E9(s,h){let C=h.stack,x=C.pop(),k=C.pop(),D=h.z2[x],R=h.z1[k],O,F;a0.DEBUG&&console.log("SFVTL["+s+"]",x,k),s?(O=D.y-R.y,F=R.x-D.x):(O=R.x-D.x,F=R.y-D.y),h.fv=M4(O,F)}function R6(s){a0.DEBUG&&console.log(s.step,"POP[]"),s.stack.pop()}function H9(s,h){let C=h.stack.pop(),x=h.z0[C],k=h.fv,D=h.pv;a0.DEBUG&&console.log(h.step,"MDAP["+s+"]",C);let R=D.distance(x,x4);s&&(R=h.round(R)),k.setRelative(x,x4,R,D),k.touch(x),h.rp0=h.rp1=C}function D9(s,h){let C=h.z2,x=C.length-2,k,D,R;a0.DEBUG&&console.log(h.step,"IUP["+s.axis+"]");for(let O=0;O<x;O++)k=C[O],s.touched(k)||(D=k.prevTouched(s),D!==k&&(R=k.nextTouched(s),D===R&&s.setRelative(k,k,s.distance(D,D,!1,!0),s,!0),s.interpolate(k,D,R,s)))}function T9(s,h){let C=h.stack,x=s?h.rp1:h.rp2,k=(s?h.z0:h.z1)[x],D=h.fv,R=h.pv,O=h.loop,F=h.z2;for(;O--;){let W=C.pop(),$=F[W],Y=R.distance(k,k,!1,!0);D.setRelative($,$,Y,R),D.touch($),a0.DEBUG&&console.log(h.step,(h.loop>1?"loop "+(h.loop-O)+": ":"")+"SHP["+(s?"rp1":"rp2")+"]",W)}h.loop=1}function V9(s,h){let C=h.stack,x=s?h.rp1:h.rp2,k=(s?h.z0:h.z1)[x],D=h.fv,R=h.pv,O=C.pop(),F=h.z2[h.contours[O]],W=F;a0.DEBUG&&console.log(h.step,"SHC["+s+"]",O);let $=R.distance(k,k,!1,!0);do W!==k&&D.setRelative(W,W,$,R),W=W.nextPointOnContour;while(W!==F)}function R9(s,h){let C=h.stack,x=s?h.rp1:h.rp2,k=(s?h.z0:h.z1)[x],D=h.fv,R=h.pv,O=C.pop(),F,W;switch(a0.DEBUG&&console.log(h.step,"SHZ["+s+"]",O),O){case 0:F=h.tZone;break;case 1:F=h.gZone;break;default:throw new Error("Invalid zone")}let $=R.distance(k,k,!1,!0),Y=F.length-2;for(let X=0;X<Y;X++)W=F[X],D.setRelative(W,W,$,R)}function F9(s,h){let C=h.stack,x=C.pop()/64,k=C.pop(),D=h.z1[k],R=h.z0[h.rp0],O=h.fv,F=h.pv;O.setRelative(D,R,x,F),O.touch(D),a0.DEBUG&&console.log(h.step,"MSIRP["+s+"]",x,k),h.rp1=h.rp0,h.rp2=k,s&&(h.rp0=k)}function B9(s,h){let C=h.stack,x=C.pop(),k=C.pop(),D=h.z0[k],R=h.fv,O=h.pv,F=h.cvt[x];a0.DEBUG&&console.log(h.step,"MIAP["+s+"]",x,"(",F,")",k);let W=O.distance(D,x4);s&&(Math.abs(W-F)<h.cvCutIn&&(W=F),W=h.round(W)),R.setRelative(D,x4,W,O),h.zp0===0&&(D.xo=D.x,D.yo=D.y),R.touch(D),h.rp0=h.rp1=k}function P9(s,h){let C=h.stack,x=C.pop(),k=h.z2[x];a0.DEBUG&&console.log(h.step,"GC["+s+"]",x),C.push(64*h.dpv.distance(k,x4,s,!1))}function O9(s,h){let C=h.stack,x=C.pop(),k=C.pop(),D=h.z1[x],R=h.z0[k],O=h.dpv.distance(R,D,s,s);a0.DEBUG&&console.log(h.step,"MD["+s+"]",x,k,"->",O),h.stack.push(Math.round(64*O))}function F6(s,h){let C=h.stack,x=C.pop(),k=h.fv,D=h.pv,R=h.ppem,O=h.deltaBase+16*(s-1),F=h.deltaShift,W=h.z0;a0.DEBUG&&console.log(h.step,"DELTAP["+s+"]",x,C);for(let $=0;$<x;$++){let Y=C.pop(),X=C.pop();if(O+((240&X)>>4)!==R)continue;let m0=(15&X)-8;m0>=0&&m0++,a0.DEBUG&&console.log(h.step,"DELTAPFIX",Y,"by",m0*F);let l0=W[Y];k.setRelative(l0,l0,m0*F,D)}}function A5(s,h){let C=h.stack,x=C.pop();a0.DEBUG&&console.log(h.step,"ROUND[]"),C.push(64*h.round(x/64))}function B6(s,h){let C=h.stack,x=C.pop(),k=h.ppem,D=h.deltaBase+16*(s-1),R=h.deltaShift;a0.DEBUG&&console.log(h.step,"DELTAC["+s+"]",x,C);for(let O=0;O<x;O++){let F=C.pop(),W=C.pop();if(D+((240&W)>>4)!==k)continue;let $=(15&W)-8;$>=0&&$++;let Y=$*R;a0.DEBUG&&console.log(h.step,"DELTACFIX",F,"by",Y),h.cvt[F]+=Y}}function I9(s,h){let C=h.stack,x=C.pop(),k=C.pop(),D=h.z2[x],R=h.z1[k],O,F;a0.DEBUG&&console.log(h.step,"SDPVTL["+s+"]",x,k),s?(O=D.y-R.y,F=R.x-D.x):(O=R.x-D.x,F=R.y-D.y),h.dpv=M4(O,F)}function G2(s,h){let C=h.stack,x=h.prog,k=h.ip;a0.DEBUG&&console.log(h.step,"PUSHB["+s+"]");for(let D=0;D<s;D++)C.push(x[++k]);h.ip=k}function q2(s,h){let C=h.ip,x=h.prog,k=h.stack;a0.DEBUG&&console.log(h.ip,"PUSHW["+s+"]");for(let D=0;D<s;D++){let R=x[++C]<<8|x[++C];32768&R&&(R=-(1+(65535^R))),k.push(R)}h.ip=C}function b0(s,h,C,x,k,D){let R=D.stack,O=s&&R.pop(),F=R.pop(),W=D.rp0,$=D.z0[W],Y=D.z1[F],X=D.minDis,m0=D.fv,l0=D.dpv,C0,i0,n0,y0;i0=C0=l0.distance(Y,$,!0,!0),n0=i0>=0?1:-1,i0=Math.abs(i0),s&&(y0=D.cvt[O],x&&Math.abs(i0-y0)<D.cvCutIn&&(i0=y0)),C&&i0<X&&(i0=X),x&&(i0=D.round(i0)),m0.setRelative(Y,$,n0*i0,l0),m0.touch(Y),a0.DEBUG&&console.log(D.step,(s?"MIRP[":"MDRP[")+(h?"M":"m")+(C?">":"_")+(x?"R":"_")+(k===0?"Gr":k===1?"Bl":k===2?"Wh":"")+"]",s?O+"("+D.cvt[O]+","+y0+")":"",F,"(d =",C0,"->",n0*i0,")"),D.rp1=D.rp0,D.rp2=F,h&&(D.rp0=F)}y9.prototype.exec=function(s,h){if(typeof h!="number")throw new Error("Point size is not a number!");if(this._errorState>2)return;let C=this.font,x=this._prepState;if(!x||x.ppem!==h){let k=this._fpgmState;if(!k){j2.prototype=Ki,k=this._fpgmState=new j2("fpgm",C.tables.fpgm),k.funcs=[],k.font=C,a0.DEBUG&&(console.log("---EXEC FPGM---"),k.step=-1);try{d3(k)}catch(R){return console.log("Hinting error in FPGM:"+R),void(this._errorState=3)}}j2.prototype=k,x=this._prepState=new j2("prep",C.tables.prep),x.ppem=h;let D=C.tables.cvt;if(D){let R=x.cvt=new Array(D.length),O=h/C.unitsPerEm;for(let F=0;F<D.length;F++)R[F]=D[F]*O}else x.cvt=[];a0.DEBUG&&(console.log("---EXEC PREP---"),x.step=-1);try{d3(x)}catch(R){this._errorState<2&&console.log("Hinting error in PREP:"+R),this._errorState=2}}if(!(this._errorState>1))try{return _9(s,x)}catch(k){return this._errorState<1&&(console.log("Hinting error:"+k),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}},_9=function(s,h){let C=h.ppem/h.font.unitsPerEm,x=C,k,D,R,O=s.components;if(j2.prototype=h,O){let F=h.font;D=[],k=[];for(let W=0;W<O.length;W++){let $=O[W],Y=F.glyphs.get($.glyphIndex);R=new j2("glyf",Y.instructions),a0.DEBUG&&(console.log("---EXEC COMP "+W+"---"),R.step=-1),V6(Y,R,C,x);let X=Math.round($.dx*C),m0=Math.round($.dy*x),l0=R.gZone,C0=R.contours;for(let n0=0;n0<l0.length;n0++){let y0=l0[n0];y0.xTouched=y0.yTouched=!1,y0.xo=y0.x=y0.x+X,y0.yo=y0.y=y0.y+m0}let i0=D.length;D.push.apply(D,l0);for(let n0=0;n0<C0.length;n0++)k.push(C0[n0]+i0)}s.instructions&&!R.inhibitGridFit&&(R=new j2("glyf",s.instructions),R.gZone=R.z0=R.z1=R.z2=D,R.contours=k,D.push(new V2(0,0),new V2(Math.round(s.advanceWidth*C),0)),a0.DEBUG&&(console.log("---EXEC COMPOSITE---"),R.step=-1),d3(R),D.length-=2)}else R=new j2("glyf",s.instructions),a0.DEBUG&&(console.log("---EXEC GLYPH---"),R.step=-1),V6(s,R,C,x),D=R.gZone;return D},V6=function(s,h,C,x){let k=s.points||[],D=k.length,R=h.gZone=h.z0=h.z1=h.z2=[],O=h.contours=[],F,W,$;for(let Y=0;Y<D;Y++)F=k[Y],R[Y]=new V2(F.x*C,F.y*x,F.lastPointOfContour,F.onCurve);for(let Y=0;Y<D;Y++)F=R[Y],W||(W=F,O.push(Y)),F.lastPointOfContour?(F.nextPointOnContour=W,W.prevPointOnContour=F,W=void 0):($=R[Y+1],F.nextPointOnContour=$,$.prevPointOnContour=F);if(!h.inhibitGridFit){if(a0.DEBUG){console.log("PROCESSING GLYPH",h.stack);for(let Y=0;Y<D;Y++)console.log(Y,R[Y].x,R[Y].y)}if(R.push(new V2(0,0),new V2(Math.round(s.advanceWidth*C),0)),d3(h),R.length-=2,a0.DEBUG){console.log("FINISHED GLYPH",h.stack);for(let Y=0;Y<D;Y++)console.log(Y,R[Y].x,R[Y].y)}}},d3=function(s){let h=s.prog;if(!h)return;let C=h.length,x;for(s.ip=0;s.ip<C;s.ip++){if(a0.DEBUG&&s.step++,x=w9[h[s.ip]],!x)throw new Error("unknown instruction: 0x"+Number(h[s.ip]).toString(16));x(s)}},w9=[S9.bind(void 0,T2),S9.bind(void 0,M2),L9.bind(void 0,T2),L9.bind(void 0,M2),A9.bind(void 0,T2),A9.bind(void 0,M2),k9.bind(void 0,0),k9.bind(void 0,1),E9.bind(void 0,0),E9.bind(void 0,1),function(s){let h=s.stack,C=h.pop(),x=h.pop();a0.DEBUG&&console.log(s.step,"SPVFS[]",C,x),s.pv=s.dpv=M4(x,C)},function(s){let h=s.stack,C=h.pop(),x=h.pop();a0.DEBUG&&console.log(s.step,"SPVFS[]",C,x),s.fv=M4(x,C)},function(s){let h=s.stack,C=s.pv;a0.DEBUG&&console.log(s.step,"GPV[]"),h.push(16384*C.x),h.push(16384*C.y)},function(s){let h=s.stack,C=s.fv;a0.DEBUG&&console.log(s.step,"GFV[]"),h.push(16384*C.x),h.push(16384*C.y)},function(s){s.fv=s.pv,a0.DEBUG&&console.log(s.step,"SFVTPV[]")},function(s){let h=s.stack,C=h.pop(),x=h.pop(),k=h.pop(),D=h.pop(),R=h.pop(),O=s.z0,F=s.z1,W=O[C],$=O[x],Y=F[k],X=F[D],m0=s.z2[R];a0.DEBUG&&console.log("ISECT[], ",C,x,k,D,R);let l0=W.x,C0=W.y,i0=$.x,n0=$.y,y0=Y.x,L0=Y.y,T0=X.x,p0=X.y,d0=(l0-i0)*(L0-p0)-(C0-n0)*(y0-T0),f0=l0*n0-C0*i0,O0=y0*p0-L0*T0;m0.x=(f0*(y0-T0)-O0*(l0-i0))/d0,m0.y=(f0*(L0-p0)-O0*(C0-n0))/d0},function(s){s.rp0=s.stack.pop(),a0.DEBUG&&console.log(s.step,"SRP0[]",s.rp0)},function(s){s.rp1=s.stack.pop(),a0.DEBUG&&console.log(s.step,"SRP1[]",s.rp1)},function(s){s.rp2=s.stack.pop(),a0.DEBUG&&console.log(s.step,"SRP2[]",s.rp2)},function(s){let h=s.stack.pop();switch(a0.DEBUG&&console.log(s.step,"SZP0[]",h),s.zp0=h,h){case 0:s.tZone||L5(s),s.z0=s.tZone;break;case 1:s.z0=s.gZone;break;default:throw new Error("Invalid zone pointer")}},function(s){let h=s.stack.pop();switch(a0.DEBUG&&console.log(s.step,"SZP1[]",h),s.zp1=h,h){case 0:s.tZone||L5(s),s.z1=s.tZone;break;case 1:s.z1=s.gZone;break;default:throw new Error("Invalid zone pointer")}},function(s){let h=s.stack.pop();switch(a0.DEBUG&&console.log(s.step,"SZP2[]",h),s.zp2=h,h){case 0:s.tZone||L5(s),s.z2=s.tZone;break;case 1:s.z2=s.gZone;break;default:throw new Error("Invalid zone pointer")}},function(s){let h=s.stack.pop();switch(a0.DEBUG&&console.log(s.step,"SZPS[]",h),s.zp0=s.zp1=s.zp2=h,h){case 0:s.tZone||L5(s),s.z0=s.z1=s.z2=s.tZone;break;case 1:s.z0=s.z1=s.z2=s.gZone;break;default:throw new Error("Invalid zone pointer")}},function(s){s.loop=s.stack.pop(),a0.DEBUG&&console.log(s.step,"SLOOP[]",s.loop)},function(s){a0.DEBUG&&console.log(s.step,"RTG[]"),s.round=C9},function(s){a0.DEBUG&&console.log(s.step,"RTHG[]"),s.round=Gi},function(s){let h=s.stack.pop();a0.DEBUG&&console.log(s.step,"SMD[]",h),s.minDis=h/64},function(s){a0.DEBUG&&console.log(s.step,"ELSE[]"),x9(s,!1)},function(s){let h=s.stack.pop();a0.DEBUG&&console.log(s.step,"JMPR[]",h),s.ip+=h-1},function(s){let h=s.stack.pop();a0.DEBUG&&console.log(s.step,"SCVTCI[]",h),s.cvCutIn=h/64},void 0,void 0,function(s){let h=s.stack;a0.DEBUG&&console.log(s.step,"DUP[]"),h.push(h[h.length-1])},R6,function(s){a0.DEBUG&&console.log(s.step,"CLEAR[]"),s.stack.length=0},function(s){let h=s.stack,C=h.pop(),x=h.pop();a0.DEBUG&&console.log(s.step,"SWAP[]"),h.push(C),h.push(x)},function(s){let h=s.stack;a0.DEBUG&&console.log(s.step,"DEPTH[]"),h.push(h.length)},function(s){let h=s.stack,C=h.pop();a0.DEBUG&&console.log(s.step,"CINDEX[]",C),h.push(h[h.length-C])},function(s){let h=s.stack,C=h.pop();a0.DEBUG&&console.log(s.step,"MINDEX[]",C),h.push(h.splice(h.length-C,1)[0])},void 0,void 0,void 0,function(s){let h=s.stack,C=h.pop(),x=h.pop();a0.DEBUG&&console.log(s.step,"LOOPCALL[]",C,x);let k=s.ip,D=s.prog;s.prog=s.funcs[C];for(let R=0;R<x;R++)d3(s),a0.DEBUG&&console.log(++s.step,R+1<x?"next loopcall":"done loopcall",R);s.ip=k,s.prog=D},function(s){let h=s.stack.pop();a0.DEBUG&&console.log(s.step,"CALL[]",h);let C=s.ip,x=s.prog;s.prog=s.funcs[h],d3(s),s.ip=C,s.prog=x,a0.DEBUG&&console.log(++s.step,"returning from",h)},function(s){if(s.env!=="fpgm")throw new Error("FDEF not allowed here");let h=s.stack,C=s.prog,x=s.ip,k=h.pop(),D=x;for(a0.DEBUG&&console.log(s.step,"FDEF[]",k);C[++x]!==45;);s.ip=x,s.funcs[k]=C.slice(D+1,x)},void 0,H9.bind(void 0,0),H9.bind(void 0,1),D9.bind(void 0,T2),D9.bind(void 0,M2),T9.bind(void 0,0),T9.bind(void 0,1),V9.bind(void 0,0),V9.bind(void 0,1),R9.bind(void 0,0),R9.bind(void 0,1),function(s){let h=s.stack,C=s.loop,x=s.fv,k=h.pop()/64,D=s.z2;for(;C--;){let R=h.pop(),O=D[R];a0.DEBUG&&console.log(s.step,(s.loop>1?"loop "+(s.loop-C)+": ":"")+"SHPIX[]",R,k),x.setRelative(O,O,k),x.touch(O)}s.loop=1},function(s){let h=s.stack,C=s.rp1,x=s.rp2,k=s.loop,D=s.z0[C],R=s.z1[x],O=s.fv,F=s.dpv,W=s.z2;for(;k--;){let $=h.pop(),Y=W[$];a0.DEBUG&&console.log(s.step,(s.loop>1?"loop "+(s.loop-k)+": ":"")+"IP[]",$,C,"<->",x),O.interpolate(Y,D,R,F),O.touch(Y)}s.loop=1},F9.bind(void 0,0),F9.bind(void 0,1),function(s){let h=s.stack,C=s.rp0,x=s.z0[C],k=s.loop,D=s.fv,R=s.pv,O=s.z1;for(;k--;){let F=h.pop(),W=O[F];a0.DEBUG&&console.log(s.step,(s.loop>1?"loop "+(s.loop-k)+": ":"")+"ALIGNRP[]",F),D.setRelative(W,x,0,R),D.touch(W)}s.loop=1},function(s){a0.DEBUG&&console.log(s.step,"RTDG[]"),s.round=ji},B9.bind(void 0,0),B9.bind(void 0,1),function(s){let h=s.prog,C=s.ip,x=s.stack,k=h[++C];a0.DEBUG&&console.log(s.step,"NPUSHB[]",k);for(let D=0;D<k;D++)x.push(h[++C]);s.ip=C},function(s){let h=s.ip,C=s.prog,x=s.stack,k=C[++h];a0.DEBUG&&console.log(s.step,"NPUSHW[]",k);for(let D=0;D<k;D++){let R=C[++h]<<8|C[++h];32768&R&&(R=-(1+(65535^R))),x.push(R)}s.ip=h},function(s){let h=s.stack,C=s.store;C||(C=s.store=[]);let x=h.pop(),k=h.pop();a0.DEBUG&&console.log(s.step,"WS",x,k),C[k]=x},function(s){let h=s.stack,C=s.store,x=h.pop();a0.DEBUG&&console.log(s.step,"RS",x);let k=C&&C[x]||0;h.push(k)},function(s){let h=s.stack,C=h.pop(),x=h.pop();a0.DEBUG&&console.log(s.step,"WCVTP",C,x),s.cvt[x]=C/64},function(s){let h=s.stack,C=h.pop();a0.DEBUG&&console.log(s.step,"RCVT",C),h.push(64*s.cvt[C])},P9.bind(void 0,0),P9.bind(void 0,1),void 0,O9.bind(void 0,0),O9.bind(void 0,1),function(s){a0.DEBUG&&console.log(s.step,"MPPEM[]"),s.stack.push(s.ppem)},void 0,function(s){a0.DEBUG&&console.log(s.step,"FLIPON[]"),s.autoFlip=!0},void 0,void 0,function(s){let h=s.stack,C=h.pop(),x=h.pop();a0.DEBUG&&console.log(s.step,"LT[]",C,x),h.push(x<C?1:0)},function(s){let h=s.stack,C=h.pop(),x=h.pop();a0.DEBUG&&console.log(s.step,"LTEQ[]",C,x),h.push(x<=C?1:0)},function(s){let h=s.stack,C=h.pop(),x=h.pop();a0.DEBUG&&console.log(s.step,"GT[]",C,x),h.push(x>C?1:0)},function(s){let h=s.stack,C=h.pop(),x=h.pop();a0.DEBUG&&console.log(s.step,"GTEQ[]",C,x),h.push(x>=C?1:0)},function(s){let h=s.stack,C=h.pop(),x=h.pop();a0.DEBUG&&console.log(s.step,"EQ[]",C,x),h.push(C===x?1:0)},function(s){let h=s.stack,C=h.pop(),x=h.pop();a0.DEBUG&&console.log(s.step,"NEQ[]",C,x),h.push(C!==x?1:0)},function(s){let h=s.stack,C=h.pop();a0.DEBUG&&console.log(s.step,"ODD[]",C),h.push(Math.trunc(C)%2?1:0)},function(s){let h=s.stack,C=h.pop();a0.DEBUG&&console.log(s.step,"EVEN[]",C),h.push(Math.trunc(C)%2?0:1)},function(s){let h=s.stack.pop();a0.DEBUG&&console.log(s.step,"IF[]",h),h||(x9(s,!0),a0.DEBUG&&console.log(s.step,"EIF[]"))},function(s){a0.DEBUG&&console.log(s.step,"EIF[]")},function(s){let h=s.stack,C=h.pop(),x=h.pop();a0.DEBUG&&console.log(s.step,"AND[]",C,x),h.push(C&&x?1:0)},function(s){let h=s.stack,C=h.pop(),x=h.pop();a0.DEBUG&&console.log(s.step,"OR[]",C,x),h.push(C||x?1:0)},function(s){let h=s.stack,C=h.pop();a0.DEBUG&&console.log(s.step,"NOT[]",C),h.push(C?0:1)},F6.bind(void 0,1),function(s){let h=s.stack.pop();a0.DEBUG&&console.log(s.step,"SDB[]",h),s.deltaBase=h},function(s){let h=s.stack.pop();a0.DEBUG&&console.log(s.step,"SDS[]",h),s.deltaShift=Math.pow(.5,h)},function(s){let h=s.stack,C=h.pop(),x=h.pop();a0.DEBUG&&console.log(s.step,"ADD[]",C,x),h.push(x+C)},function(s){let h=s.stack,C=h.pop(),x=h.pop();a0.DEBUG&&console.log(s.step,"SUB[]",C,x),h.push(x-C)},function(s){let h=s.stack,C=h.pop(),x=h.pop();a0.DEBUG&&console.log(s.step,"DIV[]",C,x),h.push(64*x/C)},function(s){let h=s.stack,C=h.pop(),x=h.pop();a0.DEBUG&&console.log(s.step,"MUL[]",C,x),h.push(x*C/64)},function(s){let h=s.stack,C=h.pop();a0.DEBUG&&console.log(s.step,"ABS[]",C),h.push(Math.abs(C))},function(s){let h=s.stack,C=h.pop();a0.DEBUG&&console.log(s.step,"NEG[]",C),h.push(-C)},function(s){let h=s.stack,C=h.pop();a0.DEBUG&&console.log(s.step,"FLOOR[]",C),h.push(64*Math.floor(C/64))},function(s){let h=s.stack,C=h.pop();a0.DEBUG&&console.log(s.step,"CEILING[]",C),h.push(64*Math.ceil(C/64))},A5.bind(void 0,0),A5.bind(void 0,1),A5.bind(void 0,2),A5.bind(void 0,3),void 0,void 0,void 0,void 0,function(s){let h=s.stack,C=h.pop(),x=h.pop();a0.DEBUG&&console.log(s.step,"WCVTF[]",C,x),s.cvt[x]=C*s.ppem/s.font.unitsPerEm},F6.bind(void 0,2),F6.bind(void 0,3),B6.bind(void 0,1),B6.bind(void 0,2),B6.bind(void 0,3),function(s){let h,C=s.stack.pop();switch(a0.DEBUG&&console.log(s.step,"SROUND[]",C),s.round=M9,192&C){case 0:h=.5;break;case 64:h=1;break;case 128:h=2;break;default:throw new Error("invalid SROUND value")}switch(s.srPeriod=h,48&C){case 0:s.srPhase=0;break;case 16:s.srPhase=.25*h;break;case 32:s.srPhase=.5*h;break;case 48:s.srPhase=.75*h;break;default:throw new Error("invalid SROUND value")}C&=15,s.srThreshold=C===0?0:(C/8-.5)*h},function(s){let h,C=s.stack.pop();switch(a0.DEBUG&&console.log(s.step,"S45ROUND[]",C),s.round=M9,192&C){case 0:h=Math.sqrt(2)/2;break;case 64:h=Math.sqrt(2);break;case 128:h=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(s.srPeriod=h,48&C){case 0:s.srPhase=0;break;case 16:s.srPhase=.25*h;break;case 32:s.srPhase=.5*h;break;case 48:s.srPhase=.75*h;break;default:throw new Error("invalid S45ROUND value")}C&=15,s.srThreshold=C===0?0:(C/8-.5)*h},void 0,void 0,function(s){a0.DEBUG&&console.log(s.step,"ROFF[]"),s.round=Wi},void 0,function(s){a0.DEBUG&&console.log(s.step,"RUTG[]"),s.round=qi},function(s){a0.DEBUG&&console.log(s.step,"RDTG[]"),s.round=$i},R6,R6,void 0,void 0,void 0,void 0,void 0,function(s){let h=s.stack.pop();a0.DEBUG&&console.log(s.step,"SCANCTRL[]",h)},I9.bind(void 0,0),I9.bind(void 0,1),function(s){let h=s.stack,C=h.pop(),x=0;a0.DEBUG&&console.log(s.step,"GETINFO[]",C),1&C&&(x=35),32&C&&(x|=4096),h.push(x)},void 0,function(s){let h=s.stack,C=h.pop(),x=h.pop(),k=h.pop();a0.DEBUG&&console.log(s.step,"ROLL[]"),h.push(x),h.push(C),h.push(k)},function(s){let h=s.stack,C=h.pop(),x=h.pop();a0.DEBUG&&console.log(s.step,"MAX[]",C,x),h.push(Math.max(x,C))},function(s){let h=s.stack,C=h.pop(),x=h.pop();a0.DEBUG&&console.log(s.step,"MIN[]",C,x),h.push(Math.min(x,C))},function(s){let h=s.stack.pop();a0.DEBUG&&console.log(s.step,"SCANTYPE[]",h)},function(s){let h=s.stack.pop(),C=s.stack.pop();switch(a0.DEBUG&&console.log(s.step,"INSTCTRL[]",h,C),h){case 1:return void(s.inhibitGridFit=!!C);case 2:return void(s.ignoreCvt=!!C);default:throw new Error("invalid INSTCTRL[] selector")}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,G2.bind(void 0,1),G2.bind(void 0,2),G2.bind(void 0,3),G2.bind(void 0,4),G2.bind(void 0,5),G2.bind(void 0,6),G2.bind(void 0,7),G2.bind(void 0,8),q2.bind(void 0,1),q2.bind(void 0,2),q2.bind(void 0,3),q2.bind(void 0,4),q2.bind(void 0,5),q2.bind(void 0,6),q2.bind(void 0,7),q2.bind(void 0,8),b0.bind(void 0,0,0,0,0,0),b0.bind(void 0,0,0,0,0,1),b0.bind(void 0,0,0,0,0,2),b0.bind(void 0,0,0,0,0,3),b0.bind(void 0,0,0,0,1,0),b0.bind(void 0,0,0,0,1,1),b0.bind(void 0,0,0,0,1,2),b0.bind(void 0,0,0,0,1,3),b0.bind(void 0,0,0,1,0,0),b0.bind(void 0,0,0,1,0,1),b0.bind(void 0,0,0,1,0,2),b0.bind(void 0,0,0,1,0,3),b0.bind(void 0,0,0,1,1,0),b0.bind(void 0,0,0,1,1,1),b0.bind(void 0,0,0,1,1,2),b0.bind(void 0,0,0,1,1,3),b0.bind(void 0,0,1,0,0,0),b0.bind(void 0,0,1,0,0,1),b0.bind(void 0,0,1,0,0,2),b0.bind(void 0,0,1,0,0,3),b0.bind(void 0,0,1,0,1,0),b0.bind(void 0,0,1,0,1,1),b0.bind(void 0,0,1,0,1,2),b0.bind(void 0,0,1,0,1,3),b0.bind(void 0,0,1,1,0,0),b0.bind(void 0,0,1,1,0,1),b0.bind(void 0,0,1,1,0,2),b0.bind(void 0,0,1,1,0,3),b0.bind(void 0,0,1,1,1,0),b0.bind(void 0,0,1,1,1,1),b0.bind(void 0,0,1,1,1,2),b0.bind(void 0,0,1,1,1,3),b0.bind(void 0,1,0,0,0,0),b0.bind(void 0,1,0,0,0,1),b0.bind(void 0,1,0,0,0,2),b0.bind(void 0,1,0,0,0,3),b0.bind(void 0,1,0,0,1,0),b0.bind(void 0,1,0,0,1,1),b0.bind(void 0,1,0,0,1,2),b0.bind(void 0,1,0,0,1,3),b0.bind(void 0,1,0,1,0,0),b0.bind(void 0,1,0,1,0,1),b0.bind(void 0,1,0,1,0,2),b0.bind(void 0,1,0,1,0,3),b0.bind(void 0,1,0,1,1,0),b0.bind(void 0,1,0,1,1,1),b0.bind(void 0,1,0,1,1,2),b0.bind(void 0,1,0,1,1,3),b0.bind(void 0,1,1,0,0,0),b0.bind(void 0,1,1,0,0,1),b0.bind(void 0,1,1,0,0,2),b0.bind(void 0,1,1,0,0,3),b0.bind(void 0,1,1,0,1,0),b0.bind(void 0,1,1,0,1,1),b0.bind(void 0,1,1,0,1,2),b0.bind(void 0,1,1,0,1,3),b0.bind(void 0,1,1,1,0,0),b0.bind(void 0,1,1,1,0,1),b0.bind(void 0,1,1,1,0,2),b0.bind(void 0,1,1,1,0,3),b0.bind(void 0,1,1,1,1,0),b0.bind(void 0,1,1,1,1,1),b0.bind(void 0,1,1,1,1,2),b0.bind(void 0,1,1,1,1,3)];let Yi=y9;function N0(s){(s=s||{}).empty||(O3(s.familyName,"When creating a new Font object, familyName is required."),O3(s.styleName,"When creating a new Font object, styleName is required."),O3(s.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),O3(s.ascender,"When creating a new Font object, ascender is required."),O3(s.descender,"When creating a new Font object, descender is required."),O3(s.descender<0,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:s.familyName||" "},fontSubfamily:{en:s.styleName||" "},fullName:{en:s.fullName||s.familyName+" "+s.styleName},postScriptName:{en:s.postScriptName||s.familyName+s.styleName},designer:{en:s.designer||" "},designerURL:{en:s.designerURL||" "},manufacturer:{en:s.manufacturer||" "},manufacturerURL:{en:s.manufacturerURL||" "},license:{en:s.license||" "},licenseURL:{en:s.licenseURL||" "},version:{en:s.version||"Version 0.1"},description:{en:s.description||" "},copyright:{en:s.copyright||" "},trademark:{en:s.trademark||" "}},this.unitsPerEm=s.unitsPerEm||1e3,this.ascender=s.ascender,this.descender=s.descender,this.createdTimestamp=s.createdTimestamp,this.tables={os2:{usWeightClass:s.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:s.widthClass||this.usWidthClasses.MEDIUM,fsSelection:s.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new B3.GlyphSet(this,s.glyphs||[]),this.encoding=new F0(this),this.position=new Zi(this),this.substitution=new Ni(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:this.outlinesFormat==="truetype"?this._hinting=new Yi(this):void 0}})}N0.prototype.hasChar=function(s){return this.encoding.charToGlyphIndex(s)!==null},N0.prototype.charToGlyphIndex=function(s){return this.encoding.charToGlyphIndex(s)},N0.prototype.charToGlyph=function(s){let h=this.charToGlyphIndex(s),C=this.glyphs.get(h);return C||(C=this.glyphs.get(0)),C},N0.prototype.stringToGlyphs=function(s,h){h=h||this.defaultRenderOptions;let C=[];for(let R=0;R<s.length;R+=1){let O=s[R];C.push(this.charToGlyphIndex(O))}let x=C.length;if(h.features){let R=h.script||this.substitution.getDefaultScriptName(),O=[];h.features.liga&&(O=O.concat(this.substitution.getFeature("liga",R,h.language))),h.features.rlig&&(O=O.concat(this.substitution.getFeature("rlig",R,h.language)));for(let F=0;F<x;F+=1)for(let W=0;W<O.length;W++){let $=O[W],Y=$.sub,X=Y.length,m0=0;for(;m0<X&&Y[m0]===C[F+m0];)m0++;m0===X&&(C.splice(F,X,$.by),x=x-X+1)}}let k=new Array(x),D=this.glyphs.get(0);for(let R=0;R<x;R+=1)k[R]=this.glyphs.get(C[R])||D;return k},N0.prototype.nameToGlyphIndex=function(s){return this.glyphNames.nameToGlyphIndex(s)},N0.prototype.nameToGlyph=function(s){let h=this.nameToGlyphIndex(s),C=this.glyphs.get(h);return C||(C=this.glyphs.get(0)),C},N0.prototype.glyphIndexToName=function(s){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(s):""},N0.prototype.getKerningValue=function(s,h){return s=s.index||s,h=h.index||h,this.kerningPairs[s+","+h]||0},N0.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},N0.prototype.forEachGlyph=function(s,h,C,x,k,D){h=h!==void 0?h:0,C=C!==void 0?C:0,x=x!==void 0?x:72,k=k||this.defaultRenderOptions;let R=1/this.unitsPerEm*x,O=this.stringToGlyphs(s,k),F;if(k.kerning){let W=k.script||this.position.getDefaultScriptName();F=this.position.getKerningTables(W,k.language)}for(let W=0;W<O.length;W+=1){let $=O[W];D.call(this,$,h,C,x,k),$.advanceWidth&&(h+=$.advanceWidth*R),k.kerning&&W<O.length-1&&(h+=(F?this.position.getKerningValue(F,$.index,O[W+1].index):this.getKerningValue($,O[W+1]))*R),k.letterSpacing?h+=k.letterSpacing*x:k.tracking&&(h+=k.tracking/1e3*x)}return h},N0.prototype.getPath=function(s,h,C,x,k){let D=new r;return this.forEachGlyph(s,h,C,x,k,function(R,O,F,W){let $=R.getPath(O,F,W,k,this);D.extend($)}),D},N0.prototype.getPaths=function(s,h,C,x,k){let D=[];return this.forEachGlyph(s,h,C,x,k,function(R,O,F,W){let $=R.getPath(O,F,W,k,this);D.push($)}),D},N0.prototype.getAdvanceWidth=function(s,h,C){return this.forEachGlyph(s,0,0,h,C,function(){})},N0.prototype.draw=function(s,h,C,x,k,D){this.getPath(h,C,x,k,D).draw(s)},N0.prototype.drawPoints=function(s,h,C,x,k,D){this.forEachGlyph(h,C,x,k,D,function(R,O,F,W){R.drawPoints(s,O,F,W)})},N0.prototype.drawMetrics=function(s,h,C,x,k,D){this.forEachGlyph(h,C,x,k,D,function(R,O,F,W){R.drawMetrics(s,O,F,W)})},N0.prototype.getEnglishName=function(s){let h=this.names[s];if(h)return h.en},N0.prototype.validate=function(){let s=[],h=this;function C(k,D){k||s.push(D)}function x(k){let D=h.getEnglishName(k);C(D&&D.trim().length>0,"No English "+k+" specified.")}x("fontFamily"),x("weightName"),x("manufacturer"),x("copyright"),x("version"),C(this.unitsPerEm>0,"No unitsPerEm specified.")},N0.prototype.toTables=function(){return Ii(this)},N0.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},N0.prototype.toArrayBuffer=function(){let s=this.toTables().encode(),h=new ArrayBuffer(s.length),C=new Uint8Array(h);for(let x=0;x<s.length;x++)C[x]=s[x];return h},N0.prototype.download=function(s){let h=this.getEnglishName("fontFamily"),C=this.getEnglishName("fontSubfamily");s=s||h.replace(/\s/g,"")+"-"+C+".otf";let x=this.toArrayBuffer();if(typeof window!="undefined")window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,x.byteLength,function(k){k.root.getFile(s,{create:!0},function(D){D.createWriter(function(R){let O=new DataView(x),F=new Blob([O],{type:"font/opentype"});R.write(F),R.addEventListener("writeend",function(){location.href=D.toURL()},!1)})})},function(k){throw new Error(k.name+": "+k.message)});else{let k=c(89),D=function(R){let O=new Buffer(R.byteLength),F=new Uint8Array(R);for(let W=0;W<O.length;++W)O[W]=F[W];return O}(x);k.writeFileSync(s,D)}},N0.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},N0.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},N0.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};let Z9=N0;function Xi(s,h,C){let x={},k=new u0.Parser(s,h);return x.tag=k.parseTag(),x.minValue=k.parseFixed(),x.defaultValue=k.parseFixed(),x.maxValue=k.parseFixed(),k.skip("uShort",1),x.name=C[k.parseUShort()]||{},x}function Ji(s,h,C,x){let k={},D=new u0.Parser(s,h);k.name=x[D.parseUShort()]||{},D.skip("uShort",1),k.coordinates={};for(let R=0;R<C.length;++R)k.coordinates[C[R].tag]=D.parseFixed();return k}let Qi=function(s,h,C){let x=new u0.Parser(s,h),k=x.parseULong();_.argument(k===65536,"Unsupported fvar table version.");let D=x.parseOffset16();x.skip("uShort",1);let R=x.parseUShort(),O=x.parseUShort(),F=x.parseUShort(),W=x.parseUShort(),$=[];for(let m0=0;m0<R;m0++)$.push(Xi(s,h+D+m0*O,C));let Y=[],X=h+D+R*O;for(let m0=0;m0<F;m0++)Y.push(Ji(s,X+m0*W,$,C));return{axes:$,instances:Y}},$1=new Array(10);$1[1]=function(){let s=this.offset+this.relativeOffset,h=this.parseUShort();return h===1?{posFormat:1,coverage:this.parsePointer(J.coverage),value:this.parseValueRecord()}:h===2?{posFormat:2,coverage:this.parsePointer(J.coverage),values:this.parseValueRecordList()}:void _.assert(!1,"0x"+s.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},$1[2]=function(){let s=this.offset+this.relativeOffset,h=this.parseUShort(),C=this.parsePointer(J.coverage),x=this.parseUShort(),k=this.parseUShort();if(h===1)return{posFormat:h,coverage:C,valueFormat1:x,valueFormat2:k,pairSets:this.parseList(J.pointer(J.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(x),value2:this.parseValueRecord(k)}})))};if(h===2){let D=this.parsePointer(J.classDef),R=this.parsePointer(J.classDef),O=this.parseUShort(),F=this.parseUShort();return{posFormat:h,coverage:C,valueFormat1:x,valueFormat2:k,classDef1:D,classDef2:R,class1Count:O,class2Count:F,classRecords:this.parseList(O,J.list(F,function(){return{value1:this.parseValueRecord(x),value2:this.parseValueRecord(k)}}))}}_.assert(!1,"0x"+s.toString(16)+": GPOS lookup type 2 format must be 1 or 2.")},$1[3]=function(){return{error:"GPOS Lookup 3 not supported"}},$1[4]=function(){return{error:"GPOS Lookup 4 not supported"}},$1[5]=function(){return{error:"GPOS Lookup 5 not supported"}},$1[6]=function(){return{error:"GPOS Lookup 6 not supported"}},$1[7]=function(){return{error:"GPOS Lookup 7 not supported"}},$1[8]=function(){return{error:"GPOS Lookup 8 not supported"}},$1[9]=function(){return{error:"GPOS Lookup 9 not supported"}},new Array(10);let ea=function(s,h){let C=new J(s,h=h||0),x=C.parseVersion(1);return _.argument(x===1||x===1.1,"Unsupported GPOS table version "+x),x===1?{version:x,scripts:C.parseScriptList(),features:C.parseFeatureList(),lookups:C.parseLookupList($1)}:{version:x,scripts:C.parseScriptList(),features:C.parseFeatureList(),lookups:C.parseLookupList($1),variations:C.parseFeatureVariationsList()}},ta=function(s,h){let C=new u0.Parser(s,h),x=C.parseUShort();if(x===0)return function(k){let D={};k.skip("uShort");let R=k.parseUShort();_.argument(R===0,"Unsupported kern sub-table version."),k.skip("uShort",2);let O=k.parseUShort();k.skip("uShort",3);for(let F=0;F<O;F+=1){let W=k.parseUShort(),$=k.parseUShort(),Y=k.parseShort();D[W+","+$]=Y}return D}(C);if(x===1)return function(k){let D={};k.skip("uShort"),k.parseULong()>1&&console.warn("Only the first kern subtable is supported."),k.skip("uLong");let R=255&k.parseUShort();if(k.skip("uShort"),R===0){let O=k.parseUShort();k.skip("uShort",3);for(let F=0;F<O;F+=1){let W=k.parseUShort(),$=k.parseUShort(),Y=k.parseShort();D[W+","+$]=Y}}return D}(C);throw new Error("Unsupported kern table version ("+x+").")},sa=function(s,h,C,x){let k=new u0.Parser(s,h),D=x?k.parseUShort:k.parseULong,R=[];for(let O=0;O<C+1;O+=1){let F=D.call(k);x&&(F*=2),R.push(F)}return R};function ia(s,h){c(89).readFile(s,function(C,x){if(C)return h(C.message);h(null,b9(x))})}function aa(s,h){let C=new XMLHttpRequest;C.open("get",s,!0),C.responseType="arraybuffer",C.onload=function(){return C.response?h(null,C.response):h("Font could not be loaded: "+C.statusText)},C.onerror=function(){h("Font could not be loaded")},C.send()}function U9(s,h){let C=[],x=12;for(let k=0;k<h;k+=1){let D=u0.getTag(s,x),R=u0.getULong(s,x+4),O=u0.getULong(s,x+8),F=u0.getULong(s,x+12);C.push({tag:D,checksum:R,offset:O,length:F,compression:!1}),x+=16}return C}function i1(s,h){if(h.compression==="WOFF"){let C=new Uint8Array(s.buffer,h.offset+2,h.compressedLength-2),x=new Uint8Array(h.length);if(f()(C,x),x.byteLength!==h.length)throw new Error("Decompression error: "+h.tag+" decompressed length doesn't match recorded length");return{data:new DataView(x.buffer,0),offset:0}}return{data:s,offset:h.offset}}function P6(s){let h,C,x=new Z9({empty:!0}),k=new DataView(s,0),D,R=[],O=u0.getTag(k,0);if(O===String.fromCharCode(0,1,0,0)||O==="true"||O==="typ1")x.outlinesFormat="truetype",D=u0.getUShort(k,4),R=U9(k,D);else if(O==="OTTO")x.outlinesFormat="cff",D=u0.getUShort(k,4),R=U9(k,D);else{if(O!=="wOFF")throw new Error("Unsupported OpenType signature "+O);{let p0=u0.getTag(k,4);if(p0===String.fromCharCode(0,1,0,0))x.outlinesFormat="truetype";else{if(p0!=="OTTO")throw new Error("Unsupported OpenType flavor "+O);x.outlinesFormat="cff"}D=u0.getUShort(k,12),R=function(d0,f0){let O0=[],E0=44;for(let a1=0;a1<f0;a1+=1){let b1=u0.getTag(d0,E0),S1=u0.getULong(d0,E0+4),m1=u0.getULong(d0,E0+8),y1=u0.getULong(d0,E0+12),h1;h1=m1<y1&&"WOFF",O0.push({tag:b1,offset:S1,compression:h1,compressedLength:m1,length:y1}),E0+=20}return O0}(k,D)}}let F,W,$,Y,X,m0,l0,C0,i0,n0,y0;for(let p0=0;p0<D;p0+=1){let d0=R[p0],f0;switch(d0.tag){case"cmap":f0=i1(k,d0),x.tables.cmap=x0(f0.data,f0.offset),x.encoding=new x1(x.tables.cmap);break;case"cvt ":f0=i1(k,d0),y0=new u0.Parser(f0.data,f0.offset),x.tables.cvt=y0.parseShortList(d0.length/2);break;case"fvar":W=d0;break;case"fpgm":f0=i1(k,d0),y0=new u0.Parser(f0.data,f0.offset),x.tables.fpgm=y0.parseByteList(d0.length);break;case"head":f0=i1(k,d0),x.tables.head=mi(f0.data,f0.offset),x.unitsPerEm=x.tables.head.unitsPerEm,h=x.tables.head.indexToLocFormat;break;case"hhea":f0=i1(k,d0),x.tables.hhea=gi(f0.data,f0.offset),x.ascender=x.tables.hhea.ascender,x.descender=x.tables.hhea.descender,x.numberOfHMetrics=x.tables.hhea.numberOfHMetrics;break;case"hmtx":m0=d0;break;case"ltag":f0=i1(k,d0),C=wi(f0.data,f0.offset);break;case"maxp":f0=i1(k,d0),x.tables.maxp=_i(f0.data,f0.offset),x.numGlyphs=x.tables.maxp.numGlyphs;break;case"name":i0=d0;break;case"OS/2":f0=i1(k,d0),x.tables.os2=ki(f0.data,f0.offset);break;case"post":f0=i1(k,d0),x.tables.post=Di(f0.data,f0.offset),x.glyphNames=new P0(x.tables.post);break;case"prep":f0=i1(k,d0),y0=new u0.Parser(f0.data,f0.offset),x.tables.prep=y0.parseByteList(d0.length);break;case"glyf":$=d0;break;case"loca":C0=d0;break;case"CFF ":F=d0;break;case"kern":l0=d0;break;case"GPOS":Y=d0;break;case"GSUB":X=d0;break;case"meta":n0=d0}}let L0=i1(k,i0);if(x.tables.name=Li(L0.data,L0.offset,C),x.names=x.tables.name,$&&C0){let p0=h===0,d0=i1(k,C0),f0=sa(d0.data,d0.offset,x.numGlyphs,p0),O0=i1(k,$);x.glyphs=G8.parse(O0.data,O0.offset,f0,x)}else{if(!F)throw new Error("Font doesn't contain TrueType or CFF outlines.");{let p0=i1(k,F);ui(p0.data,p0.offset,x)}}let T0=i1(k,m0);if(fi(T0.data,T0.offset,x.numberOfHMetrics,x.numGlyphs,x.glyphs),function(p0){let d0,f0=p0.tables.cmap.glyphIndexMap,O0=Object.keys(f0);for(let E0=0;E0<O0.length;E0+=1){let a1=O0[E0],b1=f0[a1];d0=p0.glyphs.get(b1),d0.addUnicode(parseInt(a1))}for(let E0=0;E0<p0.glyphs.length;E0+=1)d0=p0.glyphs.get(E0),p0.cffEncoding?p0.isCIDFont?d0.name="gid"+E0:d0.name=p0.cffEncoding.charset[E0]:p0.glyphNames.names&&(d0.name=p0.glyphNames.glyphIndexToName(E0))}(x),l0){let p0=i1(k,l0);x.kerningPairs=ta(p0.data,p0.offset)}else x.kerningPairs={};if(Y){let p0=i1(k,Y);x.tables.gpos=ea(p0.data,p0.offset)}if(X){let p0=i1(k,X);x.tables.gsub=Vi(p0.data,p0.offset)}if(W){let p0=i1(k,W);x.tables.fvar=Qi(p0.data,p0.offset,x.names)}if(n0){let p0=i1(k,n0);x.tables.meta=Fi(p0.data,p0.offset),x.metas=x.tables.meta}return x}function ca(s,h){(typeof window=="undefined"?ia:aa)(s,function(C,x){if(C)return h(C);let k;try{k=P6(x)}catch(D){return h(D,null)}return h(null,k)})}function ra(s){return P6(b9(c(89).readFileSync(s)))}},896:(o,n,c)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});let v=c(978);class f extends v.Writable{constructor(){super(...arguments),this.offset=0,this._waiters=[],this._closed=!1}_write(p,d,r){let z=0,M=()=>{for(;this._waiters.length>0;){let _=this._waiters[0];if(this._buffer){let L=this._buffer.size-this._buffer.offset;if(!(L+p.length>=_.size)){if(!_.skip){let S=Buffer.alloc(L+p.length);this._buffer.buf.copy(S,0,this._buffer.offset,this._buffer.size),p.copy(S,L,0,p.length),this._buffer.buf=S}this._buffer.offset=0,this._buffer.size=L+p.length,r();break}if(_.skip)this._buffer=void 0,_.resolve();else{let S=Math.min(L,_.size),y=Buffer.alloc(_.size);this._buffer.buf.copy(y,0,this._buffer.offset,this._buffer.offset+S),p.copy(y,S,0,_.size-S),_.resolve(y)}if(this.offset+=_.size,this._waiters.shift(),this._buffer=void 0,L+p.length===_.size){r();break}z+=_.size-L}else{if(!(p.length-z>=_.size)){this._buffer={buf:_.skip?void 0:p.slice(z),offset:0,size:p.length-z},z=p.length,r();break}if(_.skip?_.resolve():_.resolve(p.slice(z,z+_.size)),this.offset+=_.size,this._waiters.shift(),z+=_.size,p.length===z){r();break}}}this._processTrigger=p.length-z>0?M:void 0};M()}_destroy(p,d){this._processTrigger=void 0;for(let r of this._waiters)r.reject(p||new Error("stream destroyed"));this._waiters=[],this._closed=!0}_final(p){this._processTrigger=void 0;for(let d of this._waiters)d.reject(new Error("not enough data in stream"));this._waiters=[],this._closed=!0}read(p){return new Promise((d,r)=>{this._closed&&r(new Error("stream is closed")),this._waiters.push({resolve:d,reject:r,size:p,skip:!1}),this._processTrigger&&this._processTrigger()})}skip(p){return new Promise((d,r)=>{this._closed&&r(new Error("stream is closed")),this._waiters.push({resolve:d,reject:r,size:p,skip:!0}),this._processTrigger&&this._processTrigger()})}}function i(){return new f}o.exports=Object.assign(i,{default:i}),n.default=i},311:o=>{function n(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function c(B,N){this.source=B,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=N,this.destLen=0,this.ltree=new n,this.dtree=new n}var v=new n,f=new n,i=new Uint8Array(30),t=new Uint16Array(30),p=new Uint8Array(30),d=new Uint16Array(30),r=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),z=new n,M=new Uint8Array(320);function _(B,N,E,P){var I,U;for(I=0;I<E;++I)B[I]=0;for(I=0;I<30-E;++I)B[I+E]=I/E|0;for(U=P,I=0;I<30;++I)N[I]=U,U+=1<<B[I]}var L=new Uint16Array(16);function S(B,N,E,P){var I,U;for(I=0;I<16;++I)B.table[I]=0;for(I=0;I<P;++I)B.table[N[E+I]]++;for(B.table[0]=0,U=0,I=0;I<16;++I)L[I]=U,U+=B.table[I];for(I=0;I<P;++I)N[E+I]&&(B.trans[L[N[E+I]]++]=I)}function y(B){B.bitcount--||(B.tag=B.source[B.sourceIndex++],B.bitcount=7);var N=1&B.tag;return B.tag>>>=1,N}function A(B,N,E){if(!N)return E;for(;B.bitcount<24;)B.tag|=B.source[B.sourceIndex++]<<B.bitcount,B.bitcount+=8;var P=B.tag&65535>>>16-N;return B.tag>>>=N,B.bitcount-=N,P+E}function H(B,N){for(;B.bitcount<24;)B.tag|=B.source[B.sourceIndex++]<<B.bitcount,B.bitcount+=8;var E=0,P=0,I=0,U=B.tag;do P=2*P+(1&U),U>>>=1,++I,E+=N.table[I],P-=N.table[I];while(P>=0);return B.tag=U,B.bitcount-=I,N.trans[E+P]}function T(B,N,E){var P,I,U,K,Q,r0;for(P=A(B,5,257),I=A(B,5,1),U=A(B,4,4),K=0;K<19;++K)M[K]=0;for(K=0;K<U;++K){var e0=A(B,3,0);M[r[K]]=e0}for(S(z,M,0,19),Q=0;Q<P+I;){var c0=H(B,z);switch(c0){case 16:var j=M[Q-1];for(r0=A(B,2,3);r0;--r0)M[Q++]=j;break;case 17:for(r0=A(B,3,3);r0;--r0)M[Q++]=0;break;case 18:for(r0=A(B,7,11);r0;--r0)M[Q++]=0;break;default:M[Q++]=c0}}S(N,M,0,P),S(E,M,P,I)}function V(B,N,E){for(;;){var P,I,U,K,Q=H(B,N);if(Q===256)return 0;if(Q<256)B.dest[B.destLen++]=Q;else for(P=A(B,i[Q-=257],t[Q]),I=H(B,E),K=U=B.destLen-A(B,p[I],d[I]);K<U+P;++K)B.dest[B.destLen++]=B.dest[K]}}function Z(B){for(var N,E;B.bitcount>8;)B.sourceIndex--,B.bitcount-=8;if((N=256*(N=B.source[B.sourceIndex+1])+B.source[B.sourceIndex])!==(65535&~(256*B.source[B.sourceIndex+3]+B.source[B.sourceIndex+2])))return-3;for(B.sourceIndex+=4,E=N;E;--E)B.dest[B.destLen++]=B.source[B.sourceIndex++];return B.bitcount=0,0}(function(B,N){var E;for(E=0;E<7;++E)B.table[E]=0;for(B.table[7]=24,B.table[8]=152,B.table[9]=112,E=0;E<24;++E)B.trans[E]=256+E;for(E=0;E<144;++E)B.trans[24+E]=E;for(E=0;E<8;++E)B.trans[168+E]=280+E;for(E=0;E<112;++E)B.trans[176+E]=144+E;for(E=0;E<5;++E)N.table[E]=0;for(N.table[5]=32,E=0;E<32;++E)N.trans[E]=E})(v,f),_(i,t,4,3),_(p,d,2,1),i[28]=0,t[28]=258,o.exports=function(B,N){var E,P,I=new c(B,N);do{switch(E=y(I),A(I,2,0)){case 0:P=Z(I);break;case 1:P=V(I,v,f);break;case 2:T(I,I.ltree,I.dtree),P=V(I,I.ltree,I.dtree);break;default:P=-3}if(P!==0)throw new Error("Data error")}while(!E);return I.destLen<I.dest.length?typeof I.dest.slice=="function"?I.dest.slice(0,I.destLen):I.dest.subarray(0,I.destLen):I.dest}},371:o=>{"use strict";o.exports=function(n){n.prototype[Symbol.iterator]=function*(){for(let c=this.head;c;c=c.next)yield c.value}}},411:(o,n,c)=>{"use strict";function v(d){var r=this;if(r instanceof v||(r=new v),r.tail=null,r.head=null,r.length=0,d&&typeof d.forEach=="function")d.forEach(function(_){r.push(_)});else if(arguments.length>0)for(var z=0,M=arguments.length;z<M;z++)r.push(arguments[z]);return r}function f(d,r,z){var M=r===d.head?new p(z,null,r,d):new p(z,r,r.next,d);return M.next===null&&(d.tail=M),M.prev===null&&(d.head=M),d.length++,M}function i(d,r){d.tail=new p(r,d.tail,null,d),d.head||(d.head=d.tail),d.length++}function t(d,r){d.head=new p(r,null,d.head,d),d.tail||(d.tail=d.head),d.length++}function p(d,r,z,M){if(!(this instanceof p))return new p(d,r,z,M);this.list=M,this.value=d,r?(r.next=this,this.prev=r):this.prev=null,z?(z.prev=this,this.next=z):this.next=null}o.exports=v,v.Node=p,v.create=v,v.prototype.removeNode=function(d){if(d.list!==this)throw new Error("removing node which does not belong to this list");var r=d.next,z=d.prev;return r&&(r.prev=z),z&&(z.next=r),d===this.head&&(this.head=r),d===this.tail&&(this.tail=z),d.list.length--,d.next=null,d.prev=null,d.list=null,r},v.prototype.unshiftNode=function(d){if(d!==this.head){d.list&&d.list.removeNode(d);var r=this.head;d.list=this,d.next=r,r&&(r.prev=d),this.head=d,this.tail||(this.tail=d),this.length++}},v.prototype.pushNode=function(d){if(d!==this.tail){d.list&&d.list.removeNode(d);var r=this.tail;d.list=this,d.prev=r,r&&(r.next=d),this.tail=d,this.head||(this.head=d),this.length++}},v.prototype.push=function(){for(var d=0,r=arguments.length;d<r;d++)i(this,arguments[d]);return this.length},v.prototype.unshift=function(){for(var d=0,r=arguments.length;d<r;d++)t(this,arguments[d]);return this.length},v.prototype.pop=function(){if(this.tail){var d=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,d}},v.prototype.shift=function(){if(this.head){var d=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,d}},v.prototype.forEach=function(d,r){r=r||this;for(var z=this.head,M=0;z!==null;M++)d.call(r,z.value,M,this),z=z.next},v.prototype.forEachReverse=function(d,r){r=r||this;for(var z=this.tail,M=this.length-1;z!==null;M--)d.call(r,z.value,M,this),z=z.prev},v.prototype.get=function(d){for(var r=0,z=this.head;z!==null&&r<d;r++)z=z.next;if(r===d&&z!==null)return z.value},v.prototype.getReverse=function(d){for(var r=0,z=this.tail;z!==null&&r<d;r++)z=z.prev;if(r===d&&z!==null)return z.value},v.prototype.map=function(d,r){r=r||this;for(var z=new v,M=this.head;M!==null;)z.push(d.call(r,M.value,this)),M=M.next;return z},v.prototype.mapReverse=function(d,r){r=r||this;for(var z=new v,M=this.tail;M!==null;)z.push(d.call(r,M.value,this)),M=M.prev;return z},v.prototype.reduce=function(d,r){var z,M=this.head;if(arguments.length>1)z=r;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");M=this.head.next,z=this.head.value}for(var _=0;M!==null;_++)z=d(z,M.value,_),M=M.next;return z},v.prototype.reduceReverse=function(d,r){var z,M=this.tail;if(arguments.length>1)z=r;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");M=this.tail.prev,z=this.tail.value}for(var _=this.length-1;M!==null;_--)z=d(z,M.value,_),M=M.prev;return z},v.prototype.toArray=function(){for(var d=new Array(this.length),r=0,z=this.head;z!==null;r++)d[r]=z.value,z=z.next;return d},v.prototype.toArrayReverse=function(){for(var d=new Array(this.length),r=0,z=this.tail;z!==null;r++)d[r]=z.value,z=z.prev;return d},v.prototype.slice=function(d,r){(r=r||this.length)<0&&(r+=this.length),(d=d||0)<0&&(d+=this.length);var z=new v;if(r<d||r<0)return z;d<0&&(d=0),r>this.length&&(r=this.length);for(var M=0,_=this.head;_!==null&&M<d;M++)_=_.next;for(;_!==null&&M<r;M++,_=_.next)z.push(_.value);return z},v.prototype.sliceReverse=function(d,r){(r=r||this.length)<0&&(r+=this.length),(d=d||0)<0&&(d+=this.length);var z=new v;if(r<d||r<0)return z;d<0&&(d=0),r>this.length&&(r=this.length);for(var M=this.length,_=this.tail;_!==null&&M>r;M--)_=_.prev;for(;_!==null&&M>d;M--,_=_.prev)z.push(_.value);return z},v.prototype.splice=function(d,r,...z){d>this.length&&(d=this.length-1),d<0&&(d=this.length+d);for(var M=0,_=this.head;_!==null&&M<d;M++)_=_.next;var L=[];for(M=0;_&&M<r;M++)L.push(_.value),_=this.removeNode(_);for(_===null&&(_=this.tail),_!==this.head&&_!==this.tail&&(_=_.prev),M=0;M<z.length;M++)_=f(this,_,z[M]);return L},v.prototype.reverse=function(){for(var d=this.head,r=this.tail,z=d;z!==null;z=z.prev){var M=z.prev;z.prev=z.next,z.next=M}return this.head=r,this.tail=d,this};try{c(371)(v)}catch(d){}},109:(o,n,c)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0});let v=c(98),f=c(104),i;n.default=async function(p,d){var r,z;if(!i){if(typeof navigator!="undefined"&&"fonts"in navigator){try{let L=await((z=(r=navigator.permissions).request)===null||z===void 0?void 0:z.call(r,{name:"local-fonts"}));if(L&&L.state!=="granted")throw new Error("Permission to access local fonts not granted.")}catch(L){if(L.name!=="TypeError")throw L}let _={};try{let L=await navigator.fonts.query();for(let S of L)_.hasOwnProperty(S.family)||(_[S.family]=[]),_[S.family].push(S);i=Promise.resolve(_)}catch(L){console.error(L.name,L.message)}}else if(typeof process!="object"&&"queryLocalFonts"in window){let _={};try{let L=await window.queryLocalFonts();for(let S of L)_.hasOwnProperty(S.family)||(_[S.family]=[]),_[S.family].push(S);i=Promise.resolve(_)}catch(L){console.error(L.name,L.message)}}i||(i=Promise.resolve({}))}let M=await i;for(let _ of(0,f.default)(p)){if(t.includes(_))return;if(M.hasOwnProperty(_)&&M[_].length>0){let L=M[_][0];if("blob"in L){let S=await L.blob(),y=await S.arrayBuffer();return(0,v.loadBuffer)(y,{cacheSize:d})}return}}};let t=["serif","sans-serif","cursive","fantasy","monospace","system-ui","emoji","math","fangsong"]},833:(o,n,c)=>{"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.enableLigatures=void 0;let v=c(109);n.enableLigatures=function(f,i=[]){let t,p,d,r=0;return f.registerCharacterJoiner(z=>{let M=f.options.fontFamily;if(M&&(r===0||t!==M)){p=void 0,r=1,t=M;let _=t;(0,v.default)(_,1e5).then(L=>{_===f.options.fontFamily&&(r=2,p=L,L&&f.refresh(0,f.rows-1))}).catch(L=>{_===f.options.fontFamily&&(r=3,f.options.logLevel==="debug"&&console.debug(d,new Error("Failure while loading font")),p=void 0,d=L)})}return p&&r===2?p.findLigatureRanges(z).map(_=>[_[0],_[1]]):function(_,L){let S=[];for(let y=0;y<_.length;y++)for(let A=0;A<L.length;A++)if(_.startsWith(L[A],y)){S.push([y,y+L[A].length]),y+=L[A].length-1;break}return S}(z,i)})}},104:(o,n)=>{"use strict";function c(t,p){let d="",r=!1;for(;t.offset<t.input.length;){let z=t.input[t.offset++];if(r)/[\dA-Fa-f]/.test(z)?(t.offset--,d+=f(t)):z!==`
`&&(d+=z),r=!1;else switch(z){case p:return d;case"\\":r=!0;break;default:d+=z}}throw new Error("Unterminated string")}function v(t){let p="",d=!1;for(;t.offset<t.input.length;){let r=t.input[t.offset++];if(d)/[\dA-Fa-f]/.test(r)?(t.offset--,p+=f(t)):p+=r,d=!1;else switch(r){case"\\":d=!0;break;case",":return p;default:/\s/.test(r)?p.endsWith(" ")||(p+=" "):p+=r}}return p}function f(t){let p="";for(;t.offset<t.input.length;){let d=t.input[t.offset++];if(/\s/.test(d))return i(p);if(p.length>=6||!/[\dA-Fa-f]/.test(d))return t.offset--,i(p);p+=d}return i(p)}function i(t){return String.fromCodePoint(parseInt(t,16))}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){if(typeof t!="string")throw new Error("Font family must be a string");let p={input:t,offset:0},d=[],r="";for(;p.offset<p.input.length;){let z=p.input[p.offset++];switch(z){case"'":case'"':r+=c(p,z);break;case",":d.push(r),r="";break;default:/\s/.test(z)||(p.offset--,r+=v(p),d.push(r),r="")}}return d}},89:o=>{"use strict";o.exports=l},56:o=>{"use strict";o.exports=u},978:o=>{"use strict";o.exports=w},269:o=>{"use strict";o.exports=g},82:()=>{},456:()=>{}},e={};function a(o){var n=e[o];if(n!==void 0)return n.exports;var c=e[o]={exports:{}};return b[o].call(c.exports,c,c.exports,a),c.exports}a.n=o=>{var n=o&&o.__esModule?()=>o.default:()=>o;return a.d(n,{a:n}),n},a.d=(o,n)=>{for(var c in n)a.o(n,c)&&!a.o(o,c)&&Object.defineProperty(o,c,{enumerable:!0,get:n[c]})},a.o=(o,n)=>Object.prototype.hasOwnProperty.call(o,n),a.r=o=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var m={};return(()=>{"use strict";var o=m;Object.defineProperty(o,"__esModule",{value:!0}),o.LigaturesAddon=void 0;let n=a(833);o.LigaturesAddon=class{constructor(c){this._fallbackLigatures=((c==null?void 0:c.fallbackLigatures)||["<--","<---","<<-","<-","->","->>","-->","--->","<==","<===","<<=","<=","=>","=>>","==>","===>",">=",">>=","<->","<-->","<--->","<---->","<=>","<==>","<===>","<====>","-------->","<~~","<~","~>","~~>","::",":::","==","!=","===","!==",":=",":-",":+","<*","<*>","*>","<|","<|>","|>","+:","-:","=:",":>","++","+++","<!--","<!---","<***>"]).sort((v,f)=>f.length-v.length)}activate(c){this._terminal=c,this._characterJoinerId=(0,n.enableLigatures)(c,this._fallbackLigatures)}dispose(){var c;this._characterJoinerId!==void 0&&((c=this._terminal)===null||c===void 0||c.deregisterCharacterJoiner(this._characterJoinerId),this._characterJoinerId=void 0)}}})(),m})()})});var Ws=W0((b6,V8)=>{(function(l,u){typeof b6=="object"&&typeof V8=="object"?V8.exports=u():typeof define=="function"&&define.amd?define([],u):typeof b6=="object"?b6.SearchAddon=u():l.SearchAddon=u()})(self,function(){return(()=>{"use strict";var l={345:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forwardEvent=e.EventEmitter=void 0,e.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let m=0;m<this._listeners.length;m++)if(this._listeners[m]===a)return void this._listeners.splice(m,1)}}})),this._event}fire(a,m){let o=[];for(let n=0;n<this._listeners.length;n++)o.push(this._listeners[n]);for(let n=0;n<o.length;n++)o[n].call(void 0,a,m)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},e.forwardEvent=function(a,m){return a(o=>m.fire(o))}},859:(b,e)=>{function a(m){for(let o of m)o.dispose();m.length=0}Object.defineProperty(e,"__esModule",{value:!0}),e.getDisposeArrayDisposable=e.disposeArray=e.toDisposable=e.Disposable=void 0,e.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let m of this._disposables)m.dispose();this._disposables.length=0}register(m){return this._disposables.push(m),m}unregister(m){let o=this._disposables.indexOf(m);o!==-1&&this._disposables.splice(o,1)}},e.toDisposable=function(m){return{dispose:m}},e.disposeArray=a,e.getDisposeArrayDisposable=function(m){return{dispose:()=>a(m)}}}},u={};function g(b){var e=u[b];if(e!==void 0)return e.exports;var a=u[b]={exports:{}};return l[b](a,a.exports,g),a.exports}var w={};return(()=>{var b=w;Object.defineProperty(b,"__esModule",{value:!0}),b.SearchAddon=void 0;let e=g(345),a=g(859),m=" ~!@#$%^&*()+`-=[]{}|\\;:\"',./<>?";class o extends a.Disposable{constructor(){super(...arguments),this._linesCacheTimeoutId=0,this._onDidChangeResults=this.register(new e.EventEmitter),this.onDidChangeResults=this._onDidChangeResults.event}activate(c){this._terminal=c,this._onDataDisposable=this.register(this._terminal.onWriteParsed(()=>this._updateMatches())),this._onResizeDisposable=this.register(this._terminal.onResize(()=>this._updateMatches())),this.register((0,a.toDisposable)(()=>{var v,f;this.clearDecorations(),(v=this._onDataDisposable)===null||v===void 0||v.dispose(),(f=this._onResizeDisposable)===null||f===void 0||f.dispose()}))}_updateMatches(){var c;this._highlightTimeout&&window.clearTimeout(this._highlightTimeout),this._cachedSearchTerm&&(!((c=this._lastSearchOptions)===null||c===void 0)&&c.decorations)&&(this._highlightTimeout=setTimeout(()=>{var v,f;this.findPrevious(this._cachedSearchTerm,Object.assign(Object.assign({},this._lastSearchOptions),{incremental:!0,noScroll:!0})),this._resultIndex=this._searchResults?this._searchResults.size-1:-1,this._onDidChangeResults.fire({resultIndex:this._resultIndex,resultCount:(f=(v=this._searchResults)===null||v===void 0?void 0:v.size)!==null&&f!==void 0?f:-1})},200))}clearDecorations(c){var v,f,i,t;(v=this._selectedDecoration)===null||v===void 0||v.dispose(),(f=this._searchResults)===null||f===void 0||f.clear(),(i=this._resultDecorations)===null||i===void 0||i.forEach(p=>{for(let d of p)d.dispose()}),(t=this._resultDecorations)===null||t===void 0||t.clear(),this._searchResults=void 0,this._resultDecorations=void 0,c||(this._cachedSearchTerm=void 0)}clearActiveDecoration(){var c;(c=this._selectedDecoration)===null||c===void 0||c.dispose(),this._selectedDecoration=void 0}findNext(c,v){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");return this._lastSearchOptions=v,v!=null&&v.decorations&&(this._resultIndex===void 0&&this._cachedSearchTerm!==void 0&&c===this._cachedSearchTerm||this._highlightAllMatches(c,v)),this._fireResults(c,this._findNextAndSelect(c,v),v)}_highlightAllMatches(c,v){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");if(!c||c.length===0)return void this.clearDecorations();v=v||{},this.clearDecorations(!0),this._searchResults=new Map,this._resultDecorations=new Map;let f=this._resultDecorations,i=this._find(c,0,0,v);for(;i&&!this._searchResults.get(`${i.row}-${i.col}`);)if(this._searchResults.set(`${i.row}-${i.col}`,i),i=this._find(c,i.col+i.term.length>=this._terminal.cols?i.row+1:i.row,i.col+i.term.length>=this._terminal.cols?0:i.col+1,v),this._searchResults.size>1e3)return this.clearDecorations(),void(this._resultIndex=void 0);this._searchResults.forEach(t=>{let p=this._createResultDecoration(t,v.decorations);if(p){let d=f.get(p.marker.line)||[];d.push(p),f.set(p.marker.line,d)}})}_find(c,v,f,i){var t;if(!this._terminal||!c||c.length===0)return(t=this._terminal)===null||t===void 0||t.clearSelection(),void this.clearDecorations();if(f>this._terminal.cols)throw new Error(`Invalid col: ${f} to search in terminal of ${this._terminal.cols} cols`);let p;this._initLinesCache();let d={startRow:v,startCol:f};if(p=this._findInLine(c,d,i),!p)for(let r=v+1;r<this._terminal.buffer.active.baseY+this._terminal.rows&&(d.startRow=r,d.startCol=0,p=this._findInLine(c,d,i),!p);r++);return p}_findNextAndSelect(c,v){var f;if(!this._terminal||!c||c.length===0)return(f=this._terminal)===null||f===void 0||f.clearSelection(),this.clearDecorations(),this._cachedSearchTerm=void 0,this._resultIndex=-1,!1;this._cachedSearchTerm!==c&&(this._resultIndex=void 0,this._terminal.clearSelection());let i,t=0,p=0;if(this._terminal.hasSelection()){let z=!!v&&v.incremental;i=this._terminal.getSelectionPosition(),p=z?i.start.y:i.end.y,t=z?i.start.x:i.end.x}this._initLinesCache();let d={startRow:p,startCol:t},r=this._findInLine(c,d,v);if(!r)for(let z=p+1;z<this._terminal.buffer.active.baseY+this._terminal.rows&&(d.startRow=z,d.startCol=0,r=this._findInLine(c,d,v),!r);z++);if(!r&&p!==0)for(let z=0;z<p&&(d.startRow=z,d.startCol=0,r=this._findInLine(c,d,v),!r);z++);return!r&&i&&(d.startRow=i.start.y,d.startCol=0,r=this._findInLine(c,d,v)),this._searchResults&&(this._searchResults.size===0?this._resultIndex=-1:this._resultIndex===void 0?this._resultIndex=0:(this._resultIndex++,this._resultIndex>=this._searchResults.size&&(this._resultIndex=0))),this._selectResult(r,v==null?void 0:v.decorations,v==null?void 0:v.noScroll)}findPrevious(c,v){if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");return this._lastSearchOptions=v,v!=null&&v.decorations&&(this._resultIndex===void 0&&this._cachedSearchTerm!==void 0&&c===this._cachedSearchTerm||this._highlightAllMatches(c,v)),this._fireResults(c,this._findPreviousAndSelect(c,v),v)}_fireResults(c,v,f){var i;return f!=null&&f.decorations&&(this._resultIndex!==void 0&&((i=this._searchResults)===null||i===void 0?void 0:i.size)!==void 0?this._onDidChangeResults.fire({resultIndex:this._resultIndex,resultCount:this._searchResults.size}):this._onDidChangeResults.fire(void 0)),this._cachedSearchTerm=c,v}_findPreviousAndSelect(c,v){var f;if(!this._terminal)throw new Error("Cannot use addon until it has been loaded");let i;if(!this._terminal||!c||c.length===0)return i=void 0,(f=this._terminal)===null||f===void 0||f.clearSelection(),this.clearDecorations(),this._resultIndex=-1,!1;this._cachedSearchTerm!==c&&(this._resultIndex=void 0,this._terminal.clearSelection());let t=this._terminal.buffer.active.baseY+this._terminal.rows,p=this._terminal.cols,d=!0,r=!!v&&v.incremental,z;this._terminal.hasSelection()&&(z=this._terminal.getSelectionPosition(),t=z.start.y,p=z.start.x),this._initLinesCache();let M={startRow:t,startCol:p};if(r?(i=this._findInLine(c,M,v,!1),i&&i.row===t&&i.col===p||(z&&(M.startRow=z.end.y,M.startCol=z.end.x),i=this._findInLine(c,M,v,!0))):i=this._findInLine(c,M,v,d),!i){M.startCol=Math.max(M.startCol,this._terminal.cols);for(let _=t-1;_>=0&&(M.startRow=_,i=this._findInLine(c,M,v,d),!i);_--);}if(!i&&t!==this._terminal.buffer.active.baseY+this._terminal.rows)for(let _=this._terminal.buffer.active.baseY+this._terminal.rows;_>=t&&(M.startRow=_,i=this._findInLine(c,M,v,d),!i);_--);return this._searchResults&&(this._searchResults.size===0?this._resultIndex=-1:this._resultIndex===void 0||this._resultIndex<0?this._resultIndex=this._searchResults.size-1:(this._resultIndex--,this._resultIndex===-1&&(this._resultIndex=this._searchResults.size-1))),!(i||!z)||this._selectResult(i,v==null?void 0:v.decorations,v==null?void 0:v.noScroll)}_initLinesCache(){let c=this._terminal;this._linesCache||(this._linesCache=new Array(c.buffer.active.length),this._cursorMoveListener=c.onCursorMove(()=>this._destroyLinesCache()),this._resizeListener=c.onResize(()=>this._destroyLinesCache())),window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=window.setTimeout(()=>this._destroyLinesCache(),15e3)}_destroyLinesCache(){this._linesCache=void 0,this._cursorMoveListener&&(this._cursorMoveListener.dispose(),this._cursorMoveListener=void 0),this._resizeListener&&(this._resizeListener.dispose(),this._resizeListener=void 0),this._linesCacheTimeoutId&&(window.clearTimeout(this._linesCacheTimeoutId),this._linesCacheTimeoutId=0)}_isWholeWord(c,v,f){return(c===0||m.includes(v[c-1]))&&(c+f.length===v.length||m.includes(v[c+f.length]))}_findInLine(c,v,f={},i=!1){var t;let p=this._terminal,d=v.startRow,r=v.startCol,z=p.buffer.active.getLine(d);if(z!=null&&z.isWrapped)return i?void(v.startCol+=p.cols):(v.startRow--,v.startCol+=p.cols,this._findInLine(c,v,f));let M=(t=this._linesCache)===null||t===void 0?void 0:t[d];M||(M=this._translateBufferLineToStringWithWrap(d,!0),this._linesCache&&(this._linesCache[d]=M));let[_,L]=M,S=this._bufferColsToStringOffset(d,r),y=f.caseSensitive?c:c.toLowerCase(),A=f.caseSensitive?_:_.toLowerCase(),H=-1;if(f.regex){let T=RegExp(y,"g"),V;if(i)for(;V=T.exec(A.slice(0,S));)H=T.lastIndex-V[0].length,c=V[0],T.lastIndex-=c.length-1;else V=T.exec(A.slice(S)),V&&V[0].length>0&&(H=S+(T.lastIndex-V[0].length),c=V[0])}else i?S-y.length>=0&&(H=A.lastIndexOf(y,S-y.length)):H=A.indexOf(y,S);if(H>=0){if(f.wholeWord&&!this._isWholeWord(H,A,c))return;let T=0;for(;T<L.length-1&&H>=L[T+1];)T++;let V=T;for(;V<L.length-1&&H+c.length>=L[V+1];)V++;let Z=H-L[T],B=H+c.length-L[V],N=this._stringLengthToBufferSize(d+T,Z);return{term:c,col:N,row:d+T,size:this._stringLengthToBufferSize(d+V,B)-N+p.cols*(V-T)}}}_stringLengthToBufferSize(c,v){let f=this._terminal.buffer.active.getLine(c);if(!f)return 0;for(let i=0;i<v;i++){let t=f.getCell(i);if(!t)break;let p=t.getChars();p.length>1&&(v-=p.length-1);let d=f.getCell(i+1);d&&d.getWidth()===0&&v++}return v}_bufferColsToStringOffset(c,v){let f=this._terminal,i=c,t=0,p=f.buffer.active.getLine(i);for(;v>0&&p;){for(let d=0;d<v&&d<f.cols;d++){let r=p.getCell(d);if(!r)break;r.getWidth()&&(t+=r.getCode()===0?1:r.getChars().length)}if(i++,p=f.buffer.active.getLine(i),p&&!p.isWrapped)break;v-=f.cols}return t}_translateBufferLineToStringWithWrap(c,v){var f;let i=this._terminal,t=[],p=[0],d=i.buffer.active.getLine(c);for(;d;){let r=i.buffer.active.getLine(c+1),z=!!r&&r.isWrapped,M=d.translateToString(!z&&v);if(z&&r){let _=d.getCell(d.length-1);_&&_.getCode()===0&&_.getWidth()===1&&((f=r.getCell(0))===null||f===void 0?void 0:f.getWidth())===2&&(M=M.slice(0,-1))}if(t.push(M),!z)break;p.push(p[p.length-1]+M.length),c++,d=r}return[t.join(""),p]}_selectResult(c,v,f){var i,t;let p=this._terminal;if(this.clearActiveDecoration(),!c)return p.clearSelection(),!1;if(p.select(c.col,c.row,c.size),v){let d=p.registerMarker(-p.buffer.active.baseY-p.buffer.active.cursorY+c.row);d&&(this._selectedDecoration=p.registerDecoration({marker:d,x:c.col,width:c.size,backgroundColor:v.activeMatchBackground,layer:"top",overviewRulerOptions:{color:v.activeMatchColorOverviewRuler}}),(i=this._selectedDecoration)===null||i===void 0||i.onRender(r=>this._applyStyles(r,v.activeMatchBorder,!0)),(t=this._selectedDecoration)===null||t===void 0||t.onDispose(()=>d.dispose()))}if(!f&&(c.row>=p.buffer.active.viewportY+p.rows||c.row<p.buffer.active.viewportY)){let d=c.row-p.buffer.active.viewportY;d-=Math.floor(p.rows/2),p.scrollLines(d)}return!0}_applyStyles(c,v,f){c.clientWidth<=0||(c.classList.contains("xterm-find-result-decoration")||(c.classList.add("xterm-find-result-decoration"),v&&(c.style.outline=`1px solid ${v}`)),f&&c.classList.add("xterm-find-active-result-decoration"))}_createResultDecoration(c,v){var f;let i=this._terminal,t=i.registerMarker(-i.buffer.active.baseY-i.buffer.active.cursorY+c.row);if(!t)return;let p=i.registerDecoration({marker:t,x:c.col,width:c.size,backgroundColor:v.matchBackground,overviewRulerOptions:!((f=this._resultDecorations)===null||f===void 0)&&f.get(t.line)?void 0:{color:v.matchOverviewRuler,position:"center"}});return p==null||p.onRender(d=>this._applyStyles(d,v.matchBorder,!1)),p==null||p.onDispose(()=>t.dispose()),p}}b.SearchAddon=o})(),w})()})});var js=W0((m5,R8)=>{(function(l,u){typeof m5=="object"&&typeof R8=="object"?R8.exports=u():typeof define=="function"&&define.amd?define([],u):typeof m5=="object"?m5.Unicode11Addon=u():l.Unicode11Addon=u()})(m5,function(){return(()=>{"use strict";var l={433:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnicodeV11=void 0;let a=[[768,879],[1155,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1541],[1552,1562],[1564,1564],[1611,1631],[1648,1648],[1750,1757],[1759,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2045,2045],[2070,2073],[2075,2083],[2085,2087],[2089,2093],[2137,2139],[2259,2306],[2362,2362],[2364,2364],[2369,2376],[2381,2381],[2385,2391],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2558,2558],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2641,2641],[2672,2673],[2677,2677],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2810,2815],[2817,2817],[2876,2876],[2879,2879],[2881,2884],[2893,2893],[2902,2902],[2914,2915],[2946,2946],[3008,3008],[3021,3021],[3072,3072],[3076,3076],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3170,3171],[3201,3201],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3328,3329],[3387,3388],[3393,3396],[3405,3405],[3426,3427],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3981,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4151],[4153,4154],[4157,4158],[4184,4185],[4190,4192],[4209,4212],[4226,4226],[4229,4230],[4237,4237],[4253,4253],[4448,4607],[4957,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6158],[6277,6278],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6683,6683],[6742,6742],[6744,6750],[6752,6752],[6754,6754],[6757,6764],[6771,6780],[6783,6783],[6832,6846],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7040,7041],[7074,7077],[7080,7081],[7083,7085],[7142,7142],[7144,7145],[7149,7149],[7151,7153],[7212,7219],[7222,7223],[7376,7378],[7380,7392],[7394,7400],[7405,7405],[7412,7412],[7416,7417],[7616,7673],[7675,7679],[8203,8207],[8234,8238],[8288,8292],[8294,8303],[8400,8432],[11503,11505],[11647,11647],[11744,11775],[12330,12333],[12441,12442],[42607,42610],[42612,42621],[42654,42655],[42736,42737],[43010,43010],[43014,43014],[43019,43019],[43045,43046],[43204,43205],[43232,43249],[43263,43263],[43302,43309],[43335,43345],[43392,43394],[43443,43443],[43446,43449],[43452,43453],[43493,43493],[43561,43566],[43569,43570],[43573,43574],[43587,43587],[43596,43596],[43644,43644],[43696,43696],[43698,43700],[43703,43704],[43710,43711],[43713,43713],[43756,43757],[43766,43766],[44005,44005],[44008,44008],[44013,44013],[64286,64286],[65024,65039],[65056,65071],[65279,65279],[65529,65531]],m=[[66045,66045],[66272,66272],[66422,66426],[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[68325,68326],[68900,68903],[69446,69456],[69633,69633],[69688,69702],[69759,69761],[69811,69814],[69817,69818],[69821,69821],[69837,69837],[69888,69890],[69927,69931],[69933,69940],[70003,70003],[70016,70017],[70070,70078],[70089,70092],[70191,70193],[70196,70196],[70198,70199],[70206,70206],[70367,70367],[70371,70378],[70400,70401],[70459,70460],[70464,70464],[70502,70508],[70512,70516],[70712,70719],[70722,70724],[70726,70726],[70750,70750],[70835,70840],[70842,70842],[70847,70848],[70850,70851],[71090,71093],[71100,71101],[71103,71104],[71132,71133],[71219,71226],[71229,71229],[71231,71232],[71339,71339],[71341,71341],[71344,71349],[71351,71351],[71453,71455],[71458,71461],[71463,71467],[71727,71735],[71737,71738],[72148,72151],[72154,72155],[72160,72160],[72193,72202],[72243,72248],[72251,72254],[72263,72263],[72273,72278],[72281,72283],[72330,72342],[72344,72345],[72752,72758],[72760,72765],[72767,72767],[72850,72871],[72874,72880],[72882,72883],[72885,72886],[73009,73014],[73018,73018],[73020,73021],[73023,73029],[73031,73031],[73104,73105],[73109,73109],[73111,73111],[73459,73460],[78896,78904],[92912,92916],[92976,92982],[94031,94031],[94095,94098],[113821,113822],[113824,113827],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[121344,121398],[121403,121452],[121461,121461],[121476,121476],[121499,121503],[121505,121519],[122880,122886],[122888,122904],[122907,122913],[122915,122916],[122918,122922],[123184,123190],[123628,123631],[125136,125142],[125252,125258],[917505,917505],[917536,917631],[917760,917999]],o=[[4352,4447],[8986,8987],[9001,9002],[9193,9196],[9200,9200],[9203,9203],[9725,9726],[9748,9749],[9800,9811],[9855,9855],[9875,9875],[9889,9889],[9898,9899],[9917,9918],[9924,9925],[9934,9934],[9940,9940],[9962,9962],[9970,9971],[9973,9973],[9978,9978],[9981,9981],[9989,9989],[9994,9995],[10024,10024],[10060,10060],[10062,10062],[10067,10069],[10071,10071],[10133,10135],[10160,10160],[10175,10175],[11035,11036],[11088,11088],[11093,11093],[11904,11929],[11931,12019],[12032,12245],[12272,12283],[12288,12329],[12334,12350],[12353,12438],[12443,12543],[12549,12591],[12593,12686],[12688,12730],[12736,12771],[12784,12830],[12832,12871],[12880,19903],[19968,42124],[42128,42182],[43360,43388],[44032,55203],[63744,64255],[65040,65049],[65072,65106],[65108,65126],[65128,65131],[65281,65376],[65504,65510]],n=[[94176,94179],[94208,100343],[100352,101106],[110592,110878],[110928,110930],[110948,110951],[110960,111355],[126980,126980],[127183,127183],[127374,127374],[127377,127386],[127488,127490],[127504,127547],[127552,127560],[127568,127569],[127584,127589],[127744,127776],[127789,127797],[127799,127868],[127870,127891],[127904,127946],[127951,127955],[127968,127984],[127988,127988],[127992,128062],[128064,128064],[128066,128252],[128255,128317],[128331,128334],[128336,128359],[128378,128378],[128405,128406],[128420,128420],[128507,128591],[128640,128709],[128716,128716],[128720,128722],[128725,128725],[128747,128748],[128756,128762],[128992,129003],[129293,129393],[129395,129398],[129402,129442],[129445,129450],[129454,129482],[129485,129535],[129648,129651],[129656,129658],[129664,129666],[129680,129685],[131072,196605],[196608,262141]],c;function v(f,i){let t,p=0,d=i.length-1;if(f<i[0][0]||f>i[d][1])return!1;for(;d>=p;)if(t=p+d>>1,f>i[t][1])p=t+1;else{if(!(f<i[t][0]))return!0;d=t-1}return!1}e.UnicodeV11=class{constructor(){if(this.version="11",!c){c=new Uint8Array(65536),c.fill(1),c[0]=0,c.fill(0,1,32),c.fill(0,127,160);for(let f=0;f<a.length;++f)c.fill(0,a[f][0],a[f][1]+1);for(let f=0;f<o.length;++f)c.fill(2,o[f][0],o[f][1]+1)}}wcwidth(f){return f<32?0:f<127?1:f<65536?c[f]:v(f,m)?0:v(f,n)?2:1}}}},u={};function g(b){var e=u[b];if(e!==void 0)return e.exports;var a=u[b]={exports:{}};return l[b](a,a.exports,g),a.exports}var w={};return(()=>{var b=w;Object.defineProperty(b,"__esModule",{value:!0}),b.Unicode11Addon=void 0;let e=g(433);b.Unicode11Addon=class{activate(a){a.unicode.register(new e.UnicodeV11)}dispose(){}}})(),w})()})});var Gs=W0((w6,F8)=>{(function(l,u){typeof w6=="object"&&typeof F8=="object"?F8.exports=u():typeof define=="function"&&define.amd?define([],u):typeof w6=="object"?w6.WebLinksAddon=u():l.WebLinksAddon=u()})(self,function(){return(()=>{"use strict";var l={6:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LinkComputer=e.WebLinkProvider=void 0,e.WebLinkProvider=class{constructor(m,o,n,c={}){this._terminal=m,this._regex=o,this._handler=n,this._options=c}provideLinks(m,o){let n=a.computeLink(m,this._regex,this._terminal,this._handler);o(this._addCallbacks(n))}_addCallbacks(m){return m.map(o=>(o.leave=this._options.leave,o.hover=(n,c)=>{if(this._options.hover){let{range:v}=o;this._options.hover(n,c,v)}},o))}};class a{static computeLink(o,n,c,v){let f=new RegExp(n.source,(n.flags||"")+"g"),[i,t]=a._getWindowedLineStrings(o-1,c),p=i.join(""),d,r=[];for(;d=f.exec(p);){let z=d[0];try{let A=new URL(z),H=decodeURI(A.toString());if(z!==H&&z+"/"!==H)continue}catch(A){continue}let[M,_]=a._mapStrIdx(c,t,0,d.index),[L,S]=a._mapStrIdx(c,M,_,z.length);if(M===-1||_===-1||L===-1||S===-1)continue;let y={start:{x:_+1,y:M+1},end:{x:S,y:L+1}};r.push({range:y,text:z,activate:v})}return r}static _getWindowedLineStrings(o,n){let c,v=o,f=o,i=0,t="",p=[];if(c=n.buffer.active.getLine(o)){let d=c.translateToString(!0);if(c.isWrapped&&d[0]!==" "){for(i=0;(c=n.buffer.active.getLine(--v))&&i<2048&&(t=c.translateToString(!0),i+=t.length,p.push(t),c.isWrapped&&t.indexOf(" ")===-1););p.reverse()}for(p.push(d),i=0;(c=n.buffer.active.getLine(++f))&&c.isWrapped&&i<2048&&(t=c.translateToString(!0),i+=t.length,p.push(t),t.indexOf(" ")===-1););}return[p,v]}static _mapStrIdx(o,n,c,v){let f=o.buffer.active,i=f.getNullCell(),t=c;for(;v;){let p=f.getLine(n);if(!p)return[-1,-1];for(let d=t;d<p.length;++d){p.getCell(d,i);let r=i.getChars();if(i.getWidth()&&(v-=r.length||1,d===p.length-1&&r==="")){let z=f.getLine(n+1);z&&z.isWrapped&&(z.getCell(0,i),i.getWidth()===2&&(v+=1))}if(v<0)return[n,d]}n++,t=0}return[n,t]}}e.LinkComputer=a}},u={};function g(b){var e=u[b];if(e!==void 0)return e.exports;var a=u[b]={exports:{}};return l[b](a,a.exports,g),a.exports}var w={};return(()=>{var b=w;Object.defineProperty(b,"__esModule",{value:!0}),b.WebLinksAddon=void 0;let e=g(6),a=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function m(o,n){let c=window.open();if(c){try{c.opener=null}catch(v){}c.location.href=n}else console.warn("Opening link blocked as opener could not be cleared")}b.WebLinksAddon=class{constructor(o=m,n={}){this._handler=o,this._options=n}activate(o){this._terminal=o;let n=this._options,c=n.urlRegex||a;this._linkProvider=this._terminal.registerLinkProvider(new e.WebLinkProvider(this._terminal,c,this._handler,n))}dispose(){var o;(o=this._linkProvider)===null||o===void 0||o.dispose()}}})(),w})()})});var qs=W0((_6,B8)=>{(function(l,u){typeof _6=="object"&&typeof B8=="object"?B8.exports=u():typeof define=="function"&&define.amd?define([],u):typeof _6=="object"?_6.WebglAddon=u():l.WebglAddon=u()})(self,function(){return(()=>{"use strict";var l={965:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlyphRenderer=void 0;let m=a(381),o=a(855),n=a(859),c=a(374),v=a(509),f=11,i=f*Float32Array.BYTES_PER_ELEMENT,t,p=0,d=0,r=0;class z extends n.Disposable{constructor(_,L,S){super(),this._terminal=_,this._gl=L,this._dimensions=S,this._activeBuffer=0,this._vertices={count:0,attributes:new Float32Array(0),attributesBuffers:[new Float32Array(0),new Float32Array(0)]};let y=this._gl;v.TextureAtlas.maxAtlasPages===void 0&&(v.TextureAtlas.maxAtlasPages=Math.min(32,(0,c.throwIfFalsy)(y.getParameter(y.MAX_TEXTURE_IMAGE_UNITS))),v.TextureAtlas.maxTextureSize=(0,c.throwIfFalsy)(y.getParameter(y.MAX_TEXTURE_SIZE))),this._program=(0,c.throwIfFalsy)((0,m.createProgram)(y,`#version 300 es
layout (location = 0) in vec2 a_unitquad;
layout (location = 1) in vec2 a_cellpos;
layout (location = 2) in vec2 a_offset;
layout (location = 3) in vec2 a_size;
layout (location = 4) in float a_texpage;
layout (location = 5) in vec2 a_texcoord;
layout (location = 6) in vec2 a_texsize;

uniform mat4 u_projection;
uniform vec2 u_resolution;

out vec2 v_texcoord;
flat out int v_texpage;

void main() {
  vec2 zeroToOne = (a_offset / u_resolution) + a_cellpos + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_texpage = int(a_texpage);
  v_texcoord = a_texcoord + a_unitquad * a_texsize;
}`,function(B){let N="";for(let E=1;E<B;E++)N+=` else if (v_texpage == ${E}) { outColor = texture(u_texture[${E}], v_texcoord); }`;return`#version 300 es
precision lowp float;

in vec2 v_texcoord;
flat in int v_texpage;

uniform sampler2D u_texture[${B}];

out vec4 outColor;

void main() {
  if (v_texpage == 0) {
    outColor = texture(u_texture[0], v_texcoord);
  } ${N}
}`}(v.TextureAtlas.maxAtlasPages))),this.register((0,n.toDisposable)(()=>y.deleteProgram(this._program))),this._projectionLocation=(0,c.throwIfFalsy)(y.getUniformLocation(this._program,"u_projection")),this._resolutionLocation=(0,c.throwIfFalsy)(y.getUniformLocation(this._program,"u_resolution")),this._textureLocation=(0,c.throwIfFalsy)(y.getUniformLocation(this._program,"u_texture")),this._vertexArrayObject=y.createVertexArray(),y.bindVertexArray(this._vertexArrayObject);let A=new Float32Array([0,0,1,0,0,1,1,1]),H=y.createBuffer();this.register((0,n.toDisposable)(()=>y.deleteBuffer(H))),y.bindBuffer(y.ARRAY_BUFFER,H),y.bufferData(y.ARRAY_BUFFER,A,y.STATIC_DRAW),y.enableVertexAttribArray(0),y.vertexAttribPointer(0,2,this._gl.FLOAT,!1,0,0);let T=new Uint8Array([0,1,2,3]),V=y.createBuffer();this.register((0,n.toDisposable)(()=>y.deleteBuffer(V))),y.bindBuffer(y.ELEMENT_ARRAY_BUFFER,V),y.bufferData(y.ELEMENT_ARRAY_BUFFER,T,y.STATIC_DRAW),this._attributesBuffer=(0,c.throwIfFalsy)(y.createBuffer()),this.register((0,n.toDisposable)(()=>y.deleteBuffer(this._attributesBuffer))),y.bindBuffer(y.ARRAY_BUFFER,this._attributesBuffer),y.enableVertexAttribArray(2),y.vertexAttribPointer(2,2,y.FLOAT,!1,i,0),y.vertexAttribDivisor(2,1),y.enableVertexAttribArray(3),y.vertexAttribPointer(3,2,y.FLOAT,!1,i,2*Float32Array.BYTES_PER_ELEMENT),y.vertexAttribDivisor(3,1),y.enableVertexAttribArray(4),y.vertexAttribPointer(4,1,y.FLOAT,!1,i,4*Float32Array.BYTES_PER_ELEMENT),y.vertexAttribDivisor(4,1),y.enableVertexAttribArray(5),y.vertexAttribPointer(5,2,y.FLOAT,!1,i,5*Float32Array.BYTES_PER_ELEMENT),y.vertexAttribDivisor(5,1),y.enableVertexAttribArray(6),y.vertexAttribPointer(6,2,y.FLOAT,!1,i,7*Float32Array.BYTES_PER_ELEMENT),y.vertexAttribDivisor(6,1),y.enableVertexAttribArray(1),y.vertexAttribPointer(1,2,y.FLOAT,!1,i,9*Float32Array.BYTES_PER_ELEMENT),y.vertexAttribDivisor(1,1),y.useProgram(this._program);let Z=new Int32Array(v.TextureAtlas.maxAtlasPages);for(let B=0;B<v.TextureAtlas.maxAtlasPages;B++)Z[B]=B;y.uniform1iv(this._textureLocation,Z),y.uniformMatrix4fv(this._projectionLocation,!1,m.PROJECTION_MATRIX),this._atlasTextures=[];for(let B=0;B<v.TextureAtlas.maxAtlasPages;B++){let N=new m.GLTexture((0,c.throwIfFalsy)(y.createTexture()));this.register((0,n.toDisposable)(()=>y.deleteTexture(N.texture))),y.activeTexture(y.TEXTURE0+B),y.bindTexture(y.TEXTURE_2D,N.texture),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texImage2D(y.TEXTURE_2D,0,y.RGBA,1,1,0,y.RGBA,y.UNSIGNED_BYTE,new Uint8Array([255,0,0,255])),this._atlasTextures[B]=N}y.enable(y.BLEND),y.blendFunc(y.SRC_ALPHA,y.ONE_MINUS_SRC_ALPHA),this.handleResize()}beginFrame(){return!this._atlas||this._atlas.beginFrame()}updateCell(_,L,S,y,A,H,T,V){this._updateCell(this._vertices.attributes,_,L,S,y,A,H,T,V)}_updateCell(_,L,S,y,A,H,T,V,Z){p=(S*this._terminal.cols+L)*f,y!==o.NULL_CELL_CODE&&y!==void 0?this._atlas&&(t=V&&V.length>1?this._atlas.getRasterizedGlyphCombinedChar(V,A,H,T):this._atlas.getRasterizedGlyph(y,A,H,T),d=Math.floor((this._dimensions.device.cell.width-this._dimensions.device.char.width)/2),A!==Z&&t.offset.x>d?(r=t.offset.x-d,_[p]=-(t.offset.x-r)+this._dimensions.device.char.left,_[p+1]=-t.offset.y+this._dimensions.device.char.top,_[p+2]=(t.size.x-r)/this._dimensions.device.canvas.width,_[p+3]=t.size.y/this._dimensions.device.canvas.height,_[p+4]=t.texturePage,_[p+5]=t.texturePositionClipSpace.x+r/this._atlas.pages[t.texturePage].canvas.width,_[p+6]=t.texturePositionClipSpace.y,_[p+7]=t.sizeClipSpace.x-r/this._atlas.pages[t.texturePage].canvas.width,_[p+8]=t.sizeClipSpace.y):(_[p]=-t.offset.x+this._dimensions.device.char.left,_[p+1]=-t.offset.y+this._dimensions.device.char.top,_[p+2]=t.size.x/this._dimensions.device.canvas.width,_[p+3]=t.size.y/this._dimensions.device.canvas.height,_[p+4]=t.texturePage,_[p+5]=t.texturePositionClipSpace.x,_[p+6]=t.texturePositionClipSpace.y,_[p+7]=t.sizeClipSpace.x,_[p+8]=t.sizeClipSpace.y)):_.fill(0,p,p+f-1-2)}clear(){let _=this._terminal,L=_.cols*_.rows*f;this._vertices.count!==L?this._vertices.attributes=new Float32Array(L):this._vertices.attributes.fill(0);let S=0;for(;S<this._vertices.attributesBuffers.length;S++)this._vertices.count!==L?this._vertices.attributesBuffers[S]=new Float32Array(L):this._vertices.attributesBuffers[S].fill(0);this._vertices.count=L,S=0;for(let y=0;y<_.rows;y++)for(let A=0;A<_.cols;A++)this._vertices.attributes[S+9]=A/_.cols,this._vertices.attributes[S+10]=y/_.rows,S+=f}handleResize(){let _=this._gl;_.viewport(0,0,_.canvas.width,_.canvas.height),_.uniform2f(this._resolutionLocation,_.canvas.width,_.canvas.height),this.clear()}render(_){if(!this._atlas)return;let L=this._gl;L.useProgram(this._program),L.bindVertexArray(this._vertexArrayObject),this._activeBuffer=(this._activeBuffer+1)%2;let S=this._vertices.attributesBuffers[this._activeBuffer],y=0;for(let A=0;A<_.lineLengths.length;A++){let H=A*this._terminal.cols*f,T=this._vertices.attributes.subarray(H,H+_.lineLengths[A]*f);S.set(T,y),y+=T.length}L.bindBuffer(L.ARRAY_BUFFER,this._attributesBuffer),L.bufferData(L.ARRAY_BUFFER,S.subarray(0,y),L.STREAM_DRAW);for(let A=0;A<this._atlas.pages.length;A++)this._atlas.pages[A].version!==this._atlasTextures[A].version&&this._bindAtlasPageTexture(L,this._atlas,A);L.drawElementsInstanced(L.TRIANGLE_STRIP,4,L.UNSIGNED_BYTE,0,y/f)}setAtlas(_){this._atlas=_;for(let L of this._atlasTextures)L.version=-1}_bindAtlasPageTexture(_,L,S){_.activeTexture(_.TEXTURE0+S),_.bindTexture(_.TEXTURE_2D,this._atlasTextures[S].texture),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,_.CLAMP_TO_EDGE),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,_.CLAMP_TO_EDGE),_.texImage2D(_.TEXTURE_2D,0,_.RGBA,_.RGBA,_.UNSIGNED_BYTE,L.pages[S].canvas),_.generateMipmap(_.TEXTURE_2D),this._atlasTextures[S].version=L.pages[S].version}setDimensions(_){this._dimensions=_}}e.GlyphRenderer=z},742:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RectangleRenderer=void 0;let m=a(381),o=a(310),n=a(859),c=a(237),v=a(374),f=8*Float32Array.BYTES_PER_ELEMENT,i=0,t=!1,p=0,d=0,r=0,z=0,M=0,_=0;class L extends n.Disposable{constructor(y,A,H,T){super(),this._terminal=y,this._gl=A,this._dimensions=H,this._themeService=T,this._vertices={count:0,attributes:new Float32Array(160)};let V=this._gl;this._program=(0,v.throwIfFalsy)((0,m.createProgram)(V,`#version 300 es
layout (location = 0) in vec2 a_position;
layout (location = 1) in vec2 a_size;
layout (location = 2) in vec4 a_color;
layout (location = 3) in vec2 a_unitquad;

uniform mat4 u_projection;

out vec4 v_color;

void main() {
  vec2 zeroToOne = a_position + (a_unitquad * a_size);
  gl_Position = u_projection * vec4(zeroToOne, 0.0, 1.0);
  v_color = a_color;
}`,`#version 300 es
precision lowp float;

in vec4 v_color;

out vec4 outColor;

void main() {
  outColor = v_color;
}`)),this.register((0,n.toDisposable)(()=>V.deleteProgram(this._program))),this._projectionLocation=(0,v.throwIfFalsy)(V.getUniformLocation(this._program,"u_projection")),this._vertexArrayObject=V.createVertexArray(),V.bindVertexArray(this._vertexArrayObject);let Z=new Float32Array([0,0,1,0,0,1,1,1]),B=V.createBuffer();this.register((0,n.toDisposable)(()=>V.deleteBuffer(B))),V.bindBuffer(V.ARRAY_BUFFER,B),V.bufferData(V.ARRAY_BUFFER,Z,V.STATIC_DRAW),V.enableVertexAttribArray(3),V.vertexAttribPointer(3,2,this._gl.FLOAT,!1,0,0);let N=new Uint8Array([0,1,2,3]),E=V.createBuffer();this.register((0,n.toDisposable)(()=>V.deleteBuffer(E))),V.bindBuffer(V.ELEMENT_ARRAY_BUFFER,E),V.bufferData(V.ELEMENT_ARRAY_BUFFER,N,V.STATIC_DRAW),this._attributesBuffer=(0,v.throwIfFalsy)(V.createBuffer()),this.register((0,n.toDisposable)(()=>V.deleteBuffer(this._attributesBuffer))),V.bindBuffer(V.ARRAY_BUFFER,this._attributesBuffer),V.enableVertexAttribArray(0),V.vertexAttribPointer(0,2,V.FLOAT,!1,f,0),V.vertexAttribDivisor(0,1),V.enableVertexAttribArray(1),V.vertexAttribPointer(1,2,V.FLOAT,!1,f,2*Float32Array.BYTES_PER_ELEMENT),V.vertexAttribDivisor(1,1),V.enableVertexAttribArray(2),V.vertexAttribPointer(2,4,V.FLOAT,!1,f,4*Float32Array.BYTES_PER_ELEMENT),V.vertexAttribDivisor(2,1),this._updateCachedColors(T.colors),this.register(this._themeService.onChangeColors(P=>{this._updateCachedColors(P),this._updateViewportRectangle()}))}render(){let y=this._gl;y.useProgram(this._program),y.bindVertexArray(this._vertexArrayObject),y.uniformMatrix4fv(this._projectionLocation,!1,m.PROJECTION_MATRIX),y.bindBuffer(y.ARRAY_BUFFER,this._attributesBuffer),y.bufferData(y.ARRAY_BUFFER,this._vertices.attributes,y.DYNAMIC_DRAW),y.drawElementsInstanced(this._gl.TRIANGLE_STRIP,4,y.UNSIGNED_BYTE,0,this._vertices.count)}handleResize(){this._updateViewportRectangle()}setDimensions(y){this._dimensions=y}_updateCachedColors(y){this._bgFloat=this._colorToFloat32Array(y.background)}_updateViewportRectangle(){this._addRectangleFloat(this._vertices.attributes,0,0,0,this._terminal.cols*this._dimensions.device.cell.width,this._terminal.rows*this._dimensions.device.cell.height,this._bgFloat)}updateBackgrounds(y){let A=this._terminal,H=this._vertices,T,V,Z,B,N,E,P,I,U,K,Q,r0=1;for(T=0;T<A.rows;T++){for(Z=-1,B=0,N=0,E=!1,V=0;V<A.cols;V++)P=(T*A.cols+V)*o.RENDER_MODEL_INDICIES_PER_CELL,I=y.cells[P+o.RENDER_MODEL_BG_OFFSET],U=y.cells[P+o.RENDER_MODEL_FG_OFFSET],K=!!(67108864&U),(I!==B||U!==N&&(E||K))&&((B!==0||E&&N!==0)&&(Q=8*r0++,this._updateRectangle(H,Q,N,B,Z,V,T)),Z=V,B=I,N=U,E=K);(B!==0||E&&N!==0)&&(Q=8*r0++,this._updateRectangle(H,Q,N,B,Z,A.cols,T))}H.count=r0}_updateRectangle(y,A,H,T,V,Z,B){if(t=!1,67108864&H)switch(50331648&H){case 16777216:case 33554432:i=this._themeService.colors.ansi[255&H].rgba;break;case 50331648:i=(16777215&H)<<8;break;default:i=this._themeService.colors.foreground.rgba}else switch(50331648&T){case 16777216:case 33554432:i=this._themeService.colors.ansi[255&T].rgba;break;case 50331648:i=(16777215&T)<<8;break;default:i=this._themeService.colors.background.rgba,t=!0}y.attributes.length<A+4&&(y.attributes=(0,m.expandFloat32Array)(y.attributes,this._terminal.rows*this._terminal.cols*8)),p=V*this._dimensions.device.cell.width,d=B*this._dimensions.device.cell.height,r=(i>>24&255)/255,z=(i>>16&255)/255,M=(i>>8&255)/255,_=!t&&134217728&T?c.DIM_OPACITY:1,this._addRectangle(y.attributes,A,p,d,(Z-V)*this._dimensions.device.cell.width,this._dimensions.device.cell.height,r,z,M,_)}_addRectangle(y,A,H,T,V,Z,B,N,E,P){y[A]=H/this._dimensions.device.canvas.width,y[A+1]=T/this._dimensions.device.canvas.height,y[A+2]=V/this._dimensions.device.canvas.width,y[A+3]=Z/this._dimensions.device.canvas.height,y[A+4]=B,y[A+5]=N,y[A+6]=E,y[A+7]=P}_addRectangleFloat(y,A,H,T,V,Z,B){y[A]=H/this._dimensions.device.canvas.width,y[A+1]=T/this._dimensions.device.canvas.height,y[A+2]=V/this._dimensions.device.canvas.width,y[A+3]=Z/this._dimensions.device.canvas.height,y[A+4]=B[0],y[A+5]=B[1],y[A+6]=B[2],y[A+7]=B[3]}_colorToFloat32Array(y){return new Float32Array([(y.rgba>>24&255)/255,(y.rgba>>16&255)/255,(y.rgba>>8&255)/255,(255&y.rgba)/255])}}e.RectangleRenderer=L},310:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RenderModel=e.COMBINED_CHAR_BIT_MASK=e.RENDER_MODEL_EXT_OFFSET=e.RENDER_MODEL_FG_OFFSET=e.RENDER_MODEL_BG_OFFSET=e.RENDER_MODEL_INDICIES_PER_CELL=void 0;let m=a(296);e.RENDER_MODEL_INDICIES_PER_CELL=4,e.RENDER_MODEL_BG_OFFSET=1,e.RENDER_MODEL_FG_OFFSET=2,e.RENDER_MODEL_EXT_OFFSET=3,e.COMBINED_CHAR_BIT_MASK=2147483648,e.RenderModel=class{constructor(){this.cells=new Uint32Array(0),this.lineLengths=new Uint32Array(0),this.selection=(0,m.createSelectionRenderModel)()}resize(o,n){let c=o*n*e.RENDER_MODEL_INDICIES_PER_CELL;c!==this.cells.length&&(this.cells=new Uint32Array(c),this.lineLengths=new Uint32Array(n))}clear(){this.cells.fill(0,0),this.lineLengths.fill(0,0)}}},666:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.JoinedCellData=e.WebglRenderer=void 0;let m=a(820),o=a(274),n=a(627),c=a(56),v=a(374),f=a(147),i=a(782),t=a(855),p=a(345),d=a(859),r=a(965),z=a(742),M=a(461),_=a(733),L=a(310);class S extends d.Disposable{constructor(H,T,V,Z,B,N,E,P,I){super(),this._terminal=H,this._characterJoinerService=T,this._charSizeService=V,this._coreBrowserService=Z,this._decorationService=N,this._optionsService=E,this._themeService=P,this._model=new L.RenderModel,this._workCell=new i.CellData,this._onChangeTextureAtlas=this.register(new p.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new p.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new p.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onRequestRedraw=this.register(new p.EventEmitter),this.onRequestRedraw=this._onRequestRedraw.event,this._onContextLoss=this.register(new p.EventEmitter),this.onContextLoss=this._onContextLoss.event,this.register(this._themeService.onChangeColors(()=>this._handleColorChange())),this._cellColorResolver=new o.CellColorResolver(this._terminal,this._model.selection,this._decorationService,this._coreBrowserService,this._themeService),this._core=this._terminal._core,this._renderLayers=[new _.LinkRenderLayer(this._core.screenElement,2,this._terminal,this._core.linkifier2,this._coreBrowserService,E,this._themeService),new M.CursorRenderLayer(H,this._core.screenElement,3,this._onRequestRedraw,this._coreBrowserService,B,E,this._themeService)],this.dimensions=(0,v.createRenderDimensions)(),this._devicePixelRatio=this._coreBrowserService.dpr,this._updateDimensions(),this.register(E.onOptionChange(()=>this._handleOptionsChanged())),this._canvas=document.createElement("canvas");let U={antialias:!1,depth:!1,preserveDrawingBuffer:I};if(this._gl=this._canvas.getContext("webgl2",U),!this._gl)throw new Error("WebGL2 not supported "+this._gl);this.register((0,m.addDisposableDomListener)(this._canvas,"webglcontextlost",K=>{console.log("webglcontextlost event received"),K.preventDefault(),this._contextRestorationTimeout=setTimeout(()=>{this._contextRestorationTimeout=void 0,console.warn("webgl context not restored; firing onContextLoss"),this._onContextLoss.fire(K)},3e3)})),this.register((0,m.addDisposableDomListener)(this._canvas,"webglcontextrestored",K=>{console.warn("webglcontextrestored event received"),clearTimeout(this._contextRestorationTimeout),this._contextRestorationTimeout=void 0,(0,n.removeTerminalFromCache)(this._terminal),this._initializeWebGLState(),this._requestRedrawViewport()})),this.register((0,c.observeDevicePixelDimensions)(this._canvas,this._coreBrowserService.window,(K,Q)=>this._setCanvasDevicePixelDimensions(K,Q))),this._core.screenElement.appendChild(this._canvas),[this._rectangleRenderer,this._glyphRenderer]=this._initializeWebGLState(),this._isAttached=this._coreBrowserService.window.document.body.contains(this._core.screenElement),this.register((0,d.toDisposable)(()=>{var K;for(let Q of this._renderLayers)Q.dispose();(K=this._canvas.parentElement)===null||K===void 0||K.removeChild(this._canvas),(0,n.removeTerminalFromCache)(this._terminal)}))}get textureAtlas(){var H;return(H=this._charAtlas)===null||H===void 0?void 0:H.pages[0].canvas}_handleColorChange(){this._refreshCharAtlas(),this._clearModel(!0)}handleDevicePixelRatioChange(){this._devicePixelRatio!==this._coreBrowserService.dpr&&(this._devicePixelRatio=this._coreBrowserService.dpr,this.handleResize(this._terminal.cols,this._terminal.rows))}handleResize(H,T){this._updateDimensions(),this._model.resize(this._terminal.cols,this._terminal.rows);for(let V of this._renderLayers)V.resize(this._terminal,this.dimensions);this._canvas.width=this.dimensions.device.canvas.width,this._canvas.height=this.dimensions.device.canvas.height,this._canvas.style.width=`${this.dimensions.css.canvas.width}px`,this._canvas.style.height=`${this.dimensions.css.canvas.height}px`,this._core.screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._core.screenElement.style.height=`${this.dimensions.css.canvas.height}px`,this._rectangleRenderer.setDimensions(this.dimensions),this._rectangleRenderer.handleResize(),this._glyphRenderer.setDimensions(this.dimensions),this._glyphRenderer.handleResize(),this._refreshCharAtlas(),this._clearModel(!1)}handleCharSizeChanged(){this.handleResize(this._terminal.cols,this._terminal.rows)}handleBlur(){for(let H of this._renderLayers)H.handleBlur(this._terminal);this._requestRedrawViewport()}handleFocus(){for(let H of this._renderLayers)H.handleFocus(this._terminal);this._requestRedrawViewport()}handleSelectionChanged(H,T,V){for(let Z of this._renderLayers)Z.handleSelectionChanged(this._terminal,H,T,V);this._model.selection.update(this._terminal,H,T,V),this._requestRedrawViewport()}handleCursorMove(){for(let H of this._renderLayers)H.handleCursorMove(this._terminal)}_handleOptionsChanged(){this._updateDimensions(),this._refreshCharAtlas()}_initializeWebGLState(){var H,T;return(H=this._rectangleRenderer)===null||H===void 0||H.dispose(),(T=this._glyphRenderer)===null||T===void 0||T.dispose(),this._rectangleRenderer=this.register(new z.RectangleRenderer(this._terminal,this._gl,this.dimensions,this._themeService)),this._glyphRenderer=this.register(new r.GlyphRenderer(this._terminal,this._gl,this.dimensions)),this.handleCharSizeChanged(),[this._rectangleRenderer,this._glyphRenderer]}_refreshCharAtlas(){var H;if(this.dimensions.device.char.width<=0&&this.dimensions.device.char.height<=0)return void(this._isAttached=!1);let T=(0,n.acquireTextureAtlas)(this._terminal,this._optionsService.rawOptions,this._themeService.colors,this.dimensions.device.cell.width,this.dimensions.device.cell.height,this.dimensions.device.char.width,this.dimensions.device.char.height,this._coreBrowserService.dpr);this._charAtlas!==T&&((H=this._charAtlasDisposable)===null||H===void 0||H.dispose(),this._onChangeTextureAtlas.fire(T.pages[0].canvas),this._charAtlasDisposable=(0,d.getDisposeArrayDisposable)([(0,p.forwardEvent)(T.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas),(0,p.forwardEvent)(T.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)])),this._charAtlas=T,this._charAtlas.warmUp(),this._glyphRenderer.setAtlas(this._charAtlas)}_clearModel(H){this._model.clear(),H&&this._glyphRenderer.clear()}clearTextureAtlas(){var H;(H=this._charAtlas)===null||H===void 0||H.clearTexture(),this._clearModel(!0),this._requestRedrawViewport()}clear(){this._clearModel(!0);for(let H of this._renderLayers)H.reset(this._terminal)}registerCharacterJoiner(H){return-1}deregisterCharacterJoiner(H){return!1}renderRows(H,T){if(!this._isAttached){if(!(this._coreBrowserService.window.document.body.contains(this._core.screenElement)&&this._charSizeService.width&&this._charSizeService.height))return;this._updateDimensions(),this._refreshCharAtlas(),this._isAttached=!0}for(let V of this._renderLayers)V.handleGridChanged(this._terminal,H,T);this._glyphRenderer.beginFrame()&&this._clearModel(!0),this._updateModel(H,T),this._rectangleRenderer.render(),this._glyphRenderer.render(this._model)}_updateModel(H,T){let V=this._core,Z,B,N,E,P,I,U,K,Q,r0,e0,c0,j,q=this._workCell;for(B=H;B<=T&&(N=B+V.buffer.ydisp,E=V.buffer.lines.get(N),E);B++)for(this._model.lineLengths[B]=0,P=this._characterJoinerService.getJoinedCharacters(N),c0=0;c0<V.cols;c0++)if(Z=this._cellColorResolver.result.bg,E.loadCell(c0,q),c0===0&&(Z=this._cellColorResolver.result.bg),I=!1,U=c0,P.length>0&&c0===P[0][0]&&(I=!0,K=P.shift(),q=new y(q,E.translateToString(!0,K[0],K[1]),K[1]-K[0]),U=K[1]-1),Q=q.getChars(),r0=q.getCode(),e0=(B*V.cols+c0)*L.RENDER_MODEL_INDICIES_PER_CELL,this._cellColorResolver.resolve(q,c0,N),r0!==t.NULL_CELL_CODE&&(this._model.lineLengths[B]=c0+1),(this._model.cells[e0]!==r0||this._model.cells[e0+L.RENDER_MODEL_BG_OFFSET]!==this._cellColorResolver.result.bg||this._model.cells[e0+L.RENDER_MODEL_FG_OFFSET]!==this._cellColorResolver.result.fg||this._model.cells[e0+L.RENDER_MODEL_EXT_OFFSET]!==this._cellColorResolver.result.ext)&&(Q.length>1&&(r0|=L.COMBINED_CHAR_BIT_MASK),this._model.cells[e0]=r0,this._model.cells[e0+L.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[e0+L.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[e0+L.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext,this._glyphRenderer.updateCell(c0,B,r0,this._cellColorResolver.result.bg,this._cellColorResolver.result.fg,this._cellColorResolver.result.ext,Q,Z),I))for(q=this._workCell,c0++;c0<U;c0++)j=(B*V.cols+c0)*L.RENDER_MODEL_INDICIES_PER_CELL,this._glyphRenderer.updateCell(c0,B,t.NULL_CELL_CODE,0,0,0,t.NULL_CELL_CHAR,0),this._model.cells[j]=t.NULL_CELL_CODE,this._model.cells[j+L.RENDER_MODEL_BG_OFFSET]=this._cellColorResolver.result.bg,this._model.cells[j+L.RENDER_MODEL_FG_OFFSET]=this._cellColorResolver.result.fg,this._model.cells[j+L.RENDER_MODEL_EXT_OFFSET]=this._cellColorResolver.result.ext;this._rectangleRenderer.updateBackgrounds(this._model)}_updateDimensions(){this._charSizeService.width&&this._charSizeService.height&&(this.dimensions.device.char.width=Math.floor(this._charSizeService.width*this._devicePixelRatio),this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*this._devicePixelRatio),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.top=this._optionsService.rawOptions.lineHeight===1?0:Math.round((this.dimensions.device.cell.height-this.dimensions.device.char.height)/2),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.char.left=Math.floor(this._optionsService.rawOptions.letterSpacing/2),this.dimensions.device.canvas.height=this._terminal.rows*this.dimensions.device.cell.height,this.dimensions.device.canvas.width=this._terminal.cols*this.dimensions.device.cell.width,this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/this._devicePixelRatio),this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/this._devicePixelRatio),this.dimensions.css.cell.height=this.dimensions.device.cell.height/this._devicePixelRatio,this.dimensions.css.cell.width=this.dimensions.device.cell.width/this._devicePixelRatio)}_setCanvasDevicePixelDimensions(H,T){this._canvas.width===H&&this._canvas.height===T||(this._canvas.width=H,this._canvas.height=T,this._requestRedrawViewport())}_requestRedrawViewport(){this._onRequestRedraw.fire({start:0,end:this._terminal.rows-1})}}e.WebglRenderer=S;class y extends f.AttributeData{constructor(H,T,V){super(),this.content=0,this.combinedData="",this.fg=H.fg,this.bg=H.bg,this.combinedData=T,this._width=V}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(H){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}e.JoinedCellData=y},381:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GLTexture=e.expandFloat32Array=e.createShader=e.createProgram=e.PROJECTION_MATRIX=void 0;let m=a(374);function o(n,c,v){let f=(0,m.throwIfFalsy)(n.createShader(c));if(n.shaderSource(f,v),n.compileShader(f),n.getShaderParameter(f,n.COMPILE_STATUS))return f;console.error(n.getShaderInfoLog(f)),n.deleteShader(f)}e.PROJECTION_MATRIX=new Float32Array([2,0,0,0,0,-2,0,0,0,0,1,0,-1,1,0,1]),e.createProgram=function(n,c,v){let f=(0,m.throwIfFalsy)(n.createProgram());if(n.attachShader(f,(0,m.throwIfFalsy)(o(n,n.VERTEX_SHADER,c))),n.attachShader(f,(0,m.throwIfFalsy)(o(n,n.FRAGMENT_SHADER,v))),n.linkProgram(f),n.getProgramParameter(f,n.LINK_STATUS))return f;console.error(n.getProgramInfoLog(f)),n.deleteProgram(f)},e.createShader=o,e.expandFloat32Array=function(n,c){let v=Math.min(2*n.length,c),f=new Float32Array(v);for(let i=0;i<n.length;i++)f[i]=n[i];return f},e.GLTexture=class{constructor(n){this.texture=n,this.version=-1}}},592:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseRenderLayer=void 0;let m=a(627),o=a(237),n=a(374),c=a(859);class v extends c.Disposable{constructor(i,t,p,d,r,z,M,_){super(),this._container=t,this._alpha=r,this._coreBrowserService=z,this._optionsService=M,this._themeService=_,this._deviceCharWidth=0,this._deviceCharHeight=0,this._deviceCellWidth=0,this._deviceCellHeight=0,this._deviceCharLeft=0,this._deviceCharTop=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add(`xterm-${p}-layer`),this._canvas.style.zIndex=d.toString(),this._initCanvas(),this._container.appendChild(this._canvas),this.register(this._themeService.onChangeColors(L=>{this._refreshCharAtlas(i,L),this.reset(i)})),this.register((0,c.toDisposable)(()=>{var L;this._canvas.remove(),(L=this._charAtlas)===null||L===void 0||L.dispose()}))}_initCanvas(){this._ctx=(0,n.throwIfFalsy)(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()}handleBlur(i){}handleFocus(i){}handleCursorMove(i){}handleGridChanged(i,t,p){}handleSelectionChanged(i,t,p,d=!1){}_setTransparency(i,t){if(t===this._alpha)return;let p=this._canvas;this._alpha=t,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,p),this._refreshCharAtlas(i,this._themeService.colors),this.handleGridChanged(i,0,i.rows-1)}_refreshCharAtlas(i,t){this._deviceCharWidth<=0&&this._deviceCharHeight<=0||(this._charAtlas=(0,m.acquireTextureAtlas)(i,this._optionsService.rawOptions,t,this._deviceCellWidth,this._deviceCellHeight,this._deviceCharWidth,this._deviceCharHeight,this._coreBrowserService.dpr),this._charAtlas.warmUp())}resize(i,t){this._deviceCellWidth=t.device.cell.width,this._deviceCellHeight=t.device.cell.height,this._deviceCharWidth=t.device.char.width,this._deviceCharHeight=t.device.char.height,this._deviceCharLeft=t.device.char.left,this._deviceCharTop=t.device.char.top,this._canvas.width=t.device.canvas.width,this._canvas.height=t.device.canvas.height,this._canvas.style.width=`${t.css.canvas.width}px`,this._canvas.style.height=`${t.css.canvas.height}px`,this._alpha||this._clearAll(),this._refreshCharAtlas(i,this._themeService.colors)}_fillCells(i,t,p,d){this._ctx.fillRect(i*this._deviceCellWidth,t*this._deviceCellHeight,p*this._deviceCellWidth,d*this._deviceCellHeight)}_fillBottomLineAtCells(i,t,p=1){this._ctx.fillRect(i*this._deviceCellWidth,(t+1)*this._deviceCellHeight-this._coreBrowserService.dpr-1,p*this._deviceCellWidth,this._coreBrowserService.dpr)}_fillLeftLineAtCell(i,t,p){this._ctx.fillRect(i*this._deviceCellWidth,t*this._deviceCellHeight,this._coreBrowserService.dpr*p,this._deviceCellHeight)}_strokeRectAtCell(i,t,p,d){this._ctx.lineWidth=this._coreBrowserService.dpr,this._ctx.strokeRect(i*this._deviceCellWidth+this._coreBrowserService.dpr/2,t*this._deviceCellHeight+this._coreBrowserService.dpr/2,p*this._deviceCellWidth-this._coreBrowserService.dpr,d*this._deviceCellHeight-this._coreBrowserService.dpr)}_clearAll(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))}_clearCells(i,t,p,d){this._alpha?this._ctx.clearRect(i*this._deviceCellWidth,t*this._deviceCellHeight,p*this._deviceCellWidth,d*this._deviceCellHeight):(this._ctx.fillStyle=this._themeService.colors.background.css,this._ctx.fillRect(i*this._deviceCellWidth,t*this._deviceCellHeight,p*this._deviceCellWidth,d*this._deviceCellHeight))}_fillCharTrueColor(i,t,p,d){this._ctx.font=this._getFont(i,!1,!1),this._ctx.textBaseline=o.TEXT_BASELINE,this._clipCell(p,d,t.getWidth()),this._ctx.fillText(t.getChars(),p*this._deviceCellWidth+this._deviceCharLeft,d*this._deviceCellHeight+this._deviceCharTop+this._deviceCharHeight)}_clipCell(i,t,p){this._ctx.beginPath(),this._ctx.rect(i*this._deviceCellWidth,t*this._deviceCellHeight,p*this._deviceCellWidth,this._deviceCellHeight),this._ctx.clip()}_getFont(i,t,p){return`${p?"italic":""} ${t?i.options.fontWeightBold:i.options.fontWeight} ${i.options.fontSize*this._coreBrowserService.dpr}px ${i.options.fontFamily}`}}e.BaseRenderLayer=v},461:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CursorRenderLayer=void 0;let m=a(592),o=a(782),n=a(859);class c extends m.BaseRenderLayer{constructor(i,t,p,d,r,z,M,_){super(i,t,"cursor",p,!0,r,M,_),this._onRequestRefreshRowsEvent=d,this._coreService=z,this._cell=new o.CellData,this._state={x:0,y:0,isFocused:!1,style:"",width:0},this._cursorRenderers={bar:this._renderBarCursor.bind(this),block:this._renderBlockCursor.bind(this),underline:this._renderUnderlineCursor.bind(this)},this._handleOptionsChanged(i),this.register(M.onOptionChange(()=>this._handleOptionsChanged(i))),this.register((0,n.toDisposable)(()=>{var L;(L=this._cursorBlinkStateManager)===null||L===void 0||L.dispose(),this._cursorBlinkStateManager=void 0}))}resize(i,t){super.resize(i,t),this._state={x:0,y:0,isFocused:!1,style:"",width:0}}reset(i){var t;this._clearCursor(),(t=this._cursorBlinkStateManager)===null||t===void 0||t.restartBlinkAnimation(i),this._handleOptionsChanged(i)}handleBlur(i){var t;(t=this._cursorBlinkStateManager)===null||t===void 0||t.pause(),this._onRequestRefreshRowsEvent.fire({start:i.buffer.active.cursorY,end:i.buffer.active.cursorY})}handleFocus(i){var t;(t=this._cursorBlinkStateManager)===null||t===void 0||t.resume(i),this._onRequestRefreshRowsEvent.fire({start:i.buffer.active.cursorY,end:i.buffer.active.cursorY})}_handleOptionsChanged(i){var t;i.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new v(()=>{this._render(i,!0)},this._coreBrowserService)):((t=this._cursorBlinkStateManager)===null||t===void 0||t.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRefreshRowsEvent.fire({start:i.buffer.active.cursorY,end:i.buffer.active.cursorY})}handleCursorMove(i){var t;(t=this._cursorBlinkStateManager)===null||t===void 0||t.restartBlinkAnimation(i)}handleGridChanged(i,t,p){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(i,!1):this._cursorBlinkStateManager.restartBlinkAnimation(i)}_render(i,t){if(!this._coreService.isCursorInitialized||this._coreService.isCursorHidden)return void this._clearCursor();let p=i.buffer.active.baseY+i.buffer.active.cursorY,d=p-i.buffer.active.viewportY,r=Math.min(i.buffer.active.cursorX,i.cols-1);if(d<0||d>=i.rows)this._clearCursor();else if(i._core.buffer.lines.get(p).loadCell(r,this._cell),this._cell.content!==void 0){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css;let z=i.options.cursorStyle;return z&&z!=="block"?this._cursorRenderers[z](i,r,d,this._cell):this._renderBlurCursor(i,r,d,this._cell),this._ctx.restore(),this._state.x=r,this._state.y=d,this._state.isFocused=!1,this._state.style=z,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===r&&this._state.y===d&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===i.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[i.options.cursorStyle||"block"](i,r,d,this._cell),this._ctx.restore(),this._state.x=r,this._state.y=d,this._state.isFocused=!1,this._state.style=i.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}_clearCursor(){this._state&&(this._coreBrowserService.dpr<1?this._clearAll():this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})}_renderBarCursor(i,t,p,d){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillLeftLineAtCell(t,p,this._optionsService.rawOptions.cursorWidth),this._ctx.restore()}_renderBlockCursor(i,t,p,d){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillCells(t,p,d.getWidth(),1),this._ctx.fillStyle=this._themeService.colors.cursorAccent.css,this._fillCharTrueColor(i,d,t,p),this._ctx.restore()}_renderUnderlineCursor(i,t,p,d){this._ctx.save(),this._ctx.fillStyle=this._themeService.colors.cursor.css,this._fillBottomLineAtCells(t,p),this._ctx.restore()}_renderBlurCursor(i,t,p,d){this._ctx.save(),this._ctx.strokeStyle=this._themeService.colors.cursor.css,this._strokeRectAtCell(t,p,d.getWidth(),1),this._ctx.restore()}}e.CursorRenderLayer=c;class v{constructor(i,t){this._renderCallback=i,this._coreBrowserService=t,this.isCursorVisible=!0,this._coreBrowserService.isFocused&&this._restartInterval()}get isPaused(){return!(this._blinkStartTimeout||this._blinkInterval)}dispose(){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}restartBlinkAnimation(i){this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})))}_restartInterval(i=600){this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout=this._coreBrowserService.window.setTimeout(()=>{if(this._animationTimeRestarted){let t=600-(Date.now()-this._animationTimeRestarted);if(this._animationTimeRestarted=void 0,t>0)return void this._restartInterval(t)}this.isCursorVisible=!1,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0}),this._blinkInterval=this._coreBrowserService.window.setInterval(()=>{if(this._animationTimeRestarted){let t=600-(Date.now()-this._animationTimeRestarted);return this._animationTimeRestarted=void 0,void this._restartInterval(t)}this.isCursorVisible=!this.isCursorVisible,this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._renderCallback(),this._animationFrame=void 0})},600)},i)}pause(){this.isCursorVisible=!0,this._blinkInterval&&(this._coreBrowserService.window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(this._coreBrowserService.window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}resume(i){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation(i)}}},733:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LinkRenderLayer=void 0;let m=a(197),o=a(237),n=a(592);class c extends n.BaseRenderLayer{constructor(f,i,t,p,d,r,z){super(t,f,"link",i,!0,d,r,z),this.register(p.onShowLinkUnderline(M=>this._handleShowLinkUnderline(M))),this.register(p.onHideLinkUnderline(M=>this._handleHideLinkUnderline(M)))}resize(f,i){super.resize(f,i),this._state=void 0}reset(f){this._clearCurrentLink()}_clearCurrentLink(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);let f=this._state.y2-this._state.y1-1;f>0&&this._clearCells(0,this._state.y1+1,this._state.cols,f),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}}_handleShowLinkUnderline(f){if(f.fg===o.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._themeService.colors.background.css:f.fg!==void 0&&(0,m.is256Color)(f.fg)?this._ctx.fillStyle=this._themeService.colors.ansi[f.fg].css:this._ctx.fillStyle=this._themeService.colors.foreground.css,f.y1===f.y2)this._fillBottomLineAtCells(f.x1,f.y1,f.x2-f.x1);else{this._fillBottomLineAtCells(f.x1,f.y1,f.cols-f.x1);for(let i=f.y1+1;i<f.y2;i++)this._fillBottomLineAtCells(0,i,f.cols);this._fillBottomLineAtCells(0,f.y2,f.x2)}this._state=f}_handleHideLinkUnderline(f){this._clearCurrentLink()}}e.LinkRenderLayer=c},820:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.addDisposableDomListener=void 0,e.addDisposableDomListener=function(a,m,o,n){a.addEventListener(m,o,n);let c=!1;return{dispose:()=>{c||(c=!0,a.removeEventListener(m,o,n))}}}},274:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CellColorResolver=void 0;let a,m=0,o=0,n=!1,c=!1,v=!1;e.CellColorResolver=class{constructor(f,i,t,p,d){this._terminal=f,this._selectionRenderModel=i,this._decorationService=t,this._coreBrowserService=p,this._themeService=d,this.result={fg:0,bg:0,ext:0}}resolve(f,i,t){this.result.bg=f.bg,this.result.fg=f.fg,this.result.ext=268435456&f.bg?f.extended.ext:0,o=0,m=0,c=!1,n=!1,v=!1,a=this._themeService.colors,this._decorationService.forEachDecorationAtCell(i,t,"bottom",p=>{p.backgroundColorRGB&&(o=p.backgroundColorRGB.rgba>>8&16777215,c=!0),p.foregroundColorRGB&&(m=p.foregroundColorRGB.rgba>>8&16777215,n=!0)}),v=this._selectionRenderModel.isCellSelected(this._terminal,i,t),v&&(o=(this._coreBrowserService.isFocused?a.selectionBackgroundOpaque:a.selectionInactiveBackgroundOpaque).rgba>>8&16777215,c=!0,a.selectionForeground&&(m=a.selectionForeground.rgba>>8&16777215,n=!0)),this._decorationService.forEachDecorationAtCell(i,t,"top",p=>{p.backgroundColorRGB&&(o=p.backgroundColorRGB.rgba>>8&16777215,c=!0),p.foregroundColorRGB&&(m=p.foregroundColorRGB.rgba>>8&16777215,n=!0)}),c&&(o=v?-16777216&f.bg&-134217729|o|50331648:-16777216&f.bg|o|50331648),n&&(m=-16777216&f.fg&-67108865|m|50331648),67108864&this.result.fg&&(c&&!n&&(m=50331648&this.result.bg?-134217728&this.result.fg|67108863&this.result.bg:-134217728&this.result.fg|16777215&a.background.rgba>>8|50331648,n=!0),!c&&n&&(o=50331648&this.result.fg?-67108864&this.result.bg|67108863&this.result.fg:-67108864&this.result.bg|16777215&a.foreground.rgba>>8|50331648,c=!0)),a=void 0,this.result.bg=c?o:this.result.bg,this.result.fg=n?m:this.result.fg}}},627:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.removeTerminalFromCache=e.acquireTextureAtlas=void 0;let m=a(509),o=a(197),n=[];e.acquireTextureAtlas=function(c,v,f,i,t,p,d,r){let z=(0,o.generateConfig)(i,t,p,d,v,f,r);for(let L=0;L<n.length;L++){let S=n[L],y=S.ownedBy.indexOf(c);if(y>=0){if((0,o.configEquals)(S.config,z))return S.atlas;S.ownedBy.length===1?(S.atlas.dispose(),n.splice(L,1)):S.ownedBy.splice(y,1);break}}for(let L=0;L<n.length;L++){let S=n[L];if((0,o.configEquals)(S.config,z))return S.ownedBy.push(c),S.atlas}let M=c._core,_={atlas:new m.TextureAtlas(document,z,M.unicodeService),config:z,ownedBy:[c]};return n.push(_),_.atlas},e.removeTerminalFromCache=function(c){for(let v=0;v<n.length;v++){let f=n[v].ownedBy.indexOf(c);if(f!==-1){n[v].ownedBy.length===1?(n[v].atlas.dispose(),n.splice(v,1)):n[v].ownedBy.splice(f,1);break}}}},197:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.is256Color=e.configEquals=e.generateConfig=void 0;let m=a(160);e.generateConfig=function(o,n,c,v,f,i,t){let p={foreground:i.foreground,background:i.background,cursor:m.NULL_COLOR,cursorAccent:m.NULL_COLOR,selectionForeground:m.NULL_COLOR,selectionBackgroundTransparent:m.NULL_COLOR,selectionBackgroundOpaque:m.NULL_COLOR,selectionInactiveBackgroundTransparent:m.NULL_COLOR,selectionInactiveBackgroundOpaque:m.NULL_COLOR,ansi:i.ansi.slice(),contrastCache:i.contrastCache};return{customGlyphs:f.customGlyphs,devicePixelRatio:t,letterSpacing:f.letterSpacing,lineHeight:f.lineHeight,deviceCellWidth:o,deviceCellHeight:n,deviceCharWidth:c,deviceCharHeight:v,fontFamily:f.fontFamily,fontSize:f.fontSize,fontWeight:f.fontWeight,fontWeightBold:f.fontWeightBold,allowTransparency:f.allowTransparency,drawBoldTextInBrightColors:f.drawBoldTextInBrightColors,minimumContrastRatio:f.minimumContrastRatio,colors:p}},e.configEquals=function(o,n){for(let c=0;c<o.colors.ansi.length;c++)if(o.colors.ansi[c].rgba!==n.colors.ansi[c].rgba)return!1;return o.devicePixelRatio===n.devicePixelRatio&&o.customGlyphs===n.customGlyphs&&o.lineHeight===n.lineHeight&&o.letterSpacing===n.letterSpacing&&o.fontFamily===n.fontFamily&&o.fontSize===n.fontSize&&o.fontWeight===n.fontWeight&&o.fontWeightBold===n.fontWeightBold&&o.allowTransparency===n.allowTransparency&&o.deviceCharWidth===n.deviceCharWidth&&o.deviceCharHeight===n.deviceCharHeight&&o.drawBoldTextInBrightColors===n.drawBoldTextInBrightColors&&o.minimumContrastRatio===n.minimumContrastRatio&&o.colors.foreground.rgba===n.colors.foreground.rgba&&o.colors.background.rgba===n.colors.background.rgba},e.is256Color=function(o){return(50331648&o)==16777216||(50331648&o)==33554432}},237:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TEXT_BASELINE=e.DIM_OPACITY=e.INVERTED_DEFAULT_COLOR=void 0;let m=a(399);e.INVERTED_DEFAULT_COLOR=257,e.DIM_OPACITY=.5,e.TEXT_BASELINE=m.isFirefox||m.isLegacyEdge?"bottom":"ideographic"},860:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.tryDrawCustomChar=e.powerlineDefinitions=e.boxDrawingDefinitions=e.blockElementDefinitions=void 0;let m=a(374);e.blockElementDefinitions={"\u2580":[{x:0,y:0,w:8,h:4}],"\u2581":[{x:0,y:7,w:8,h:1}],"\u2582":[{x:0,y:6,w:8,h:2}],"\u2583":[{x:0,y:5,w:8,h:3}],"\u2584":[{x:0,y:4,w:8,h:4}],"\u2585":[{x:0,y:3,w:8,h:5}],"\u2586":[{x:0,y:2,w:8,h:6}],"\u2587":[{x:0,y:1,w:8,h:7}],"\u2588":[{x:0,y:0,w:8,h:8}],"\u2589":[{x:0,y:0,w:7,h:8}],"\u258A":[{x:0,y:0,w:6,h:8}],"\u258B":[{x:0,y:0,w:5,h:8}],"\u258C":[{x:0,y:0,w:4,h:8}],"\u258D":[{x:0,y:0,w:3,h:8}],"\u258E":[{x:0,y:0,w:2,h:8}],"\u258F":[{x:0,y:0,w:1,h:8}],"\u2590":[{x:4,y:0,w:4,h:8}],"\u2594":[{x:0,y:0,w:8,h:1}],"\u2595":[{x:7,y:0,w:1,h:8}],"\u2596":[{x:0,y:4,w:4,h:4}],"\u2597":[{x:4,y:4,w:4,h:4}],"\u2598":[{x:0,y:0,w:4,h:4}],"\u2599":[{x:0,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u259A":[{x:0,y:0,w:4,h:4},{x:4,y:4,w:4,h:4}],"\u259B":[{x:0,y:0,w:4,h:8},{x:4,y:0,w:4,h:4}],"\u259C":[{x:0,y:0,w:8,h:4},{x:4,y:0,w:4,h:8}],"\u259D":[{x:4,y:0,w:4,h:4}],"\u259E":[{x:4,y:0,w:4,h:4},{x:0,y:4,w:4,h:4}],"\u259F":[{x:4,y:0,w:4,h:8},{x:0,y:4,w:8,h:4}],"\u{1FB70}":[{x:1,y:0,w:1,h:8}],"\u{1FB71}":[{x:2,y:0,w:1,h:8}],"\u{1FB72}":[{x:3,y:0,w:1,h:8}],"\u{1FB73}":[{x:4,y:0,w:1,h:8}],"\u{1FB74}":[{x:5,y:0,w:1,h:8}],"\u{1FB75}":[{x:6,y:0,w:1,h:8}],"\u{1FB76}":[{x:0,y:1,w:8,h:1}],"\u{1FB77}":[{x:0,y:2,w:8,h:1}],"\u{1FB78}":[{x:0,y:3,w:8,h:1}],"\u{1FB79}":[{x:0,y:4,w:8,h:1}],"\u{1FB7A}":[{x:0,y:5,w:8,h:1}],"\u{1FB7B}":[{x:0,y:6,w:8,h:1}],"\u{1FB7C}":[{x:0,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB7D}":[{x:0,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7E}":[{x:7,y:0,w:1,h:8},{x:0,y:0,w:8,h:1}],"\u{1FB7F}":[{x:7,y:0,w:1,h:8},{x:0,y:7,w:8,h:1}],"\u{1FB80}":[{x:0,y:0,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB81}":[{x:0,y:0,w:8,h:1},{x:0,y:2,w:8,h:1},{x:0,y:4,w:8,h:1},{x:0,y:7,w:8,h:1}],"\u{1FB82}":[{x:0,y:0,w:8,h:2}],"\u{1FB83}":[{x:0,y:0,w:8,h:3}],"\u{1FB84}":[{x:0,y:0,w:8,h:5}],"\u{1FB85}":[{x:0,y:0,w:8,h:6}],"\u{1FB86}":[{x:0,y:0,w:8,h:7}],"\u{1FB87}":[{x:6,y:0,w:2,h:8}],"\u{1FB88}":[{x:5,y:0,w:3,h:8}],"\u{1FB89}":[{x:3,y:0,w:5,h:8}],"\u{1FB8A}":[{x:2,y:0,w:6,h:8}],"\u{1FB8B}":[{x:1,y:0,w:7,h:8}],"\u{1FB95}":[{x:0,y:0,w:2,h:2},{x:4,y:0,w:2,h:2},{x:2,y:2,w:2,h:2},{x:6,y:2,w:2,h:2},{x:0,y:4,w:2,h:2},{x:4,y:4,w:2,h:2},{x:2,y:6,w:2,h:2},{x:6,y:6,w:2,h:2}],"\u{1FB96}":[{x:2,y:0,w:2,h:2},{x:6,y:0,w:2,h:2},{x:0,y:2,w:2,h:2},{x:4,y:2,w:2,h:2},{x:2,y:4,w:2,h:2},{x:6,y:4,w:2,h:2},{x:0,y:6,w:2,h:2},{x:4,y:6,w:2,h:2}],"\u{1FB97}":[{x:0,y:2,w:8,h:2},{x:0,y:6,w:8,h:2}]};let o={"\u2591":[[1,0,0,0],[0,0,0,0],[0,0,1,0],[0,0,0,0]],"\u2592":[[1,0],[0,0],[0,1],[0,0]],"\u2593":[[0,1],[1,1],[1,0],[1,1]]};e.boxDrawingDefinitions={"\u2500":{1:"M0,.5 L1,.5"},"\u2501":{3:"M0,.5 L1,.5"},"\u2502":{1:"M.5,0 L.5,1"},"\u2503":{3:"M.5,0 L.5,1"},"\u250C":{1:"M0.5,1 L.5,.5 L1,.5"},"\u250F":{3:"M0.5,1 L.5,.5 L1,.5"},"\u2510":{1:"M0,.5 L.5,.5 L.5,1"},"\u2513":{3:"M0,.5 L.5,.5 L.5,1"},"\u2514":{1:"M.5,0 L.5,.5 L1,.5"},"\u2517":{3:"M.5,0 L.5,.5 L1,.5"},"\u2518":{1:"M.5,0 L.5,.5 L0,.5"},"\u251B":{3:"M.5,0 L.5,.5 L0,.5"},"\u251C":{1:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2523":{3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u2524":{1:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252B":{3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u252C":{1:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2533":{3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2534":{1:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253B":{3:"M0,.5 L1,.5 M.5,.5 L.5,0"},"\u253C":{1:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u254B":{3:"M0,.5 L1,.5 M.5,0 L.5,1"},"\u2574":{1:"M.5,.5 L0,.5"},"\u2578":{3:"M.5,.5 L0,.5"},"\u2575":{1:"M.5,.5 L.5,0"},"\u2579":{3:"M.5,.5 L.5,0"},"\u2576":{1:"M.5,.5 L1,.5"},"\u257A":{3:"M.5,.5 L1,.5"},"\u2577":{1:"M.5,.5 L.5,1"},"\u257B":{3:"M.5,.5 L.5,1"},"\u2550":{1:(i,t)=>`M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t}`},"\u2551":{1:(i,t)=>`M${.5-i},0 L${.5-i},1 M${.5+i},0 L${.5+i},1`},"\u2552":{1:(i,t)=>`M.5,1 L.5,${.5-t} L1,${.5-t} M.5,${.5+t} L1,${.5+t}`},"\u2553":{1:(i,t)=>`M${.5-i},1 L${.5-i},.5 L1,.5 M${.5+i},.5 L${.5+i},1`},"\u2554":{1:(i,t)=>`M1,${.5-t} L${.5-i},${.5-t} L${.5-i},1 M1,${.5+t} L${.5+i},${.5+t} L${.5+i},1`},"\u2555":{1:(i,t)=>`M0,${.5-t} L.5,${.5-t} L.5,1 M0,${.5+t} L.5,${.5+t}`},"\u2556":{1:(i,t)=>`M${.5+i},1 L${.5+i},.5 L0,.5 M${.5-i},.5 L${.5-i},1`},"\u2557":{1:(i,t)=>`M0,${.5+t} L${.5-i},${.5+t} L${.5-i},1 M0,${.5-t} L${.5+i},${.5-t} L${.5+i},1`},"\u2558":{1:(i,t)=>`M.5,0 L.5,${.5+t} L1,${.5+t} M.5,${.5-t} L1,${.5-t}`},"\u2559":{1:(i,t)=>`M1,.5 L${.5-i},.5 L${.5-i},0 M${.5+i},.5 L${.5+i},0`},"\u255A":{1:(i,t)=>`M1,${.5-t} L${.5+i},${.5-t} L${.5+i},0 M1,${.5+t} L${.5-i},${.5+t} L${.5-i},0`},"\u255B":{1:(i,t)=>`M0,${.5+t} L.5,${.5+t} L.5,0 M0,${.5-t} L.5,${.5-t}`},"\u255C":{1:(i,t)=>`M0,.5 L${.5+i},.5 L${.5+i},0 M${.5-i},.5 L${.5-i},0`},"\u255D":{1:(i,t)=>`M0,${.5-t} L${.5-i},${.5-t} L${.5-i},0 M0,${.5+t} L${.5+i},${.5+t} L${.5+i},0`},"\u255E":{1:(i,t)=>`M.5,0 L.5,1 M.5,${.5-t} L1,${.5-t} M.5,${.5+t} L1,${.5+t}`},"\u255F":{1:(i,t)=>`M${.5-i},0 L${.5-i},1 M${.5+i},0 L${.5+i},1 M${.5+i},.5 L1,.5`},"\u2560":{1:(i,t)=>`M${.5-i},0 L${.5-i},1 M1,${.5+t} L${.5+i},${.5+t} L${.5+i},1 M1,${.5-t} L${.5+i},${.5-t} L${.5+i},0`},"\u2561":{1:(i,t)=>`M.5,0 L.5,1 M0,${.5-t} L.5,${.5-t} M0,${.5+t} L.5,${.5+t}`},"\u2562":{1:(i,t)=>`M0,.5 L${.5-i},.5 M${.5-i},0 L${.5-i},1 M${.5+i},0 L${.5+i},1`},"\u2563":{1:(i,t)=>`M${.5+i},0 L${.5+i},1 M0,${.5+t} L${.5-i},${.5+t} L${.5-i},1 M0,${.5-t} L${.5-i},${.5-t} L${.5-i},0`},"\u2564":{1:(i,t)=>`M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t} M.5,${.5+t} L.5,1`},"\u2565":{1:(i,t)=>`M0,.5 L1,.5 M${.5-i},.5 L${.5-i},1 M${.5+i},.5 L${.5+i},1`},"\u2566":{1:(i,t)=>`M0,${.5-t} L1,${.5-t} M0,${.5+t} L${.5-i},${.5+t} L${.5-i},1 M1,${.5+t} L${.5+i},${.5+t} L${.5+i},1`},"\u2567":{1:(i,t)=>`M.5,0 L.5,${.5-t} M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t}`},"\u2568":{1:(i,t)=>`M0,.5 L1,.5 M${.5-i},.5 L${.5-i},0 M${.5+i},.5 L${.5+i},0`},"\u2569":{1:(i,t)=>`M0,${.5+t} L1,${.5+t} M0,${.5-t} L${.5-i},${.5-t} L${.5-i},0 M1,${.5-t} L${.5+i},${.5-t} L${.5+i},0`},"\u256A":{1:(i,t)=>`M.5,0 L.5,1 M0,${.5-t} L1,${.5-t} M0,${.5+t} L1,${.5+t}`},"\u256B":{1:(i,t)=>`M0,.5 L1,.5 M${.5-i},0 L${.5-i},1 M${.5+i},0 L${.5+i},1`},"\u256C":{1:(i,t)=>`M0,${.5+t} L${.5-i},${.5+t} L${.5-i},1 M1,${.5+t} L${.5+i},${.5+t} L${.5+i},1 M0,${.5-t} L${.5-i},${.5-t} L${.5-i},0 M1,${.5-t} L${.5+i},${.5-t} L${.5+i},0`},"\u2571":{1:"M1,0 L0,1"},"\u2572":{1:"M0,0 L1,1"},"\u2573":{1:"M1,0 L0,1 M0,0 L1,1"},"\u257C":{1:"M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u257D":{1:"M.5,.5 L.5,0",3:"M.5,.5 L.5,1"},"\u257E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u257F":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u250D":{1:"M.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u250E":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2511":{1:"M.5,.5 L.5,1",3:"M.5,.5 L0,.5"},"\u2512":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2515":{1:"M.5,.5 L.5,0",3:"M.5,.5 L1,.5"},"\u2516":{1:"M.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2519":{1:"M.5,.5 L.5,0",3:"M.5,.5 L0,.5"},"\u251A":{1:"M.5,.5 L0,.5",3:"M.5,.5 L.5,0"},"\u251D":{1:"M.5,0 L.5,1",3:"M.5,.5 L1,.5"},"\u251E":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u251F":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2520":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2521":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2522":{1:"M.5,.5 L.5,0",3:"M0.5,1 L.5,.5 L1,.5"},"\u2525":{1:"M.5,0 L.5,1",3:"M.5,.5 L0,.5"},"\u2526":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2527":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L.5,1"},"\u2528":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1"},"\u2529":{1:"M.5,.5 L.5,1",3:"M.5,0 L.5,.5 L0,.5"},"\u252A":{1:"M.5,.5 L.5,0",3:"M0,.5 L.5,.5 L.5,1"},"\u252D":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u252E":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,.5 L1,.5"},"\u252F":{1:"M.5,.5 L.5,1",3:"M0,.5 L1,.5"},"\u2530":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2531":{1:"M.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2532":{1:"M.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2535":{1:"M.5,0 L.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u2536":{1:"M.5,0 L.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u2537":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5"},"\u2538":{1:"M0,.5 L1,.5",3:"M.5,.5 L.5,0"},"\u2539":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u253A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,.5 L1,.5"},"\u253D":{1:"M.5,0 L.5,1 M.5,.5 L1,.5",3:"M.5,.5 L0,.5"},"\u253E":{1:"M.5,0 L.5,1 M.5,.5 L0,.5",3:"M.5,.5 L1,.5"},"\u253F":{1:"M.5,0 L.5,1",3:"M0,.5 L1,.5"},"\u2540":{1:"M0,.5 L1,.5 M.5,.5 L.5,1",3:"M.5,.5 L.5,0"},"\u2541":{1:"M.5,.5 L.5,0 M0,.5 L1,.5",3:"M.5,.5 L.5,1"},"\u2542":{1:"M0,.5 L1,.5",3:"M.5,0 L.5,1"},"\u2543":{1:"M0.5,1 L.5,.5 L1,.5",3:"M.5,0 L.5,.5 L0,.5"},"\u2544":{1:"M0,.5 L.5,.5 L.5,1",3:"M.5,0 L.5,.5 L1,.5"},"\u2545":{1:"M.5,0 L.5,.5 L1,.5",3:"M0,.5 L.5,.5 L.5,1"},"\u2546":{1:"M.5,0 L.5,.5 L0,.5",3:"M0.5,1 L.5,.5 L1,.5"},"\u2547":{1:"M.5,.5 L.5,1",3:"M.5,.5 L.5,0 M0,.5 L1,.5"},"\u2548":{1:"M.5,.5 L.5,0",3:"M0,.5 L1,.5 M.5,.5 L.5,1"},"\u2549":{1:"M.5,.5 L1,.5",3:"M.5,0 L.5,1 M.5,.5 L0,.5"},"\u254A":{1:"M.5,.5 L0,.5",3:"M.5,0 L.5,1 M.5,.5 L1,.5"},"\u254C":{1:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u254D":{3:"M.1,.5 L.4,.5 M.6,.5 L.9,.5"},"\u2504":{1:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2505":{3:"M.0667,.5 L.2667,.5 M.4,.5 L.6,.5 M.7333,.5 L.9333,.5"},"\u2508":{1:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u2509":{3:"M.05,.5 L.2,.5 M.3,.5 L.45,.5 M.55,.5 L.7,.5 M.8,.5 L.95,.5"},"\u254E":{1:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u254F":{3:"M.5,.1 L.5,.4 M.5,.6 L.5,.9"},"\u2506":{1:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u2507":{3:"M.5,.0667 L.5,.2667 M.5,.4 L.5,.6 M.5,.7333 L.5,.9333"},"\u250A":{1:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u250B":{3:"M.5,.05 L.5,.2 M.5,.3 L.5,.45 L.5,.55 M.5,.7 L.5,.95"},"\u256D":{1:(i,t)=>`M.5,1 L.5,${.5+t/.15*.5} C.5,${.5+t/.15*.5},.5,.5,1,.5`},"\u256E":{1:(i,t)=>`M.5,1 L.5,${.5+t/.15*.5} C.5,${.5+t/.15*.5},.5,.5,0,.5`},"\u256F":{1:(i,t)=>`M.5,0 L.5,${.5-t/.15*.5} C.5,${.5-t/.15*.5},.5,.5,0,.5`},"\u2570":{1:(i,t)=>`M.5,0 L.5,${.5-t/.15*.5} C.5,${.5-t/.15*.5},.5,.5,1,.5`}},e.powerlineDefinitions={"\uE0B0":{d:"M0,0 L1,.5 L0,1",type:0,rightPadding:2},"\uE0B1":{d:"M-1,-.5 L1,.5 L-1,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B2":{d:"M1,0 L0,.5 L1,1",type:0,leftPadding:2},"\uE0B3":{d:"M2,-.5 L0,.5 L2,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0B4":{d:"M0,0 L0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:0,rightPadding:1},"\uE0B5":{d:"M0,1 C0.552,1,1,0.776,1,.5 C1,0.224,0.552,0,0,0",type:1,rightPadding:1},"\uE0B6":{d:"M1,0 L1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:0,leftPadding:1},"\uE0B7":{d:"M1,1 C0.448,1,0,0.776,0,.5 C0,0.224,0.448,0,1,0",type:1,leftPadding:1},"\uE0B8":{d:"M-.5,-.5 L1.5,1.5 L-.5,1.5",type:0},"\uE0B9":{d:"M-.5,-.5 L1.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BA":{d:"M1.5,-.5 L-.5,1.5 L1.5,1.5",type:0},"\uE0BC":{d:"M1.5,-.5 L-.5,1.5 L-.5,-.5",type:0},"\uE0BD":{d:"M1.5,-.5 L-.5,1.5",type:1,leftPadding:1,rightPadding:1},"\uE0BE":{d:"M-.5,-.5 L1.5,1.5 L1.5,-.5",type:0}},e.powerlineDefinitions["\uE0BB"]=e.powerlineDefinitions["\uE0B9"],e.powerlineDefinitions["\uE0BF"]=e.powerlineDefinitions["\uE0BD"],e.tryDrawCustomChar=function(i,t,p,d,r,z,M,_){let L=e.blockElementDefinitions[t];if(L)return function(H,T,V,Z,B,N){for(let E=0;E<T.length;E++){let P=T[E],I=B/8,U=N/8;H.fillRect(V+P.x*I,Z+P.y*U,P.w*I,P.h*U)}}(i,L,p,d,r,z),!0;let S=o[t];if(S)return function(H,T,V,Z,B,N){let E=n.get(T);E||(E=new Map,n.set(T,E));let P=H.fillStyle;if(typeof P!="string")throw new Error(`Unexpected fillStyle type "${P}"`);let I=E.get(P);if(!I){let U=T[0].length,K=T.length,Q=document.createElement("canvas");Q.width=U,Q.height=K;let r0=(0,m.throwIfFalsy)(Q.getContext("2d")),e0=new ImageData(U,K),c0,j,q,G;if(P.startsWith("#"))c0=parseInt(P.slice(1,3),16),j=parseInt(P.slice(3,5),16),q=parseInt(P.slice(5,7),16),G=P.length>7&&parseInt(P.slice(7,9),16)||1;else{if(!P.startsWith("rgba"))throw new Error(`Unexpected fillStyle color format "${P}" when drawing pattern glyph`);[c0,j,q,G]=P.substring(5,P.length-1).split(",").map(t0=>parseFloat(t0))}for(let t0=0;t0<K;t0++)for(let h0=0;h0<U;h0++)e0.data[4*(t0*U+h0)]=c0,e0.data[4*(t0*U+h0)+1]=j,e0.data[4*(t0*U+h0)+2]=q,e0.data[4*(t0*U+h0)+3]=T[t0][h0]*(255*G);r0.putImageData(e0,0,0),I=(0,m.throwIfFalsy)(H.createPattern(Q,null)),E.set(P,I)}H.fillStyle=I,H.fillRect(V,Z,B,N)}(i,S,p,d,r,z),!0;let y=e.boxDrawingDefinitions[t];if(y)return function(H,T,V,Z,B,N,E){H.strokeStyle=H.fillStyle;for(let[P,I]of Object.entries(T)){let U;H.beginPath(),H.lineWidth=E*Number.parseInt(P),U=typeof I=="function"?I(.15,.15/N*B):I;for(let K of U.split(" ")){let Q=K[0],r0=v[Q];if(!r0){console.error(`Could not find drawing instructions for "${Q}"`);continue}let e0=K.substring(1).split(",");e0[0]&&e0[1]&&r0(H,f(e0,B,N,V,Z,!0,E))}H.stroke(),H.closePath()}}(i,y,p,d,r,z,_),!0;let A=e.powerlineDefinitions[t];return!!A&&(function(H,T,V,Z,B,N,E,P){var I,U;let K=new Path2D;K.rect(V,Z,B,N),H.clip(K),H.beginPath();let Q=E/12;H.lineWidth=P*Q;for(let r0 of T.d.split(" ")){let e0=r0[0],c0=v[e0];if(!c0){console.error(`Could not find drawing instructions for "${e0}"`);continue}let j=r0.substring(1).split(",");j[0]&&j[1]&&c0(H,f(j,B,N,V,Z,!1,P,((I=T.leftPadding)!==null&&I!==void 0?I:0)*(Q/2),((U=T.rightPadding)!==null&&U!==void 0?U:0)*(Q/2)))}T.type===1?(H.strokeStyle=H.fillStyle,H.stroke()):H.fill(),H.closePath()}(i,A,p,d,r,z,M,_),!0)};let n=new Map;function c(i,t,p=0){return Math.max(Math.min(i,t),p)}let v={C:(i,t)=>i.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5]),L:(i,t)=>i.lineTo(t[0],t[1]),M:(i,t)=>i.moveTo(t[0],t[1])};function f(i,t,p,d,r,z,M,_=0,L=0){let S=i.map(y=>parseFloat(y)||parseInt(y));if(S.length<2)throw new Error("Too few arguments for instruction");for(let y=0;y<S.length;y+=2)S[y]*=t-_*M-L*M,z&&S[y]!==0&&(S[y]=c(Math.round(S[y]+.5)-.5,t,0)),S[y]+=d+_*M;for(let y=1;y<S.length;y+=2)S[y]*=p,z&&S[y]!==0&&(S[y]=c(Math.round(S[y]+.5)-.5,p,0)),S[y]+=r;return S}},56:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.observeDevicePixelDimensions=void 0;let m=a(859);e.observeDevicePixelDimensions=function(o,n,c){let v=new n.ResizeObserver(f=>{let i=f.find(d=>d.target===o);if(!i)return;if(!("devicePixelContentBoxSize"in i))return v==null||v.disconnect(),void(v=void 0);let t=i.devicePixelContentBoxSize[0].inlineSize,p=i.devicePixelContentBoxSize[0].blockSize;t>0&&p>0&&c(t,p)});try{v.observe(o,{box:["device-pixel-content-box"]})}catch(f){v.disconnect(),v=void 0}return(0,m.toDisposable)(()=>v==null?void 0:v.disconnect())}},374:(b,e)=>{function a(m){return 57508<=m&&m<=57558}Object.defineProperty(e,"__esModule",{value:!0}),e.createRenderDimensions=e.excludeFromContrastRatioDemands=e.isRestrictedPowerlineGlyph=e.isPowerlineGlyph=e.throwIfFalsy=void 0,e.throwIfFalsy=function(m){if(!m)throw new Error("value must not be falsy");return m},e.isPowerlineGlyph=a,e.isRestrictedPowerlineGlyph=function(m){return 57520<=m&&m<=57527},e.excludeFromContrastRatioDemands=function(m){return a(m)||function(o){return 9472<=o&&o<=9631}(m)},e.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},296:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createSelectionRenderModel=void 0;class a{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(o,n,c,v=!1){if(this.selectionStart=n,this.selectionEnd=c,!n||!c||n[0]===c[0]&&n[1]===c[1])return void this.clear();let f=n[1]-o.buffer.active.viewportY,i=c[1]-o.buffer.active.viewportY,t=Math.max(f,0),p=Math.min(i,o.rows-1);t>=o.rows||p<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=v,this.viewportStartRow=f,this.viewportEndRow=i,this.viewportCappedStartRow=t,this.viewportCappedEndRow=p,this.startCol=n[0],this.endCol=c[0])}isCellSelected(o,n,c){return!!this.hasSelection&&(c-=o.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?n>=this.startCol&&c>=this.viewportCappedStartRow&&n<this.endCol&&c<=this.viewportCappedEndRow:n<this.startCol&&c>=this.viewportCappedStartRow&&n>=this.endCol&&c<=this.viewportCappedEndRow:c>this.viewportStartRow&&c<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&c===this.viewportStartRow&&n>=this.startCol&&n<this.endCol||this.viewportStartRow<this.viewportEndRow&&c===this.viewportEndRow&&n<this.endCol||this.viewportStartRow<this.viewportEndRow&&c===this.viewportStartRow&&n>=this.startCol)}}e.createSelectionRenderModel=function(){return new a}},509:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextureAtlas=void 0;let m=a(237),o=a(855),n=a(147),c=a(160),v=a(860),f=a(374),i=a(485),t=a(385),p=a(345),d={texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},offset:{x:0,y:0},size:{x:0,y:0},sizeClipSpace:{x:0,y:0}},r;class z{constructor(y,A,H){this._document=y,this._config=A,this._unicodeService=H,this._didWarmUp=!1,this._cacheMap=new i.FourKeyMap,this._cacheMapCombined=new i.FourKeyMap,this._pages=[],this._activePages=[],this._workBoundingBox={top:0,left:0,bottom:0,right:0},this._workAttributeData=new n.AttributeData,this._textureSize=512,this._onAddTextureAtlasCanvas=new p.EventEmitter,this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=new p.EventEmitter,this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._requestClearModel=!1,this._createNewPage(),this._tmpCanvas=L(y,4*this._config.deviceCellWidth+4,this._config.deviceCellHeight+4),this._tmpCtx=(0,f.throwIfFalsy)(this._tmpCanvas.getContext("2d",{alpha:this._config.allowTransparency,willReadFrequently:!0}))}get pages(){return this._pages}dispose(){for(let y of this.pages)y.canvas.remove();this._onAddTextureAtlasCanvas.dispose()}warmUp(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)}_doWarmUp(){let y=new t.IdleTaskQueue;for(let A=33;A<126;A++)y.enqueue(()=>{if(!this._cacheMap.get(A,o.DEFAULT_COLOR,o.DEFAULT_COLOR,o.DEFAULT_EXT)){let H=this._drawToCache(A,o.DEFAULT_COLOR,o.DEFAULT_COLOR,o.DEFAULT_EXT);this._cacheMap.set(A,o.DEFAULT_COLOR,o.DEFAULT_COLOR,o.DEFAULT_EXT,H)}})}beginFrame(){return this._requestClearModel}clearTexture(){if(this._pages[0].currentRow.x!==0||this._pages[0].currentRow.y!==0){for(let y of this._pages)y.clear();this._cacheMap.clear(),this._cacheMapCombined.clear(),this._didWarmUp=!1}}_createNewPage(){z.maxAtlasPages&&this._pages.length>=Math.max(4,z.maxAtlasPages/2)&&queueMicrotask(()=>{let A=this._pages.filter(E=>2*E.canvas.width<=(z.maxTextureSize||4096)).sort((E,P)=>P.canvas.width!==E.canvas.width?P.canvas.width-E.canvas.width:P.percentageUsed-E.percentageUsed),H=-1,T=0;for(let E=0;E<A.length;E++)if(A[E].canvas.width!==T)H=E,T=A[E].canvas.width;else if(E-H==3)break;let V=A.slice(H,H+4),Z=V.map(E=>E.glyphs[0].texturePage).sort((E,P)=>E>P?1:-1),B=Z[0],N=this._mergePages(V,B);N.version++,this._pages[B]=N;for(let E=Z.length-1;E>=1;E--)this._deletePage(Z[E]);this._requestClearModel=!0,this._onAddTextureAtlasCanvas.fire(N.canvas)});let y=new M(this._document,this._textureSize);return this._pages.push(y),this._activePages.push(y),this._onAddTextureAtlasCanvas.fire(y.canvas),y}_mergePages(y,A){let H=2*y[0].canvas.width,T=new M(this._document,H,y);for(let[V,Z]of y.entries()){let B=V*Z.canvas.width%H,N=Math.floor(V/2)*Z.canvas.height;T.ctx.drawImage(Z.canvas,B,N);for(let P of Z.glyphs)P.texturePage=A,P.sizeClipSpace.x=P.size.x/H,P.sizeClipSpace.y=P.size.y/H,P.texturePosition.x+=B,P.texturePosition.y+=N,P.texturePositionClipSpace.x=P.texturePosition.x/H,P.texturePositionClipSpace.y=P.texturePosition.y/H;this._onRemoveTextureAtlasCanvas.fire(Z.canvas);let E=this._activePages.indexOf(Z);E!==-1&&this._activePages.splice(E,1)}return T}_deletePage(y){this._pages.splice(y,1);for(let A=y;A<this._pages.length;A++){let H=this._pages[A];for(let T of H.glyphs)T.texturePage--;H.version++}}getRasterizedGlyphCombinedChar(y,A,H,T){return this._getFromCacheMap(this._cacheMapCombined,y,A,H,T)}getRasterizedGlyph(y,A,H,T){return this._getFromCacheMap(this._cacheMap,y,A,H,T)}_getFromCacheMap(y,A,H,T,V){return r=y.get(A,H,T,V),r||(r=this._drawToCache(A,H,T,V),y.set(A,H,T,V,r)),r}_getColorFromAnsiIndex(y){if(y>=this._config.colors.ansi.length)throw new Error("No color found for idx "+y);return this._config.colors.ansi[y]}_getBackgroundColor(y,A,H,T){if(this._config.allowTransparency)return c.NULL_COLOR;let V;switch(y){case 16777216:case 33554432:V=this._getColorFromAnsiIndex(A);break;case 50331648:let Z=n.AttributeData.toColorRGB(A);V=c.rgba.toColor(Z[0],Z[1],Z[2]);break;default:V=H?this._config.colors.foreground:this._config.colors.background}return T&&(V=c.color.blend(this._config.colors.background,c.color.multiplyOpacity(V,m.DIM_OPACITY))),V}_getForegroundColor(y,A,H,T,V,Z,B,N,E,P){let I=this._getMinimumContrastColor(y,A,H,T,V,Z,!1,E,P);if(I)return I;let U;switch(V){case 16777216:case 33554432:this._config.drawBoldTextInBrightColors&&E&&Z<8&&(Z+=8),U=this._getColorFromAnsiIndex(Z);break;case 50331648:let K=n.AttributeData.toColorRGB(Z);U=c.rgba.toColor(K[0],K[1],K[2]);break;default:U=B?this._config.colors.background:this._config.colors.foreground}return this._config.allowTransparency&&(U=c.color.opaque(U)),N&&(U=c.color.multiplyOpacity(U,m.DIM_OPACITY)),U}_resolveBackgroundRgba(y,A,H){switch(y){case 16777216:case 33554432:return this._getColorFromAnsiIndex(A).rgba;case 50331648:return A<<8;default:return H?this._config.colors.foreground.rgba:this._config.colors.background.rgba}}_resolveForegroundRgba(y,A,H,T){switch(y){case 16777216:case 33554432:return this._config.drawBoldTextInBrightColors&&T&&A<8&&(A+=8),this._getColorFromAnsiIndex(A).rgba;case 50331648:return A<<8;default:return H?this._config.colors.background.rgba:this._config.colors.foreground.rgba}}_getMinimumContrastColor(y,A,H,T,V,Z,B,N,E){if(this._config.minimumContrastRatio===1||E)return;let P=this._config.colors.contrastCache.getColor(y,T);if(P!==void 0)return P||void 0;let I=this._resolveBackgroundRgba(A,H,B),U=this._resolveForegroundRgba(V,Z,B,N),K=c.rgba.ensureContrastRatio(I,U,this._config.minimumContrastRatio);if(!K)return void this._config.colors.contrastCache.setColor(y,T,null);let Q=c.rgba.toColor(K>>24&255,K>>16&255,K>>8&255);return this._config.colors.contrastCache.setColor(y,T,Q),Q}_drawToCache(y,A,H,T){let V=typeof y=="number"?String.fromCharCode(y):y,Z=this._config.deviceCellWidth*Math.max(V.length,2)+4;this._tmpCanvas.width<Z&&(this._tmpCanvas.width=Z);let B=this._config.deviceCellHeight+8;if(this._tmpCanvas.height<B&&(this._tmpCanvas.height=B),this._tmpCtx.save(),this._workAttributeData.fg=H,this._workAttributeData.bg=A,this._workAttributeData.extended.ext=T,this._workAttributeData.isInvisible())return d;let N=!!this._workAttributeData.isBold(),E=!!this._workAttributeData.isInverse(),P=!!this._workAttributeData.isDim(),I=!!this._workAttributeData.isItalic(),U=!!this._workAttributeData.isUnderline(),K=!!this._workAttributeData.isStrikethrough(),Q=this._workAttributeData.getFgColor(),r0=this._workAttributeData.getFgColorMode(),e0=this._workAttributeData.getBgColor(),c0=this._workAttributeData.getBgColorMode();if(E){let g0=Q;Q=e0,e0=g0;let M0=r0;r0=c0,c0=M0}let j=this._getBackgroundColor(c0,e0,E,P);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=j.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.globalCompositeOperation="source-over";let q=N?this._config.fontWeightBold:this._config.fontWeight,G=I?"italic":"";this._tmpCtx.font=`${G} ${q} ${this._config.fontSize*this._config.devicePixelRatio}px ${this._config.fontFamily}`,this._tmpCtx.textBaseline=m.TEXT_BASELINE;let t0=V.length===1&&(0,f.isPowerlineGlyph)(V.charCodeAt(0)),h0=V.length===1&&(0,f.isRestrictedPowerlineGlyph)(V.charCodeAt(0)),A0=this._getForegroundColor(A,c0,e0,H,r0,Q,E,P,N,(0,f.excludeFromContrastRatioDemands)(V.charCodeAt(0)));this._tmpCtx.fillStyle=A0.css;let s0=h0?0:4,H0=!1;this._config.customGlyphs!==!1&&(H0=(0,v.tryDrawCustomChar)(this._tmpCtx,V,s0,s0,this._config.deviceCellWidth,this._config.deviceCellHeight,this._config.fontSize,this._config.devicePixelRatio));let J,D0=!t0;if(J=typeof y=="number"?this._unicodeService.wcwidth(y):this._unicodeService.getStringCellWidth(y),U){this._tmpCtx.save();let g0=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/15)),M0=g0%2==1?.5:0;if(this._tmpCtx.lineWidth=g0,this._workAttributeData.isUnderlineColorDefault())this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle;else if(this._workAttributeData.isUnderlineColorRGB())D0=!1,this._tmpCtx.strokeStyle=`rgb(${n.AttributeData.toColorRGB(this._workAttributeData.getUnderlineColor()).join(",")})`;else{D0=!1;let P0=this._workAttributeData.getUnderlineColor();this._config.drawBoldTextInBrightColors&&this._workAttributeData.isBold()&&P0<8&&(P0+=8),this._tmpCtx.strokeStyle=this._getColorFromAnsiIndex(P0).css}this._tmpCtx.beginPath();let R0=s0,F0=Math.ceil(s0+this._config.deviceCharHeight)-M0,x1=s0+this._config.deviceCharHeight+g0-M0,z1=Math.ceil(s0+this._config.deviceCharHeight+2*g0)-M0;for(let P0=0;P0<J;P0++){this._tmpCtx.save();let k0=R0+P0*this._config.deviceCellWidth,K0=R0+(P0+1)*this._config.deviceCellWidth,D2=k0+this._config.deviceCellWidth/2;switch(this._workAttributeData.extended.underlineStyle){case 2:this._tmpCtx.moveTo(k0,F0),this._tmpCtx.lineTo(K0,F0),this._tmpCtx.moveTo(k0,z1),this._tmpCtx.lineTo(K0,z1);break;case 3:let E1=g0<=1?z1:Math.ceil(s0+this._config.deviceCharHeight-g0/2)-M0,R1=g0<=1?F0:Math.ceil(s0+this._config.deviceCharHeight+g0/2)-M0,u3=new Path2D;u3.rect(k0,F0,this._config.deviceCellWidth,z1-F0),this._tmpCtx.clip(u3),this._tmpCtx.moveTo(k0-this._config.deviceCellWidth/2,x1),this._tmpCtx.bezierCurveTo(k0-this._config.deviceCellWidth/2,R1,k0,R1,k0,x1),this._tmpCtx.bezierCurveTo(k0,E1,D2,E1,D2,x1),this._tmpCtx.bezierCurveTo(D2,R1,K0,R1,K0,x1),this._tmpCtx.bezierCurveTo(K0,E1,K0+this._config.deviceCellWidth/2,E1,K0+this._config.deviceCellWidth/2,x1);break;case 4:this._tmpCtx.setLineDash([2*this._config.devicePixelRatio,this._config.devicePixelRatio]),this._tmpCtx.moveTo(k0,F0),this._tmpCtx.lineTo(K0,F0);break;case 5:this._tmpCtx.setLineDash([4*this._config.devicePixelRatio,3*this._config.devicePixelRatio]),this._tmpCtx.moveTo(k0,F0),this._tmpCtx.lineTo(K0,F0);break;default:this._tmpCtx.moveTo(k0,F0),this._tmpCtx.lineTo(K0,F0)}this._tmpCtx.stroke(),this._tmpCtx.restore()}if(this._tmpCtx.restore(),!H0&&this._config.fontSize>=12&&!this._config.allowTransparency&&V!==" "){this._tmpCtx.save(),this._tmpCtx.textBaseline="alphabetic";let P0=this._tmpCtx.measureText(V);if(this._tmpCtx.restore(),"actualBoundingBoxDescent"in P0&&P0.actualBoundingBoxDescent>0){this._tmpCtx.save();let k0=new Path2D;k0.rect(R0,F0-Math.ceil(g0/2),this._config.deviceCellWidth,z1-F0+Math.ceil(g0/2)),this._tmpCtx.clip(k0),this._tmpCtx.lineWidth=3*this._config.devicePixelRatio,this._tmpCtx.strokeStyle=j.css,this._tmpCtx.strokeText(V,s0,s0+this._config.deviceCharHeight),this._tmpCtx.restore()}}}if(H0||this._tmpCtx.fillText(V,s0,s0+this._config.deviceCharHeight),V==="_"&&!this._config.allowTransparency){let g0=_(this._tmpCtx.getImageData(s0,s0,this._config.deviceCellWidth,this._config.deviceCellHeight),j,A0,D0);if(g0)for(let M0=1;M0<=5&&(this._tmpCtx.save(),this._tmpCtx.fillStyle=j.css,this._tmpCtx.fillRect(0,0,this._tmpCanvas.width,this._tmpCanvas.height),this._tmpCtx.restore(),this._tmpCtx.fillText(V,s0,s0+this._config.deviceCharHeight-M0),g0=_(this._tmpCtx.getImageData(s0,s0,this._config.deviceCellWidth,this._config.deviceCellHeight),j,A0,D0),g0);M0++);}if(K){let g0=Math.max(1,Math.floor(this._config.fontSize*this._config.devicePixelRatio/10)),M0=this._tmpCtx.lineWidth%2==1?.5:0;this._tmpCtx.lineWidth=g0,this._tmpCtx.strokeStyle=this._tmpCtx.fillStyle,this._tmpCtx.beginPath(),this._tmpCtx.moveTo(s0,s0+Math.floor(this._config.deviceCharHeight/2)-M0),this._tmpCtx.lineTo(s0+this._config.deviceCharWidth*J,s0+Math.floor(this._config.deviceCharHeight/2)-M0),this._tmpCtx.stroke()}this._tmpCtx.restore();let u0=this._tmpCtx.getImageData(0,0,this._tmpCanvas.width,this._tmpCanvas.height),H2;if(H2=this._config.allowTransparency?function(g0){for(let M0=0;M0<g0.data.length;M0+=4)if(g0.data[M0+3]>0)return!1;return!0}(u0):_(u0,j,A0,D0),H2)return d;let x0=this._findGlyphBoundingBox(u0,this._workBoundingBox,Z,h0,H0,s0),w0,_0;for(;;){if(this._activePages.length===0){let g0=this._createNewPage();w0=g0,_0=g0.currentRow,_0.height=x0.size.y;break}w0=this._activePages[this._activePages.length-1],_0=w0.currentRow;for(let g0 of this._activePages)x0.size.y<=g0.currentRow.height&&(w0=g0,_0=g0.currentRow);for(let g0=this._activePages.length-1;g0>=0;g0--)for(let M0 of this._activePages[g0].fixedRows)M0.height<=_0.height&&x0.size.y<=M0.height&&(w0=this._activePages[g0],_0=M0);if(_0.y+x0.size.y>=w0.canvas.height||_0.height>x0.size.y+2){let g0=!1;if(w0.currentRow.y+w0.currentRow.height+x0.size.y>=w0.canvas.height){let M0;for(let R0 of this._activePages)if(R0.currentRow.y+R0.currentRow.height+x0.size.y<R0.canvas.height){M0=R0;break}if(M0)w0=M0;else{let R0=this._createNewPage();w0=R0,_0=R0.currentRow,_0.height=x0.size.y,g0=!0}}g0||(w0.currentRow.height>0&&w0.fixedRows.push(w0.currentRow),_0={x:0,y:w0.currentRow.y+w0.currentRow.height,height:x0.size.y},w0.fixedRows.push(_0),w0.currentRow={x:0,y:_0.y+_0.height,height:0})}if(_0.x+x0.size.x<=w0.canvas.width)break;_0===w0.currentRow?(_0.x=0,_0.y+=_0.height,_0.height=0):w0.fixedRows.splice(w0.fixedRows.indexOf(_0),1)}return x0.texturePage=this._pages.indexOf(w0),x0.texturePosition.x=_0.x,x0.texturePosition.y=_0.y,x0.texturePositionClipSpace.x=_0.x/w0.canvas.width,x0.texturePositionClipSpace.y=_0.y/w0.canvas.height,x0.sizeClipSpace.x/=w0.canvas.width,x0.sizeClipSpace.y/=w0.canvas.height,_0.height=Math.max(_0.height,x0.size.y),_0.x+=x0.size.x,w0.ctx.putImageData(u0,x0.texturePosition.x-this._workBoundingBox.left,x0.texturePosition.y-this._workBoundingBox.top,this._workBoundingBox.left,this._workBoundingBox.top,x0.size.x,x0.size.y),w0.addGlyph(x0),w0.version++,x0}_findGlyphBoundingBox(y,A,H,T,V,Z){A.top=0;let B=T?this._config.deviceCellHeight:this._tmpCanvas.height,N=T?this._config.deviceCellWidth:H,E=!1;for(let P=0;P<B;P++){for(let I=0;I<N;I++){let U=P*this._tmpCanvas.width*4+4*I+3;if(y.data[U]!==0){A.top=P,E=!0;break}}if(E)break}A.left=0,E=!1;for(let P=0;P<Z+N;P++){for(let I=0;I<B;I++){let U=I*this._tmpCanvas.width*4+4*P+3;if(y.data[U]!==0){A.left=P,E=!0;break}}if(E)break}A.right=N,E=!1;for(let P=Z+N-1;P>=Z;P--){for(let I=0;I<B;I++){let U=I*this._tmpCanvas.width*4+4*P+3;if(y.data[U]!==0){A.right=P,E=!0;break}}if(E)break}A.bottom=B,E=!1;for(let P=B-1;P>=0;P--){for(let I=0;I<N;I++){let U=P*this._tmpCanvas.width*4+4*I+3;if(y.data[U]!==0){A.bottom=P,E=!0;break}}if(E)break}return{texturePage:0,texturePosition:{x:0,y:0},texturePositionClipSpace:{x:0,y:0},size:{x:A.right-A.left+1,y:A.bottom-A.top+1},sizeClipSpace:{x:A.right-A.left+1,y:A.bottom-A.top+1},offset:{x:-A.left+Z+(T||V?Math.floor((this._config.deviceCellWidth-this._config.deviceCharWidth)/2):0),y:-A.top+Z+(T||V?this._config.lineHeight===1?0:Math.round((this._config.deviceCellHeight-this._config.deviceCharHeight)/2):0)}}}}e.TextureAtlas=z;class M{constructor(y,A,H){if(this._usedPixels=0,this._glyphs=[],this.version=0,this.currentRow={x:0,y:0,height:0},this.fixedRows=[],H)for(let T of H)this._glyphs.push(...T.glyphs),this._usedPixels+=T._usedPixels;this.canvas=L(y,A,A),this.ctx=(0,f.throwIfFalsy)(this.canvas.getContext("2d",{alpha:!0}))}get percentageUsed(){return this._usedPixels/(this.canvas.width*this.canvas.height)}get glyphs(){return this._glyphs}addGlyph(y){this._glyphs.push(y),this._usedPixels+=y.size.x*y.size.y}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.currentRow.x=0,this.currentRow.y=0,this.currentRow.height=0,this.fixedRows.length=0,this.version++}}function _(S,y,A,H){let T=y.rgba>>>24,V=y.rgba>>>16&255,Z=y.rgba>>>8&255,B=A.rgba>>>24,N=A.rgba>>>16&255,E=A.rgba>>>8&255,P=Math.floor((Math.abs(T-B)+Math.abs(V-N)+Math.abs(Z-E))/12),I=!0;for(let U=0;U<S.data.length;U+=4)S.data[U]===T&&S.data[U+1]===V&&S.data[U+2]===Z||H&&Math.abs(S.data[U]-T)+Math.abs(S.data[U+1]-V)+Math.abs(S.data[U+2]-Z)<P?S.data[U+3]=0:I=!1;return I}function L(S,y,A){let H=S.createElement("canvas");return H.width=y,H.height=A,H}},160:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.contrastRatio=e.toPaddedHex=e.rgba=e.rgb=e.css=e.color=e.channels=e.NULL_COLOR=void 0;let m=a(399),o=0,n=0,c=0,v=0;var f,i,t;function p(r){let z=r.toString(16);return z.length<2?"0"+z:z}function d(r,z){return r<z?(z+.05)/(r+.05):(r+.05)/(z+.05)}e.NULL_COLOR={css:"#00000000",rgba:0},function(r){r.toCss=function(z,M,_,L){return L!==void 0?`#${p(z)}${p(M)}${p(_)}${p(L)}`:`#${p(z)}${p(M)}${p(_)}`},r.toRgba=function(z,M,_,L=255){return(z<<24|M<<16|_<<8|L)>>>0}}(f=e.channels||(e.channels={})),function(r){function z(M,_){return v=Math.round(255*_),[o,n,c]=t.toChannels(M.rgba),{css:f.toCss(o,n,c,v),rgba:f.toRgba(o,n,c,v)}}r.blend=function(M,_){if(v=(255&_.rgba)/255,v===1)return{css:_.css,rgba:_.rgba};let L=_.rgba>>24&255,S=_.rgba>>16&255,y=_.rgba>>8&255,A=M.rgba>>24&255,H=M.rgba>>16&255,T=M.rgba>>8&255;return o=A+Math.round((L-A)*v),n=H+Math.round((S-H)*v),c=T+Math.round((y-T)*v),{css:f.toCss(o,n,c),rgba:f.toRgba(o,n,c)}},r.isOpaque=function(M){return(255&M.rgba)==255},r.ensureContrastRatio=function(M,_,L){let S=t.ensureContrastRatio(M.rgba,_.rgba,L);if(S)return t.toColor(S>>24&255,S>>16&255,S>>8&255)},r.opaque=function(M){let _=(255|M.rgba)>>>0;return[o,n,c]=t.toChannels(_),{css:f.toCss(o,n,c),rgba:_}},r.opacity=z,r.multiplyOpacity=function(M,_){return v=255&M.rgba,z(M,v*_/255)},r.toColorRGB=function(M){return[M.rgba>>24&255,M.rgba>>16&255,M.rgba>>8&255]}}(e.color||(e.color={})),function(r){let z,M;if(!m.isNode){let _=document.createElement("canvas");_.width=1,_.height=1;let L=_.getContext("2d",{willReadFrequently:!0});L&&(z=L,z.globalCompositeOperation="copy",M=z.createLinearGradient(0,0,1,1))}r.toColor=function(_){if(_.match(/#[\da-f]{3,8}/i))switch(_.length){case 4:return o=parseInt(_.slice(1,2).repeat(2),16),n=parseInt(_.slice(2,3).repeat(2),16),c=parseInt(_.slice(3,4).repeat(2),16),t.toColor(o,n,c);case 5:return o=parseInt(_.slice(1,2).repeat(2),16),n=parseInt(_.slice(2,3).repeat(2),16),c=parseInt(_.slice(3,4).repeat(2),16),v=parseInt(_.slice(4,5).repeat(2),16),t.toColor(o,n,c,v);case 7:return{css:_,rgba:(parseInt(_.slice(1),16)<<8|255)>>>0};case 9:return{css:_,rgba:parseInt(_.slice(1),16)>>>0}}let L=_.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(L)return o=parseInt(L[1]),n=parseInt(L[2]),c=parseInt(L[3]),v=Math.round(255*(L[5]===void 0?1:parseFloat(L[5]))),t.toColor(o,n,c,v);if(!z||!M)throw new Error("css.toColor: Unsupported css format");if(z.fillStyle=M,z.fillStyle=_,typeof z.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(z.fillRect(0,0,1,1),[o,n,c,v]=z.getImageData(0,0,1,1).data,v!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:f.toRgba(o,n,c,v),css:_}}}(e.css||(e.css={})),function(r){function z(M,_,L){let S=M/255,y=_/255,A=L/255;return .2126*(S<=.03928?S/12.92:Math.pow((S+.055)/1.055,2.4))+.7152*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.0722*(A<=.03928?A/12.92:Math.pow((A+.055)/1.055,2.4))}r.relativeLuminance=function(M){return z(M>>16&255,M>>8&255,255&M)},r.relativeLuminance2=z}(i=e.rgb||(e.rgb={})),function(r){function z(_,L,S){let y=_>>24&255,A=_>>16&255,H=_>>8&255,T=L>>24&255,V=L>>16&255,Z=L>>8&255,B=d(i.relativeLuminance2(T,V,Z),i.relativeLuminance2(y,A,H));for(;B<S&&(T>0||V>0||Z>0);)T-=Math.max(0,Math.ceil(.1*T)),V-=Math.max(0,Math.ceil(.1*V)),Z-=Math.max(0,Math.ceil(.1*Z)),B=d(i.relativeLuminance2(T,V,Z),i.relativeLuminance2(y,A,H));return(T<<24|V<<16|Z<<8|255)>>>0}function M(_,L,S){let y=_>>24&255,A=_>>16&255,H=_>>8&255,T=L>>24&255,V=L>>16&255,Z=L>>8&255,B=d(i.relativeLuminance2(T,V,Z),i.relativeLuminance2(y,A,H));for(;B<S&&(T<255||V<255||Z<255);)T=Math.min(255,T+Math.ceil(.1*(255-T))),V=Math.min(255,V+Math.ceil(.1*(255-V))),Z=Math.min(255,Z+Math.ceil(.1*(255-Z))),B=d(i.relativeLuminance2(T,V,Z),i.relativeLuminance2(y,A,H));return(T<<24|V<<16|Z<<8|255)>>>0}r.ensureContrastRatio=function(_,L,S){let y=i.relativeLuminance(_>>8),A=i.relativeLuminance(L>>8);if(d(y,A)<S){if(A<y){let V=z(_,L,S),Z=d(y,i.relativeLuminance(V>>8));if(Z<S){let B=M(_,L,S);return Z>d(y,i.relativeLuminance(B>>8))?V:B}return V}let H=M(_,L,S),T=d(y,i.relativeLuminance(H>>8));if(T<S){let V=z(_,L,S);return T>d(y,i.relativeLuminance(V>>8))?H:V}return H}},r.reduceLuminance=z,r.increaseLuminance=M,r.toChannels=function(_){return[_>>24&255,_>>16&255,_>>8&255,255&_]},r.toColor=function(_,L,S,y){return{css:f.toCss(_,L,S,y),rgba:f.toRgba(_,L,S,y)}}}(t=e.rgba||(e.rgba={})),e.toPaddedHex=p,e.contrastRatio=d},345:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.forwardEvent=e.EventEmitter=void 0,e.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=a=>(this._listeners.push(a),{dispose:()=>{if(!this._disposed){for(let m=0;m<this._listeners.length;m++)if(this._listeners[m]===a)return void this._listeners.splice(m,1)}}})),this._event}fire(a,m){let o=[];for(let n=0;n<this._listeners.length;n++)o.push(this._listeners[n]);for(let n=0;n<o.length;n++)o[n].call(void 0,a,m)}dispose(){this._listeners&&(this._listeners.length=0),this._disposed=!0}},e.forwardEvent=function(a,m){return a(o=>m.fire(o))}},859:(b,e)=>{function a(m){for(let o of m)o.dispose();m.length=0}Object.defineProperty(e,"__esModule",{value:!0}),e.getDisposeArrayDisposable=e.disposeArray=e.toDisposable=e.Disposable=void 0,e.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(let m of this._disposables)m.dispose();this._disposables.length=0}register(m){return this._disposables.push(m),m}unregister(m){let o=this._disposables.indexOf(m);o!==-1&&this._disposables.splice(o,1)}},e.toDisposable=function(m){return{dispose:m}},e.disposeArray=a,e.getDisposeArrayDisposable=function(m){return{dispose:()=>a(m)}}},485:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FourKeyMap=e.TwoKeyMap=void 0;class a{constructor(){this._data={}}set(o,n,c){this._data[o]||(this._data[o]={}),this._data[o][n]=c}get(o,n){return this._data[o]?this._data[o][n]:void 0}clear(){this._data={}}}e.TwoKeyMap=a,e.FourKeyMap=class{constructor(){this._data=new a}set(m,o,n,c,v){this._data.get(m,o)||this._data.set(m,o,new a),this._data.get(m,o).set(n,c,v)}get(m,o,n,c){var v;return(v=this._data.get(m,o))===null||v===void 0?void 0:v.get(n,c)}clear(){this._data.clear()}}},399:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isChromeOS=e.isLinux=e.isWindows=e.isIphone=e.isIpad=e.isMac=e.getSafariVersion=e.isSafari=e.isLegacyEdge=e.isFirefox=e.isNode=void 0,e.isNode=typeof navigator=="undefined";let a=e.isNode?"node":navigator.userAgent,m=e.isNode?"node":navigator.platform;e.isFirefox=a.includes("Firefox"),e.isLegacyEdge=a.includes("Edge"),e.isSafari=/^((?!chrome|android).)*safari/i.test(a),e.getSafariVersion=function(){if(!e.isSafari)return 0;let o=a.match(/Version\/(\d+)/);return o===null||o.length<2?0:parseInt(o[1])},e.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(m),e.isIpad=m==="iPad",e.isIphone=m==="iPhone",e.isWindows=["Windows","Win16","Win32","WinCE"].includes(m),e.isLinux=m.indexOf("Linux")>=0,e.isChromeOS=/\bCrOS\b/.test(a)},385:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DebouncedIdleTask=e.IdleTaskQueue=e.PriorityTaskQueue=void 0;let m=a(399);class o{constructor(){this._tasks=[],this._i=0}enqueue(v){this._tasks.push(v),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(v){this._idleCallback=void 0;let f=0,i=0,t=v.timeRemaining(),p=0;for(;this._i<this._tasks.length;){if(f=Date.now(),this._tasks[this._i]()||this._i++,f=Math.max(1,Date.now()-f),i=Math.max(f,i),p=v.timeRemaining(),1.5*i>p)return t-f<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(t-f))}ms`),void this._start();t=p}this.clear()}}class n extends o{_requestCallback(v){return setTimeout(()=>v(this._createDeadline(16)))}_cancelCallback(v){clearTimeout(v)}_createDeadline(v){let f=Date.now()+v;return{timeRemaining:()=>Math.max(0,f-Date.now())}}}e.PriorityTaskQueue=n,e.IdleTaskQueue=!m.isNode&&"requestIdleCallback"in window?class extends o{_requestCallback(c){return requestIdleCallback(c)}_cancelCallback(c){cancelIdleCallback(c)}}:n,e.DebouncedIdleTask=class{constructor(){this._queue=new e.IdleTaskQueue}set(c){this._queue.clear(),this._queue.enqueue(c)}flush(){this._queue.flush()}}},147:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ExtendedAttrs=e.AttributeData=void 0;class a{constructor(){this.fg=0,this.bg=0,this.extended=new m}static toColorRGB(n){return[n>>>16&255,n>>>8&255,255&n]}static fromColorRGB(n){return(255&n[0])<<16|(255&n[1])<<8|255&n[2]}clone(){let n=new a;return n.fg=this.fg,n.bg=this.bg,n.extended=this.extended.clone(),n}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}e.AttributeData=a;class m{constructor(n=0,c=0){this._ext=0,this._urlId=0,this._ext=n,this._urlId=c}get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(n){this._ext=n}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(n){this._ext&=-469762049,this._ext|=n<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(n){this._ext&=-67108864,this._ext|=67108863&n}get urlId(){return this._urlId}set urlId(n){this._urlId=n}clone(){return new m(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}e.ExtendedAttrs=m},782:(b,e,a)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CellData=void 0;let m=a(133),o=a(855),n=a(147);class c extends n.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new n.ExtendedAttrs,this.combinedData=""}static fromCharData(f){let i=new c;return i.setFromCharData(f),i}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,m.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(f){this.fg=f[o.CHAR_DATA_ATTR_INDEX],this.bg=0;let i=!1;if(f[o.CHAR_DATA_CHAR_INDEX].length>2)i=!0;else if(f[o.CHAR_DATA_CHAR_INDEX].length===2){let t=f[o.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=t&&t<=56319){let p=f[o.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=p&&p<=57343?this.content=1024*(t-55296)+p-56320+65536|f[o.CHAR_DATA_WIDTH_INDEX]<<22:i=!0}else i=!0}else this.content=f[o.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|f[o.CHAR_DATA_WIDTH_INDEX]<<22;i&&(this.combinedData=f[o.CHAR_DATA_CHAR_INDEX],this.content=2097152|f[o.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}e.CellData=c},855:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WHITESPACE_CELL_CODE=e.WHITESPACE_CELL_WIDTH=e.WHITESPACE_CELL_CHAR=e.NULL_CELL_CODE=e.NULL_CELL_WIDTH=e.NULL_CELL_CHAR=e.CHAR_DATA_CODE_INDEX=e.CHAR_DATA_WIDTH_INDEX=e.CHAR_DATA_CHAR_INDEX=e.CHAR_DATA_ATTR_INDEX=e.DEFAULT_EXT=e.DEFAULT_ATTR=e.DEFAULT_COLOR=void 0,e.DEFAULT_COLOR=0,e.DEFAULT_ATTR=256|e.DEFAULT_COLOR<<9,e.DEFAULT_EXT=0,e.CHAR_DATA_ATTR_INDEX=0,e.CHAR_DATA_CHAR_INDEX=1,e.CHAR_DATA_WIDTH_INDEX=2,e.CHAR_DATA_CODE_INDEX=3,e.NULL_CELL_CHAR="",e.NULL_CELL_WIDTH=1,e.NULL_CELL_CODE=0,e.WHITESPACE_CELL_CHAR=" ",e.WHITESPACE_CELL_WIDTH=1,e.WHITESPACE_CELL_CODE=32},133:(b,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Utf8ToUtf32=e.StringToUtf32=e.utf32ToString=e.stringFromCodePoint=void 0,e.stringFromCodePoint=function(a){return a>65535?(a-=65536,String.fromCharCode(55296+(a>>10))+String.fromCharCode(a%1024+56320)):String.fromCharCode(a)},e.utf32ToString=function(a,m=0,o=a.length){let n="";for(let c=m;c<o;++c){let v=a[c];v>65535?(v-=65536,n+=String.fromCharCode(55296+(v>>10))+String.fromCharCode(v%1024+56320)):n+=String.fromCharCode(v)}return n},e.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(a,m){let o=a.length;if(!o)return 0;let n=0,c=0;if(this._interim){let v=a.charCodeAt(c++);56320<=v&&v<=57343?m[n++]=1024*(this._interim-55296)+v-56320+65536:(m[n++]=this._interim,m[n++]=v),this._interim=0}for(let v=c;v<o;++v){let f=a.charCodeAt(v);if(55296<=f&&f<=56319){if(++v>=o)return this._interim=f,n;let i=a.charCodeAt(v);56320<=i&&i<=57343?m[n++]=1024*(f-55296)+i-56320+65536:(m[n++]=f,m[n++]=i)}else f!==65279&&(m[n++]=f)}return n}},e.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(a,m){let o=a.length;if(!o)return 0;let n,c,v,f,i=0,t=0,p=0;if(this.interim[0]){let z=!1,M=this.interim[0];M&=(224&M)==192?31:(240&M)==224?15:7;let _,L=0;for(;(_=63&this.interim[++L])&&L<4;)M<<=6,M|=_;let S=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,y=S-L;for(;p<y;){if(p>=o)return 0;if(_=a[p++],(192&_)!=128){p--,z=!0;break}this.interim[L++]=_,M<<=6,M|=63&_}z||(S===2?M<128?p--:m[i++]=M:S===3?M<2048||M>=55296&&M<=57343||M===65279||(m[i++]=M):M<65536||M>1114111||(m[i++]=M)),this.interim.fill(0)}let d=o-4,r=p;for(;r<o;){for(;!(!(r<d)||128&(n=a[r])||128&(c=a[r+1])||128&(v=a[r+2])||128&(f=a[r+3]));)m[i++]=n,m[i++]=c,m[i++]=v,m[i++]=f,r+=4;if(n=a[r++],n<128)m[i++]=n;else if((224&n)==192){if(r>=o)return this.interim[0]=n,i;if(c=a[r++],(192&c)!=128){r--;continue}if(t=(31&n)<<6|63&c,t<128){r--;continue}m[i++]=t}else if((240&n)==224){if(r>=o)return this.interim[0]=n,i;if(c=a[r++],(192&c)!=128){r--;continue}if(r>=o)return this.interim[0]=n,this.interim[1]=c,i;if(v=a[r++],(192&v)!=128){r--;continue}if(t=(15&n)<<12|(63&c)<<6|63&v,t<2048||t>=55296&&t<=57343||t===65279)continue;m[i++]=t}else if((248&n)==240){if(r>=o)return this.interim[0]=n,i;if(c=a[r++],(192&c)!=128){r--;continue}if(r>=o)return this.interim[0]=n,this.interim[1]=c,i;if(v=a[r++],(192&v)!=128){r--;continue}if(r>=o)return this.interim[0]=n,this.interim[1]=c,this.interim[2]=v,i;if(f=a[r++],(192&f)!=128){r--;continue}if(t=(7&n)<<18|(63&c)<<12|(63&v)<<6|63&f,t<65536||t>1114111)continue;m[i++]=t}}return i}}}},u={};function g(b){var e=u[b];if(e!==void 0)return e.exports;var a=u[b]={exports:{}};return l[b](a,a.exports,g),a.exports}var w={};return(()=>{var b=w;Object.defineProperty(b,"__esModule",{value:!0}),b.WebglAddon=void 0;let e=g(345),a=g(859),m=g(399),o=g(666);class n extends a.Disposable{constructor(v){if(m.isSafari&&(0,m.getSafariVersion)()<16)throw new Error("Webgl2 is only supported on Safari 16 and above");super(),this._preserveDrawingBuffer=v,this._onChangeTextureAtlas=this.register(new e.EventEmitter),this.onChangeTextureAtlas=this._onChangeTextureAtlas.event,this._onAddTextureAtlasCanvas=this.register(new e.EventEmitter),this.onAddTextureAtlasCanvas=this._onAddTextureAtlasCanvas.event,this._onRemoveTextureAtlasCanvas=this.register(new e.EventEmitter),this.onRemoveTextureAtlasCanvas=this._onRemoveTextureAtlasCanvas.event,this._onContextLoss=this.register(new e.EventEmitter),this.onContextLoss=this._onContextLoss.event}activate(v){let f=v._core;if(!v.element)return void this.register(f.onWillOpen(()=>this.activate(v)));this._terminal=v;let i=f.coreService,t=f.optionsService,p=f,d=p._renderService,r=p._characterJoinerService,z=p._charSizeService,M=p._coreBrowserService,_=p._decorationService,L=p._themeService;this._renderer=this.register(new o.WebglRenderer(v,r,z,M,i,_,t,L,this._preserveDrawingBuffer)),this.register((0,e.forwardEvent)(this._renderer.onContextLoss,this._onContextLoss)),this.register((0,e.forwardEvent)(this._renderer.onChangeTextureAtlas,this._onChangeTextureAtlas)),this.register((0,e.forwardEvent)(this._renderer.onAddTextureAtlasCanvas,this._onAddTextureAtlasCanvas)),this.register((0,e.forwardEvent)(this._renderer.onRemoveTextureAtlasCanvas,this._onRemoveTextureAtlasCanvas)),d.setRenderer(this._renderer),this.register((0,a.toDisposable)(()=>{let S=this._terminal._core._renderService;S.setRenderer(this._terminal._core._createRenderer()),S.handleResize(v.cols,v.rows)}))}get textureAtlas(){var v;return(v=this._renderer)===null||v===void 0?void 0:v.textureAtlas}clearTextureAtlas(){var v;(v=this._renderer)===null||v===void 0||v.clearTextureAtlas()}}b.WebglAddon=n})(),w})()})});var gd={};I0(gd,{TerminalPlugin:()=>L6,default:()=>vd});module.exports=ma(gd);var A6=require("obsidian");function W9(l,u){return typeof u===l}function j9(l){return l}var L4="utf-8",I6="";var m3="	";var G9=Object.freeze([0,"SIGINT","SIGTERM"]),q9=500,$9=500,K9="Uncaught (in promise)";var Q9=x2(J9());var Cd=u1(["android","darwin","ios","linux","unknown","win32"]),v3=(()=>{let{userAgent:l}=navigator;return l.includes("like Mac")?"ios":l.includes("Android")?"android":l.includes("Mac")?"darwin":l.includes("Win")?"win32":l.includes("Linux")||l.includes("X11")?"linux":"unknown"})(),A4,N3,K2=class{constructor(){z0(this,A4,Promise.resolve());z0(this,N3,[])}async emit(...u){await o0(this,A4);let g=o0(this,N3).map(async w=>{await w(...u)});S0(this,A4,Promise.allSettled(g)),await Promise.all(g)}listen(u){return o0(this,N3).push(u),()=>{G6(o0(this,N3),u)}}};A4=new WeakMap,N3=new WeakMap;function R2(l){return l instanceof Error?l:new Error(String(l))}function U6(l,u=""){let g=l.slice(Math.max(l.lastIndexOf("/"),l.lastIndexOf("\\"))+1);return g.endsWith(u)?g.slice(0,g.length-u.length):g}function ga(){return(l,u)=>typeof u=="bigint"?u.toString():u}function ee(l,u){let g=l.codePointAt(0);if(J0(g))return"";let w=String.fromCodePoint(g);return`${w.toLocaleUpperCase(u)}${l.slice(w.length)}`}function te(l,u){let g=e1(l);return u(g),u1(g)}async function se(l,u){let g=e1(l);return await u(g),u1(g)}function N6(l){l.length=0}function ie(l){for(let u of Object.getOwnPropertyNames(l))delete l[u];for(let u of Object.getOwnPropertySymbols(l))delete l[u]}function e1(l){return g3(l)}function ae(l,u,g,w){let b=l();return()=>w.replace(b,l()).replace(g,u())}function u1(l){return typeof l=="object"&&l!==null&&Object.values(l).forEach(u1),Object.freeze(l)}function Y2(l){return(u,g)=>{try{l(u,g)}catch(w){g(w)}}}function ce(l){let u=U6(l),g=u.lastIndexOf(".");return g===-1?"":u.slice(g)}function re(l,u="text/plain; charset=UTF-8;",g=""){let w=document.createElement("a");w.target="_blank",w.download=g;let b=URL.createObjectURL(new Blob([l],{type:u}));try{w.href=b,w.click()}finally{URL.revokeObjectURL(b)}}async function W3(l){let u=await l();return new Promise(Y2((g,w)=>{u.once("spawn",()=>{g(u)}).once("error",w)}))}function X2(){return l=>Object.freeze(Object.keys(l))}function g3(l,u){return structuredClone(l,u)}function le(l){return l}function oe(l,u){return Array.isArray(u)?u.every(g=>typeof g===l):!1}function W6(l){return!j6(l)}function pa(l){return l===null}function j6(l){return pa(l)||J0(l)}function ne(l,u){let g={};return Object.assign(g,u),"__type"in g?g.__type===l:!1}function K1(l,u){return l.includes(u)}function J0(l){return typeof l=="undefined"}function he(l,u,...g){l.splice(u,0,...g)}function ue(l){return Object.keys(l).length}function k5(...l){if(l.length<=0)return"";let u=b=>{if(typeof b=="object"&&typeof b!="function")try{return JSON.stringify(b,(0,Q9.getSerialize)(ga()),m3)}catch(e){}return String(b)},[g,...w]=l;return typeof g=="string"?[...function*(){var m;let e=w[Symbol.iterator](),a=0;for(let o=g.indexOf("%");o!==-1;o=g.indexOf("%",a)){yield g.slice(a,o),a=o+1;let n=g.codePointAt(a);if(J0(n)){yield"%";continue}let c=String.fromCodePoint(n);a+=c.length;let v=null;switch(c){case"%":yield"%%";break;case"s":v=f=>String(f);break;case"o":case"O":v=u;break;case"f":v=f=>Number(f).toString();break;case"d":case"i":v=f=>Math.trunc(Number(f)).toString();break;case"c":v=()=>"";break;default:yield`%${c}`;break}if(v!==null){let f=e.next();if((m=f.done)!=null&&m){yield`%${c}`;break}yield v(f.value)}}yield g.slice(a);for(let o of e)yield` ${u(o)}`}()].join(""):l.map(u).join(" ")}function de(l,u){let g=new ResizeObserver(w=>{let b=w.at(-1);J0(b)||u(b)});return g.observe(l),g}function me(l,u,g=!1){let w=new IntersectionObserver(b=>{var e;for(let a of g?b.reverse():[(e=b.at(-1))!=null?e:{isIntersecting:!1}])if(a.isIntersecting){u(a);break}});return w.observe(l),w}function ve(l){return window.open(l,"_blank","noreferrer")}async function ge(){return new Promise(Y2((l,u)=>{let g=new Promise((w,b)=>{Promise.resolve().then(()=>({promise:g,reject:b,resolve:w})).then(l,u)})}))}function E5(l,u=()=>crypto.randomUUID()){let g=u();for(;l.includes(g);)g=u();return g}function G6(l,u){return H5(l,l.indexOf(u))}function H5(l,u){return l.splice(u,1)[0]}function k4(l,u,g){[l[u],l[g]]=[l[g],l[u]]}function E4(){throw new Error}async function p3(l,u){return new Promise(Y2((g,w)=>{let b=l.write(u,e=>{e?w(e):b&&g()});b||l.once("drain",g)}))}var q6={};I0(q6,{commands:()=>fa,components:()=>za,default:()=>La,errors:()=>ba,generic:()=>wa,menus:()=>_a,name:()=>ya,notices:()=>Ca,ribbons:()=>Ma,settings:()=>xa,types:()=>Sa});var fa={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},za={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},ba={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},wa={edit:"Edit"},_a={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},ya="Terminal",Ca={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},Ma={"open-terminal":"Open terminal"},xa={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},Sa={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},La={commands:fa,components:za,errors:ba,generic:wa,menus:_a,name:ya,notices:Ca,ribbons:Ma,settings:xa,types:Sa};var $6={};I0($6,{components:()=>Aa,default:()=>Va,generic:()=>ka,menus:()=>Ea,ribbons:()=>Ha,settings:()=>Da,types:()=>Ta});var Aa={dialog:{"cancel-icon":"x","confirm-icon":"check"},"editable-list":{"append-icon":"plus","move-down-icon":"arrow-down","move-up-icon":"arrow-up","prepend-icon":"plus","remove-icon":"minus"},find:{"case-sensitive-icon":"uppercase-lowercase-a","next-icon":"arrow-down","previous-icon":"arrow-up","regex-icon":"regex","whole-word-icon":"align-horizontal-space-around"},profile:{external:{"arguments-icon":"form-input","executable-icon":"file-terminal"},integrated:{"arguments-icon":"form-input","enable-Windows-conhost-workaround-icon":"code","executable-icon":"file-terminal","python-executable-icon":"file-cog"},invalid:{"data-icon":"curly-braces"},"name-icon":"text-cursor-input","type-icon":"type"},terminal:{icon:"terminal","profile-icon":"terminal-square","working-directory-icon":"folder"}},ka={"edit-icon":"edit","edit-list-icon":"list"},Ea={terminal:{"find-icon":"search","restart-icon":"reset","save-as-HTML-icon":"save"}},Ha={"open-terminal":"terminal-square"},Da={"add-to-command-icon":"terminal","add-to-context-menu-icon":"menu","all-settings-actions":{"reload-icon":"loader","reset-icon":"reset","undo-icon":"undo"},"error-notice-timeout-icon":"timer","hide-status-bar-icon":"eye-off","language-icon":"languages","notice-timeout-icon":"timer","preferred-renderer-icon":"brush","profiles-icon":"terminal-square"},Ta={platforms:{"darwin-icon":"terminal:macos","linux-icon":"terminal:linux","win32-icon":"terminal:windows"},profiles:{"-icon":"square","console-icon":"curly-braces","external-icon":"terminal-square","integrated-icon":"terminal","invalid-icon":"x-circle","select-icon":"text-cursor-input"}},Va={components:Aa,generic:ka,menus:Ea,ribbons:Ha,settings:Da,types:Ta};var K6={};I0(K6,{commands:()=>Ra,components:()=>Fa,default:()=>ja,errors:()=>Ba,generic:()=>Pa,menus:()=>Oa,name:()=>Ia,notices:()=>Za,ribbons:()=>Ua,settings:()=>Na,types:()=>Wa});var Ra={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},Fa={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},Ba={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},Pa={edit:"Edit"},Oa={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},Ia="Terminal",Za={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},Ua={"open-terminal":"Open terminal"},Na={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},Wa={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},ja={commands:Ra,components:Fa,errors:Ba,generic:Pa,menus:Oa,name:Ia,notices:Za,ribbons:Ua,settings:Na,types:Wa};var Y6={};I0(Y6,{commands:()=>Ga,components:()=>qa,default:()=>sc,errors:()=>$a,generic:()=>Ka,menus:()=>Ya,name:()=>Xa,notices:()=>Ja,ribbons:()=>Qa,settings:()=>ec,types:()=>tc});var Ga={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},qa={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},$a={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},Ka={edit:"Edit"},Ya={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},Xa="Terminal",Ja={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},Qa={"open-terminal":"Open terminal"},ec={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},tc={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},sc={commands:Ga,components:qa,errors:$a,generic:Ka,menus:Ya,name:Xa,notices:Ja,ribbons:Qa,settings:ec,types:tc};var X6={};I0(X6,{commands:()=>ic,components:()=>ac,default:()=>mc,errors:()=>cc,generic:()=>rc,menus:()=>lc,name:()=>oc,notices:()=>nc,ribbons:()=>hc,settings:()=>uc,types:()=>dc});var ic={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},ac={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},cc={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},rc={edit:"Edit"},lc={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},oc="Terminal",nc={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},hc={"open-terminal":"Open terminal"},uc={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},dc={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},mc={commands:ic,components:ac,errors:cc,generic:rc,menus:lc,name:oc,notices:nc,ribbons:hc,settings:uc,types:dc};var J6={};I0(J6,{commands:()=>vc,components:()=>gc,default:()=>Mc,errors:()=>pc,generic:()=>fc,menus:()=>zc,name:()=>bc,notices:()=>wc,ribbons:()=>_c,settings:()=>yc,types:()=>Cc});var vc={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},gc={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},pc={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},fc={edit:"Edit"},zc={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},bc="Terminal",wc={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},_c={"open-terminal":"Open terminal"},yc={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},Cc={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},Mc={commands:vc,components:gc,errors:pc,generic:fc,menus:zc,name:bc,notices:wc,ribbons:_c,settings:yc,types:Cc};var Q6={};I0(Q6,{commands:()=>xc,components:()=>Sc,default:()=>Rc,errors:()=>Lc,generic:()=>Ac,menus:()=>kc,name:()=>Ec,notices:()=>Hc,ribbons:()=>Dc,settings:()=>Tc,types:()=>Vc});var xc={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},Sc={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},Lc={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},Ac={edit:"Edit"},kc={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},Ec="Terminal",Hc={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},Dc={"open-terminal":"Open terminal"},Tc={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},Vc={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},Rc={commands:xc,components:Sc,errors:Lc,generic:Ac,menus:kc,name:Ec,notices:Hc,ribbons:Dc,settings:Tc,types:Vc};var e7={};I0(e7,{commands:()=>Fc,components:()=>Bc,default:()=>Gc,errors:()=>Pc,generic:()=>Oc,menus:()=>Ic,name:()=>Zc,notices:()=>Uc,ribbons:()=>Nc,settings:()=>Wc,types:()=>jc});var Fc={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},Bc={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},Pc={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},Oc={edit:"Edit"},Ic={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},Zc="Terminal",Uc={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},Nc={"open-terminal":"Open terminal"},Wc={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},jc={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},Gc={commands:Fc,components:Bc,errors:Pc,generic:Oc,menus:Ic,name:Zc,notices:Uc,ribbons:Nc,settings:Wc,types:jc};var t7={};I0(t7,{commands:()=>qc,components:()=>$c,default:()=>ir,errors:()=>Kc,generic:()=>Yc,menus:()=>Xc,name:()=>Jc,notices:()=>Qc,ribbons:()=>er,settings:()=>tr,types:()=>sr});var qc={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},$c={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},Kc={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},Yc={edit:"Edit"},Xc={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},Jc="Terminal",Qc={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},er={"open-terminal":"Open terminal"},tr={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},sr={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},ir={commands:qc,components:$c,errors:Kc,generic:Yc,menus:Xc,name:Jc,notices:Qc,ribbons:er,settings:tr,types:sr};var s7={};I0(s7,{commands:()=>ar,components:()=>cr,default:()=>vr,errors:()=>rr,generic:()=>lr,menus:()=>or,name:()=>nr,notices:()=>hr,ribbons:()=>ur,settings:()=>dr,types:()=>mr});var ar={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},cr={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},rr={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},lr={edit:"Edit"},or={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},nr="Terminal",hr={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},ur={"open-terminal":"Open terminal"},dr={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},mr={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},vr={commands:ar,components:cr,errors:rr,generic:lr,menus:or,name:nr,notices:hr,ribbons:ur,settings:dr,types:mr};var i7={};I0(i7,{commands:()=>gr,components:()=>pr,default:()=>xr,errors:()=>fr,generic:()=>zr,menus:()=>br,name:()=>wr,notices:()=>_r,ribbons:()=>yr,settings:()=>Cr,types:()=>Mr});var gr={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},pr={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},fr={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},zr={edit:"Edit"},br={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},wr="Terminal",_r={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},yr={"open-terminal":"Open terminal"},Cr={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},Mr={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},xr={commands:gr,components:pr,errors:fr,generic:zr,menus:br,name:wr,notices:_r,ribbons:yr,settings:Cr,types:Mr};var a7={};I0(a7,{commands:()=>Sr,components:()=>Lr,default:()=>Fr,errors:()=>Ar,generic:()=>kr,menus:()=>Er,name:()=>Hr,notices:()=>Dr,ribbons:()=>Tr,settings:()=>Vr,types:()=>Rr});var Sr={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},Lr={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},Ar={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},kr={edit:"Edit"},Er={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},Hr="Terminal",Dr={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},Tr={"open-terminal":"Open terminal"},Vr={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},Rr={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},Fr={commands:Sr,components:Lr,errors:Ar,generic:kr,menus:Er,name:Hr,notices:Dr,ribbons:Tr,settings:Vr,types:Rr};var c7={};I0(c7,{commands:()=>Br,components:()=>Pr,default:()=>qr,errors:()=>Or,generic:()=>Ir,menus:()=>Zr,name:()=>Ur,notices:()=>Nr,ribbons:()=>Wr,settings:()=>jr,types:()=>Gr});var Br={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},Pr={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},Or={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},Ir={edit:"Edit"},Zr={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},Ur="Terminal",Nr={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},Wr={"open-terminal":"Open terminal"},jr={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},Gr={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},qr={commands:Br,components:Pr,errors:Or,generic:Ir,menus:Zr,name:Ur,notices:Nr,ribbons:Wr,settings:jr,types:Gr};var r7={};I0(r7,{am:()=>$r,cs:()=>Kr,da:()=>Yr,de:()=>Xr,default:()=>zl,en:()=>Jr,es:()=>Qr,fa:()=>el,fr:()=>tl,id:()=>sl,it:()=>il,ja:()=>al,ko:()=>cl,nl:()=>rl,no:()=>ll,pl:()=>ol,pt:()=>nl,"pt-BR":()=>hl,ro:()=>ul,ru:()=>dl,sq:()=>ml,th:()=>vl,tr:()=>gl,"zh-Hans":()=>pl,"zh-Hant":()=>fl});var $r="\u12A0\u121B\u122D\u129B \u{1F6A7}",Kr="\u010De\u0161tina \u{1F6A7}",Yr="Dansk \u{1F6A7}",Xr="Deutsch \u{1F6A7}",Jr="English",Qr="Espa\xF1ol \u{1F6A7}",el="\u0641\u0627\u0631\u0633\u06CC \u{1F6A7}",tl="fran\xE7ais \u{1F6A7}",sl="Bahasa Indonesia \u{1F6A7}",il="Italiano \u{1F6A7}",al="\u65E5\u672C\u8A9E \u{1F6A7}",cl="\uD55C\uAD6D\uC5B4 \u{1F6A7}",rl="Nederlands \u{1F6A7}",ll="Norsk \u{1F6A7}",ol="j\u0119zyk polski \u{1F6A7}",nl="Portugu\xEAs \u{1F6A7}",hl="Portugues do Brasil \u{1F6A7}",ul="Rom\xE2n\u0103 \u{1F6A7}",dl="\u0420\u0443\u0441\u0441\u043A\u0438\u0439 \u{1F6A7}",ml="Shqip \u{1F6A7}",vl="\u0E44\u0E17\u0E22 \u{1F6A7}",gl="T\xFCrk\xE7e \u{1F6A7}",pl="\u7B80\u4F53\u4E2D\u6587",fl="\u7E41\u9AD4\u4E2D\u6587",zl={am:$r,cs:Kr,da:Yr,de:Xr,en:Jr,es:Qr,fa:el,fr:tl,id:sl,it:il,ja:al,ko:cl,nl:rl,no:ll,pl:ol,pt:nl,"pt-BR":hl,ro:ul,ru:dl,sq:ml,th:vl,tr:gl,"zh-Hans":pl,"zh-Hant":fl};var l7={};I0(l7,{commands:()=>bl,components:()=>wl,default:()=>kl,errors:()=>_l,generic:()=>yl,menus:()=>Cl,name:()=>Ml,notices:()=>xl,ribbons:()=>Sl,settings:()=>Ll,types:()=>Al});var bl={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},wl={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},_l={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},yl={edit:"Edit"},Cl={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},Ml="Terminal",xl={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},Sl={"open-terminal":"Open terminal"},Ll={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},Al={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},kl={commands:bl,components:wl,errors:_l,generic:yl,menus:Cl,name:Ml,notices:xl,ribbons:Sl,settings:Ll,types:Al};var o7={};I0(o7,{commands:()=>El,components:()=>Hl,default:()=>Il,errors:()=>Dl,generic:()=>Tl,menus:()=>Vl,name:()=>Rl,notices:()=>Fl,ribbons:()=>Bl,settings:()=>Pl,types:()=>Ol});var El={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},Hl={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},Dl={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},Tl={edit:"Edit"},Vl={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},Rl="Terminal",Fl={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},Bl={"open-terminal":"Open terminal"},Pl={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},Ol={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},Il={commands:El,components:Hl,errors:Dl,generic:Tl,menus:Vl,name:Rl,notices:Fl,ribbons:Bl,settings:Pl,types:Ol};var n7={};I0(n7,{commands:()=>Zl,components:()=>Ul,default:()=>Xl,errors:()=>Nl,generic:()=>Wl,menus:()=>jl,name:()=>Gl,notices:()=>ql,ribbons:()=>$l,settings:()=>Kl,types:()=>Yl});var Zl={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},Ul={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},Nl={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},Wl={edit:"Edit"},jl={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},Gl="Terminal",ql={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},$l={"open-terminal":"Open terminal"},Kl={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},Yl={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},Xl={commands:Zl,components:Ul,errors:Nl,generic:Wl,menus:jl,name:Gl,notices:ql,ribbons:$l,settings:Kl,types:Yl};var h7={};I0(h7,{commands:()=>Jl,components:()=>Ql,default:()=>oo,errors:()=>eo,generic:()=>to,menus:()=>so,name:()=>io,notices:()=>ao,ribbons:()=>co,settings:()=>ro,types:()=>lo});var Jl={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},Ql={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},eo={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},to={edit:"Edit"},so={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},io="Terminal",ao={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},co={"open-terminal":"Open terminal"},ro={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},lo={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},oo={commands:Jl,components:Ql,errors:eo,generic:to,menus:so,name:io,notices:ao,ribbons:co,settings:ro,types:lo};var u7={};I0(u7,{commands:()=>no,components:()=>ho,default:()=>wo,errors:()=>uo,generic:()=>mo,menus:()=>vo,name:()=>go,notices:()=>po,ribbons:()=>fo,settings:()=>zo,types:()=>bo});var no={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},ho={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},uo={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},mo={edit:"Edit"},vo={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},go="Terminal",po={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},fo={"open-terminal":"Open terminal"},zo={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},bo={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},wo={commands:no,components:ho,errors:uo,generic:mo,menus:vo,name:go,notices:po,ribbons:fo,settings:zo,types:bo};var d7={};I0(d7,{commands:()=>_o,components:()=>yo,default:()=>Ho,errors:()=>Co,generic:()=>Mo,menus:()=>xo,name:()=>So,notices:()=>Lo,ribbons:()=>Ao,settings:()=>ko,types:()=>Eo});var _o={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},yo={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},Co={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},Mo={edit:"Edit"},xo={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},So="Terminal",Lo={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},Ao={"open-terminal":"Open terminal"},ko={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},Eo={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},Ho={commands:_o,components:yo,errors:Co,generic:Mo,menus:xo,name:So,notices:Lo,ribbons:Ao,settings:ko,types:Eo};var m7={};I0(m7,{commands:()=>Do,components:()=>To,default:()=>Uo,errors:()=>Vo,generic:()=>Ro,menus:()=>Fo,name:()=>Bo,notices:()=>Po,ribbons:()=>Oo,settings:()=>Io,types:()=>Zo});var Do={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},To={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},Vo={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},Ro={edit:"Edit"},Fo={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},Bo="Terminal",Po={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},Oo={"open-terminal":"Open terminal"},Io={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},Zo={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},Uo={commands:Do,components:To,errors:Vo,generic:Ro,menus:Fo,name:Bo,notices:Po,ribbons:Oo,settings:Io,types:Zo};var v7={};I0(v7,{commands:()=>No,components:()=>Wo,default:()=>Qo,errors:()=>jo,generic:()=>Go,menus:()=>qo,name:()=>$o,notices:()=>Ko,ribbons:()=>Yo,settings:()=>Xo,types:()=>Jo});var No={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},Wo={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},jo={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},Go={edit:"Edit"},qo={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},$o="Terminal",Ko={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},Yo={"open-terminal":"Open terminal"},Xo={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},Jo={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},Qo={commands:No,components:Wo,errors:jo,generic:Go,menus:qo,name:$o,notices:Ko,ribbons:Yo,settings:Xo,types:Jo};var g7={};I0(g7,{commands:()=>en,components:()=>tn,default:()=>un,errors:()=>sn,generic:()=>an,menus:()=>cn,name:()=>rn,notices:()=>ln,ribbons:()=>on,settings:()=>nn,types:()=>hn});var en={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},tn={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},sn={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},an={edit:"Edit"},cn={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},rn="Terminal",ln={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},on={"open-terminal":"Open terminal"},nn={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},hn={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},un={commands:en,components:tn,errors:sn,generic:an,menus:cn,name:rn,notices:ln,ribbons:on,settings:nn,types:hn};var p7={};I0(p7,{commands:()=>dn,components:()=>mn,default:()=>yn,errors:()=>vn,generic:()=>gn,menus:()=>pn,name:()=>fn,notices:()=>zn,ribbons:()=>bn,settings:()=>wn,types:()=>_n});var dn={"open-terminal-":"Open terminal: {{- type}}","open-terminal-current":"Open current folder in terminal: {{- type}}","open-terminal-root":"Open root in terminal: {{- type}}"},mn={dialog:{cancel:"Cancel",confirm:"Confirm"},dropdown:{unselected:""},"editable-list":{append:"Append","move-down":"Move down","move-up":"Move up",name_few:"{{- count}}rd",name_one:"{{- count}}st",name_other:"{{- count}}th",name_two:"{{- count}}nd",prepend:"Prepend",remove:"Remove"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"Arguments",executable:"Executable"},integrated:{arguments:"Arguments","enable-Windows-conhost-workaround":"Enable Microsoft Windows 'conhost.exe' workaround","enable-Windows-conhost-workaround-description":"Disable if running 'conhost.exe' does not create a window. No guarantees this will work.",executable:"Executable","python-executable":"Python executable","python-executable-description":"Required on Unix to start integrated terminal. Clear field to disable Python.","python-executable-placeholder":"(Disabled)"},invalid:{data:"Data"},name:"Name",preset:"Preset",title:"{{- name}}",type:"Type"},"profile-list":{content:"The first profile in the list available on this platform is the default profile for its terminal type.",description:"{{- id}}",name:"{{- profile.name}}",title:"Profiles"},terminal:{"display-name":"Terminal: {{- name}}",profile:"Profile","restored-history":`\r
 * Restored history at {{- time}}\r
\r
`,"unknown-profile-name":"Unknown","unsupported-profile":`Unsupported profile:\r
{{- profile}}\r
`,"working-directory":"Working directory","working-directory-placeholder":"(Undefined)"}},vn={"cannot-find-status-bar":"Cannot find status bar","error-spawning-terminal":"Error spawning terminal","error-spawning-resizer":"Error spawning terminal resizer","failed-to-kill-pseudoterminal":"Failed to kill pseudoterminal","no-python-to-start-unix-pseudoterminal":"No Python to start Unix pseudoterminal","resizer-disabled":"Terminal resizer disabled","resizer-exited-unexpectedly":"Terminal resizer exited unexpectedly: {{- code}}"},gn={edit:"Edit"},pn={"open-terminal":"Open in terminal: {{- type}}",terminal:{find:"Find",restart:"Restart","save-as-HTML":"Save as HTML"}},fn="Terminal",zn={"no-default-profile":"No default profile for type '{{- type}}'","spawning-terminal":"Spawning terminal: {{- name}}","terminal-exited":"Terminal exited: {{- code}}"},bn={"open-terminal":"Open terminal"},wn={"add-to-command":"Add to command","add-to-context-menu":"Add to context menu","advanced-settings":"Advanced settings","all-settings":"All settings","all-settings-actions":{reload:"Reload",reset:"Reset",undo:"Undo"},"error-notice-timeout":"Error notice timeout (s)","error-notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","hide-status-bar":"Hide status bar","hide-status-bar-options":{never:"Never",always:"Always",focused:"When terminal is focused",running:"When terminal is running"},language:"Language","language-default":"Use app setting","language-description":"Applies to this plugin only. Languages with \u{1F6A7} need your help with translation!","list-description_one":"There is {{- count}} item.","list-description_other":"There are {{- count}} items.","list-description_zero":"There are no items.","notice-timeout":"Notice timeout (s)","notice-timeout-description":"Set to 0 s for no timeout. Set to negative to disable notice.","preferred-renderer":"Preferred renderer",profiles:"Profiles",reset:"Reset"},_n={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash: Integrated",cmdIntegrated:"cmd: Integrated",console:"Developer console",darwinExternalDefault:"macOS default: External",darwinIntegratedDefault:"macOS default: Integrated",dashIntegrated:"dash: Integrated",empty:"Empty",linuxExternalDefault:"Linux default: External",linuxIntegratedDefault:"Linux default: Integrated",pwshIntegrated:"pwsh: Integrated",shIntegrated:"sh: Integrated",win32ExternalDefault:"Microsoft Windows default: External",win32IntegratedDefault:"Microsoft Windows default: Integrated",zshIntegrated:"zsh: Integrated"},profiles:{"":"Empty",console:"Console",external:"External",integrated:"Integrated",invalid:"Invalid",select:"(Select)"},renderers:{canvas:"canvas",dom:"DOM",webgl:"WebGL"}},yn={commands:dn,components:mn,errors:vn,generic:gn,menus:pn,name:fn,notices:zn,ribbons:bn,settings:wn,types:_n};var f7={};I0(f7,{commands:()=>Cn,components:()=>Mn,default:()=>Tn,errors:()=>xn,generic:()=>Sn,menus:()=>Ln,name:()=>An,notices:()=>kn,ribbons:()=>En,settings:()=>Hn,types:()=>Dn});var Cn={"open-terminal-":"\u5F00\u555F\u7EC8\u7AEF\uFF1A{{- type}}","open-terminal-current":"\u5728\u7EC8\u7AEF\u5F00\u555F\u76EE\u524D\u76EE\u9332\uFF1A{{- type}}","open-terminal-root":"\u5728\u7EC8\u7AEF\u5F00\u555F\u6839\u76EE\u9332\uFF1A{{- type}}"},Mn={dialog:{cancel:"\u53D6\u6D88",okay:"\u786E\u8BA4"},dropdown:{unselected:""},"editable-list":{append:"\u540E\u7F6E","move-down":"\u4E0B\u79FB","move-up":"\u4E0A\u79FB",name:"\u7B2C{{- count}}",prepend:"\u524D\u7F6E",remove:"\u5220\u9664"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"\u53C2\u6570",executable:"\u53EF\u6267\u884C\u6587\u4EF6"},integrated:{arguments:"\u53C2\u6570","enable-Windows-conhost-workaround":"\u542F\u7528Microsoft Windows\u300Cconhost.exe\u300D\u89E3\u51B3\u65B9\u6CD5","enable-Windows-conhost-workaround-description":"\u5982\u679C\u6267\u884C\u300Cconhost.exe\u300D\u6CA1\u6709\u521B\u5EFA\u89C6\u7A97\uFF0C\u8BF7\u7981\u7528\u3002\u65E0\u4FDD\u8BC1\u8FD9\u4F1A\u8D77\u4F5C\u7528\u3002",executable:"\u53EF\u6267\u884C\u6587\u4EF6","python-executable":"Python\u53EF\u6267\u884C\u6587\u4EF6","python-executable-description":"\u4E8EUnix\u542F\u52A8\u6574\u5408\u5F0F\u7EC8\u7AEF\u6240\u9700\u8981\u7684\u3002\u6E05\u9664\u6587\u672C\u6846\u4EE5\u7981\u7528Python\u3002","python-executable-placeholder":"\uFF08\u5DF2\u7981\u7528\uFF09"},invalid:{data:"\u6570\u636E"},name:"\u540D\u79F0",preset:"\u9884\u8BBE",title:"{{- name}}",type:"\u7C7B\u578B"},"profile-list":{content:"\u5217\u8868\u4E2D\u7B2C\u4E00\u4E2A\u6B64\u5E73\u53F0\u4E0A\u53EF\u7528\u7684\u914D\u7F6E\u662F\u5176\u7EC8\u7AEF\u7C7B\u578B\u7684\u9ED8\u8BA4\u914D\u7F6E\u3002.",description:"{{- id}}",name:"{{- profile.name}}",title:"\u914D\u7F6E"},terminal:{"display-name":"\u7EC8\u7AEF\uFF1A{{- name}}",profile:"\u914D\u7F6E","restored-history":`\r
 * \u5DF2\u8FD8\u539F\u4E8E{{- time}}\u7684\u5386\u53F2\r
`,"unknown-profile-name":"\u4E0D\u660E","unsupported-profile":`\u4E0D\u652F\u6301\u7684\u914D\u7F6E\uFF1A\r
{{- profile}}\r
\r
`,"working-directory":"\u5DE5\u4F5C\u76EE\u5F55","working-directory-placeholder":"\uFF08\u672A\u5B9A\u4E49\uFF09"}},xn={"cannot-find-status-bar":"\u627E\u4E0D\u5230\u72B6\u6001\u680F","error-spawning-terminal":"\u555F\u52A8\u7EC8\u7AEF\u65F6\u51FA\u9519","error-spawning-resizer":"\u555F\u52A8\u7EC8\u7AEF\u7F29\u653E\u8FF8\u7A0B\u65F6\u51FA\u9519","failed-to-kill-pseudoterminal":"\u7EC8\u6B62\u4F2A\u7EC8\u7AEF\u5931\u8D25","no-python-to-start-unix-pseudoterminal":"\u6CA1\u6709Python\u6765\u542F\u52A8Unix\u4F2A\u7EC8\u7AEF","resizer-disabled":"\u7EC8\u7AEF\u7F29\u653E\u8FF8\u7A0B\u5DF2\u7981\u7528","resizer-exited-unexpectedly":"\u7EC8\u7AEF\u7F29\u653E\u8FF8\u7A0B\u610F\u5916\u9000\u51FA\uFF1A{{- code}}"},Sn={edit:"\u7F16\u8F91"},Ln={"open-terminal":"\u5728\u7EC8\u7AEF\u5F00\u555F\uFF1A{{- type}}",terminal:{find:"\u641C\u7D22",restart:"\u91CD\u542F","save-as-HTML":"\u50A8\u5B58\u4E3AHTML"}},An="\u7EC8\u7AEF",kn={"no-default-profile":"\u6CA1\u6709\u7C7B\u578B\u300C{{- type}}\u300D\u7684\u9ED8\u8BA4\u914D\u7F6E","spawning-terminal":"\u7EC8\u7AEF\u555F\u52A8\u4E2D\uFF1A{{- name}}","terminal-exited":"\u7EC8\u7AEF\u5DF2\u9000\u51FA\uFF1A{{- code}}"},En={"open-terminal":"\u5F00\u555F\u7EC8\u7AEF"},Hn={"add-to-command":"\u52A0\u5165\u81F3\u547D\u4EE4","add-to-context-menu":"\u52A0\u5165\u81F3\u53F3\u952E\u9009\u5355","advanced-settings":"\u9AD8\u7EA7\u8BBE\u7F6E","all-settings":"\u6240\u6709\u8BBE\u7F6E","all-settings-actions":{reload:"\u91CD\u65B0\u52A0\u8F7D",reset:"\u91CD\u8BBE",undo:"\u590D\u539F"},"error-notice-timeout":"\u9519\u8BEF\u901A\u77E5\u8D85\u65F6\uFF08\u79D2\uFF09","error-notice-timeout-description":"\u8BBE\u4E3A0\u79D2\u662F\u65E0\u8D85\u65F6\u3002\u8BBE\u4E3A\u8D1F\u6570\u4EE5\u7981\u7528\u901A\u77E5\u3002","hide-status-bar":"\u9690\u85CF\u72B6\u6001\u680F","hide-status-bar-options":{never:"\u4ECE\u4E0D",always:"\u603B\u662F",focused:"\u5F53\u805A\u7126\u7EC8\u7AEF\u65F6",running:"\u5F53\u6267\u884C\u7EC8\u7AEF\u65F6"},language:"\u8BED\u8A00","language-default":"\u4F7F\u7528\u5E94\u7528\u8BBE\u5B9A","language-description":"\u4EC5\u9002\u7528\u65BC\u6B64\u63D2\u4EF6\u3002\u6807\u6709\u{1F6A7}\u7684\u8BED\u8A00\u9700\u8981\u60A8\u5E2E\u52A9\u6765\u7FFB\u8BD1\uFF01","list-description_other":"\u6709{{- count}}\u9805\u9805\u76EE\u3002","list-description_zero":"\u6C92\u6709\u9805\u76EE\u3002","notice-timeout":"\u901A\u77E5\u8D85\u65F6\uFF08\u79D2\uFF09","notice-timeout-description":"\u8BBE\u4E3A0\u79D2\u662F\u65E0\u8D85\u65F6\u3002\u8BBE\u4E3A\u8D1F\u6570\u4EE5\u7981\u7528\u901A\u77E5\u3002","preferred-renderer":"\u9996\u9009\u6E32\u67D3\u5668",profiles:"\u914D\u7F6E",reset:"\u91CD\u8BBE"},Dn={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash\uFF1A\u6574\u5408\u5F0F",cmdIntegrated:"cmd\uFF1A\u6574\u5408\u5F0F",console:"\u5F00\u53D1\u8005\u63A7\u5236\u53F0",darwinExternalDefault:"macOS\u9ED8\u8A8D\uFF1A\u5916\u90E8",darwinIntegratedDefault:"macOS\u9ED8\u8A8D\uFF1A\u6574\u5408\u5F0F",dashIntegrated:"dash\uFF1A\u6574\u5408\u5F0F",empty:"\u7A7A\u767D",linuxExternalDefault:"Linux\u9ED8\u8A8D\uFF1A\u5916\u90E8",linuxIntegratedDefault:"Linux\u9ED8\u8A8D\uFF1A\u6574\u5408\u5F0F",pwshIntegrated:"pwsh\uFF1A\u6574\u5408\u5F0F",shIntegrated:"sh\uFF1A\u6574\u5408\u5F0F",win32ExternalDefault:"Microsoft Windows\u9ED8\u8A8D\uFF1A\u5916\u90E8",win32IntegratedDefault:"Microsoft Windows\u9ED8\u8A8D\uFF1A\u6574\u5408\u5F0F",zshIntegrated:"zsh\uFF1A\u6574\u5408\u5F0F"},profiles:{"":"\u7A7A\u767D",console:"\u63A7\u5236\u53F0",external:"\u5916\u90E8",integrated:"\u6574\u5408\u5F0F",invalid:"\u65E0\u6548",select:"\uFF08\u9009\u62E9\uFF09"},renderers:{canvas:"\u753B\u5E03",dom:"\u6587\u4EF6\u7269\u4EF6\u6A21\u578B",webgl:"WebGL"}},Tn={commands:Cn,components:Mn,errors:xn,generic:Sn,menus:Ln,name:An,notices:kn,ribbons:En,settings:Hn,types:Dn};var z7={};I0(z7,{commands:()=>Vn,components:()=>Rn,default:()=>Wn,errors:()=>Fn,generic:()=>Bn,menus:()=>Pn,name:()=>On,notices:()=>In,ribbons:()=>Zn,settings:()=>Un,types:()=>Nn});var Vn={"open-terminal-":"\u958B\u555F\u7D42\u7AEF\uFF1A{{- type}}","open-terminal-current":"\u5728\u7D42\u7AEF\u958B\u555F\u76EE\u524D\u76EE\u9304\uFF1A{{- type}}","open-terminal-root":"\u5728\u7D42\u7AEF\u958B\u555F\u6839\u76EE\u9304\uFF1A{{- type}}"},Rn={dialog:{cancel:"\u53D6\u6D88",confirm:"\u78BA\u8A8D"},dropdown:{unselected:""},"editable-list":{append:"\u5F8C\u7F6E","move-down":"\u4E0B\u79FB","move-up":"\u4E0A\u79FB",name:"\u7B2C{{- count}}",prepend:"\u524D\u7F6E",remove:"\u522A\u9664"},find:{"search-results":"{{- index}}/{{- count}}","too-many-search-results":"?/1000+"},profile:{external:{arguments:"\u53C3\u6578",executable:"\u57F7\u884C\u6A94"},integrated:{arguments:"\u53C3\u6578","enable-Windows-conhost-workaround":"\u555F\u7528Microsoft Windows\u300Cconhost.exe\u300D\u89E3\u6C7A\u65B9\u6CD5","enable-Windows-conhost-workaround-description":"\u5982\u679C\u57F7\u884C\u300Cconhost.exe\u300D\u6C92\u6709\u5275\u5EFA\u8996\u7A97\uFF0C\u8ACB\u7981\u7528\u3002\u7121\u4FDD\u8B49\u9019\u6703\u8D77\u4F5C\u7528\u3002",executable:"\u57F7\u884C\u6A94","python-executable":"Python\u57F7\u884C\u6A94","python-executable-description":"\u65BCUnix\u555F\u52D5\u6574\u5408\u5F0F\u7D42\u7AEF\u6240\u9700\u8981\u7684\u3002\u6E05\u9664\u6587\u5B57\u57DF\u4EE5\u7981\u7528Python\u3002","python-executable-placeholder":"\uFF08\u5DF2\u7981\u7528\uFF09"},invalid:{data:"\u6578\u64DA"},name:"\u540D\u7A31",preset:"\u9810\u8A2D",title:"{{- name}}",type:"\u985E\u578B"},"profile-list":{content:"\u5217\u8868\u4E2D\u7B2C\u4E00\u500B\u6B64\u5E73\u53F0\u4E0A\u53EF\u7528\u7684\u914D\u7F6E\u662F\u5176\u7D42\u7AEF\u985E\u578B\u7684\u9ED8\u8A8D\u914D\u7F6E\u3002",description:"{{- id}}",name:"{{- profile.name}}",title:"\u914D\u7F6E"},terminal:{"display-name":"\u7D42\u7AEF\uFF1A{{- name}}",profile:"\u914D\u7F6E","restored-history":`\r
 * \u5DF2\u9084\u539F\u65BC{{- time}}\u7684\u6B77\u53F2\r
`,"unknown-profile-name":"\u4E0D\u660E","unsupported-profile":`\u4E0D\u652F\u6301\u7684\u914D\u7F6E\uFF1A\r
{{- profile}}\r
\r
`,"working-directory":"\u5DE5\u4F5C\u76EE\u9304","working-directory-placeholder":"\uFF08\u672A\u5B9A\u7FA9\uFF09"}},Fn={"cannot-find-status-bar":"\u627E\u4E0D\u5230\u72C0\u614B\u6B04","error-spawning-terminal":"\u555F\u52D5\u7D42\u7AEF\u6642\u51FA\u932F","error-spawning-resizer":"\u555F\u52D5\u7D42\u7AEF\u7E2E\u653E\u7A0B\u5F0F\u6642\u51FA\u932F","failed-to-kill-pseudoterminal":"\u7D42\u6B62\u507D\u7D42\u7AEF\u5931\u6557","no-python-to-start-unix-pseudoterminal":"\u6C92\u6709Python\u4F86\u555F\u52D5Unix\u507D\u7D42\u7AEF","resizer-disabled":"\u7D42\u7AEF\u7E2E\u653E\u7A0B\u5F0F\u5DF2\u7981\u7528","resizer-exited-unexpectedly":"\u7D42\u7AEF\u7E2E\u653E\u7A0B\u5F0F\u610F\u5916\u9000\u51FA\uFF1A{{- code}}"},Bn={edit:"\u7DE8\u8F2F"},Pn={"open-terminal":"\u5728\u7D42\u7AEF\u958B\u555F\uFF1A{{- type}}",terminal:{find:"\u641C\u5C0B",restart:"\u91CD\u555F","save-as-HTML":"\u5132\u5B58\u70BAHTML"}},On="\u7D42\u7AEF",In={"no-default-profile":"\u6C92\u6709\u985E\u578B\u300C{{- type}}\u300D\u7684\u9ED8\u8A8D\u914D\u7F6E","spawning-terminal":"\u7D42\u7AEF\u555F\u52D5\u4E2D\uFF1A{{- name}}","terminal-exited":"\u7D42\u7AEF\u5DF2\u9000\u51FA\uFF1A{{- code}}"},Zn={"open-terminal":"\u958B\u555F\u7D42\u7AEF"},Un={"add-to-command":"\u52A0\u5165\u81F3\u547D\u4EE4","add-to-context-menu":"\u52A0\u5165\u81F3\u53F3\u9375\u9078\u55AE","advanced-settings":"\u9AD8\u7D1A\u8A2D\u7F6E","all-settings":"\u6240\u6709\u8A2D\u7F6E","all-settings-actions":{reload:"\u91CD\u65B0\u52A0\u8F09",reset:"\u91CD\u8A2D",undo:"\u5FA9\u539F"},"error-notice-timeout":"\u932F\u8AA4\u901A\u77E5\u8D85\u6642\uFF08\u79D2\uFF09","error-notice-timeout-description":"\u8A2D\u70BA0\u79D2\u662F\u7121\u8D85\u6642\u3002\u8A2D\u70BA\u8CA0\u6578\u4EE5\u7981\u7528\u901A\u77E5\u3002","hide-status-bar":"\u96B1\u85CF\u72C0\u614B\u6B04","hide-status-bar-options":{never:"\u5F9E\u4E0D",always:"\u7E3D\u662F",focused:"\u7576\u805A\u7126\u7D42\u7AEF\u6642",running:"\u7576\u57F7\u884C\u7D42\u7AEF\u6642"},language:"\u8A9E\u8A00","language-default":"\u4F7F\u7528\u61C9\u7528\u7A0B\u5F0F\u8A2D\u5B9A","language-description":"\u50C5\u9069\u7528\u65BC\u6B64\u5916\u639B\u7A0B\u5F0F\u3002\u6A19\u6709\u{1F6A7}\u7684\u8A9E\u8A00\u9700\u8981\u60A8\u5E6B\u52A9\u4F86\u7FFB\u8B6F\uFF01","list-description_other":"\u6709{{- count}}\u9805\u9805\u76EE\u3002","list-description_zero":"\u6C92\u6709\u9805\u76EE\u3002","notice-timeout":"\u901A\u77E5\u8D85\u6642\uFF08\u79D2\uFF09","notice-timeout-description":"\u8A2D\u70BA0\u79D2\u662F\u7121\u8D85\u6642\u3002\u8A2D\u70BA\u8CA0\u6578\u4EE5\u7981\u7528\u901A\u77E5\u3002","preferred-renderer":"\u9996\u9078\u6E32\u67D3\u5668",profiles:"\u914D\u7F6E",reset:"\u91CD\u8A2D"},Nn={platforms:{darwin:"macOS",linux:"Linux",win32:"Microsoft Windows"},"profile-presets":{bashIntegrated:"bash\uFF1A\u6574\u5408\u5F0F",cmdIntegrated:"cmd\uFF1A\u6574\u5408\u5F0F",console:"\u958B\u767C\u8005\u63A7\u5236\u53F0",darwinExternalDefault:"macOS\u9ED8\u8A8D\uFF1A\u5916\u90E8",darwinIntegratedDefault:"macOS\u9ED8\u8A8D\uFF1A\u6574\u5408\u5F0F",dashIntegrated:"dash\uFF1A\u6574\u5408\u5F0F",empty:"\u7A7A\u767D",linuxExternalDefault:"Linux\u9ED8\u8A8D\uFF1A\u5916\u90E8",linuxIntegratedDefault:"Linux\u9ED8\u8A8D\uFF1A\u6574\u5408\u5F0F",pwshIntegrated:"pwsh\uFF1A\u6574\u5408\u5F0F",shIntegrated:"sh\uFF1A\u6574\u5408\u5F0F",win32ExternalDefault:"Microsoft Windows\u9ED8\u8A8D\uFF1A\u5916\u90E8",win32IntegratedDefault:"Microsoft Windows\u9ED8\u8A8D\uFF1A\u6574\u5408\u5F0F",zshIntegrated:"zsh\uFF1A\u6574\u5408\u5F0F"},profiles:{"":"\u7A7A\u767D",console:"\u63A7\u5236\u53F0",external:"\u5916\u90E8",integrated:"\u6574\u5408\u5F0F",invalid:"\u7121\u6548",select:"\uFF08\u9078\u64C7\uFF09"},renderers:{canvas:"\u756B\u5E03",dom:"\u6587\u4EF6\u7269\u4EF6\u6A21\u578B",webgl:"WebGL"}},Wn={commands:Vn,components:Rn,errors:Fn,generic:Bn,menus:Pn,name:On,notices:In,ribbons:Zn,settings:Un,types:Nn};function jn(l){return Object.freeze(Object.fromEntries(Object.entries(l).filter(([u,g])=>typeof g=="string")))}var pe=!1,j0="translation",z3="en",fe=u1({default:[z3],zh:["zh-Hans",z3],"zh-CN":["zh-Hans","zh",z3],"zh-TW":["zh-Hant","zh",z3]}),b7=u1({am:{[j0]:q6},cs:{[j0]:K6},da:{[j0]:Y6},de:{[j0]:X6},en:{[j0]:J6,asset:$6,language:jn(r7)},es:{[j0]:Q6},fa:{[j0]:e7},fr:{[j0]:t7},id:{[j0]:s7},it:{[j0]:i7},ja:{[j0]:a7},ko:{[j0]:c7},nl:{[j0]:l7},no:{[j0]:o7},pl:{[j0]:n7},pt:{[j0]:h7},"pt-BR":{[j0]:u7},ro:{[j0]:d7},ru:{[j0]:m7},sq:{[j0]:v7},th:{[j0]:g7},tr:{[j0]:p7},"zh-Hans":{[j0]:f7},"zh-Hant":{[j0]:z7}}),H4=X2()(b7[z3].language);(function(u){})(H4);var b3=u1({bashIntegrated:{args:[],executable:"/bin/bash",name:"",platforms:{darwin:!0,linux:!0},pythonExecutable:"python3",type:"integrated"},cmdIntegrated:{args:[],enableWindowsConhostWorkaround:!0,executable:"C:\\Windows\\System32\\cmd.exe",name:"",platforms:{win32:!0},pythonExecutable:"python3",type:"integrated"},console:{name:"",type:"console"},darwinExternalDefault:{args:["$PWD"],executable:"/System/Applications/Utilities/Terminal.app/Contents/macOS/Terminal",name:"",platforms:{darwin:!0},type:"external"},darwinIntegratedDefault:{args:[],executable:"/bin/zsh",name:"",platforms:{darwin:!0},pythonExecutable:"python3",type:"integrated"},dashIntegrated:{args:[],executable:"/bin/dash",name:"",platforms:{darwin:!0,linux:!0},pythonExecutable:"python3",type:"integrated"},empty:{name:"",type:""},linuxExternalDefault:{args:[],executable:"xterm",name:"",platforms:{linux:!0},type:"external"},linuxIntegratedDefault:{args:[],executable:"/bin/sh",name:"",platforms:{linux:!0},pythonExecutable:"python3",type:"integrated"},pwshIntegrated:{args:[],enableWindowsConhostWorkaround:!0,executable:"pwsh",name:"",platforms:{darwin:!0,linux:!0,win32:!0},pythonExecutable:"python3",type:"integrated"},shIntegrated:{args:[],executable:"/bin/sh",name:"",platforms:{darwin:!0,linux:!0},pythonExecutable:"python3",type:"integrated"},win32ExternalDefault:{args:[],executable:"C:\\Windows\\System32\\cmd.exe",name:"",platforms:{win32:!0},type:"external"},win32IntegratedDefault:{args:[],enableWindowsConhostWorkaround:!0,executable:"C:\\Windows\\System32\\cmd.exe",name:"",platforms:{win32:!0},pythonExecutable:"python3",type:"integrated"},zshIntegrated:{args:[],executable:"/bin/zsh",name:"",platforms:{darwin:!0,linux:!0},pythonExecutable:"python3",type:"integrated"}}),Gn=X2()(b3),w7=u1(Gn.reduce((l,u)=>(u==="empty"?l.unshift(u):l.push(u),l),[]));function ze(l,u){let g=Object.keys(u).map(w=>qn(l,w,u[w]));return g.length===1?g[0]:function(){g.forEach(w=>w())}}function qn(l,u,g){let w=l[u],b=l.hasOwnProperty(u),e=g(w);return w&&Object.setPrototypeOf(e,w),Object.setPrototypeOf(a,e),l[u]=a,m;function a(...o){return e===w&&l[u]===a&&m(),e.apply(this,o)}function m(){l[u]===a&&(b?l[u]=w:delete l[u]),e!==w&&(e=w,Object.setPrototypeOf(a,w||Function))}}var j3=new K2,be;(u=>u.TYPES=Object.freeze(["info","error","warn","debug","windowError","unhandledRejection"]))(be||(be={}));var we=[];j3.listen(l=>we.push(l));function _e(){let l=[],u=()=>{try{l.forEach(g=>{try{g()}catch(w){console.error(w)}})}catch(g){console.error(g)}};try{let g=(e,a)=>function(...o){a.apply(this,o),j3.emit({data:o,type:e}).catch(()=>{})};l.push(ze(console,{debug(e){return g("debug",e)},error(e){return g("error",e)},log(e){return g("info",e)},warn(e){return g("warn",e)}}));let w=e=>{j3.emit({data:e,type:"windowError"}).catch(()=>{})},b=e=>{j3.emit({data:e,type:"unhandledRejection"}).catch(()=>{})};l.push(()=>{window.removeEventListener("error",w,{capture:!0})},()=>{window.removeEventListener("unhandledrejection",b,{capture:!0})}),window.addEventListener("error",w,{capture:!0,passive:!0}),window.addEventListener("unhandledrejection",b,{capture:!0,passive:!0})}catch(g){throw u(),g}return u}function ye(){return we}var D5=require("obsidian");var G3=class{constructor(u){this.id=u}namespaced(u){return`${(u instanceof D5.Plugin?u.manifest:u).id}:${this.id}`}};function T5(l){let u=[];return async(...g)=>new Promise((w,b)=>{u.push({reject:b,resolve:w}),l(e=>{for(let a of u.splice(0))a.resolve(e)},e=>{for(let a of u.splice(0))a.reject(e)},...g)})}function Kn(l,u=0,g){let w=1e3*Math.max(u,0),b=new D5.Notice(l(),w);if(J0(g))return b;let e=g.language.onChangeLanguage.listen(()=>b.setMessage(l()));try{w===0?g.register(e):window.setTimeout(e,w)}catch(a){console.warn(a),e()}return b}function S2(l,u=0,g){u>=0&&Kn(l,u,g)}function J2(l,u=()=>"",g){var w;console.error(`${u()}
`,l),S2(()=>`${u()}
${l.name}: ${l.message}`,(w=g==null?void 0:g.settings.errorNoticeTimeout)!=null?w:0,g)}function _7(l){var a,m,o,n,c;let{containerEl:u}=l,g=l.getDisplayText(),w=u.querySelector(".view-header-title"),b=null;w!==null&&(b=w.textContent,w.textContent=g);let e=u.parentElement;if(e!==null){let v=e.parentElement;if(v!==null){let f=(o=(m=(a=v.parentElement)==null?void 0:a.querySelector(".workspace-tab-header-container"))==null?void 0:m.querySelectorAll(".workspace-tab-header").item(v.indexOf(e)))!=null?o:null,i=(n=f==null?void 0:f.querySelector(".workspace-tab-header-inner-title"))!=null?n:null;b!=null||(b=(c=i==null?void 0:i.textContent)!=null?c:null),i!==null&&(i.textContent=g),f!==null&&(f.ariaLabel=g)}}b!==null&&(document.title=document.title.replace(b,g))}var Ot=Object.freeze({tmp:()=>Pt()}),vu=X2()(Ot);async function M3(l){return It(l)}function It(l){let u=K1(vu,l)?Ot[l]():require(l);if(j6(u))throw new Error(l);return u}function Zt(l){try{return It(l),!0}catch(u){return!1}}var Gt=x2(Nt());var qt=x2(Wt()),$t=x2(jt());var Kt=require("obsidian");var gu=M3("node:child_process");function Z4(l){return l.replace(/\r\n/gu,`
`).replace(/\n/gu,`\r
`)}var Yt=Zt("node:child_process");async function Xt(l,u,g){let w=await W3(async()=>(await gu).spawn(l,u!=null?u:[],{cwd:g,detached:!0,shell:!0,stdio:["ignore","ignore","ignore"]}));try{w.unref()}catch(b){console.warn(b)}return w}var I4,$5,G5=class{constructor(u,g,w,b,e,a){this.plugin=u;G0(this,"terminal");G0(this,"addons");G0(this,"pseudoterminal");z0(this,I4,!0);z0(this,$5,T5((0,Kt.debounce)((u,g,w,b,e)=>{(async()=>{try{let a=await this.pseudoterminal;typeof a.resize!="undefined"&&await a.resize(w,b)}catch(a){if(e)throw a}this.terminal.resize(w,b)})().then(u,g)},q9,!1)));this.terminal=new Gt.Terminal(e);let{terminal:m}=this;m.open(g);let o=Object.assign({fit:new qt.FitAddon,serialize:new $t.SerializeAddon},a);for(let n of Object.values(o))m.loadAddon(n);this.addons=o,typeof b!="undefined"&&(m.resize(b.columns,b.rows),m.write(b.data)),this.pseudoterminal=(async()=>{let n=await w(m,o);return await n.pipe(m),n})(),this.pseudoterminal.then(async n=>n.onExit).finally(()=>{S0(this,I4,!1)})}async close(){o0(this,I4)&&await(await this.pseudoterminal).kill(),this.terminal.dispose()}async resize(u=!0){let{fit:g}=this.addons,w=g.proposeDimensions();J0(w)||!isFinite(w.cols)||!isFinite(w.rows)||await o0(this,$5).call(this,w.cols,w.rows,u)}serialize(){return{columns:this.terminal.cols,data:this.addons.serialize.serialize({excludeAltBuffer:!0,excludeModes:!0}),rows:this.terminal.rows}}};I4=new WeakMap,$5=new WeakMap;var q5=class extends Array{activate(u){}dispose(){for(let u of this)u()}},Q3,P2=class{constructor(u,g){this.canvasSupplier=u;this.webglSupplier=g;G0(this,"renderer",null);z0(this,Q3,null)}use(u){var w;let g=o0(this,Q3);if(g!==null)switch((w=this.renderer)==null||w.dispose(),u){case"dom":this.renderer=null;break;case"canvas":try{let b=this.canvasSupplier();g.loadAddon(this.renderer=b);break}catch(b){console.warn(b),this.use("dom")}break;case"webgl":{try{let b=this.webglSupplier(),e=b.onContextLoss(()=>{try{this.use("webgl")}finally{e.dispose()}});g.loadAddon(this.renderer=b)}catch(b){console.warn(b),this.use("canvas")}break}}}activate(u){S0(this,Q3,u)}dispose(){var u;(u=this.renderer)==null||u.dispose(),S0(this,Q3,null)}};Q3=new WeakMap;(u=>u.RENDERER_OPTIONS=Object.freeze(["dom","canvas","webgl"]))(P2||(P2={}));var Jt=`# -*- coding: UTF-8
# dependencies: (none)

import fcntl as _fcntl
import os as _os
import pty as _pty
import selectors as _selectors
import struct as _struct
import sys as _sys
import termios as _termios
import typing as _typing

if _sys.platform != "win32":
    CHUNK_SIZE = 1024
    STDIN = _sys.stdin.fileno()
    STDOUT = _sys.stdout.fileno()
    CMDIO = 3

    pid: int
    pty_fd: int
    pid, pty_fd = _pty.fork()  # type: ignore
    if pid == 0:
        _os.execvpe(
            _sys.argv[1], _sys.argv[1:], _os.environ | {"TERM": "xterm-256color"}
        )

    def _write_all(fd: int, data: bytes) -> None:
        while data:
            data = data[_os.write(fd, data) :]

    with _selectors.DefaultSelector() as selector:
        running = True

        def pipe_pty():
            try:
                data = _os.read(pty_fd, CHUNK_SIZE)
            except OSError:
                data = b""
            if not data:
                selector.unregister(pty_fd)
                global running
                running = False
                return
            _write_all(STDOUT, data)

        def pipe_stdin():
            data = _os.read(STDIN, CHUNK_SIZE)
            if not data:
                selector.unregister(STDIN)
                return
            _write_all(pty_fd, data)

        def process_cmdio():
            data = _os.read(CMDIO, CHUNK_SIZE)
            if not data:
                selector.unregister(CMDIO)
                return
            for line in data.decode("UTF-8", "strict").splitlines():
                rows, columns = _typing.cast(
                    tuple[int, int],
                    tuple(int(ss.strip()) for ss in line.split("x", 2)),
                )
                _fcntl.ioctl(
                    pty_fd,
                    _termios.TIOCSWINSZ,
                    _struct.pack("HHHH", columns, rows, 0, 0),
                )

        selector.register(pty_fd, _selectors.EVENT_READ, pipe_pty)
        selector.register(STDIN, _selectors.EVENT_READ, pipe_stdin)
        selector.register(CMDIO, _selectors.EVENT_READ, process_cmdio)
        while running:
            for key, _ in selector.select():
                key.data()

    _sys.exit(_os.waitstatus_to_exitcode(_os.waitpid(pid, 0)[1]))
else:
    raise NotImplementedError(_sys.platform)
`;var Qt=`# -*- coding: UTF-8 -*-\r
# dependencies: psutil, pywinctl\r
\r
import contextlib as _contextlib\r
import itertools as _itertools\r
import psutil as _psutil\r
import pywinctl as _pywinctl  # type: ignore\r
import pywintypes as _pywintypes\r
import signal as _signal\r
import sys as _sys\r
import time as _time\r
import types as _types\r
import typing as _typing\r
import win32con as _win32con\r
import win32console as _win32console\r
import win32file as _win32file\r
import win32gui as _win32gui\r
import win32process as _win32process\r
\r
if _sys.platform == "win32":\r
    LOOKUP_RETRY_INTERVAL = 1\r
    LOOKUP_RETRIES = 10\r
    RESIZE_ITERATIONS = 2\r
\r
    def main() -> None:\r
        pid = int(input("PID: "))\r
        print(f"received: {pid}")\r
        proc = _psutil.Process(pid)\r
        procs: _typing.Mapping[int, _psutil.Process] = {}\r
        windows: _typing.Sequence[_pywinctl.BaseWindow] = ()\r
        for tries in range(LOOKUP_RETRIES):\r
            procs = _types.MappingProxyType(\r
                {\r
                    proc.pid: proc\r
                    for proc in _itertools.chain((proc,), proc.children(recursive=True))\r
                }\r
            )\r
            print(f"process(es) (try {tries + 1}): {procs}")\r
            windows = _pywinctl.getAllWindows()\r
            print(f"window(s) (try {tries + 1}): {windows}")\r
            for win in windows:\r
                win_pid = win_to_pid(win)\r
                if win_pid in procs:\r
                    resizer(procs[win_pid], win)\r
                    return\r
            _time.sleep(LOOKUP_RETRY_INTERVAL)\r
        raise LookupError(procs, windows)\r
\r
    def win_to_pid(window: _pywinctl.Window) -> int:\r
        return _win32process.GetWindowThreadProcessId(window.getHandle())[1]\r
\r
    def resizer(process: _psutil.Process, window: _pywinctl.BaseWindow) -> None:\r
        print(f"window: {window}")\r
        writer = resizer_writer(process, window)\r
        next(writer)\r
        for size in resizer_reader(process):\r
            writer.send(size)\r
\r
    def resizer_reader(process: _psutil.Process) -> _typing.Iterator[tuple[int, int]]:\r
        _signal.signal(_signal.SIGINT, _signal.SIG_IGN)\r
        _signal.signal(_signal.SIGBREAK, _signal.SIG_IGN)\r
        while True:\r
            size0 = ""\r
            while not size0:  # stdin watchdog triggers this loop\r
                if not process.is_running():\r
                    return\r
                size0 = input("size: ")\r
            size = _typing.cast(\r
                tuple[int, int],\r
                tuple(int(s.strip()) for s in size0.split("x", 2)),\r
            )\r
            print(f"received: {'x'.join(map(str, size))}")\r
            yield size\r
\r
    def resizer_writer(\r
        process: _psutil.Process, window: _pywinctl.BaseWindow\r
    ) -> _typing.Generator[None, tuple[int, int], None]:\r
        window.hide(True)\r
\r
        @_typing.final\r
        class ConsoleScreenBufferInfo(_typing.TypedDict):\r
            Size: _win32console.PyCOORDType\r
            CursorPosition: _win32console.PyCOORDType\r
            Attributes: int\r
            Window: _win32console.PySMALL_RECTType\r
            MaximumWindowSize: _win32console.PyCOORDType\r
\r
        def ignore_error(func: _typing.Callable[[], None]) -> bool:\r
            try:\r
                func()\r
                return True\r
            except _pywintypes.error:\r
                return False\r
\r
        @_contextlib.contextmanager\r
        def attach_console(\r
            pid: int,\r
        ) -> _typing.Iterator[_win32console.PyConsoleScreenBufferType]:\r
            try:\r
                _win32console.AttachConsole(pid)  # type: ignore\r
                yield (_win32console.PyConsoleScreenBufferType)(  # type: ignore\r
                    _win32file.CreateFile(\r
                        "CONOUT$",\r
                        _win32file.GENERIC_READ | _win32file.GENERIC_WRITE,\r
                        _win32file.FILE_SHARE_WRITE,\r
                        None,\r
                        _win32file.OPEN_EXISTING,\r
                        0,\r
                        None,\r
                    )  # GetStdHandle gives the piped handle instead of the console handle\r
                )\r
            finally:\r
                _win32console.FreeConsole()\r
\r
        _win32console.FreeConsole()\r
        with attach_console(process.pid) as console:\r
            while True:\r
                columns: int\r
                rows: int\r
                columns, rows = yield\r
                # iterate to resize accurately\r
                for iter in range(RESIZE_ITERATIONS):\r
                    info: ConsoleScreenBufferInfo = (\r
                        console.GetConsoleScreenBufferInfo()  # type: ignore\r
                    )\r
                    old_rect = window.getClientFrame()\r
                    old_actual_rect = window.size\r
                    old_cols: int = (\r
                        info["Window"].Right - info["Window"].Left + 1  # type: ignore\r
                    )\r
                    old_rows: int = (\r
                        info["Window"].Bottom - info["Window"].Top + 1  # type: ignore\r
                    )\r
                    old_width = old_rect.right - old_rect.left\r
                    old_height = old_rect.bottom - old_rect.top\r
                    size = (\r
                        int(old_width * columns / old_cols)\r
                        + old_actual_rect.width\r
                        - old_width,\r
                        int(old_height * rows / old_rows)\r
                        + old_actual_rect.height\r
                        - old_height,\r
                    )\r
                    print(f"pixel size (iteration {iter + 1}): {size}")\r
                    setters = [\r
                        # almost accurate, works for alternate screen buffer\r
                        lambda: _win32gui.SetWindowPos(\r
                            _typing.cast(int, window.getHandle()),\r
                            None,\r
                            0,\r
                            0,\r
                            *size,\r
                            _win32con.SWP_NOACTIVATE\r
                            | _win32con.SWP_NOREDRAW\r
                            | _win32con.SWP_NOZORDER,\r
                        ),\r
                        # accurate, SetConsoleWindowInfo does not work for alternate screen buffer\r
                        lambda: console.SetConsoleWindowInfo(  # type: ignore\r
                            True,\r
                            _win32console.PySMALL_RECTType(0, 0, columns - 1, old_rows - 1),  # type: ignore\r
                        ),\r
                        lambda: console.SetConsoleScreenBufferSize(\r
                            _win32console.PyCOORDType(columns, old_rows)  # type: ignore\r
                        ),\r
                        lambda: console.SetConsoleWindowInfo(  # type: ignore\r
                            True,\r
                            _win32console.PySMALL_RECTType(0, 0, columns - 1, rows - 1),  # type: ignore\r
                        ),\r
                        lambda: console.SetConsoleScreenBufferSize(\r
                            _win32console.PyCOORDType(columns, rows)  # type: ignore\r
                        ),\r
                    ]\r
                    if old_cols < columns:\r
                        setters[1], setters[2] = setters[2], setters[1]\r
                    if old_rows < rows:\r
                        setters[3], setters[4] = setters[4], setters[3]\r
                    for setter in setters:\r
                        ignore_error(setter)\r
                print(f"resized")\r
\r
    if __name__ == "__main__":\r
        main()\r
else:\r
    raise NotImplementedError(_sys.platform)\r
`;var r8=M3("node:child_process"),bu=M3("node:fs"),es=M3("node:process"),wu=M3("tmp");function ts(l){l.write(`${`\x1B[2K
`.repeat(l.rows-1)}\x1B[2K\x1B[H`)}var W4,X5=class{constructor(){G0(this,"onExit");G0(this,"exited",!1);z0(this,W4,ge());this.onExit=o0(this,W4).then(async({promise:u})=>u).finally(()=>{this.exited=!0})}async kill(){(await o0(this,W4)).resolve(0)}};W4=new WeakMap;var e4,t4,a4=class extends X5{constructor(g=""){super();z0(this,e4,[]);z0(this,t4,void 0);S0(this,t4,g),this.onExit.finally(()=>{N6(o0(this,e4))})}get text(){return o0(this,t4)}set text(g){S0(this,t4,g);let w=Z4(g);o0(this,e4).forEach(b=>{b.clear(),b.write(w)})}pipe(g){if(this.exited)throw new Error;g.clear(),g.write(Z4(this.text)),o0(this,e4).push(g)}};e4=new WeakMap,t4=new WeakMap;var s4,j4,l8,Q5=class extends X5{constructor(){super();z0(this,s4,[]);this.onExit.finally(()=>{N6(o0(this,s4))}).finally(j3.listen(g=>{var w;for(let b of o0(this,s4))b.writeln(Z4(v0(w=Q5,j4,l8).call(w,g)))}))}pipe(g){var w;if(this.exited)throw new Error;g.clear();for(let b of ye())g.writeln(Z4(v0(w=Q5,j4,l8).call(w,b)));o0(this,s4).push(g)}},U4=Q5;s4=new WeakMap,j4=new WeakSet,l8=function(g){switch(g.type){case"debug":case"error":case"info":case"warn":return k5(...g.data);case"windowError":return k5(g.data.message,g.data);case"unhandledRejection":return k5(K9,g.data)}},z0(U4,j4);var G4,i4,Y5,N4=class{constructor(u,{args:g,cwd:w,executable:b,enableWindowsConhostWorkaround:e,pythonExecutable:a}){this.plugin=u;G0(this,"shell");G0(this,"conhost");G0(this,"onExit");z0(this,G4,void 0);this.conhost=e!=null?e:!1;let{conhost:m}=this,{settings:o,language:n}=u,{i18n:c}=n,v=(async()=>{if(J0(a))return null;let i=await W3(async()=>(await r8).spawn(a,["-c",Qt],{env:{...(await es).env,PYTHONIOENCODING:"UTF-8:backslashreplace"},stdio:["pipe","pipe","pipe"],windowsHide:!0}));try{try{i.stderr.on("data",t=>{console.error(t.toString(L4))})}finally{i.once("exit",(t,p)=>{t!==0&&S2(()=>c.t("errors.resizer-exited-unexpectedly",{code:t!=null?t:p}),o.errorNoticeTimeout,u)})}}catch(t){console.warn(t)}return i})(),f=(async()=>{var p,d,r;let[i,t]=await v.then(z=>Object.freeze([z,null])).catch(z=>Object.freeze([null,R2(z)]));try{let z=(await wu).fileSync({discardDescriptor:!0});try{let M=Object.freeze([...m?["C:\\Windows\\System32\\conhost.exe"]:[],"C:\\Windows\\System32\\cmd.exe","/C",`${v0(p=N4,i4,Y5).call(p,b)} ${(g!=null?g:[]).map(L=>{var S;return v0(S=N4,i4,Y5).call(S,L)}).join(" ")} & call echo %^ERRORLEVEL% >${v0(d=N4,i4,Y5).call(d,z.name)}`]),_=await W3(async()=>(await r8).spawn(M[0],M.slice(1),{cwd:w,stdio:["pipe","pipe","pipe"],windowsHide:i===null,windowsVerbatimArguments:!0}));try{let L=t;if(i!==null)try{await p3(i.stdin,`${(r=_.pid)!=null?r:-1}
`);let S=window.setInterval(()=>{p3(i.stdin,`
`).catch(y=>{console.trace(y)})},$9);try{i.once("exit",()=>{window.clearInterval(S)})}catch(y){throw window.clearInterval(S),y}}catch(S){L=R2(S),i.kill()}L!==null&&J2(L,()=>this.plugin.language.i18n.t("errors.error-spawning-resizer"),this.plugin)}catch(L){console.warn(L)}return[_,z]}catch(M){throw z.removeCallback(),M}}catch(z){throw i==null||i.kill(),z}})();S0(this,G4,v),this.shell=f.then(([i])=>i),this.onExit=f.then(async([i,t])=>new Promise(Y2(p=>i.once("exit",(d,r)=>{(async()=>{var z,M;try{try{let _=parseInt((await bu).readFileSync(t.name,{encoding:L4,flag:"r"}).trim(),10);p(isNaN(_)?(z=d!=null?d:r)!=null?z:NaN:_)}catch(_){p((M=d!=null?d:r)!=null?M:NaN)}finally{try{t.removeCallback()}catch(_){console.warn(_)}}}catch(_){console.error(_)}})()}))))}async kill(){if(!(await this.shell).kill())throw new Error(this.plugin.language.i18n.t("errors.failed-to-kill-pseudoterminal"))}async resize(u,g){let w=await o0(this,G4);if(w===null)throw new Error(this.plugin.language.i18n.t("errors.resizer-disabled"));await p3(w.stdin,`${u}x${g}
`)}async pipe(u){let g=await this.shell;ts(u),g.stdout.once("data",b=>{g.stdout.on("data",e=>{u.write(e)}),!this.conhost&&u.write(b)}),g.stderr.on("data",b=>{u.write(b)});let w=u.onData(async b=>p3(g.stdin,b));this.onExit.finally(()=>{w.dispose()})}},K5=N4;G4=new WeakMap,i4=new WeakSet,Y5=function(u,g=!1){let w=`"${u.replace('"','\\"')}"`;return g?w.replace(/(?<meta>[()%!^"<>&|])/gu,"^$<meta>"):w},z0(K5,i4);var J5=class{constructor(u,{args:g,cwd:w,executable:b,pythonExecutable:e}){this.plugin=u;G0(this,"shell");G0(this,"onExit");let{language:a}=u;this.shell=W3(async()=>{if(J0(e))throw new Error(a.i18n.t("errors.no-python-to-start-unix-pseudoterminal"));return(await r8).spawn(e,["-c",Jt,b].concat(g!=null?g:[]),{cwd:w,env:{...(await es).env,PYTHONIOENCODING:`${L4}:backslashreplace`},stdio:["pipe","pipe","pipe","pipe"],windowsHide:!0})}).then(m=>{try{m.stderr.on("data",o=>{console.error(o.toString(L4))})}catch(o){console.warn(o)}return m}),this.onExit=this.shell.then(async m=>new Promise(Y2(o=>m.once("exit",(n,c)=>{var v;o((v=n!=null?n:c)!=null?v:NaN)}))))}async kill(){if((await this.shell).kill())throw new Error(this.plugin.language.i18n.t("errors.failed-to-kill-pseudoterminal"))}async pipe(u){let g=await this.shell;ts(u),g.stdout.on("data",b=>{u.write(b)}),g.stderr.on("data",b=>{u.write(b)});let w=u.onData(async b=>p3(g.stdin,b));this.onExit.finally(()=>{w.dispose()})}async resize(u,g){await p3((await this.shell).stdio[3],`${u}x${g}
`)}},B1;(w=>(w.PLATFORM_PSEUDOTERMINALS=Object.freeze({darwin:J5,linux:J5,win32:K5}),w.SUPPORTED_PLATFORMS=X2()(w.PLATFORM_PSEUDOTERMINALS),w.PLATFORM_PSEUDOTERMINAL=K1(w.SUPPORTED_PLATFORMS,v3)?w.PLATFORM_PSEUDOTERMINALS[v3]:null))(B1||(B1={}));var c1=u1({addToCommand:!0,addToContextMenu:!0,errorNoticeTimeout:0,hideStatusBar:"focused",language:"",noticeTimeout:5,preferredRenderer:"webgl",profiles:Object.fromEntries(["console","darwinExternalDefault","darwinIntegratedDefault","linuxExternalDefault","linuxIntegratedDefault","win32ExternalDefault","win32IntegratedDefault"].map(l=>[l,b3[l]]))}),V0;(e=>{e.DEFAULTABLE_LANGUAGES=Object.freeze(["",...H4]),e.HIDE_STATUS_BAR_OPTIONS=Object.freeze(["never","always","focused","running"]),e.PREFERRED_RENDERER_OPTIONS=P2.RENDERER_OPTIONS;let w;(f=>{f.TYPES=Object.freeze(["","invalid","console","external","integrated"]);function m(i,t,p=v3){for(let d of Object.values(t))if(o(i,d)){if(p===null||!("platforms"in d))return d;let{platforms:r}=d;if(r!==null&&typeof r=="object"){let z={...r},M=z[p];if(typeof M=="boolean"&&M)return d}}return null}f.defaultOfType=m;function o(i,t){return t.type===i}f.isType=o;function n(i){let{name:t}=i;return typeof t=="string"?t:""}f.name=n;function c(i){return n(i[1])||i[0]}f.nameOrID=c,f.DEFAULTS=u1({"":b3.empty,console:{name:"",type:"console"},external:{args:[],executable:"",name:"",platforms:{darwin:!1,linux:!1,win32:!1},type:"external"},integrated:{args:[],enableWindowsConhostWorkaround:!1,executable:"",name:"",platforms:{darwin:!1,linux:!1,win32:!1},pythonExecutable:"",type:"integrated"},invalid:{type:"invalid"}})})(w=e.Profile||(e.Profile={}));function b(a){let m={};Object.assign(m,a);let o=(v,f,i,t)=>{let p=f[i];return W9(t,p)?p:v[i]},n=(v,f,i,t)=>{let p=f[i];if(oe(t,p))return p;let d=v[i];if(!Array.isArray(d))throw new TypeError(String(d));return d.map(j9)},c=(v,f,i,t)=>{let p=f[i];return K1(t,p)?p:v[i]};return{addToCommand:o(c1,m,"addToCommand","boolean"),addToContextMenu:o(c1,m,"addToContextMenu","boolean"),errorNoticeTimeout:o(c1,m,"errorNoticeTimeout","number"),hideStatusBar:c(c1,m,"hideStatusBar",e.HIDE_STATUS_BAR_OPTIONS),language:c(c1,m,"language",e.DEFAULTABLE_LANGUAGES),noticeTimeout:o(c1,m,"noticeTimeout","number"),preferredRenderer:c(c1,m,"preferredRenderer",e.PREFERRED_RENDERER_OPTIONS),profiles:(()=>{var i,t;let v=c1.profiles,{profiles:f}=m;if(f!==null&&typeof f=="object"){let p={};for(let[d,r]of Object.entries(f)){let z=r,M=(_,L,S)=>{let y={};for(let A of S){let H=A,T=L[H];y[H]=typeof T=="boolean"?T:_[H]}return y};if(z!==null&&typeof z=="object"){let _={...z},L=K1(w.TYPES,_.type)?_.type:"invalid";switch(L){case"":{p[d]={name:o(w.DEFAULTS[L],_,"name","string"),type:L};break}case"console":{p[d]={name:o(w.DEFAULTS[L],_,"name","string"),type:L};break}case"external":{p[d]={args:n(w.DEFAULTS[L],_,"args","string"),executable:o(w.DEFAULTS[L],_,"executable","string"),name:o(w.DEFAULTS[L],_,"name","string"),platforms:M(w.DEFAULTS[L].platforms,(i=_.platforms)!=null?i:{},B1.SUPPORTED_PLATFORMS),type:L};break}case"integrated":{p[d]={args:n(w.DEFAULTS[L],_,"args","string"),enableWindowsConhostWorkaround:o(w.DEFAULTS[L],_,"enableWindowsConhostWorkaround","boolean"),executable:o(w.DEFAULTS[L],_,"executable","string"),name:o(w.DEFAULTS[L],_,"name","string"),platforms:M(w.DEFAULTS[L].platforms,(t=_.platforms)!=null?t:{},B1.SUPPORTED_PLATFORMS),pythonExecutable:o(w.DEFAULTS[L],_,"pythonExecutable","string"),type:L};break}case"invalid":{p[d]={..._,type:L};break}}}}return p}return e1(v)})()}}e.fix=b})(V0||(V0={}));function _1(l){return _1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},_1(l)}function P1(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}function o8(l,u){if(_1(l)!=="object"||l===null)return l;var g=l[Symbol.toPrimitive];if(g!==void 0){var w=g.call(l,u||"default");if(_1(w)!=="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return(u==="string"?String:Number)(l)}function q4(l){var u=o8(l,"string");return _1(u)==="symbol"?u:String(u)}function ss(l,u){for(var g=0;g<u.length;g++){var w=u[g];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(l,q4(w.key),w)}}function O1(l,u,g){return u&&ss(l.prototype,u),g&&ss(l,g),Object.defineProperty(l,"prototype",{writable:!1}),l}function w2(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function $4(l,u){return $4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(w,b){return w.__proto__=b,w},$4(l,u)}function c4(l,u){if(typeof u!="function"&&u!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(u&&u.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),u&&$4(l,u)}function x3(l,u){if(u&&(_1(u)==="object"||typeof u=="function"))return u;if(u!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w2(l)}function I1(l){return I1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(g){return g.__proto__||Object.getPrototypeOf(g)},I1(l)}function A2(l,u,g){return u=q4(u),u in l?Object.defineProperty(l,u,{value:g,enumerable:!0,configurable:!0,writable:!0}):l[u]=g,l}function n8(l){if(Array.isArray(l))return l}function h8(l){if(typeof Symbol!="undefined"&&l[Symbol.iterator]!=null||l["@@iterator"]!=null)return Array.from(l)}function e6(l,u){(u==null||u>l.length)&&(u=l.length);for(var g=0,w=new Array(u);g<u;g++)w[g]=l[g];return w}function u8(l,u){if(l){if(typeof l=="string")return e6(l,u);var g=Object.prototype.toString.call(l).slice(8,-1);if(g==="Object"&&l.constructor&&(g=l.constructor.name),g==="Map"||g==="Set")return Array.from(l);if(g==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(g))return e6(l,u)}}function d8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m8(l){return n8(l)||h8(l)||u8(l)||d8()}function is(l,u){var g=Object.keys(l);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(l);u&&(w=w.filter(function(b){return Object.getOwnPropertyDescriptor(l,b).enumerable})),g.push.apply(g,w)}return g}function as(l){for(var u=1;u<arguments.length;u++){var g=arguments[u]!=null?arguments[u]:{};u%2?is(Object(g),!0).forEach(function(w){A2(l,w,g[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(g)):is(Object(g)).forEach(function(w){Object.defineProperty(l,w,Object.getOwnPropertyDescriptor(g,w))})}return l}var _u={type:"logger",log:function(u){this.output("log",u)},warn:function(u){this.output("warn",u)},error:function(u){this.output("error",u)},output:function(u,g){console&&console[u]&&console[u].apply(console,g)}},yu=function(){function l(u){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};P1(this,l),this.init(u,g)}return O1(l,[{key:"init",value:function(g){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=w.prefix||"i18next:",this.logger=g||_u,this.options=w,this.debug=w.debug}},{key:"setDebug",value:function(g){this.debug=g}},{key:"log",value:function(){for(var g=arguments.length,w=new Array(g),b=0;b<g;b++)w[b]=arguments[b];return this.forward(w,"log","",!0)}},{key:"warn",value:function(){for(var g=arguments.length,w=new Array(g),b=0;b<g;b++)w[b]=arguments[b];return this.forward(w,"warn","",!0)}},{key:"error",value:function(){for(var g=arguments.length,w=new Array(g),b=0;b<g;b++)w[b]=arguments[b];return this.forward(w,"error","")}},{key:"deprecate",value:function(){for(var g=arguments.length,w=new Array(g),b=0;b<g;b++)w[b]=arguments[b];return this.forward(w,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(g,w,b,e){return e&&!this.debug?null:(typeof g[0]=="string"&&(g[0]="".concat(b).concat(this.prefix," ").concat(g[0])),this.logger[w](g))}},{key:"create",value:function(g){return new l(this.logger,as(as({},{prefix:"".concat(this.prefix,":").concat(g,":")}),this.options))}},{key:"clone",value:function(g){return g=g||this.options,g.prefix=g.prefix||this.prefix,new l(this.logger,g)}}]),l}(),E2=new yu,c3=function(){function l(){P1(this,l),this.observers={}}return O1(l,[{key:"on",value:function(g,w){var b=this;return g.split(" ").forEach(function(e){b.observers[e]=b.observers[e]||[],b.observers[e].push(w)}),this}},{key:"off",value:function(g,w){if(this.observers[g]){if(!w){delete this.observers[g];return}this.observers[g]=this.observers[g].filter(function(b){return b!==w})}}},{key:"emit",value:function(g){for(var w=arguments.length,b=new Array(w>1?w-1:0),e=1;e<w;e++)b[e-1]=arguments[e];if(this.observers[g]){var a=[].concat(this.observers[g]);a.forEach(function(o){o.apply(void 0,b)})}if(this.observers["*"]){var m=[].concat(this.observers["*"]);m.forEach(function(o){o.apply(o,[g].concat(b))})}}}]),l}();function K4(){var l,u,g=new Promise(function(w,b){l=w,u=b});return g.resolve=l,g.reject=u,g}function cs(l){return l==null?"":""+l}function Cu(l,u,g){l.forEach(function(w){u[w]&&(g[w]=u[w])})}function g8(l,u,g){function w(m){return m&&m.indexOf("###")>-1?m.replace(/###/g,"."):m}function b(){return!l||typeof l=="string"}for(var e=typeof u!="string"?[].concat(u):u.split(".");e.length>1;){if(b())return{};var a=w(e.shift());!l[a]&&g&&(l[a]=new g),Object.prototype.hasOwnProperty.call(l,a)?l=l[a]:l={}}return b()?{}:{obj:l,k:w(e.shift())}}function rs(l,u,g){var w=g8(l,u,Object),b=w.obj,e=w.k;b[e]=g}function Mu(l,u,g,w){var b=g8(l,u,Object),e=b.obj,a=b.k;e[a]=e[a]||[],w&&(e[a]=e[a].concat(g)),w||e[a].push(g)}function i6(l,u){var g=g8(l,u),w=g.obj,b=g.k;if(w)return w[b]}function ls(l,u,g){var w=i6(l,g);return w!==void 0?w:i6(u,g)}function _s(l,u,g){for(var w in u)w!=="__proto__"&&w!=="constructor"&&(w in l?typeof l[w]=="string"||l[w]instanceof String||typeof u[w]=="string"||u[w]instanceof String?g&&(l[w]=u[w]):_s(l[w],u[w],g):l[w]=u[w]);return l}function r4(l){return l.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var xu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Su(l){return typeof l=="string"?l.replace(/[&<>"'\/]/g,function(u){return xu[u]}):l}var c6=typeof window!="undefined"&&window.navigator&&typeof window.navigator.userAgentData=="undefined"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,Lu=[" ",",","?","!",";"];function Au(l,u,g){u=u||"",g=g||"";var w=Lu.filter(function(m){return u.indexOf(m)<0&&g.indexOf(m)<0});if(w.length===0)return!0;var b=new RegExp("(".concat(w.map(function(m){return m==="?"?"\\?":m}).join("|"),")")),e=!b.test(l);if(!e){var a=l.indexOf(g);a>0&&!b.test(l.substring(0,a))&&(e=!0)}return e}function os(l,u){var g=Object.keys(l);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(l);u&&(w=w.filter(function(b){return Object.getOwnPropertyDescriptor(l,b).enumerable})),g.push.apply(g,w)}return g}function t6(l){for(var u=1;u<arguments.length;u++){var g=arguments[u]!=null?arguments[u]:{};u%2?os(Object(g),!0).forEach(function(w){A2(l,w,g[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(g)):os(Object(g)).forEach(function(w){Object.defineProperty(l,w,Object.getOwnPropertyDescriptor(g,w))})}return l}function ku(l){var u=Eu();return function(){var w=I1(l),b;if(u){var e=I1(this).constructor;b=Reflect.construct(w,arguments,e)}else b=w.apply(this,arguments);return x3(this,b)}}function Eu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(l){return!1}}function ys(l,u){var g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(l){if(l[u])return l[u];for(var w=u.split(g),b=l,e=0;e<w.length;++e){if(!b||typeof b[w[e]]=="string"&&e+1<w.length)return;if(b[w[e]]===void 0){for(var a=2,m=w.slice(e,e+a).join(g),o=b[m];o===void 0&&w.length>e+a;)a++,m=w.slice(e,e+a).join(g),o=b[m];if(o===void 0)return;if(o===null)return null;if(u.endsWith(m)){if(typeof o=="string")return o;if(m&&typeof o[m]=="string")return o[m]}var n=w.slice(e+a).join(g);return n?ys(o,n,g):void 0}b=b[w[e]]}return b}}var Hu=function(l){c4(g,l);var u=ku(g);function g(w){var b,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return P1(this,g),b=u.call(this),c6&&c3.call(w2(b)),b.data=w||{},b.options=e,b.options.keySeparator===void 0&&(b.options.keySeparator="."),b.options.ignoreJSONStructure===void 0&&(b.options.ignoreJSONStructure=!0),b}return O1(g,[{key:"addNamespaces",value:function(b){this.options.ns.indexOf(b)<0&&this.options.ns.push(b)}},{key:"removeNamespaces",value:function(b){var e=this.options.ns.indexOf(b);e>-1&&this.options.ns.splice(e,1)}},{key:"getResource",value:function(b,e,a){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=m.keySeparator!==void 0?m.keySeparator:this.options.keySeparator,n=m.ignoreJSONStructure!==void 0?m.ignoreJSONStructure:this.options.ignoreJSONStructure,c=[b,e];a&&typeof a!="string"&&(c=c.concat(a)),a&&typeof a=="string"&&(c=c.concat(o?a.split(o):a)),b.indexOf(".")>-1&&(c=b.split("."));var v=i6(this.data,c);return v||!n||typeof a!="string"?v:ys(this.data&&this.data[b]&&this.data[b][e],a,o)}},{key:"addResource",value:function(b,e,a,m){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},n=this.options.keySeparator;n===void 0&&(n=".");var c=[b,e];a&&(c=c.concat(n?a.split(n):a)),b.indexOf(".")>-1&&(c=b.split("."),m=e,e=c[1]),this.addNamespaces(e),rs(this.data,c,m),o.silent||this.emit("added",b,e,a,m)}},{key:"addResources",value:function(b,e,a){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var o in a)(typeof a[o]=="string"||Object.prototype.toString.apply(a[o])==="[object Array]")&&this.addResource(b,e,o,a[o],{silent:!0});m.silent||this.emit("added",b,e,a)}},{key:"addResourceBundle",value:function(b,e,a,m,o){var n=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},c=[b,e];b.indexOf(".")>-1&&(c=b.split("."),m=a,a=e,e=c[1]),this.addNamespaces(e);var v=i6(this.data,c)||{};m?_s(v,a,o):v=t6(t6({},v),a),rs(this.data,c,v),n.silent||this.emit("added",b,e,a)}},{key:"removeResourceBundle",value:function(b,e){this.hasResourceBundle(b,e)&&delete this.data[b][e],this.removeNamespaces(e),this.emit("removed",b,e)}},{key:"hasResourceBundle",value:function(b,e){return this.getResource(b,e)!==void 0}},{key:"getResourceBundle",value:function(b,e){return e||(e=this.options.defaultNS),this.options.compatibilityAPI==="v1"?t6(t6({},{}),this.getResource(b,e)):this.getResource(b,e)}},{key:"getDataByLanguage",value:function(b){return this.data[b]}},{key:"hasLanguageSomeTranslations",value:function(b){var e=this.getDataByLanguage(b),a=e&&Object.keys(e)||[];return!!a.find(function(m){return e[m]&&Object.keys(e[m]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),g}(c3),Cs={processors:{},addPostProcessor:function(u){this.processors[u.name]=u},handle:function(u,g,w,b,e){var a=this;return u.forEach(function(m){a.processors[m]&&(g=a.processors[m].process(g,w,b,e))}),g}};function ns(l,u){var g=Object.keys(l);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(l);u&&(w=w.filter(function(b){return Object.getOwnPropertyDescriptor(l,b).enumerable})),g.push.apply(g,w)}return g}function M1(l){for(var u=1;u<arguments.length;u++){var g=arguments[u]!=null?arguments[u]:{};u%2?ns(Object(g),!0).forEach(function(w){A2(l,w,g[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(g)):ns(Object(g)).forEach(function(w){Object.defineProperty(l,w,Object.getOwnPropertyDescriptor(g,w))})}return l}function Du(l){var u=Tu();return function(){var w=I1(l),b;if(u){var e=I1(this).constructor;b=Reflect.construct(w,arguments,e)}else b=w.apply(this,arguments);return x3(this,b)}}function Tu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(l){return!1}}var hs={},us=function(l){c4(g,l);var u=Du(g);function g(w){var b,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return P1(this,g),b=u.call(this),c6&&c3.call(w2(b)),Cu(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],w,w2(b)),b.options=e,b.options.keySeparator===void 0&&(b.options.keySeparator="."),b.logger=E2.create("translator"),b}return O1(g,[{key:"changeLanguage",value:function(b){b&&(this.language=b)}},{key:"exists",value:function(b){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(b==null)return!1;var a=this.resolve(b,e);return a&&a.res!==void 0}},{key:"extractFromKey",value:function(b,e){var a=e.nsSeparator!==void 0?e.nsSeparator:this.options.nsSeparator;a===void 0&&(a=":");var m=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator,o=e.ns||this.options.defaultNS||[],n=a&&b.indexOf(a)>-1,c=!this.options.userDefinedKeySeparator&&!e.keySeparator&&!this.options.userDefinedNsSeparator&&!e.nsSeparator&&!Au(b,a,m);if(n&&!c){var v=b.match(this.interpolator.nestingRegexp);if(v&&v.length>0)return{key:b,namespaces:o};var f=b.split(a);(a!==m||a===m&&this.options.ns.indexOf(f[0])>-1)&&(o=f.shift()),b=f.join(m)}return typeof o=="string"&&(o=[o]),{key:b,namespaces:o}}},{key:"translate",value:function(b,e,a){var m=this;if(_1(e)!=="object"&&this.options.overloadTranslationOptionHandler&&(e=this.options.overloadTranslationOptionHandler(arguments)),e||(e={}),b==null)return"";Array.isArray(b)||(b=[String(b)]);var o=e.returnDetails!==void 0?e.returnDetails:this.options.returnDetails,n=e.keySeparator!==void 0?e.keySeparator:this.options.keySeparator,c=this.extractFromKey(b[b.length-1],e),v=c.key,f=c.namespaces,i=f[f.length-1],t=e.lng||this.language,p=e.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(t&&t.toLowerCase()==="cimode"){if(p){var d=e.nsSeparator||this.options.nsSeparator;return o?(r.res="".concat(i).concat(d).concat(v),r):"".concat(i).concat(d).concat(v)}return o?(r.res=v,r):v}var r=this.resolve(b,e),z=r&&r.res,M=r&&r.usedKey||v,_=r&&r.exactUsedKey||v,L=Object.prototype.toString.apply(z),S=["[object Number]","[object Function]","[object RegExp]"],y=e.joinArrays!==void 0?e.joinArrays:this.options.joinArrays,A=!this.i18nFormat||this.i18nFormat.handleAsObject,H=typeof z!="string"&&typeof z!="boolean"&&typeof z!="number";if(A&&z&&H&&S.indexOf(L)<0&&!(typeof y=="string"&&L==="[object Array]")){if(!e.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var T=this.options.returnedObjectHandler?this.options.returnedObjectHandler(M,z,M1(M1({},e),{},{ns:f})):"key '".concat(v," (").concat(this.language,")' returned an object instead of string.");return o?(r.res=T,r):T}if(n){var V=L==="[object Array]",Z=V?[]:{},B=V?_:M;for(var N in z)if(Object.prototype.hasOwnProperty.call(z,N)){var E="".concat(B).concat(n).concat(N);Z[N]=this.translate(E,M1(M1({},e),{joinArrays:!1,ns:f})),Z[N]===E&&(Z[N]=z[N])}z=Z}}else if(A&&typeof y=="string"&&L==="[object Array]")z=z.join(y),z&&(z=this.extendTranslation(z,b,e,a));else{var P=!1,I=!1,U=e.count!==void 0&&typeof e.count!="string",K=g.hasDefaultValue(e),Q=U?this.pluralResolver.getSuffix(t,e.count,e):"",r0=e["defaultValue".concat(Q)]||e.defaultValue;!this.isValidLookup(z)&&K&&(P=!0,z=r0),this.isValidLookup(z)||(I=!0,z=v);var e0=e.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,c0=e0&&I?void 0:z,j=K&&r0!==z&&this.options.updateMissing;if(I||P||j){if(this.logger.log(j?"updateKey":"missingKey",t,i,v,j?r0:z),n){var q=this.resolve(v,M1(M1({},e),{},{keySeparator:!1}));q&&q.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var G=[],t0=this.languageUtils.getFallbackCodes(this.options.fallbackLng,e.lng||this.language);if(this.options.saveMissingTo==="fallback"&&t0&&t0[0])for(var h0=0;h0<t0.length;h0++)G.push(t0[h0]);else this.options.saveMissingTo==="all"?G=this.languageUtils.toResolveHierarchy(e.lng||this.language):G.push(e.lng||this.language);var A0=function(H0,J,D0){var u0=K&&D0!==z?D0:c0;m.options.missingKeyHandler?m.options.missingKeyHandler(H0,i,J,u0,j,e):m.backendConnector&&m.backendConnector.saveMissing&&m.backendConnector.saveMissing(H0,i,J,u0,j,e),m.emit("missingKey",H0,i,J,z)};this.options.saveMissing&&(this.options.saveMissingPlurals&&U?G.forEach(function(s0){m.pluralResolver.getSuffixes(s0,e).forEach(function(H0){A0([s0],v+H0,e["defaultValue".concat(H0)]||r0)})}):A0(G,v,r0))}z=this.extendTranslation(z,b,e,r,a),I&&z===v&&this.options.appendNamespaceToMissingKey&&(z="".concat(i,":").concat(v)),(I||P)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?z=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(i,":").concat(v):v,P?z:void 0):z=this.options.parseMissingKeyHandler(z))}return o?(r.res=z,r):z}},{key:"extendTranslation",value:function(b,e,a,m,o){var n=this;if(this.i18nFormat&&this.i18nFormat.parse)b=this.i18nFormat.parse(b,M1(M1({},this.options.interpolation.defaultVariables),a),m.usedLng,m.usedNS,m.usedKey,{resolved:m});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init(M1(M1({},a),{interpolation:M1(M1({},this.options.interpolation),a.interpolation)}));var c=typeof b=="string"&&(a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),v;if(c){var f=b.match(this.interpolator.nestingRegexp);v=f&&f.length}var i=a.replace&&typeof a.replace!="string"?a.replace:a;if(this.options.interpolation.defaultVariables&&(i=M1(M1({},this.options.interpolation.defaultVariables),i)),b=this.interpolator.interpolate(b,i,a.lng||this.language,a),c){var t=b.match(this.interpolator.nestingRegexp),p=t&&t.length;v<p&&(a.nest=!1)}a.nest!==!1&&(b=this.interpolator.nest(b,function(){for(var z=arguments.length,M=new Array(z),_=0;_<z;_++)M[_]=arguments[_];return o&&o[0]===M[0]&&!a.context?(n.logger.warn("It seems you are nesting recursively key: ".concat(M[0]," in key: ").concat(e[0])),null):n.translate.apply(n,M.concat([e]))},a)),a.interpolation&&this.interpolator.reset()}var d=a.postProcess||this.options.postProcess,r=typeof d=="string"?[d]:d;return b!=null&&r&&r.length&&a.applyPostProcessor!==!1&&(b=Cs.handle(r,b,e,this.options&&this.options.postProcessPassResolved?M1({i18nResolved:m},a):a,this)),b}},{key:"resolve",value:function(b){var e=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m,o,n,c,v;return typeof b=="string"&&(b=[b]),b.forEach(function(f){if(!e.isValidLookup(m)){var i=e.extractFromKey(f,a),t=i.key;o=t;var p=i.namespaces;e.options.fallbackNS&&(p=p.concat(e.options.fallbackNS));var d=a.count!==void 0&&typeof a.count!="string",r=d&&!a.ordinal&&a.count===0&&e.pluralResolver.shouldUseIntlApi(),z=a.context!==void 0&&(typeof a.context=="string"||typeof a.context=="number")&&a.context!=="",M=a.lngs?a.lngs:e.languageUtils.toResolveHierarchy(a.lng||e.language,a.fallbackLng);p.forEach(function(_){e.isValidLookup(m)||(v=_,!hs["".concat(M[0],"-").concat(_)]&&e.utils&&e.utils.hasLoadedNamespace&&!e.utils.hasLoadedNamespace(v)&&(hs["".concat(M[0],"-").concat(_)]=!0,e.logger.warn('key "'.concat(o,'" for languages "').concat(M.join(", "),`" won't get resolved as namespace "`).concat(v,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),M.forEach(function(L){if(!e.isValidLookup(m)){c=L;var S=[t];if(e.i18nFormat&&e.i18nFormat.addLookupKeys)e.i18nFormat.addLookupKeys(S,t,L,_,a);else{var y;d&&(y=e.pluralResolver.getSuffix(L,a.count,a));var A="".concat(e.options.pluralSeparator,"zero");if(d&&(S.push(t+y),r&&S.push(t+A)),z){var H="".concat(t).concat(e.options.contextSeparator).concat(a.context);S.push(H),d&&(S.push(H+y),r&&S.push(H+A))}}for(var T;T=S.pop();)e.isValidLookup(m)||(n=T,m=e.getResource(L,_,T,a))}}))})}}),{res:m,usedKey:o,exactUsedKey:n,usedLng:c,usedNS:v}}},{key:"isValidLookup",value:function(b){return b!==void 0&&!(!this.options.returnNull&&b===null)&&!(!this.options.returnEmptyString&&b==="")}},{key:"getResource",value:function(b,e,a){var m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(b,e,a,m):this.resourceStore.getResource(b,e,a,m)}}],[{key:"hasDefaultValue",value:function(b){var e="defaultValue";for(var a in b)if(Object.prototype.hasOwnProperty.call(b,a)&&e===a.substring(0,e.length)&&b[a]!==void 0)return!0;return!1}}]),g}(c3);function v8(l){return l.charAt(0).toUpperCase()+l.slice(1)}var ds=function(){function l(u){P1(this,l),this.options=u,this.supportedLngs=this.options.supportedLngs||!1,this.logger=E2.create("languageUtils")}return O1(l,[{key:"getScriptPartFromCode",value:function(g){if(!g||g.indexOf("-")<0)return null;var w=g.split("-");return w.length===2||(w.pop(),w[w.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(w.join("-"))}},{key:"getLanguagePartFromCode",value:function(g){if(!g||g.indexOf("-")<0)return g;var w=g.split("-");return this.formatLanguageCode(w[0])}},{key:"formatLanguageCode",value:function(g){if(typeof g=="string"&&g.indexOf("-")>-1){var w=["hans","hant","latn","cyrl","cans","mong","arab"],b=g.split("-");return this.options.lowerCaseLng?b=b.map(function(e){return e.toLowerCase()}):b.length===2?(b[0]=b[0].toLowerCase(),b[1]=b[1].toUpperCase(),w.indexOf(b[1].toLowerCase())>-1&&(b[1]=v8(b[1].toLowerCase()))):b.length===3&&(b[0]=b[0].toLowerCase(),b[1].length===2&&(b[1]=b[1].toUpperCase()),b[0]!=="sgn"&&b[2].length===2&&(b[2]=b[2].toUpperCase()),w.indexOf(b[1].toLowerCase())>-1&&(b[1]=v8(b[1].toLowerCase())),w.indexOf(b[2].toLowerCase())>-1&&(b[2]=v8(b[2].toLowerCase()))),b.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?g.toLowerCase():g}},{key:"isSupportedCode",value:function(g){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(g=this.getLanguagePartFromCode(g)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(g)>-1}},{key:"getBestMatchFromCodes",value:function(g){var w=this;if(!g)return null;var b;return g.forEach(function(e){if(!b){var a=w.formatLanguageCode(e);(!w.options.supportedLngs||w.isSupportedCode(a))&&(b=a)}}),!b&&this.options.supportedLngs&&g.forEach(function(e){if(!b){var a=w.getLanguagePartFromCode(e);if(w.isSupportedCode(a))return b=a;b=w.options.supportedLngs.find(function(m){if(m.indexOf(a)===0)return m})}}),b||(b=this.getFallbackCodes(this.options.fallbackLng)[0]),b}},{key:"getFallbackCodes",value:function(g,w){if(!g)return[];if(typeof g=="function"&&(g=g(w)),typeof g=="string"&&(g=[g]),Object.prototype.toString.apply(g)==="[object Array]")return g;if(!w)return g.default||[];var b=g[w];return b||(b=g[this.getScriptPartFromCode(w)]),b||(b=g[this.formatLanguageCode(w)]),b||(b=g[this.getLanguagePartFromCode(w)]),b||(b=g.default),b||[]}},{key:"toResolveHierarchy",value:function(g,w){var b=this,e=this.getFallbackCodes(w||this.options.fallbackLng||[],g),a=[],m=function(n){n&&(b.isSupportedCode(n)?a.push(n):b.logger.warn("rejecting language code not found in supportedLngs: ".concat(n)))};return typeof g=="string"&&g.indexOf("-")>-1?(this.options.load!=="languageOnly"&&m(this.formatLanguageCode(g)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&m(this.getScriptPartFromCode(g)),this.options.load!=="currentOnly"&&m(this.getLanguagePartFromCode(g))):typeof g=="string"&&m(this.formatLanguageCode(g)),e.forEach(function(o){a.indexOf(o)<0&&m(b.formatLanguageCode(o))}),a}}]),l}(),Vu=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Ru={1:function(u){return Number(u>1)},2:function(u){return Number(u!=1)},3:function(u){return 0},4:function(u){return Number(u%10==1&&u%100!=11?0:u%10>=2&&u%10<=4&&(u%100<10||u%100>=20)?1:2)},5:function(u){return Number(u==0?0:u==1?1:u==2?2:u%100>=3&&u%100<=10?3:u%100>=11?4:5)},6:function(u){return Number(u==1?0:u>=2&&u<=4?1:2)},7:function(u){return Number(u==1?0:u%10>=2&&u%10<=4&&(u%100<10||u%100>=20)?1:2)},8:function(u){return Number(u==1?0:u==2?1:u!=8&&u!=11?2:3)},9:function(u){return Number(u>=2)},10:function(u){return Number(u==1?0:u==2?1:u<7?2:u<11?3:4)},11:function(u){return Number(u==1||u==11?0:u==2||u==12?1:u>2&&u<20?2:3)},12:function(u){return Number(u%10!=1||u%100==11)},13:function(u){return Number(u!==0)},14:function(u){return Number(u==1?0:u==2?1:u==3?2:3)},15:function(u){return Number(u%10==1&&u%100!=11?0:u%10>=2&&(u%100<10||u%100>=20)?1:2)},16:function(u){return Number(u%10==1&&u%100!=11?0:u!==0?1:2)},17:function(u){return Number(u==1||u%10==1&&u%100!=11?0:1)},18:function(u){return Number(u==0?0:u==1?1:2)},19:function(u){return Number(u==1?0:u==0||u%100>1&&u%100<11?1:u%100>10&&u%100<20?2:3)},20:function(u){return Number(u==1?0:u==0||u%100>0&&u%100<20?1:2)},21:function(u){return Number(u%100==1?1:u%100==2?2:u%100==3||u%100==4?3:0)},22:function(u){return Number(u==1?0:u==2?1:(u<0||u>10)&&u%10==0?2:3)}},Fu=["v1","v2","v3"],ms={zero:0,one:1,two:2,few:3,many:4,other:5};function Bu(){var l={};return Vu.forEach(function(u){u.lngs.forEach(function(g){l[g]={numbers:u.nr,plurals:Ru[u.fc]}})}),l}var Pu=function(){function l(u){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};P1(this,l),this.languageUtils=u,this.options=g,this.logger=E2.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl=="undefined"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Bu()}return O1(l,[{key:"addRule",value:function(g,w){this.rules[g]=w}},{key:"getRule",value:function(g){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(g,{type:w.ordinal?"ordinal":"cardinal"})}catch(b){return}return this.rules[g]||this.rules[this.languageUtils.getLanguagePartFromCode(g)]}},{key:"needsPlural",value:function(g){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},b=this.getRule(g,w);return this.shouldUseIntlApi()?b&&b.resolvedOptions().pluralCategories.length>1:b&&b.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(g,w){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(g,b).map(function(e){return"".concat(w).concat(e)})}},{key:"getSuffixes",value:function(g){var w=this,b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=this.getRule(g,b);return e?this.shouldUseIntlApi()?e.resolvedOptions().pluralCategories.sort(function(a,m){return ms[a]-ms[m]}).map(function(a){return"".concat(w.options.prepend).concat(a)}):e.numbers.map(function(a){return w.getSuffix(g,a,b)}):[]}},{key:"getSuffix",value:function(g,w){var b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},e=this.getRule(g,b);return e?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(e.select(w)):this.getSuffixRetroCompatible(e,w):(this.logger.warn("no plural rule found for: ".concat(g)),"")}},{key:"getSuffixRetroCompatible",value:function(g,w){var b=this,e=g.noAbs?g.plurals(w):g.plurals(Math.abs(w)),a=g.numbers[e];this.options.simplifyPluralSuffix&&g.numbers.length===2&&g.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));var m=function(){return b.options.prepend&&a.toString()?b.options.prepend+a.toString():a.toString()};return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?"_plural_".concat(a.toString()):m():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&g.numbers.length===2&&g.numbers[0]===1?m():this.options.prepend&&e.toString()?this.options.prepend+e.toString():e.toString()}},{key:"shouldUseIntlApi",value:function(){return!Fu.includes(this.options.compatibilityJSON)}}]),l}();function vs(l,u){var g=Object.keys(l);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(l);u&&(w=w.filter(function(b){return Object.getOwnPropertyDescriptor(l,b).enumerable})),g.push.apply(g,w)}return g}function _2(l){for(var u=1;u<arguments.length;u++){var g=arguments[u]!=null?arguments[u]:{};u%2?vs(Object(g),!0).forEach(function(w){A2(l,w,g[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(g)):vs(Object(g)).forEach(function(w){Object.defineProperty(l,w,Object.getOwnPropertyDescriptor(g,w))})}return l}var Ou=function(){function l(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};P1(this,l),this.logger=E2.create("interpolator"),this.options=u,this.format=u.interpolation&&u.interpolation.format||function(g){return g},this.init(u)}return O1(l,[{key:"init",value:function(){var g=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};g.interpolation||(g.interpolation={escapeValue:!0});var w=g.interpolation;this.escape=w.escape!==void 0?w.escape:Su,this.escapeValue=w.escapeValue!==void 0?w.escapeValue:!0,this.useRawValueToEscape=w.useRawValueToEscape!==void 0?w.useRawValueToEscape:!1,this.prefix=w.prefix?r4(w.prefix):w.prefixEscaped||"{{",this.suffix=w.suffix?r4(w.suffix):w.suffixEscaped||"}}",this.formatSeparator=w.formatSeparator?w.formatSeparator:w.formatSeparator||",",this.unescapePrefix=w.unescapeSuffix?"":w.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":w.unescapeSuffix||"",this.nestingPrefix=w.nestingPrefix?r4(w.nestingPrefix):w.nestingPrefixEscaped||r4("$t("),this.nestingSuffix=w.nestingSuffix?r4(w.nestingSuffix):w.nestingSuffixEscaped||r4(")"),this.nestingOptionsSeparator=w.nestingOptionsSeparator?w.nestingOptionsSeparator:w.nestingOptionsSeparator||",",this.maxReplaces=w.maxReplaces?w.maxReplaces:1e3,this.alwaysFormat=w.alwaysFormat!==void 0?w.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var g="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(g,"g");var w="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(w,"g");var b="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(b,"g")}},{key:"interpolate",value:function(g,w,b,e){var a=this,m,o,n,c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function v(d){return d.replace(/\$/g,"$$$$")}var f=function(r){if(r.indexOf(a.formatSeparator)<0){var z=ls(w,c,r);return a.alwaysFormat?a.format(z,void 0,b,_2(_2(_2({},e),w),{},{interpolationkey:r})):z}var M=r.split(a.formatSeparator),_=M.shift().trim(),L=M.join(a.formatSeparator).trim();return a.format(ls(w,c,_),L,b,_2(_2(_2({},e),w),{},{interpolationkey:_}))};this.resetRegExp();var i=e&&e.missingInterpolationHandler||this.options.missingInterpolationHandler,t=e&&e.interpolation&&e.interpolation.skipOnVariables!==void 0?e.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,p=[{regex:this.regexpUnescape,safeValue:function(r){return v(r)}},{regex:this.regexp,safeValue:function(r){return a.escapeValue?v(a.escape(r)):v(r)}}];return p.forEach(function(d){for(n=0;m=d.regex.exec(g);){var r=m[1].trim();if(o=f(r),o===void 0)if(typeof i=="function"){var z=i(g,m,e);o=typeof z=="string"?z:""}else if(e&&e.hasOwnProperty(r))o="";else if(t){o=m[0];continue}else a.logger.warn("missed to pass in variable ".concat(r," for interpolating ").concat(g)),o="";else typeof o!="string"&&!a.useRawValueToEscape&&(o=cs(o));var M=d.safeValue(o);if(g=g.replace(m[0],M),t?(d.regex.lastIndex+=o.length,d.regex.lastIndex-=m[0].length):d.regex.lastIndex=0,n++,n>=a.maxReplaces)break}}),g}},{key:"nest",value:function(g,w){var b=this,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,m,o;function n(i,t){var p=this.nestingOptionsSeparator;if(i.indexOf(p)<0)return i;var d=i.split(new RegExp("".concat(p,"[ ]*{"))),r="{".concat(d[1]);i=d[0],r=this.interpolate(r,o);var z=r.match(/'/g),M=r.match(/"/g);(z&&z.length%2===0&&!M||M.length%2!==0)&&(r=r.replace(/'/g,'"'));try{o=JSON.parse(r),t&&(o=_2(_2({},t),o))}catch(_){return this.logger.warn("failed parsing options string in nesting for key ".concat(i),_),"".concat(i).concat(p).concat(r)}return delete o.defaultValue,i}for(;a=this.nestingRegexp.exec(g);){var c=[];o=_2({},e),o=o.replace&&typeof o.replace!="string"?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;var v=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){var f=a[1].split(this.formatSeparator).map(function(i){return i.trim()});a[1]=f.shift(),c=f,v=!0}if(m=w(n.call(this,a[1].trim(),o),o),m&&a[0]===g&&typeof m!="string")return m;typeof m!="string"&&(m=cs(m)),m||(this.logger.warn("missed to resolve ".concat(a[1]," for nesting ").concat(g)),m=""),v&&(m=c.reduce(function(i,t){return b.format(i,t,e.lng,_2(_2({},e),{},{interpolationkey:a[1].trim()}))},m.trim())),g=g.replace(a[0],m),this.regexp.lastIndex=0}return g}}]),l}();function gs(l,u){var g=Object.keys(l);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(l);u&&(w=w.filter(function(b){return Object.getOwnPropertyDescriptor(l,b).enumerable})),g.push.apply(g,w)}return g}function a3(l){for(var u=1;u<arguments.length;u++){var g=arguments[u]!=null?arguments[u]:{};u%2?gs(Object(g),!0).forEach(function(w){A2(l,w,g[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(g)):gs(Object(g)).forEach(function(w){Object.defineProperty(l,w,Object.getOwnPropertyDescriptor(g,w))})}return l}function Iu(l){var u=l.toLowerCase().trim(),g={};if(l.indexOf("(")>-1){var w=l.split("(");u=w[0].toLowerCase().trim();var b=w[1].substring(0,w[1].length-1);if(u==="currency"&&b.indexOf(":")<0)g.currency||(g.currency=b.trim());else if(u==="relativetime"&&b.indexOf(":")<0)g.range||(g.range=b.trim());else{var e=b.split(";");e.forEach(function(a){if(a){var m=a.split(":"),o=m8(m),n=o[0],c=o.slice(1),v=c.join(":").trim().replace(/^'+|'+$/g,"");g[n.trim()]||(g[n.trim()]=v),v==="false"&&(g[n.trim()]=!1),v==="true"&&(g[n.trim()]=!0),isNaN(v)||(g[n.trim()]=parseInt(v,10))}})}}return{formatName:u,formatOptions:g}}function l4(l){var u={};return function(w,b,e){var a=b+JSON.stringify(e),m=u[a];return m||(m=l(b,e),u[a]=m),m(w)}}var Zu=function(){function l(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};P1(this,l),this.logger=E2.create("formatter"),this.options=u,this.formats={number:l4(function(g,w){var b=new Intl.NumberFormat(g,w);return function(e){return b.format(e)}}),currency:l4(function(g,w){var b=new Intl.NumberFormat(g,a3(a3({},w),{},{style:"currency"}));return function(e){return b.format(e)}}),datetime:l4(function(g,w){var b=new Intl.DateTimeFormat(g,a3({},w));return function(e){return b.format(e)}}),relativetime:l4(function(g,w){var b=new Intl.RelativeTimeFormat(g,a3({},w));return function(e){return b.format(e,w.range||"day")}}),list:l4(function(g,w){var b=new Intl.ListFormat(g,a3({},w));return function(e){return b.format(e)}})},this.init(u)}return O1(l,[{key:"init",value:function(g){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},b=w.interpolation;this.formatSeparator=b.formatSeparator?b.formatSeparator:b.formatSeparator||","}},{key:"add",value:function(g,w){this.formats[g.toLowerCase().trim()]=w}},{key:"addCached",value:function(g,w){this.formats[g.toLowerCase().trim()]=l4(w)}},{key:"format",value:function(g,w,b,e){var a=this,m=w.split(this.formatSeparator),o=m.reduce(function(n,c){var v=Iu(c),f=v.formatName,i=v.formatOptions;if(a.formats[f]){var t=n;try{var p=e&&e.formatParams&&e.formatParams[e.interpolationkey]||{},d=p.locale||p.lng||e.locale||e.lng||b;t=a.formats[f](n,d,a3(a3(a3({},i),e),p))}catch(r){a.logger.warn(r)}return t}else a.logger.warn("there was no format function for ".concat(f));return n},g);return o}}]),l}();function ps(l,u){var g=Object.keys(l);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(l);u&&(w=w.filter(function(b){return Object.getOwnPropertyDescriptor(l,b).enumerable})),g.push.apply(g,w)}return g}function fs(l){for(var u=1;u<arguments.length;u++){var g=arguments[u]!=null?arguments[u]:{};u%2?ps(Object(g),!0).forEach(function(w){A2(l,w,g[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(g)):ps(Object(g)).forEach(function(w){Object.defineProperty(l,w,Object.getOwnPropertyDescriptor(g,w))})}return l}function Uu(l){var u=Nu();return function(){var w=I1(l),b;if(u){var e=I1(this).constructor;b=Reflect.construct(w,arguments,e)}else b=w.apply(this,arguments);return x3(this,b)}}function Nu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(l){return!1}}function Wu(l,u){l.pending[u]!==void 0&&(delete l.pending[u],l.pendingCount--)}var ju=function(l){c4(g,l);var u=Uu(g);function g(w,b,e){var a,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return P1(this,g),a=u.call(this),c6&&c3.call(w2(a)),a.backend=w,a.store=b,a.services=e,a.languageUtils=e.languageUtils,a.options=m,a.logger=E2.create("backendConnector"),a.waitingReads=[],a.maxParallelReads=m.maxParallelReads||10,a.readingCalls=0,a.maxRetries=m.maxRetries>=0?m.maxRetries:5,a.retryTimeout=m.retryTimeout>=1?m.retryTimeout:350,a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(e,m.backend,m),a}return O1(g,[{key:"queueLoad",value:function(b,e,a,m){var o=this,n={},c={},v={},f={};return b.forEach(function(i){var t=!0;e.forEach(function(p){var d="".concat(i,"|").concat(p);!a.reload&&o.store.hasResourceBundle(i,p)?o.state[d]=2:o.state[d]<0||(o.state[d]===1?c[d]===void 0&&(c[d]=!0):(o.state[d]=1,t=!1,c[d]===void 0&&(c[d]=!0),n[d]===void 0&&(n[d]=!0),f[p]===void 0&&(f[p]=!0)))}),t||(v[i]=!0)}),(Object.keys(n).length||Object.keys(c).length)&&this.queue.push({pending:c,pendingCount:Object.keys(c).length,loaded:{},errors:[],callback:m}),{toLoad:Object.keys(n),pending:Object.keys(c),toLoadLanguages:Object.keys(v),toLoadNamespaces:Object.keys(f)}}},{key:"loaded",value:function(b,e,a){var m=b.split("|"),o=m[0],n=m[1];e&&this.emit("failedLoading",o,n,e),a&&this.store.addResourceBundle(o,n,a),this.state[b]=e?-1:2;var c={};this.queue.forEach(function(v){Mu(v.loaded,[o],n),Wu(v,b),e&&v.errors.push(e),v.pendingCount===0&&!v.done&&(Object.keys(v.loaded).forEach(function(f){c[f]||(c[f]={});var i=v.loaded[f];i.length&&i.forEach(function(t){c[f][t]===void 0&&(c[f][t]=!0)})}),v.done=!0,v.errors.length?v.callback(v.errors):v.callback())}),this.emit("loaded",c),this.queue=this.queue.filter(function(v){return!v.done})}},{key:"read",value:function(b,e,a){var m=this,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,c=arguments.length>5?arguments[5]:void 0;if(!b.length)return c(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:b,ns:e,fcName:a,tried:o,wait:n,callback:c});return}this.readingCalls++;var v=function(p,d){if(m.readingCalls--,m.waitingReads.length>0){var r=m.waitingReads.shift();m.read(r.lng,r.ns,r.fcName,r.tried,r.wait,r.callback)}if(p&&d&&o<m.maxRetries){setTimeout(function(){m.read.call(m,b,e,a,o+1,n*2,c)},n);return}c(p,d)},f=this.backend[a].bind(this.backend);if(f.length===2){try{var i=f(b,e);i&&typeof i.then=="function"?i.then(function(t){return v(null,t)}).catch(v):v(null,i)}catch(t){v(t)}return}return f(b,e,v)}},{key:"prepareLoading",value:function(b,e){var a=this,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();typeof b=="string"&&(b=this.languageUtils.toResolveHierarchy(b)),typeof e=="string"&&(e=[e]);var n=this.queueLoad(b,e,m,o);if(!n.toLoad.length)return n.pending.length||o(),null;n.toLoad.forEach(function(c){a.loadOne(c)})}},{key:"load",value:function(b,e,a){this.prepareLoading(b,e,{},a)}},{key:"reload",value:function(b,e,a){this.prepareLoading(b,e,{reload:!0},a)}},{key:"loadOne",value:function(b){var e=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",m=b.split("|"),o=m[0],n=m[1];this.read(o,n,"read",void 0,void 0,function(c,v){c&&e.logger.warn("".concat(a,"loading namespace ").concat(n," for language ").concat(o," failed"),c),!c&&v&&e.logger.log("".concat(a,"loaded namespace ").concat(n," for language ").concat(o),v),e.loaded(b,c,v)})}},{key:"saveMissing",value:function(b,e,a,m,o){var n=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(e)){this.logger.warn('did not save key "'.concat(a,'" as the namespace "').concat(e,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(a==null||a==="")){if(this.backend&&this.backend.create){var v=fs(fs({},n),{},{isUpdate:o}),f=this.backend.create.bind(this.backend);if(f.length<6)try{var i;f.length===5?i=f(b,e,a,m,v):i=f(b,e,a,m),i&&typeof i.then=="function"?i.then(function(t){return c(null,t)}).catch(c):c(null,i)}catch(t){c(t)}else f(b,e,a,m,c,v)}!b||!b[0]||this.store.addResource(b[0],e,a,m)}}}]),g}(c3);function zs(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(u){var g={};if(_1(u[1])==="object"&&(g=u[1]),typeof u[1]=="string"&&(g.defaultValue=u[1]),typeof u[2]=="string"&&(g.tDescription=u[2]),_1(u[2])==="object"||_1(u[3])==="object"){var w=u[3]||u[2];Object.keys(w).forEach(function(b){g[b]=w[b]})}return g},interpolation:{escapeValue:!0,format:function(u,g,w,b){return u},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function bs(l){return typeof l.ns=="string"&&(l.ns=[l.ns]),typeof l.fallbackLng=="string"&&(l.fallbackLng=[l.fallbackLng]),typeof l.fallbackNS=="string"&&(l.fallbackNS=[l.fallbackNS]),l.supportedLngs&&l.supportedLngs.indexOf("cimode")<0&&(l.supportedLngs=l.supportedLngs.concat(["cimode"])),l}function ws(l,u){var g=Object.keys(l);if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(l);u&&(w=w.filter(function(b){return Object.getOwnPropertyDescriptor(l,b).enumerable})),g.push.apply(g,w)}return g}function k2(l){for(var u=1;u<arguments.length;u++){var g=arguments[u]!=null?arguments[u]:{};u%2?ws(Object(g),!0).forEach(function(w){A2(l,w,g[w])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(g)):ws(Object(g)).forEach(function(w){Object.defineProperty(l,w,Object.getOwnPropertyDescriptor(g,w))})}return l}function Gu(l){var u=qu();return function(){var w=I1(l),b;if(u){var e=I1(this).constructor;b=Reflect.construct(w,arguments,e)}else b=w.apply(this,arguments);return x3(this,b)}}function qu(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(l){return!1}}function s6(){}function $u(l){var u=Object.getOwnPropertyNames(Object.getPrototypeOf(l));u.forEach(function(g){typeof l[g]=="function"&&(l[g]=l[g].bind(l))})}var a6=function(l){c4(g,l);var u=Gu(g);function g(){var w,b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;if(P1(this,g),w=u.call(this),c6&&c3.call(w2(w)),w.options=bs(b),w.services={},w.logger=E2,w.modules={external:[]},$u(w2(w)),e&&!w.isInitialized&&!b.isClone){if(!w.options.initImmediate)return w.init(b,e),x3(w,w2(w));setTimeout(function(){w.init(b,e)},0)}return w}return O1(g,[{key:"init",value:function(){var b=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;typeof e=="function"&&(a=e,e={}),!e.defaultNS&&e.defaultNS!==!1&&e.ns&&(typeof e.ns=="string"?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));var m=zs();this.options=k2(k2(k2({},m),this.options),bs(e)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=k2(k2({},m.interpolation),this.options.interpolation)),e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);function o(r){return r?typeof r=="function"?new r:r:null}if(!this.options.isClone){this.modules.logger?E2.init(o(this.modules.logger),this.options):E2.init(null,this.options);var n;this.modules.formatter?n=this.modules.formatter:typeof Intl!="undefined"&&(n=Zu);var c=new ds(this.options);this.store=new Hu(this.options.resources,this.options);var v=this.services;v.logger=E2,v.resourceStore=this.store,v.languageUtils=c,v.pluralResolver=new Pu(c,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),n&&(!this.options.interpolation.format||this.options.interpolation.format===m.interpolation.format)&&(v.formatter=o(n),v.formatter.init(v,this.options),this.options.interpolation.format=v.formatter.format.bind(v.formatter)),v.interpolator=new Ou(this.options),v.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},v.backendConnector=new ju(o(this.modules.backend),v.resourceStore,v,this.options),v.backendConnector.on("*",function(r){for(var z=arguments.length,M=new Array(z>1?z-1:0),_=1;_<z;_++)M[_-1]=arguments[_];b.emit.apply(b,[r].concat(M))}),this.modules.languageDetector&&(v.languageDetector=o(this.modules.languageDetector),v.languageDetector.init&&v.languageDetector.init(v,this.options.detection,this.options)),this.modules.i18nFormat&&(v.i18nFormat=o(this.modules.i18nFormat),v.i18nFormat.init&&v.i18nFormat.init(this)),this.translator=new us(this.services,this.options),this.translator.on("*",function(r){for(var z=arguments.length,M=new Array(z>1?z-1:0),_=1;_<z;_++)M[_-1]=arguments[_];b.emit.apply(b,[r].concat(M))}),this.modules.external.forEach(function(r){r.init&&r.init(b)})}if(this.format=this.options.interpolation.format,a||(a=s6),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var f=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);f.length>0&&f[0]!=="dev"&&(this.options.lng=f[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var i=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];i.forEach(function(r){b[r]=function(){var z;return(z=b.store)[r].apply(z,arguments)}});var t=["addResource","addResources","addResourceBundle","removeResourceBundle"];t.forEach(function(r){b[r]=function(){var z;return(z=b.store)[r].apply(z,arguments),b}});var p=K4(),d=function(){var z=function(_,L){b.isInitialized&&!b.initializedStoreOnce&&b.logger.warn("init: i18next is already initialized. You should call init just once!"),b.isInitialized=!0,b.options.isClone||b.logger.log("initialized",b.options),b.emit("initialized",b.options),p.resolve(L),a(_,L)};if(b.languages&&b.options.compatibilityAPI!=="v1"&&!b.isInitialized)return z(null,b.t.bind(b));b.changeLanguage(b.options.lng,z)};return this.options.resources||!this.options.initImmediate?d():setTimeout(d,0),p}},{key:"loadResources",value:function(b){var e=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s6,m=a,o=typeof b=="string"?b:this.language;if(typeof b=="function"&&(m=b),!this.options.resources||this.options.partialBundledLanguages){if(o&&o.toLowerCase()==="cimode")return m();var n=[],c=function(i){if(i){var t=e.services.languageUtils.toResolveHierarchy(i);t.forEach(function(p){n.indexOf(p)<0&&n.push(p)})}};if(o)c(o);else{var v=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);v.forEach(function(f){return c(f)})}this.options.preload&&this.options.preload.forEach(function(f){return c(f)}),this.services.backendConnector.load(n,this.options.ns,function(f){!f&&!e.resolvedLanguage&&e.language&&e.setResolvedLanguage(e.language),m(f)})}else m(null)}},{key:"reloadResources",value:function(b,e,a){var m=K4();return b||(b=this.languages),e||(e=this.options.ns),a||(a=s6),this.services.backendConnector.reload(b,e,function(o){m.resolve(),a(o)}),m}},{key:"use",value:function(b){if(!b)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!b.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return b.type==="backend"&&(this.modules.backend=b),(b.type==="logger"||b.log&&b.warn&&b.error)&&(this.modules.logger=b),b.type==="languageDetector"&&(this.modules.languageDetector=b),b.type==="i18nFormat"&&(this.modules.i18nFormat=b),b.type==="postProcessor"&&Cs.addPostProcessor(b),b.type==="formatter"&&(this.modules.formatter=b),b.type==="3rdParty"&&this.modules.external.push(b),this}},{key:"setResolvedLanguage",value:function(b){if(!(!b||!this.languages)&&!(["cimode","dev"].indexOf(b)>-1))for(var e=0;e<this.languages.length;e++){var a=this.languages[e];if(!(["cimode","dev"].indexOf(a)>-1)&&this.store.hasLanguageSomeTranslations(a)){this.resolvedLanguage=a;break}}}},{key:"changeLanguage",value:function(b,e){var a=this;this.isLanguageChangingTo=b;var m=K4();this.emit("languageChanging",b);var o=function(f){a.language=f,a.languages=a.services.languageUtils.toResolveHierarchy(f),a.resolvedLanguage=void 0,a.setResolvedLanguage(f)},n=function(f,i){i?(o(i),a.translator.changeLanguage(i),a.isLanguageChangingTo=void 0,a.emit("languageChanged",i),a.logger.log("languageChanged",i)):a.isLanguageChangingTo=void 0,m.resolve(function(){return a.t.apply(a,arguments)}),e&&e(f,function(){return a.t.apply(a,arguments)})},c=function(f){!b&&!f&&a.services.languageDetector&&(f=[]);var i=typeof f=="string"?f:a.services.languageUtils.getBestMatchFromCodes(f);i&&(a.language||o(i),a.translator.language||a.translator.changeLanguage(i),a.services.languageDetector&&a.services.languageDetector.cacheUserLanguage&&a.services.languageDetector.cacheUserLanguage(i)),a.loadResources(i,function(t){n(t,i)})};return!b&&this.services.languageDetector&&!this.services.languageDetector.async?c(this.services.languageDetector.detect()):!b&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(c):this.services.languageDetector.detect(c):c(b),m}},{key:"getFixedT",value:function(b,e,a){var m=this,o=function n(c,v){var f;if(_1(v)!=="object"){for(var i=arguments.length,t=new Array(i>2?i-2:0),p=2;p<i;p++)t[p-2]=arguments[p];f=m.options.overloadTranslationOptionHandler([c,v].concat(t))}else f=k2({},v);f.lng=f.lng||n.lng,f.lngs=f.lngs||n.lngs,f.ns=f.ns||n.ns,f.keyPrefix=f.keyPrefix||a||n.keyPrefix;var d=m.options.keySeparator||".",r;return f.keyPrefix&&Array.isArray(c)?r=c.map(function(z){return"".concat(f.keyPrefix).concat(d).concat(z)}):r=f.keyPrefix?"".concat(f.keyPrefix).concat(d).concat(c):c,m.t(r,f)};return typeof b=="string"?o.lng=b:o.lngs=b,o.ns=e,o.keyPrefix=a,o}},{key:"t",value:function(){var b;return this.translator&&(b=this.translator).translate.apply(b,arguments)}},{key:"exists",value:function(){var b;return this.translator&&(b=this.translator).exists.apply(b,arguments)}},{key:"setDefaultNamespace",value:function(b){this.options.defaultNS=b}},{key:"hasLoadedNamespace",value:function(b){var e=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var m=this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,n=this.languages[this.languages.length-1];if(m.toLowerCase()==="cimode")return!0;var c=function(i,t){var p=e.services.backendConnector.state["".concat(i,"|").concat(t)];return p===-1||p===2};if(a.precheck){var v=a.precheck(this,c);if(v!==void 0)return v}return!!(this.hasResourceBundle(m,b)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||c(m,b)&&(!o||c(n,b)))}},{key:"loadNamespaces",value:function(b,e){var a=this,m=K4();return this.options.ns?(typeof b=="string"&&(b=[b]),b.forEach(function(o){a.options.ns.indexOf(o)<0&&a.options.ns.push(o)}),this.loadResources(function(o){m.resolve(),e&&e(o)}),m):(e&&e(),Promise.resolve())}},{key:"loadLanguages",value:function(b,e){var a=K4();typeof b=="string"&&(b=[b]);var m=this.options.preload||[],o=b.filter(function(n){return m.indexOf(n)<0});return o.length?(this.options.preload=m.concat(o),this.loadResources(function(n){a.resolve(),e&&e(n)}),a):(e&&e(),Promise.resolve())}},{key:"dir",value:function(b){if(b||(b=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!b)return"rtl";var e=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],a=this.services&&this.services.languageUtils||new ds(zs());return e.indexOf(a.getLanguagePartFromCode(b))>-1||b.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var b=this,e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:s6,m=k2(k2(k2({},this.options),e),{isClone:!0}),o=new g(m);(e.debug!==void 0||e.prefix!==void 0)&&(o.logger=o.logger.clone(e));var n=["store","services","language"];return n.forEach(function(c){o[c]=b[c]}),o.services=k2({},this.services),o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o.translator=new us(o.services,o.options),o.translator.on("*",function(c){for(var v=arguments.length,f=new Array(v>1?v-1:0),i=1;i<v;i++)f[i-1]=arguments[i];o.emit.apply(o,[c].concat(f))}),o.init(m,a),o.translator.options=o.options,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),g}(c3);A2(a6,"createInstance",function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=arguments.length>1?arguments[1]:void 0;return new a6(l,u)});var p1=a6.createInstance();p1.createInstance=a6.createInstance;var Ms=p1.createInstance,gg=p1.dir,pg=p1.init,fg=p1.loadResources,zg=p1.reloadResources,bg=p1.use,wg=p1.changeLanguage,_g=p1.getFixedT,xs=p1.t,yg=p1.exists,Cg=p1.setDefaultNamespace,Mg=p1.hasLoadedNamespace,xg=p1.loadNamespaces,Sg=p1.loadLanguages;var Ss=require("obsidian");var Ku=(async()=>{try{let l=Ms({cleanCode:!0,defaultNS:j0,fallbackLng:fe,initImmediate:!0,nonExplicitSupportedLngs:!0,resources:b7,returnNull:pe});return await l.init(),l}catch(l){throw J2(R2(l),()=>"i18n error"),l}})(),Y4,X4,p8,r6=class{constructor(u){this.plugin=u;z0(this,X4);G0(this,"onChangeLanguage",new K2);z0(this,Y4,p1)}get i18n(){return o0(this,Y4)}get language(){let{language:u}=this.plugin.settings;return u===""?Ss.moment.locale():u}async load(){S0(this,Y4,await Ku),await v0(this,X4,p8).call(this,this.language),this.plugin.register(this.plugin.on("mutate-settings",()=>this.language,async u=>v0(this,X4,p8).call(this,u)))}};Y4=new WeakMap,X4=new WeakSet,p8=async function(u){await this.i18n.changeLanguage(u),await this.onChangeLanguage.emit(u)};var Z1=require("obsidian");function r1(l,u,g,w={}){return b=>{var a,m;((a=w.pre)!=null?a:()=>{})(b);let e=async o=>{let n=await u(o,b,l);if(typeof n=="boolean"&&!n){b.setValue(l());return}await g(o,b,l)};b.setValue(l()).onChange(e),((m=w.post)!=null?m:()=>{})(b,e)}}function o4(l,u){return async(g,w,b)=>{if(!K1(l,g))return!1;let e=await u(g,w,b);return!(typeof e=="boolean"&&!e)}}function f8(l,u=!1){return async(g,w,b)=>{let e=Number(g);if(!(u?Number.isSafeInteger(e):isFinite(e)))return!1;let a=await l(e,w,b);return!(typeof a=="boolean"&&!a)}}function U0(l,u,g,w,b={}){return e=>{var m,o;((m=b.pre)!=null?m:()=>{})(e);let a=async()=>{let n=await g(e);typeof n=="boolean"&&!n||await w(e)};e.setTooltip(l.language.i18n.t("settings.reset")).setIcon(u).onClick(a),((o=b.post)!=null?o:()=>{})(e,a)}}function l6(l,u,g,w={}){return b=>{var a,m;((a=w.pre)!=null?a:()=>{})(b);let e=async o=>{let n=u[Number(o)];J0(n)||(b.setValue(NaN.toString()),await g(n.value,b))};b.addOption(NaN.toString(),l).addOptions(Object.fromEntries(u.map((o,n)=>[n,o.name]))).setValue(NaN.toString()).onChange(e),((m=w.post)!=null?m:()=>{})(b,e)}}var $0=require("obsidian");var S3=u1({"":{available:!0,integratable:!0,opener(){return new a4},valid:!0},console:{available:!0,integratable:!0,opener(){return new U4},valid:!0},external:{available:Yt,integratable:!1,async opener(l,u,g){return await Xt(u.executable,u.args,g),null},valid:!0},integrated:{available:B1.PLATFORM_PSEUDOTERMINAL!==null,integratable:!0,opener(l,u,g){var n;if(B1.PLATFORM_PSEUDOTERMINAL===null)return null;let{args:w,platforms:b,enableWindowsConhostWorkaround:e,executable:a,pythonExecutable:m}=u;return(n=b[v3])!=null&&n?new B1.PLATFORM_PSEUDOTERMINAL(l,{args:w,cwd:g,enableWindowsConhostWorkaround:e,executable:a,pythonExecutable:m}):null},valid:!0},invalid:{available:!0,integratable:!1,opener(){return null},valid:!1}});function z8(l,u,g){let w=u.type;return S3[w].opener(l,u,g)}function n5(l){return l.replaceChildren(),l.createEl("div",{cls:"vertical-tab-content"})}var h6,V1,Q4,e5,t5,O2,L3,k3=class extends $0.Modal{constructor(g,w,b,e,a,m=()=>null){super(app);this.plugin=g;this.inputter=w;this.placeholder=b;z0(this,O2);z0(this,h6,this.plugin.language.onChangeLanguage.listen(()=>{this.display()}));z0(this,V1,void 0);z0(this,Q4,void 0);z0(this,e5,void 0);z0(this,t5,void 0);S0(this,Q4,w),S0(this,V1,[...e]),S0(this,e5,a),S0(this,t5,m)}onOpen(){super.onOpen(),this.display()}onClose(){super.onClose(),o0(this,h6).call(this)}display(){let{contentEl:g,plugin:w,placeholder:b}=this,e=n5(g),{i18n:a}=w.language,m=o0(this,t5).call(this);m!==null&&e.createEl("h1",{text:m}),new $0.Setting(e).setName(a.t("components.editable-list.prepend")).addButton(o=>o.setIcon(a.t("asset:components.editable-list.prepend-icon")).setTooltip(a.t("components.editable-list.prepend")).onClick(async()=>{o0(this,V1).unshift(b),await v0(this,O2,L3).call(this,!0)}));for(let[o,n]of o0(this,V1).entries()){let c=new $0.Setting(e).setName(a.t("components.editable-list.name",{count:o+1,ordinal:!0}));o0(this,Q4).call(this,c,()=>n,async v=>{o0(this,V1)[o]=v,await v0(this,O2,L3).call(this)}),c.addExtraButton(v=>v.setTooltip(a.t("components.editable-list.move-up")).setIcon(a.t("asset:components.editable-list.move-up-icon")).onClick(async()=>{o<=0||(k4(o0(this,V1),o-1,o),await v0(this,O2,L3).call(this,!0))})).addExtraButton(v=>v.setTooltip(a.t("components.editable-list.move-down")).setIcon(a.t("asset:components.editable-list.move-down-icon")).onClick(async()=>{o>=o0(this,V1).length-1||(k4(o0(this,V1),o,o+1),await v0(this,O2,L3).call(this,!0))})).addExtraButton(v=>v.setTooltip(a.t("components.editable-list.remove")).setIcon(a.t("asset:components.editable-list.remove-icon")).onClick(async()=>{H5(o0(this,V1),o),await v0(this,O2,L3).call(this,!0)}))}new $0.Setting(e).setName(a.t("components.editable-list.append")).addButton(o=>o.setIcon(a.t("asset:components.editable-list.append-icon")).setTooltip(a.t("components.editable-list.append")).onClick(async()=>{o0(this,V1).push(b),await v0(this,O2,L3).call(this,!0)}))}};h6=new WeakMap,V1=new WeakMap,Q4=new WeakMap,e5=new WeakMap,t5=new WeakMap,O2=new WeakSet,L3=async function(g=!1){let w=o0(this,e5).call(this,g3(o0(this,V1)));g&&this.display(),await w},G0(k3,"stringInputter",(g,w,b,e=(a,m)=>{a.addTextArea(m)})=>{e(g,a=>a.setValue(w()).onChange(b))});var u6,I2,s5,i5,Y0,t1,a5,b8,J4=class extends $0.Modal{constructor(g,w,b,e=w7.map(a=>({get name(){return g.language.i18n.t(`types.profile-presets.${a}`)},value:b3[a]}))){super(g.app);this.plugin=g;z0(this,Y0);z0(this,a5);z0(this,u6,this.plugin.language.onChangeLanguage.listen(()=>{this.display()}));z0(this,I2,void 0);z0(this,s5,void 0);z0(this,i5,void 0);S0(this,I2,e1(w)),S0(this,s5,b),S0(this,i5,e)}onOpen(){super.onOpen(),this.display()}onClose(){super.onClose(),o0(this,u6).call(this)}display(){let{contentEl:g,plugin:w}=this,b=n5(g),e=o0(this,I2),{type:a}=e,{language:m}=w,{i18n:o}=m,n=b.createEl("h1",{text:o.t("components.profile.title",{name:V0.Profile.name(e),profile:e})});switch(new $0.Setting(b).setName(o.t("components.profile.name")).addText(r1(()=>V0.Profile.name(e),c=>{e.name=c},async c=>{n.textContent=o.t("components.profile.title",{name:c,profile:e}),await v0(this,Y0,t1).call(this)})).addExtraButton(U0(w,o.t("asset:components.profile.name-icon"),()=>{e.name=V0.Profile.DEFAULTS[a].name},async()=>v0(this,Y0,t1).call(this,!0))),new $0.Setting(b).setName(o.t("components.profile.preset")).addDropdown(l6(o.t("components.dropdown.unselected"),o0(this,i5),async c=>{v0(this,a5,b8).call(this,e1(c)),await v0(this,Y0,t1).call(this,!0)})),new $0.Setting(b).setName(o.t("components.profile.type")).addDropdown(r1(()=>a,o4(V0.Profile.TYPES,c=>{v0(this,a5,b8).call(this,e1(V0.Profile.DEFAULTS[c]))}),async()=>v0(this,Y0,t1).call(this,!0),{pre:c=>{c.addOptions(Object.fromEntries(V0.Profile.TYPES.filter(v=>S3[v].valid).map(v=>[v,o.t(`types.profiles.${v}`)])))}})).addExtraButton(U0(w,o.t("asset:components.profile.type-icon"),E4,E4,{post:c=>{c.setTooltip(I6).setDisabled(!0)}})),a){case"":break;case"console":break;case"external":{new $0.Setting(b).setName(o.t(`components.profile.${a}.executable`)).addText(r1(()=>e.executable,c=>{e.executable=c},async()=>v0(this,Y0,t1).call(this))).addExtraButton(U0(w,o.t(`asset:components.profile.${a}.executable-icon`),()=>{e.executable=V0.Profile.DEFAULTS[a].executable},async()=>v0(this,Y0,t1).call(this,!0))),new $0.Setting(b).setName(o.t(`components.profile.${a}.arguments`)).setDesc(o.t("settings.list-description",{count:e.args.length})).addButton(c=>c.setIcon(o.t("asset:generic.edit-list-icon")).setTooltip(o.t("generic.edit")).onClick(()=>{new k3(w,k3.stringInputter,"",e.args,async v=>{e.args=v,await v0(this,Y0,t1).call(this,!0)},()=>o.t(`components.profile.${a}.arguments`)).open()})).addExtraButton(U0(w,o.t(`asset:components.profile.${a}.arguments-icon`),()=>{e.args=e1(V0.Profile.DEFAULTS[a].args)},async()=>v0(this,Y0,t1).call(this,!0)));for(let c of B1.SUPPORTED_PLATFORMS)new $0.Setting(b).setName(o.t(`types.platforms.${c}`)).addToggle(r1(()=>{var v;return(v=e.platforms[c])!=null?v:V0.Profile.DEFAULTS[a].platforms[c]},v=>{e.platforms[c]=v},async()=>v0(this,Y0,t1).call(this))).addExtraButton(U0(w,o.t(`asset:types.platforms.${c}-icon`),()=>{e.platforms[c]=V0.Profile.DEFAULTS[a].platforms[c]},async()=>v0(this,Y0,t1).call(this,!0)));break}case"integrated":{new $0.Setting(b).setName(o.t(`components.profile.${a}.executable`)).addText(r1(()=>e.executable,c=>{e.executable=c},async()=>v0(this,Y0,t1).call(this))).addExtraButton(U0(w,o.t(`asset:components.profile.${a}.executable-icon`),()=>{e.executable=V0.Profile.DEFAULTS[a].executable},async()=>v0(this,Y0,t1).call(this,!0))),new $0.Setting(b).setName(o.t(`components.profile.${a}.arguments`)).setDesc(o.t("settings.list-description",{count:e.args.length})).addButton(c=>c.setIcon(o.t("asset:generic.edit-list-icon")).setTooltip(o.t("generic.edit")).onClick(()=>{new k3(w,k3.stringInputter,"",e.args,async v=>{e.args=v,await v0(this,Y0,t1).call(this,!0)},()=>o.t(`components.profile.${a}.arguments`)).open()})).addExtraButton(U0(w,o.t(`asset:components.profile.${a}.arguments-icon`),()=>{e.args=e1(V0.Profile.DEFAULTS[a].args)},async()=>v0(this,Y0,t1).call(this,!0)));for(let c of B1.SUPPORTED_PLATFORMS)new $0.Setting(b).setName(o.t(`types.platforms.${c}`)).addToggle(r1(()=>{var v;return(v=e.platforms[c])!=null?v:V0.Profile.DEFAULTS[a].platforms[c]},v=>{e.platforms[c]=v},async()=>v0(this,Y0,t1).call(this))).addExtraButton(U0(w,o.t(`asset:types.platforms.${c}-icon`),()=>{e.platforms[c]=V0.Profile.DEFAULTS[a].platforms[c]},async()=>v0(this,Y0,t1).call(this,!0)));new $0.Setting(b).setName(o.t(`components.profile.${a}.python-executable`)).setDesc(o.t(`components.profile.${a}.python-executable-description`)).addText(r1(()=>e.pythonExecutable,c=>{e.pythonExecutable=c},async()=>v0(this,Y0,t1).call(this),{post:c=>{c.setPlaceholder(o.t(`components.profile.${a}.python-executable-placeholder`))}})).addExtraButton(U0(w,o.t(`asset:components.profile.${a}.python-executable-icon`),()=>{e.pythonExecutable=V0.Profile.DEFAULTS[a].pythonExecutable},async()=>v0(this,Y0,t1).call(this,!0))),new $0.Setting(b).setName(o.t(`components.profile.${a}.enable-Windows-conhost-workaround`)).setDesc(o.t(`components.profile.${a}.enable-Windows-conhost-workaround-description`)).addToggle(r1(()=>{var c;return(c=e.enableWindowsConhostWorkaround)!=null?c:V0.Profile.DEFAULTS[a].enableWindowsConhostWorkaround},c=>{e.enableWindowsConhostWorkaround=c},async()=>v0(this,Y0,t1).call(this))).addExtraButton(U0(w,o.t(`asset:components.profile.${a}.enable-Windows-conhost-workaround-icon`),()=>{e.enableWindowsConhostWorkaround=V0.Profile.DEFAULTS[a].enableWindowsConhostWorkaround},async()=>v0(this,Y0,t1).call(this,!0)));break}case"invalid":{new $0.Setting(b).setName(o.t(`components.profile.${a}.data`)).addTextArea(c=>c.setValue(JSON.stringify(e,null,m3)).setDisabled(!0)).addExtraButton(U0(w,o.t(`asset:components.profile.${a}.data-icon`),E4,E4,{post:c=>{c.setTooltip(I6).setDisabled(!0)}}));break}}}};u6=new WeakMap,I2=new WeakMap,s5=new WeakMap,i5=new WeakMap,Y0=new WeakSet,t1=async function(g=!1){let w=o0(this,s5).call(this,g3(o0(this,I2)));g&&this.display(),await w},a5=new WeakSet,b8=function(g){let{name:w}=o0(this,I2);ie(o0(this,I2)),Object.assign(o0(this,I2),g,{name:w})};var A1,c5,n4,r5,Z2,A3,l5,w8,o6=class extends $0.Modal{constructor(g,w,b,e=w7.map(m=>({get name(){return g.language.i18n.t(`types.profile-presets.${m}`)},value:b3[m]})),a=()=>crypto.randomUUID()){super(g.app);this.plugin=g;z0(this,Z2);z0(this,l5);z0(this,A1,void 0);z0(this,c5,void 0);z0(this,n4,void 0);z0(this,r5,void 0);S0(this,A1,e1(w)),S0(this,c5,b),S0(this,n4,e),S0(this,r5,a)}onOpen(){super.onOpen(),this.display()}display(){let{contentEl:g,plugin:w}=this,b=n5(g),{language:e}=w,{i18n:a}=e;b.createEl("h1",{text:a.t("components.profile-list.title")}),b.createEl("div",{text:a.t("components.profile-list.content")}),new $0.Setting(b).setName(a.t("components.editable-list.prepend")).addDropdown(l6(a.t("components.dropdown.unselected"),o0(this,n4),async m=>{v0(this,l5,w8).call(this,0,e1(m)),await v0(this,Z2,A3).call(this,!0)}));for(let[m,[o,n]]of o0(this,A1).entries())new $0.Setting(b).setName(a.t("components.profile-list.name",{profile:n})).setDesc(a.t("components.profile-list.description",{id:o,profile:n})).addButton(c=>c.setIcon(a.t("asset:generic.edit-icon")).setTooltip(a.t("generic.edit")).onClick(()=>{new J4(w,n,async v=>{o0(this,A1)[m]=[o,v],await v0(this,Z2,A3).call(this,!0)}).open()})).addExtraButton(c=>c.setTooltip(a.t("components.editable-list.move-up")).setIcon(a.t("asset:components.editable-list.move-up-icon")).onClick(async()=>{m<=0||(k4(o0(this,A1),m-1,m),await v0(this,Z2,A3).call(this,!0))})).addExtraButton(c=>c.setTooltip(a.t("components.editable-list.move-down")).setIcon(a.t("asset:components.editable-list.move-down-icon")).onClick(async()=>{m>=o0(this,A1).length-1||(k4(o0(this,A1),m,m+1),await v0(this,Z2,A3).call(this,!0))})).addExtraButton(c=>c.setIcon(a.t("asset:components.editable-list.remove-icon")).setTooltip(a.t("components.editable-list.remove")).onClick(async()=>{H5(o0(this,A1),m),await v0(this,Z2,A3).call(this,!0)}));new $0.Setting(b).setName(a.t("components.editable-list.append")).addDropdown(l6(a.t("components.dropdown.unselected"),o0(this,n4),async m=>{v0(this,l5,w8).call(this,o0(this,A1).length,e1(m)),await v0(this,Z2,A3).call(this,!0)}))}};A1=new WeakMap,c5=new WeakMap,n4=new WeakMap,r5=new WeakMap,Z2=new WeakSet,A3=async function(g=!1){let w=o0(this,c5).call(this,e1(o0(this,A1)));g&&this.display(),await w},l5=new WeakSet,w8=function(g,w){he(o0(this,A1),g,[E5(o0(this,A1).map(b=>b[0]),o0(this,r5)),w])};var d6,o5,E3,n6=class extends $0.Modal{constructor(g){super(g.app);this.plugin=g;z0(this,d6,this.plugin.language.onChangeLanguage.listen(()=>{this.display()}));z0(this,o5,null);z0(this,E3,()=>{super.close()})}onOpen(){super.onOpen();let{scope:g}=this;this.display(),g.register([],"enter",async w=>{await this.confirm(o0(this,E3)),w.preventDefault(),w.stopPropagation()})}onClose(){super.onClose(),o0(this,d6).call(this)}close(){(async()=>{try{await this.cancel(o0(this,E3))}catch(g){console.error(g)}})()}display(){var e;let{plugin:g,modalEl:w}=this,{i18n:b}=g.language;(e=o0(this,o5))==null||e.settingEl.remove(),S0(this,o5,new $0.Setting(w).addButton(a=>a.setIcon(b.t("asset:components.dialog.cancel-icon")).setTooltip(b.t("components.dialog.cancel")).onClick(async()=>{await this.cancel(o0(this,E3))})).addButton(a=>a.setIcon(b.t("asset:components.dialog.confirm-icon")).setTooltip(b.t("components.dialog.confirm")).setCta().onClick(async()=>{await this.confirm(o0(this,E3))})))}confirm(g){g()}cancel(g){g()}};d6=new WeakMap,o5=new WeakMap,E3=new WeakMap;var H3,h4,m6,Q0,l1,v6=class extends Z1.PluginSettingTab{constructor(g){super(g.app,g);this.plugin=g;z0(this,h4);z0(this,Q0);z0(this,H3,v0(this,h4,m6).call(this));g.register(g.language.onChangeLanguage.listen(()=>{this.display()}))}hide(){super.hide(),S0(this,H3,v0(this,h4,m6).call(this))}display(){let{containerEl:g,plugin:w}=this,{settings:b,language:e}=w,{i18n:a}=e;g.replaceChildren(),g.createEl("h1",{text:a.t("name")}),new Z1.Setting(g).setName(a.t("settings.language")).setDesc(a.t("settings.language-description")).addDropdown(r1(()=>b.language,o4(V0.DEFAULTABLE_LANGUAGES,async m=>w.mutateSettings(o=>{o.language=m})),()=>{v0(this,Q0,l1).call(this)},{pre:m=>{m.addOption("",a.t("settings.language-default")).addOptions(Object.fromEntries(H4.map(o=>[o,a.t(`language:${o}`)])))}})).addExtraButton(U0(w,a.t("asset:settings.language-icon"),async()=>w.mutateSettings(m=>{m.language=c1.language}),()=>{v0(this,Q0,l1).call(this,!0)})),new Z1.Setting(g).setName(a.t("settings.all-settings")).addButton(U0(w,a.t("asset:settings.all-settings-actions.undo-icon"),async()=>w.mutateSettings(async m=>Object.assign(m,await o0(this,H3))),()=>{S0(this,H3,v0(this,h4,m6).call(this)),v0(this,Q0,l1).call(this,!0)},{post:m=>{m.setTooltip(a.t("settings.all-settings-actions.undo")).setDisabled(!0),o0(this,H3).then(()=>{m.setDisabled(!1).setCta()}).catch(o=>{console.error(o)})}})).addButton(U0(w,a.t("asset:settings.all-settings-actions.reload-icon"),async()=>w.mutateSettings(async m=>w.loadSettings(m)),()=>{v0(this,Q0,l1).call(this,!0)},{post:m=>{m.setTooltip(a.t("settings.all-settings-actions.reload"))}})).addButton(U0(w,a.t("asset:settings.all-settings-actions.reset-icon"),async()=>w.mutateSettings(m=>Object.assign(m,e1(c1))),()=>{v0(this,Q0,l1).call(this,!0)},{post:m=>{m.setTooltip(a.t("settings.all-settings-actions.reset"))}})),new Z1.Setting(g).setName(a.t("settings.add-to-command")).addToggle(r1(()=>b.addToCommand,async m=>w.mutateSettings(o=>{o.addToCommand=m}),()=>{v0(this,Q0,l1).call(this)})).addExtraButton(U0(w,a.t("asset:settings.add-to-command-icon"),async()=>w.mutateSettings(m=>{m.addToCommand=c1.addToCommand}),()=>{v0(this,Q0,l1).call(this,!0)})),new Z1.Setting(g).setName(a.t("settings.add-to-context-menu")).addToggle(r1(()=>b.addToContextMenu,async m=>w.mutateSettings(o=>{o.addToContextMenu=m}),()=>{v0(this,Q0,l1).call(this)})).addExtraButton(U0(w,a.t("asset:settings.add-to-context-menu-icon"),async()=>w.mutateSettings(m=>{m.addToContextMenu=c1.addToContextMenu}),()=>{v0(this,Q0,l1).call(this,!0)})),new Z1.Setting(g).setName(a.t("settings.hide-status-bar")).addDropdown(r1(()=>b.hideStatusBar,o4(V0.HIDE_STATUS_BAR_OPTIONS,async m=>w.mutateSettings(o=>{o.hideStatusBar=m})),()=>{v0(this,Q0,l1).call(this)},{pre:m=>{m.addOptions(Object.fromEntries(V0.HIDE_STATUS_BAR_OPTIONS.map(o=>[o,a.t(`settings.hide-status-bar-options.${o}`)])))}})).addExtraButton(U0(w,a.t("asset:settings.hide-status-bar-icon"),async()=>w.mutateSettings(m=>{m.hideStatusBar=c1.hideStatusBar}),()=>{v0(this,Q0,l1).call(this,!0)})),new Z1.Setting(g).setName(a.t("settings.notice-timeout")).setDesc(a.t("settings.notice-timeout-description")).addText(r1(()=>b.noticeTimeout.toString(),f8(async m=>w.mutateSettings(o=>{o.noticeTimeout=m})),()=>{v0(this,Q0,l1).call(this)})).addExtraButton(U0(w,a.t("asset:settings.notice-timeout-icon"),async()=>w.mutateSettings(m=>{m.noticeTimeout=c1.noticeTimeout}),()=>{v0(this,Q0,l1).call(this,!0)})),new Z1.Setting(g).setName(a.t("settings.error-notice-timeout")).setDesc(a.t("settings.error-notice-timeout-description")).addText(r1(()=>b.errorNoticeTimeout.toString(),f8(async m=>w.mutateSettings(o=>{o.errorNoticeTimeout=m})),()=>{v0(this,Q0,l1).call(this)})).addExtraButton(U0(w,a.t("asset:settings.error-notice-timeout-icon"),async()=>w.mutateSettings(m=>{m.noticeTimeout=c1.noticeTimeout}),()=>{v0(this,Q0,l1).call(this,!0)})),new Z1.Setting(g).setName(a.t("settings.profiles")).setDesc(a.t("settings.list-description",{count:ue(b.profiles)})).addButton(m=>m.setIcon(a.t("asset:generic.edit-list-icon")).setTooltip(a.t("generic.edit")).onClick(()=>{new o6(w,Object.entries(b.profiles),async o=>{await w.mutateSettings(n=>{n.profiles=Object.fromEntries(o)}),v0(this,Q0,l1).call(this,!0)}).open()})).addExtraButton(U0(w,a.t("asset:settings.profiles-icon"),async()=>w.mutateSettings(m=>{m.profiles=e1(c1.profiles)}),()=>{v0(this,Q0,l1).call(this,!0)})),g.createEl("h2",{text:a.t("settings.advanced-settings")}),new Z1.Setting(g).setName(a.t("settings.preferred-renderer")).addDropdown(r1(()=>b.preferredRenderer,o4(V0.PREFERRED_RENDERER_OPTIONS,async m=>w.mutateSettings(o=>{o.preferredRenderer=m})),()=>{v0(this,Q0,l1).call(this)},{pre:m=>{m.addOptions(Object.fromEntries(V0.PREFERRED_RENDERER_OPTIONS.map(o=>[o,ee(a.t(`types.renderers.${o}`),e.language)])))}})).addExtraButton(U0(w,a.t("asset:settings.preferred-renderer-icon"),async()=>w.mutateSettings(m=>{m.preferredRenderer=c1.preferredRenderer}),()=>{v0(this,Q0,l1).call(this,!0)}))}};H3=new WeakMap,h4=new WeakSet,m6=async function(){let{plugin:g}=this,{settings:w}=g;return new Promise(Y2((b,e)=>{let a=g.on("mutate-settings",le,()=>{try{b(w)}catch(m){e(m)}finally{a()}});g.register(a)}))},Q0=new WeakSet,l1=function(g=!1){this.plugin.saveSettings().catch(w=>{console.error(w)}),g&&this.display()};function Ls(l){let u=document.querySelector("div.status-bar");return u!==null&&(l!=null?l:()=>{})(u),u}var u4,h5,_8,u5,y8,g6=class{constructor(u){this.plugin=u;z0(this,h5);z0(this,u5);z0(this,u4,[])}load(){let{plugin:u}=this;u.app.workspace.onLayoutReady(()=>{Ls(g=>{let w=new MutationObserver(()=>{v0(this,h5,_8).call(this,g)});u.register(()=>{try{w.disconnect()}finally{v0(this,u5,y8).call(this,g)}}),this.update(),w.observe(g,{attributeFilter:["style"]})})===null&&S2(()=>u.language.i18n.t("errors.cannot-find-status-bar"),u.settings.errorNoticeTimeout,u)}),u.on("mutate-settings",g=>g.hideStatusBar,()=>{this.update()})}hide(u){return o0(this,u4).push(u),this.update(),()=>{G6(o0(this,u4),u),this.update()}}update(){Ls(u=>{v0(this,u5,y8).call(this,u),v0(this,h5,_8).call(this,u)})}};u4=new WeakMap,h5=new WeakSet,_8=function(u){(this.plugin.settings.hideStatusBar==="always"||o0(this,u4).some(g=>g()))&&(u.style.visibility="hidden")},u5=new WeakSet,y8=function(u){u.style.visibility=""};var v5=require("obsidian");var $s=x2(ks());function U2(){}function L8(l){return l()}function Es(){return Object.create(null)}function D3(l){l.forEach(L8)}function U1(l){return typeof l=="function"}function Ts(l,u){return l!=l?u==u:l!==u||l&&typeof l=="object"||typeof l=="function"}function Vs(l){return Object.keys(l).length===0}function T3(l){return l==null?"":l}function v4(l){return l&&U1(l.destroy)?l.destroy:U2}var Rs=!1;function Yu(){Rs=!0}function Xu(){Rs=!1}function s1(l,u){l.appendChild(u)}function Fs(l,u,g){let w=Ju(l);if(!w.getElementById(u)){let b=k1("style");b.id=u,b.textContent=g,Qu(w,b)}}function Ju(l){if(!l)return document;let u=l.getRootNode?l.getRootNode():l.ownerDocument;return u&&u.host?u:l.ownerDocument}function Qu(l,u){return s1(l.head||l,u),u.sheet}function Bs(l,u,g){l.insertBefore(u,g||null)}function A8(l){l.parentNode&&l.parentNode.removeChild(l)}function k1(l){return document.createElement(l)}function k8(l){return document.createTextNode(l)}function r3(){return k8(" ")}function l3(l,u,g,w){return l.addEventListener(u,g,w),()=>l.removeEventListener(u,g,w)}function n1(l,u,g){g==null?l.removeAttribute(u):l.getAttribute(u)!==g&&l.setAttribute(u,g)}function ed(l){return Array.from(l.childNodes)}function Ps(l,u){u=""+u,l.wholeText!==u&&(l.data=u)}function E8(l,u){l.value=u==null?"":u}var H8;function d5(l){H8=l}var m4=[];var Hs=[],f6=[],Ds=[],td=Promise.resolve(),x8=!1;function sd(){x8||(x8=!0,td.then(Os))}function S8(l){f6.push(l)}var M8=new Set,d4=0;function Os(){if(d4!==0)return;let l=H8;do{try{for(;d4<m4.length;){let u=m4[d4];d4++,d5(u),id(u.$$)}}catch(u){throw m4.length=0,d4=0,u}for(d5(null),m4.length=0,d4=0;Hs.length;)Hs.pop()();for(let u=0;u<f6.length;u+=1){let g=f6[u];M8.has(g)||(M8.add(g),g())}f6.length=0}while(m4.length);for(;Ds.length;)Ds.pop()();x8=!1,M8.clear(),d5(l)}function id(l){if(l.fragment!==null){l.update(),D3(l.before_update);let u=l.dirty;l.dirty=[-1],l.fragment&&l.fragment.p(l.ctx,u),l.after_update.forEach(S8)}}var ad=new Set;function cd(l,u){l&&l.i&&(ad.delete(l),l.i(u))}var pp=typeof window!="undefined"?window:typeof globalThis!="undefined"?globalThis:global;function rd(l,u,g,w){let{fragment:b,after_update:e}=l.$$;b&&b.m(u,g),w||S8(()=>{let a=l.$$.on_mount.map(L8).filter(U1);l.$$.on_destroy?l.$$.on_destroy.push(...a):D3(a),l.$$.on_mount=[]}),e.forEach(S8)}function Is(l,u){let g=l.$$;g.fragment!==null&&(D3(g.on_destroy),g.fragment&&g.fragment.d(u),g.on_destroy=g.fragment=null,g.ctx=[])}function ld(l,u){l.$$.dirty[0]===-1&&(m4.push(l),sd(),l.$$.dirty.fill(0)),l.$$.dirty[u/31|0]|=1<<u%31}function Zs(l,u,g,w,b,e,a,m=[-1]){let o=H8;d5(l);let n=l.$$={fragment:null,ctx:[],props:e,update:U2,not_equal:b,bound:Es(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u.context||(o?o.$$.context:[])),callbacks:Es(),dirty:m,skip_bound:!1,root:u.target||o.$$.root};a&&a(n.root);let c=!1;if(n.ctx=g?g(l,u.props||{},(v,f,...i)=>{let t=i.length?i[0]:f;return n.ctx&&b(n.ctx[v],n.ctx[v]=t)&&(!n.skip_bound&&n.bound[v]&&n.bound[v](t),c&&ld(l,v)),f}):[],n.update(),c=!0,D3(n.before_update),n.fragment=w?w(n.ctx):!1,u.target){if(u.hydrate){Yu();let v=ed(u.target);n.fragment&&n.fragment.l(v),v.forEach(A8)}else n.fragment&&n.fragment.c();u.intro&&cd(l.$$.fragment),rd(l,u.target,u.anchor,u.customElement),Xu(),Os()}d5(o)}var od;typeof HTMLElement=="function"&&(od=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){let{on_mount:l}=this.$$;this.$$.on_disconnect=l.map(L8).filter(U1);for(let u in this.$$.slotted)this.appendChild(this.$$.slotted[u])}attributeChangedCallback(l,u,g){this[l]=g}disconnectedCallback(){D3(this.$$.on_disconnect)}$destroy(){Is(this,1),this.$destroy=U2}$on(l,u){if(!U1(u))return U2;let g=this.$$.callbacks[l]||(this.$$.callbacks[l]=[]);return g.push(u),()=>{let w=g.indexOf(u);w!==-1&&g.splice(w,1)}}$set(l){this.$$set&&!Vs(l)&&(this.$$.skip_bound=!0,this.$$set(l),this.$$.skip_bound=!1)}});var z6=class{$destroy(){Is(this,1),this.$destroy=U2}$on(u,g){if(!U1(g))return U2;let w=this.$$.callbacks[u]||(this.$$.callbacks[u]=[]);return w.push(g),()=>{let b=w.indexOf(g);b!==-1&&w.splice(b,1)}}$set(u){this.$$set&&!Vs(u)&&(this.$$.skip_bound=!0,this.$$set(u),this.$$.skip_bound=!1)}};var g4=require("obsidian");function hd(l){Fs(l,"svelte-owmqz5",".document-search-container.svelte-owmqz5{margin:0}.document-search.svelte-owmqz5{flex-wrap:wrap}button.mod-cta.svelte-owmqz5{background-color:var(--interactive-accent) !important;color:var(--text-on-accent) !important}")}function ud(l){let u,g,w,b,e,a,m,o,n,c,v,f,i,t,p,d,r,z,M,_,L,S,y,A,H,T,V,Z,B,N;return{c(){u=k1("div"),g=k1("div"),w=k1("div"),b=k1("button"),m=r3(),o=k1("button"),v=r3(),f=k1("button"),p=r3(),d=k1("input"),r=r3(),z=k1("div"),M=k1("button"),L=r3(),S=k1("button"),A=r3(),H=k1("div"),T=k8(l[5]),V=r3(),Z=k1("button"),n1(b,"class",e=T3(`document-search-button${l[0].caseSensitive?" mod-cta":""}`)+" svelte-owmqz5"),n1(o,"class",n=T3(`document-search-button${l[0].wholeWord?" mod-cta":""}`)+" svelte-owmqz5"),n1(f,"class",i=T3(`document-search-button${l[0].regex?" mod-cta":""}`)+" svelte-owmqz5"),n1(w,"class","document-search-buttons"),n1(d,"class","document-search-input"),n1(d,"type","text"),n1(d,"placeholder",l[2]),n1(M,"class","document-search-button"),n1(S,"class","document-search-button"),n1(H,"class","document-search-results"),n1(Z,"class","document-search-close-button"),n1(z,"class","document-search-buttons"),n1(g,"class","document-search svelte-owmqz5"),n1(u,"class","document-search-container svelte-owmqz5")},m(E,P){Bs(E,u,P),s1(u,g),s1(g,w),s1(w,b),s1(w,m),s1(w,o),s1(w,v),s1(w,f),s1(g,p),s1(g,d),E8(d,l[0].findText),s1(g,r),s1(g,z),s1(z,M),s1(z,L),s1(z,S),s1(z,A),s1(z,H),s1(H,T),s1(z,V),s1(z,Z),B||(N=[l3(b,"click",l[7]),v4(a=g4.setIcon.call(null,b,l[1]("asset:components.find.case-sensitive-icon"))),l3(o,"click",l[8]),v4(c=g4.setIcon.call(null,o,l[1]("asset:components.find.whole-word-icon"))),l3(f,"click",l[9]),v4(t=g4.setIcon.call(null,f,l[1]("asset:components.find.regex-icon"))),l3(d,"input",l[10]),l3(M,"click",l[11]),v4(_=g4.setIcon.call(null,M,l[1]("asset:components.find.previous-icon"))),l3(S,"click",l[12]),v4(y=g4.setIcon.call(null,S,l[1]("asset:components.find.next-icon"))),l3(Z,"click",function(){U1(l[3])&&l[3].apply(this,arguments)})],B=!0)},p(E,[P]){l=E,P&1&&e!==(e=T3(`document-search-button${l[0].caseSensitive?" mod-cta":""}`)+" svelte-owmqz5")&&n1(b,"class",e),a&&U1(a.update)&&P&2&&a.update.call(null,l[1]("asset:components.find.case-sensitive-icon")),P&1&&n!==(n=T3(`document-search-button${l[0].wholeWord?" mod-cta":""}`)+" svelte-owmqz5")&&n1(o,"class",n),c&&U1(c.update)&&P&2&&c.update.call(null,l[1]("asset:components.find.whole-word-icon")),P&1&&i!==(i=T3(`document-search-button${l[0].regex?" mod-cta":""}`)+" svelte-owmqz5")&&n1(f,"class",i),t&&U1(t.update)&&P&2&&t.update.call(null,l[1]("asset:components.find.regex-icon")),P&4&&n1(d,"placeholder",l[2]),P&1&&d.value!==l[0].findText&&E8(d,l[0].findText),_&&U1(_.update)&&P&2&&_.update.call(null,l[1]("asset:components.find.previous-icon")),y&&U1(y.update)&&P&2&&y.update.call(null,l[1]("asset:components.find.next-icon")),P&32&&Ps(T,l[5])},i:U2,o:U2,d(E){E&&A8(u),B=!1,D3(N)}}}function dd(l,u,g){let{i18n:w=xs}=u,{params:b={caseSensitive:!1,findText:"",regex:!1,wholeWord:!1}}=u,{inputPlaceholder:e=""}=u,{onClose:a=()=>{}}=u,{onFind:m=(d,r)=>{}}=u,{onParamsChanged:o=d=>{}}=u,{searchResult:n=""}=u,c=()=>{g(0,b.caseSensitive=!b.caseSensitive,b)},v=()=>{g(0,b.wholeWord=!b.wholeWord,b)},f=()=>{g(0,b.regex=!b.regex,b)};function i(){b.findText=this.value,g(0,b)}let t=()=>{m(1,b)},p=()=>{m(0,b)};return l.$$set=d=>{"i18n"in d&&g(1,w=d.i18n),"params"in d&&g(0,b=d.params),"inputPlaceholder"in d&&g(2,e=d.inputPlaceholder),"onClose"in d&&g(3,a=d.onClose),"onFind"in d&&g(4,m=d.onFind),"onParamsChanged"in d&&g(6,o=d.onParamsChanged),"searchResult"in d&&g(5,n=d.searchResult)},l.$$.update=()=>{if(l.$$.dirty&65)e:o(b)},[b,w,e,a,m,n,o,c,v,f,i,t,p]}var D8=class extends z6{constructor(u){super(),Zs(this,u,dd,ud,Ts,{i18n:1,params:0,inputPlaceholder:2,onClose:3,onFind:4,onParamsChanged:6,searchResult:5},hd)}},Us=D8;var Ks=x2(Ns()),Ys=x2(Ws());var Xs=x2(js()),Js=x2(Gs()),Qs=x2(qs());var g5,F3,o3,p5,n3,p4,P8=class extends n6{constructor(g,w,b){super(g);z0(this,n3);z0(this,g5,void 0);z0(this,F3,void 0);z0(this,o3,null);z0(this,p5,void 0);S0(this,g5,w),S0(this,F3,e1(w)),S0(this,p5,b)}display(){super.display();let{contentEl:g,plugin:w}=this,b=n5(g),e=o0(this,g5),a=o0(this,F3),m=o0(this,o3),{settings:o,language:n}=w,{profiles:c}=o,{i18n:v}=n,f=E5(Object.keys(c));b.createEl("h1",{text:v.t("generic.edit")}),new v5.Setting(b).setName(v.t("components.terminal.working-directory")).addText(r1(()=>{var i;return(i=a.cwd)!=null?i:""},i=>{a.cwd=i===""?void 0:i},()=>{v0(this,n3,p4).call(this)},{post:i=>{i.setPlaceholder(v.t("components.terminal.working-directory-placeholder"))}})).addExtraButton(U0(w,v.t("asset:components.terminal.working-directory-icon"),()=>{a.cwd=e.cwd},()=>{v0(this,n3,p4).call(this,!0)})),new v5.Setting(b).setName(v.t("components.terminal.profile")).addDropdown(r1(()=>m===null?f:m,i=>{let t=c[i];if(J0(t)){S0(this,o3,null);return}S0(this,o3,i),o0(this,F3).profile=e1(t)},()=>{v0(this,n3,p4).call(this,!0)},{pre:i=>{i.addOption(f,v.t("components.dropdown.unselected")).addOptions(Object.fromEntries(Object.entries(c).map(t=>[t[0],V0.Profile.nameOrID(t)])))}})).addButton(i=>i.setIcon(v.t("asset:generic.edit-icon")).setTooltip(v.t("generic.edit")).onClick(()=>{new J4(w,a.profile,t=>{S0(this,o3,null),a.profile=t,v0(this,n3,p4).call(this,!0)}).open()})).addExtraButton(U0(w,v.t("asset:components.terminal.profile-icon"),()=>{S0(this,o3,null),a.profile=e1(e.profile)},()=>{v0(this,n3,p4).call(this,!0)}))}async confirm(g){await o0(this,p5).call(this,g3(o0(this,F3))),await super.confirm(g)}};g5=new WeakMap,F3=new WeakMap,o3=new WeakMap,p5=new WeakMap,n3=new WeakSet,p4=function(g=!1){g&&this.display()};var z4,f5,z5,b5,N1,f4,W1,V3,j1,R3,N2,O8,b4,y6,S6,ei,C6,I8,Z8,M6,w4,x6,y2=class extends v5.ItemView{constructor(g,w){super(w);this.plugin=g;z0(this,N1);z0(this,W1);z0(this,j1);z0(this,N2);z0(this,b4);z0(this,S6);z0(this,w4);z0(this,z4,null);z0(this,f5,null);z0(this,z5,!1);z0(this,b5,{__type:y2.State.TYPE,profile:V0.Profile.DEFAULTS.invalid})}async setState(g,w){await super.setState(g,w),ne(y2.State.TYPE,g)&&(S0(this,N1,g3(g),C6),v0(this,w4,x6).call(this))}getState(){var w;let g=(w=o0(this,W1,V3))==null?void 0:w.serialize();return typeof g!="undefined"&&S0(this,N1,te(o0(this,N1,f4),b=>{b.serial=g}),C6),Object.assign(super.getState(),o0(this,N1,f4))}getDisplayText(){return this.plugin.language.i18n.t(`components.${y2.type.id}.display-name`,{name:o0(this,b4,y6)})}getIcon(){return this.plugin.language.i18n.t(`asset:components.${y2.type.id}.icon`)}getViewType(){return y2.namespacedViewType}onPaneMenu(g,w){super.onPaneMenu(g,w);let{plugin:b,contentEl:e}=this,{i18n:a}=b.language;g.addSeparator().addItem(m=>m.setTitle(a.t("menus.terminal.find")).setIcon(a.t("asset:menus.terminal.find-icon")).setDisabled(o0(this,j1,R3)!==null).onClick(()=>{let o=(v,f,i=!1)=>{var d,r;let t=(d=o0(this,W1,V3))==null?void 0:d.addons.search;if(J0(t))return;(v===0?t.findNext.bind(t):t.findPrevious.bind(t))(f.findText,{caseSensitive:f.caseSensitive,decorations:{activeMatchColorOverviewRuler:"#00000000",matchOverviewRuler:"#00000000"},incremental:i,regex:f.regex,wholeWord:f.wholeWord}),f.findText===""&&((r=o0(this,j1,R3))==null||r.$set({searchResult:""}))},n={},{firstElementChild:c}=e;c!==null&&(n.anchor=c),S0(this,j1,new Us({intro:!0,props:{i18n:a.t,onClose:()=>{S0(this,j1,null,Z8)},onFind:o,onParamsChanged:v=>{var f;(f=o0(this,W1,V3))==null||f.addons.search.clearDecorations(),o(1,v)}},target:e,...n}),Z8)})).addItem(m=>m.setTitle(a.t("menus.terminal.restart")).setIcon(a.t("asset:menus.terminal.restart-icon")).onClick(()=>{v0(this,w4,x6).call(this)})).addItem(m=>m.setTitle(a.t("generic.edit")).setIcon(a.t("asset:generic.edit-icon")).onClick(()=>{new P8(b,o0(this,N1,f4),o=>{S0(this,N1,o,C6),v0(this,w4,x6).call(this)}).open()})).addItem(m=>{var o;return m.setTitle(a.t("menus.terminal.save-as-HTML")).setIcon(a.t("asset:menus.terminal.save-as-HTML-icon")).setDisabled(J0((o=o0(this,W1,V3))==null?void 0:o.addons.serialize)).onClick(()=>{var c;let n=(c=o0(this,W1,V3))==null?void 0:c.addons.serialize;J0(n)||re(n.serializeAsHTML({includeGlobalBackground:!1,onlySelection:!1}),"text/html; charset=UTF-8;",`${o0(this,b4,y6)}.html`)})})}async onOpen(){await super.onOpen();let{plugin:g}=this,{app:w,language:b,statusBarHider:e}=g,{workspace:a}=w;this.register(b.onChangeLanguage.listen(()=>{_7(this)})),S0(this,N2,a.getActiveViewOfType(y2)===this,M6),this.registerEvent(w.workspace.on("active-leaf-change",m=>{if(m===this.leaf){S0(this,N2,!0,M6);return}S0(this,N2,!1,M6)})),this.register(e.hide(()=>o0(this,S6,ei))),this.registerEvent(a.on("active-leaf-change",()=>{e.update()})),this.register(()=>{S0(this,W1,null,I8)})}},f1=y2;z4=new WeakMap,f5=new WeakMap,z5=new WeakMap,b5=new WeakMap,N1=new WeakSet,f4=function(){return o0(this,b5)},W1=new WeakSet,V3=function(){return o0(this,z4)},j1=new WeakSet,R3=function(){return o0(this,f5)},N2=new WeakSet,O8=function(){return o0(this,z5)},b4=new WeakSet,y6=function(){let{profile:g}=o0(this,N1,f4);if("executable"in g){let{executable:w}=g;if(typeof w=="string")return U6(w,ce(w))}if("name"in g){let{name:w}=g;if(typeof w=="string")return w}return this.plugin.language.i18n.t("components.terminal.unknown-profile-name")},S6=new WeakSet,ei=function(){switch(this.plugin.settings.hideStatusBar){case"focused":return o0(this,N2,O8);case"running":return!0;case"always":case"never":return!1}},C6=function(g){S0(this,b5,g),_7(this)},I8=function(g){var e;let{plugin:w}=this;if((e=o0(this,z4))==null||e.close().catch(a=>{J2(R2(a),()=>w.language.i18n.t("errors.failed-to-kill-pseudoterminal"),w)}),S0(this,z4,g),g===null)return;let{terminal:b}=g;o0(this,N2,O8)?b.focus():b.blur()},Z8=function(g){var w;(w=o0(this,j1,R3))==null||w.$destroy(),S0(this,f5,g)},M6=function(g){var b;let w=(b=o0(this,W1,V3))==null?void 0:b.terminal;g?w==null||w.focus():w==null||w.blur(),S0(this,z5,g)},w4=new WeakSet,x6=function(){let{contentEl:g,plugin:w,leaf:b}=this,e=o0(this,N1,f4),{profile:a,cwd:m,serial:o}=e,{app:n,language:c,settings:v}=w,{i18n:f}=c,{requestSaveLayout:i}=n.workspace;if(S2(()=>f.t("notices.spawning-terminal",{name:o0(this,b4,y6)}),v.noticeTimeout,w),!S3[a.type].integratable){(async()=>{try{await z8(w,a,m)}catch(t){J2(R2(t),()=>f.t("errors.error-spawning-terminal"),w)}})(),b.detach();return}g.createDiv({cls:y2.divClass.namespaced(w)},t=>{let p=me(t,()=>{try{let d=new y2.EMULATOR(w,t,async y=>{typeof o!="undefined"&&y.write(`${f.t("components.terminal.restored-history",{time:new Date().toLocaleString(c.language)})}`);let A=await z8(w,a,m);if(A===null){let H=new a4(f.t("components.terminal.unsupported-profile",{profile:JSON.stringify(a,null,m3)}));return H.onExit.finally(c.onChangeLanguage.listen(()=>{H.text=f.t("components.terminal.unsupported-profile",{profile:JSON.stringify(a,null,m3)})})),H}return A},o,{allowProposedApi:!0},{disposer:new q5(()=>{t.remove()},()=>{var y;(y=o0(this,j1,R3))==null||y.$set({searchResult:""})}),ligatures:new Ks.LigaturesAddon({}),renderer:new P2(()=>new $s.CanvasAddon,()=>new Qs.WebglAddon(!1)),search:new Ys.SearchAddon,unicode11:new Xs.Unicode11Addon,webLinks:new Js.WebLinksAddon((y,A)=>ve(A),{})}),{pseudoterminal:r,terminal:z,addons:M}=d,{disposer:_,renderer:L,search:S}=M;r.then(async y=>y.onExit).then(y=>{S2(()=>f.t("notices.terminal-exited",{code:y}),K1(G9,y)?v.noticeTimeout:v.errorNoticeTimeout,w)},y=>{J2(R2(y),()=>f.t("errors.error-spawning-terminal"),w)}),z.onWriteParsed(i),z.onResize(i),z.unicode.activeVersion="11",_.push(w.on("mutate-settings",y=>y.preferredRenderer,y=>{L.use(y)})),L.use(v.preferredRenderer),S.onDidChangeResults(y=>{var T,V;if(J0(y)){(T=o0(this,j1,R3))==null||T.$set({searchResult:f.t("components.find.too-many-search-results")});return}let{resultIndex:A,resultCount:H}=y;(V=o0(this,j1,R3))==null||V.$set({searchResult:f.t("components.find.search-results",{replace:{count:H,index:A+1}})})}),d.resize().catch(y=>{console.warn(y)}),de(t,y=>{y.contentBoxSize.some(A=>A.blockSize<=0||A.inlineSize<=0)||d.resize(!1).catch(A=>{console.warn(A)})}),S0(this,W1,d,I8)}finally{p.disconnect()}})})},G0(f1,"type",new G3("terminal")),G0(f1,"divClass",y2.type),G0(f1,"namespacedViewType");(g=>{g.EMULATOR=G5;let u;(b=>b.TYPE="8d54e44a-32e7-4297-8ae2-cff88e92ce28")(u=g.State||(g.State={}))})(f1||(f1={}));var ai=require("obsidian");var U8='<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>',N8='</title><path d="',W8='"/></svg>';var ti={title:"Linux",slug:"linux",get svg(){return U8+"Linux"+N8+this.path+W8},path:"M12.504 0c-.155 0-.315.008-.48.021-4.226.333-3.105 4.807-3.17 6.298-.076 1.092-.3 1.953-1.05 3.02-.885 1.051-2.127 2.75-2.716 4.521-.278.832-.41 1.684-.287 2.489a.424.424 0 00-.11.135c-.26.268-.45.6-.663.839-.199.199-.485.267-.797.4-.313.136-.658.269-.864.68-.09.189-.136.394-.132.602 0 .199.027.4.055.536.058.399.116.728.04.97-.249.68-.28 1.145-.106 1.484.174.334.535.47.94.601.81.2 1.91.135 2.774.6.926.466 1.866.67 2.616.47.526-.116.97-.464 1.208-.946.587-.003 1.23-.269 2.26-.334.699-.058 1.574.267 2.577.2.025.134.063.198.114.333l.003.003c.391.778 1.113 1.132 1.884 1.071.771-.06 1.592-.536 2.257-1.306.631-.765 1.683-1.084 2.378-1.503.348-.199.629-.469.649-.853.023-.4-.2-.811-.714-1.376v-.097l-.003-.003c-.17-.2-.25-.535-.338-.926-.085-.401-.182-.786-.492-1.046h-.003c-.059-.054-.123-.067-.188-.135a.357.357 0 00-.19-.064c.431-1.278.264-2.55-.173-3.694-.533-1.41-1.465-2.638-2.175-3.483-.796-1.005-1.576-1.957-1.56-3.368.026-2.152.236-6.133-3.544-6.139zm.529 3.405h.013c.213 0 .396.062.584.198.19.135.33.332.438.533.105.259.158.459.166.724 0-.02.006-.04.006-.06v.105a.086.086 0 01-.004-.021l-.004-.024a1.807 1.807 0 01-.15.706.953.953 0 01-.213.335.71.71 0 00-.088-.042c-.104-.045-.198-.064-.284-.133a1.312 1.312 0 00-.22-.066c.05-.06.146-.133.183-.198.053-.128.082-.264.088-.402v-.02a1.21 1.21 0 00-.061-.4c-.045-.134-.101-.2-.183-.333-.084-.066-.167-.132-.267-.132h-.016c-.093 0-.176.03-.262.132a.8.8 0 00-.205.334 1.18 1.18 0 00-.09.4v.019c.002.089.008.179.02.267-.193-.067-.438-.135-.607-.202a1.635 1.635 0 01-.018-.2v-.02a1.772 1.772 0 01.15-.768c.082-.22.232-.406.43-.533a.985.985 0 01.594-.2zm-2.962.059h.036c.142 0 .27.048.399.135.146.129.264.288.344.465.09.199.14.4.153.667v.004c.007.134.006.2-.002.266v.08c-.03.007-.056.018-.083.024-.152.055-.274.135-.393.2.012-.09.013-.18.003-.267v-.015c-.012-.133-.04-.2-.082-.333a.613.613 0 00-.166-.267.248.248 0 00-.183-.064h-.021c-.071.006-.13.04-.186.132a.552.552 0 00-.12.27.944.944 0 00-.023.33v.015c.012.135.037.2.08.334.046.134.098.2.166.268.01.009.02.018.034.024-.07.057-.117.07-.176.136a.304.304 0 01-.131.068 2.62 2.62 0 01-.275-.402 1.772 1.772 0 01-.155-.667 1.759 1.759 0 01.08-.668 1.43 1.43 0 01.283-.535c.128-.133.26-.2.418-.2zm1.37 1.706c.332 0 .733.065 1.216.399.293.2.523.269 1.052.468h.003c.255.136.405.266.478.399v-.131a.571.571 0 01.016.47c-.123.31-.516.643-1.063.842v.002c-.268.135-.501.333-.775.465-.276.135-.588.292-1.012.267a1.139 1.139 0 01-.448-.067 3.566 3.566 0 01-.322-.198c-.195-.135-.363-.332-.612-.465v-.005h-.005c-.4-.246-.616-.512-.686-.71-.07-.268-.005-.47.193-.6.224-.135.38-.271.483-.336.104-.074.143-.102.176-.131h.002v-.003c.169-.202.436-.47.839-.601.139-.036.294-.065.466-.065zm2.8 2.142c.358 1.417 1.196 3.475 1.735 4.473.286.534.855 1.659 1.102 3.024.156-.005.33.018.513.064.646-1.671-.546-3.467-1.089-3.966-.22-.2-.232-.335-.123-.335.59.534 1.365 1.572 1.646 2.757.13.535.16 1.104.021 1.67.067.028.135.06.205.067 1.032.534 1.413.938 1.23 1.537v-.043c-.06-.003-.12 0-.18 0h-.016c.151-.467-.182-.825-1.065-1.224-.915-.4-1.646-.336-1.77.465-.008.043-.013.066-.018.135-.068.023-.139.053-.209.064-.43.268-.662.669-.793 1.187-.13.533-.17 1.156-.205 1.869v.003c-.02.334-.17.838-.319 1.35-1.5 1.072-3.58 1.538-5.348.334a2.645 2.645 0 00-.402-.533 1.45 1.45 0 00-.275-.333c.182 0 .338-.03.465-.067a.615.615 0 00.314-.334c.108-.267 0-.697-.345-1.163-.345-.467-.931-.995-1.788-1.521-.63-.4-.986-.87-1.15-1.396-.165-.534-.143-1.085-.015-1.645.245-1.07.873-2.11 1.274-2.763.107-.065.037.135-.408.974-.396.751-1.14 2.497-.122 3.854a8.123 8.123 0 01.647-2.876c.564-1.278 1.743-3.504 1.836-5.268.048.036.217.135.289.202.218.133.38.333.59.465.21.201.477.335.876.335.039.003.075.006.11.006.412 0 .73-.134.997-.268.29-.134.52-.334.74-.4h.005c.467-.135.835-.402 1.044-.7zm2.185 8.958c.037.6.343 1.245.882 1.377.588.134 1.434-.333 1.791-.765l.211-.01c.315-.007.577.01.847.268l.003.003c.208.199.305.53.391.876.085.4.154.78.409 1.066.486.527.645.906.636 1.14l.003-.007v.018l-.003-.012c-.015.262-.185.396-.498.595-.63.401-1.746.712-2.457 1.57-.618.737-1.37 1.14-2.036 1.191-.664.053-1.237-.2-1.574-.898l-.005-.003c-.21-.4-.12-1.025.056-1.69.176-.668.428-1.344.463-1.897.037-.714.076-1.335.195-1.814.12-.465.308-.797.641-.984l.045-.022zm-10.814.049h.01c.053 0 .105.005.157.014.376.055.706.333 1.023.752l.91 1.664.003.003c.243.533.754 1.064 1.189 1.637.434.598.77 1.131.729 1.57v.006c-.057.744-.48 1.148-1.125 1.294-.645.135-1.52.002-2.395-.464-.968-.536-2.118-.469-2.857-.602-.369-.066-.61-.2-.723-.4-.11-.2-.113-.602.123-1.23v-.004l.002-.003c.117-.334.03-.752-.027-1.118-.055-.401-.083-.71.043-.94.16-.334.396-.4.69-.533.294-.135.64-.202.915-.47h.002v-.002c.256-.268.445-.601.668-.838.19-.201.38-.336.663-.336zm7.159-9.074c-.435.201-.945.535-1.488.535-.542 0-.97-.267-1.28-.466-.154-.134-.28-.268-.373-.335-.164-.134-.144-.333-.074-.333.109.016.129.134.199.2.096.066.215.2.36.333.292.2.68.467 1.167.467.485 0 1.053-.267 1.398-.466.195-.135.445-.334.648-.467.156-.136.149-.267.279-.267.128.016.034.134-.147.332a8.097 8.097 0 01-.69.468zm-1.082-1.583V5.64c-.006-.02.013-.042.029-.05.074-.043.18-.027.26.004.063 0 .16.067.15.135-.006.049-.085.066-.135.066-.055 0-.092-.043-.141-.068-.052-.018-.146-.008-.163-.065zm-.551 0c-.02.058-.113.049-.166.066-.047.025-.086.068-.14.068-.05 0-.13-.02-.136-.068-.01-.066.088-.133.15-.133.08-.031.184-.047.259-.005.019.009.036.03.03.05v.02h.003z",source:"https://www.linuxfoundation.org/the-linux-mark/",hex:"FCC624",guidelines:void 0,license:void 0};var si={title:"macOS",slug:"macos",get svg(){return U8+"macOS"+N8+this.path+W8},path:"M0 14.727h.941v-2.453c0-.484.318-.835.771-.835.439 0 .71.276.71.722v2.566h.915V12.25c0-.48.31-.812.764-.812.46 0 .718.28.718.77v2.518h.94v-2.748c0-.801-.517-1.334-1.307-1.334-.578 0-1.054.31-1.247.805h-.023c-.147-.514-.552-.805-1.118-.805-.545 0-.968.306-1.142.771H.903v-.695H0v4.006zm7.82-.646c-.408 0-.68-.208-.68-.537 0-.318.26-.522.714-.552l.926-.057v.307c0 .483-.427.839-.96.839zm-.284.71c.514 0 1.017-.268 1.248-.703h.018v.639h.908v-2.76c0-.804-.647-1.33-1.64-1.33-1.021 0-1.66.537-1.701 1.285h.873c.06-.332.344-.548.79-.548.464 0 .748.242.748.662v.287l-1.058.06c-.976.061-1.524.488-1.524 1.199 0 .721.564 1.209 1.338 1.209zm6.305-2.642c-.065-.843-.719-1.512-1.777-1.512-1.164 0-1.92.805-1.92 2.087 0 1.3.756 2.082 1.928 2.082 1.005 0 1.697-.59 1.772-1.485h-.888c-.087.453-.397.725-.873.725-.597 0-.982-.483-.982-1.322 0-.824.381-1.323.975-1.323.502 0 .8.321.876.748h.889zm2.906-2.967c-1.591 0-2.589 1.085-2.589 2.82 0 1.735.998 2.816 2.59 2.816 1.586 0 2.584-1.081 2.584-2.816 0-1.735-.997-2.82-2.585-2.82zm0 .832c.971 0 1.591.77 1.591 1.988 0 1.213-.62 1.984-1.59 1.984-.976 0-1.592-.77-1.592-1.984 0-1.217.616-1.988 1.591-1.988zm2.982 3.178c.042 1.006.866 1.626 2.12 1.626 1.32 0 2.151-.65 2.151-1.686 0-.813-.469-1.27-1.576-1.523l-.627-.144c-.67-.158-.945-.37-.945-.733 0-.453.415-.756 1.032-.756.623 0 1.05.306 1.096.817h.93c-.023-.96-.817-1.61-2.019-1.61-1.187 0-2.03.653-2.03 1.62 0 .78.477 1.263 1.482 1.494l.707.166c.688.163.967.39.967.782 0 .454-.457.779-1.115.779-.665 0-1.167-.329-1.228-.832h-.945z",source:"https://commons.wikimedia.org/wiki/File:MacOS_wordmark_(2017).svg",hex:"000000",guidelines:void 0,license:void 0};var ii={title:"Windows",slug:"windows",get svg(){return U8+"Windows"+N8+this.path+W8},path:"M0 3.449L9.75 2.1v9.451H0m10.949-9.602L24 0v11.4H10.949M0 12.6h9.75v9.451L0 20.699M10.949 12.6H24V24l-12.9-1.801",source:"https://commons.wikimedia.org/wiki/File:Windows_10_Logo.svg",hex:"0078D6",guidelines:void 0,license:void 0};function ci(l){for(let[u,g]of Object.entries({linux:ti,macos:si,windows:ii}))(0,ai.addIcon)(new G3(u).namespaced(l),g.svg)}var h3=require("obsidian");function j8(l,u,g){let{workspace:w}=app,b=w.getLeavesOfType(f1.type.namespaced(l));(()=>{let e=b.at(-1);return J0(e)?w.getLeaf("split","horizontal"):(w.setActiveLeaf(e,{focus:!1}),w.getLeaf("tab"))})().setViewState({active:!0,state:{__type:f1.State.TYPE,cwd:g,profile:u},type:f1.type.namespaced(l)}).catch(e=>{console.error(e)})}var w5=class extends h3.FuzzySuggestModal{constructor(g,w){super(g.app);this.plugin=g;this.cwd=w}getItems(){return Object.entries(this.plugin.settings.profiles)}getItemText(g){return V0.Profile.nameOrID(g)}onChooseItem(g,w){j8(this.plugin,g[1],this.cwd)}};function ri(l){l.registerView(f1.type.namespaced(l),c=>new f1(l,c));let u=u1(["","root","current"]),g=u1(["select","integrated","external"].filter(c=>c==="select"||S3[c].available)),{app:w,language:b}=l,{i18n:e}=b,a=c=>{let v=V0.Profile.defaultOfType(c,l.settings.profiles);return v===null&&S2(()=>e.t("notices.no-default-profile",{type:e.t(`types.profiles.${c}`)}),l.settings.errorNoticeTimeout,l),v},m=w.vault.adapter instanceof h3.FileSystemAdapter?w.vault.adapter:null,o=(c,v)=>{let f=J0(v)?v:m===null?null:m.getFullPath(v.path);return f===null?null:i=>{i.setTitle(e.t("menus.open-terminal",{type:e.t(`types.profiles.${c}`)})).setIcon(e.t(`asset:types.profiles.${c}-icon`)).onClick(()=>{if(c==="select"){new w5(l,f).open();return}let t=a(c);t!==null&&j8(l,t,f)})}},n=(c,v)=>f=>{let i=(()=>{if(v!==""){if(m===null)return null;switch(v){case"root":return m.getBasePath();case"current":{let t=w.workspace.getActiveFile();return t===null?null:m.getFullPath(t.parent.path)}}}})();if(i===null)return!1;if(!f){if(c==="select")return new w5(l,i).open(),!0;let t=a(c);t!==null&&j8(l,t,i)}return!0};l.addRibbonIcon(e.t("asset:ribbons.open-terminal"),e.t("ribbons.open-terminal"),()=>{new w5(l).open()}).remove(),l.registerEvent(w.workspace.on("file-menu",(c,v)=>{if(!l.settings.addToContextMenu)return;let f=v instanceof h3.TFolder?v:v.parent;c.addSeparator();let i=g.map(t=>o(t,f)).filter(W6);i.length>0&&(c.addSeparator(),i.forEach(t=>c.addItem(t)))})),l.registerEvent(w.workspace.on("editor-menu",(c,v,f)=>{if(!l.settings.addToContextMenu||f instanceof h3.MarkdownView||f.file===null)return;let i=f.file.parent;c.addSeparator();let t=g.map(p=>o(p,i)).filter(W6);t.length>0&&(c.addSeparator(),t.forEach(p=>c.addItem(p)))}));for(let c of u)for(let v of g){let f=`open-terminal-${c}.${v}`,i=()=>e.t(`commands.open-terminal-${c}`,{type:e.t(`types.profiles.${v}`)});l.addCommand({checkCallback:t=>l.settings.addToCommand?n(v,c)(t):!1,id:f,get name(){return i()},set name(t){i=ae(()=>e.t(`commands.open-terminal-${c}`,{type:e.t(`types.profiles.${v}`)}),()=>e.t("name"),e.t("name",{lng:z3}),t)}})}}var _4,_5,L6=class extends A6.Plugin{constructor(g,w){let b=_e();f1.namespacedViewType=f1.type.namespaced(w);super(g,w);G0(this,"language",new r6(this));G0(this,"statusBarHider",new g6(this));G0(this,"saveSettings",T5((0,A6.debounce)((g,w)=>{(async()=>{await this.saveData(this.settings)})().then(g,w)},500,!1)));z0(this,_4,c1);z0(this,_5,new K2);this.register(b)}get settings(){return o0(this,_4)}async mutateSettings(g){await o0(this,_5).emit(S0(this,_4,await se(o0(this,_4),g)))}async loadSettings(g){Object.assign(g,V0.fix(await this.loadData()))}on(g,w,b){let e=w(this.settings);return o0(this,_5).listen(async a=>{let m=w(a),o=e;o!==m&&(e=m,await b(m,o,a))})}onload(){super.onload(),(async()=>{try{let g=Promise.all([this.mutateSettings(async w=>this.loadSettings(w)),this.language.load()]);ci(this),await g,this.addSettingTab(new v6(this)),this.statusBarHider.load(),ri(this)}catch(g){console.error(g)}})()}};_4=new WeakMap,_5=new WeakMap;var vd=L6;
/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD.
If you want to view the source, please visit the repository of this plugin.
*/
